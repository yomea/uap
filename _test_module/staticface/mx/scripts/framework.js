(function(a){a.fn.tag=function(){if($notEmpty(this.get(0))){var a=this.get(0).tagName;if($notEmpty(a))return a.toLowerCase()}return null};a.fn.setEnabled=function(a){typeof a=="undefined"&&(a=!0);typeof a=="boolean"&&this.attr("disabled",!a)};a.fn.enabled=a.fn.setEnabled;a.fn.contextmenu=function(a){if($isFunction(a))return this.bind("contextmenu",a);else a==null&&this.trigger("contextmenu")};a.fn.mouserepeat=function(d){$isFunction(d)&&this.bind("mousedown",function(b){var c={target:this,type:"mouserepeat",
e:b};d(c);var e=window.setInterval(function(){d(c)},250);a(this).one("mouseleave",function(){e!=null&&(window.clearInterval(e),e=null)});a(document).one("mouseup",function(){e!=null&&(window.clearInterval(e),e=null)})})};a.fn.centralize=function(a,b){if(this.parent().length!=0){arguments.length==1&&(b=!1);if(arguments.length==0||arguments.length>=2)a==null&&(a=!0),b==null&&(b=!0);(a||b)&&this.css("position","absolute");if(a){var c=(this.parent().width()-this.width())/2;c<0&&(c=0);this.css("left",
c)}b&&(c=(this.parent().height()-this.height())/2,c<0&&(c=0),this.css("top",c))}};a.fn.absolutePosition=function(){for(var d={top:0,left:0},b=this.get(0),c=this.get(0);b!=null;)a.browser.mozilla?(b.offsetTop>0&&(d.top+=b.offsetTop),b.offsetLeft>0&&(d.left+=b.offsetLeft)):(d.top+=b.offsetTop,d.left+=b.offsetLeft),b=b.offsetParent;for(;c!=null;){if(!isNaN(c.scrollTop)&&(d.top-=c.scrollTop,d.left-=c.scrollLeft,!a.browser.msie)){var b=a(c),e=parseInt(b.css("border-left-width"));isNaN(e)||(d.left+=e);
b=parseInt(b.css("border-top-width"));isNaN(b)||(d.top+=b)}c=c.parentNode}return d};a.fn.scrollIntoView=function(){a(this).each(function(d){a(this).get(d).scrollIntoView()})};a.fn.popup=function(d,b){var c={left:0,top:0,offsetWidth:null,offsetHeight:null,animation:"fadeIn",speed:0},e=a(document).scrollTop()+a(window).height(),f=a(document).scrollLeft()+a(window).width();d!=null&&a.extend(c,d);var g=this.get(0);g.style.position="absolute";g.style.zIndex=99999999;g.style.display="none";document.body.appendChild(g);
if(c.left+this.width()>f)c.offsetWidth==null?c.left=f-this.width():c.left-=this.width()-c.offsetWidth;if(c.top+this.outerHeight()>e)c.offsetHeight==null?this.outerHeight()>e?(c.top=0,c.height=e):(c.top-=this.outerHeight(),c.top=c.top<0?0:c.top):c.top-=c.offsetHeight+this.outerHeight();this.css(c);this.animationShow(c,b);return this};a.fn.animationShow=function(d,b){var c={animation:"fadeIn",speed:0};d!=null&&a.extend(c,d);switch(c.animation.toLowerCase()){case "none":this.show();$isFunction(b)&&b();
break;case "show":this.show(c.speed,b);break;case "slidedown":this.slideDown(c.speed,b);break;default:this.fadeIn(c.speed,b)}return this};a.fn.animationHide=function(d,b){var c={animation:"fadeOut",speed:0};d!=null&&a.extend(c,d);switch(c.animation.toLowerCase()){case "none":this.hide();$isFunction(b)&&b();break;case "hide":this.hide(c.speed,b);break;case "slideup":this.slideUp(c.speed,b);break;default:this.fadeOut(c.speed,b)}return this};a.fn.dropDown=function(d,b,c){var e={animation:"slideDown",
speed:0};b!=null&&a.extend(e,b);b=this.offset();e.left=b.left;e.top=b.top+this.outerHeight();e.offsetWidth=this.outerWidth();e.offsetHeight=this.outerHeight();d.popup(e,c);return this};a.fn.movable=function(d){var b=a(this),c=null,c=d==null?this:b.find(d);c.css("cursor","default");c.userSelectable(!1);c.on("mousedown",function(d){var c={x:d.clientX,y:d.clientY},g={x:parseInt(b.css("left")),y:parseInt(b.css("top"))},h=a(document.body).userSelectable();a(document.body).userSelectable(!1);var i=function(a){b.css("left",
g.x+(a.clientX-c.x));b.css("top",g.y+(a.clientY-c.y))};a(document.body).on("mousemove",i);a(document.body).one("mouseup",function(){a(document.body).userSelectable(h);a(document.body).off("mousemove",i)})})};a.fn.expandable=function(d,b){var c=null,e=null,f=null;if(this.tag()!="dl")f=this.wrapAll("<dd/>").parent(),c=f.wrapAll("<dl/>").parent(),e=c.prepend("<dt/>").children("dt");else{c=this;if(c.children("dd").length!=0)f=c.children("dd");else return;if(c.children("dt").length!=0)e=c.children("dt");
else return}var g={expanded:!0,className:"expandable",speed:"fast"};arguments.length==1&&typeof d=="string"?e.text(d):arguments.length==1&&typeof d=="object"?a.extend(g,d):arguments.length==2&&(e.text(d),a.extend(g,b));e.userSelectable(!1);c.addClass(g.className);g.expanded?(c.addClass("expanded"),f.show()):(c.removeClass("expanded"),f.hide());e.click(function(b){var d=a(b.target).parent(),b=d.children("dd");d.tag()=="dl"&&(d.hasClass("expanded")?b.slideUp(g.speed,function(){d.removeClass("expanded")}):
b.slideDown(g.speed,function(){d.addClass("expanded")}))});return c};a.fn.setBusy=function(d){if($isBoolean(d)?d:1){d=a("<div class='busying mx'/>");d.append("<span/>");this.height();this.width();var b=this.find("div"),c=99999;if($notEmpty(b))for(var e=0;e<b.length;e++){var f=a(b[e]).css("zIndex");f>c&&(c=f)}d.css("zIndex",c+1);this.append(d)}else d=this.children("div.busying"),$notEmpty(d)&&d.remove()};a.fn.resizable=function(d,b){var c=this.eq(0);c.removeClass("resizable");c.children("#resizableRight").remove();
c.children("#resizableBottom").remove();c.children("#resizableSizeGrip").remove();if(d){var e={min:{width:0,height:0},max:{width:a(document).width(),height:a(document).height()},resizeHorizon:!0,resizeVertical:!0,sizeGrip:{width:8,height:8},onResize:function(){},onStop:function(){}};a.extend(e,b);var f=c.get(0).style.position;if(f!="absolute"&&f!="relative")c.get(0).style.position="relative";c.addClass("resizable");var g={resize:function(a){var b=a.data.resizeData,d=Math.min(Math.max(a.clientX-b.offLeft+
b.width,b.min.width),e.max.width),f=Math.min(Math.max(a.clientY-b.offTop+b.height,b.min.height),e.max.height);b.resizeX&&b.resizeHorizon&&c.width(d);b.resizeY&&b.resizeVertical&&c.height(f);b.onResize(a)},stop:function(b){b.data.resizeData.onStop(b);a(document.body).userSelectable(!0);c.userSelectable(!0);c.find("div#__tempMark").remove();a(document).unbind("mousemove",g.resize)},mousedown:function(b){var d={width:c.width(),height:c.height(),offLeft:b.clientX,offTop:b.clientY,min:e.min,max:e.max,
resizeHorizon:e.resizeHorizon,resizeVertical:e.resizeVertical,onResize:e.onResize,onStop:e.onStop,resizeX:b.data.resizeX,resizeY:b.data.resizeY};b.stopPropagation();a(document.body).userSelectable(!1);c.userSelectable(!1);b=a("<div id='__tempMark' style='width:100%;height:100%;position:absolute;top:0;left:0;'/>");c.append(b);a(document).bind("mousemove",{resizeData:d},g.resize);a(document).one("mouseup",{resizeData:d},g.stop)}},h=f=null,i=null;e.resizeHorizon&&(f=a.browser.msie?a("<div id='resizableRight' style='position:absolute; bottom:0; top:0; right:0; width:2px; z-index:9999; background-color:transparent; filter:alpha(opacity=0); cursor:e-resize;'/>"):
a("<div id='resizableRight' style='position:absolute; bottom:0; top:0; right:0; width:2px; z-index:9999; cursor:e-resize;'/>"),c.append(f),f.bind("mousedown",{resizeX:!0,resizeY:!1},g.mousedown));e.resizeVertical&&(h=a.browser.msie?a("<div id='resizableBottom' style='position:absolute; bottom:0; left:0; right:0; height:2px; z-index:9999; background-color:transparent; filter:alpha(opacity=0); cursor:n-resize;'/>"):a("<div id='resizableBottom' style='position:absolute; bottom:0; left:0; right:0; height:2px; z-index:9999; cursor:n-resize;'/>"),
c.append(h),h.bind("mousedown",{resizeX:!1,resizeY:!0},g.mousedown));if(e.resizeHorizon||e.resizeVertical)i=a("<div id='resizableSizeGrip' style='position:absolute; bottom:0; right:0; z-index:9999; cursor:nw-resize;'/>"),i.width(e.sizeGrip.width+3),i.height(e.sizeGrip.height+3),c.append(i),f!=null&&f.css("bottom",e.sizeGrip.height+1+"px"),h!=null&&h.css("right",e.sizeGrip.width+1+"px"),i.bind("mousedown",{resizeX:!0,resizeY:!0},g.mousedown);return this}};a.fn.opacity=function(d){var b=0.5;d!=null&&
(b=d);a.browser.msie&&parseInt(a.browser.version)<=8?this.css("filter","progid:DXImageTransform.Microsoft.BasicImage(opacity="+b+")"):(this.css("opacity",b),this.css("webkitOpacity",b),this.css("MozOpacity",b));return this};a.fn.gradient=function(d){var b={startColor:"",endColor:"",direction:"vertical"};d&&a.extend(b,d);a.browser.msie?this.css("filter","progid:DXImageTransform.Microsoft.Gradient(Enabled=true,startColorStr="+b.startColor+",endColorStr="+b.endColor+",gradientType="+(b.direction=="vertical"?
0:1)+")"):a.browser.mozilla?b.direction=="vertical"?this.css("background","-moz-linear-gradient(-90deg, "+b.startColor+", "+b.endColor+")"):b.direction=="horizontal"&&this.css("background","-moz-linear-gradient(0, "+b.startColor+", "+b.endColor+")"):a.browser.safari&&(b.direction=="vertical"?this.css("background","-webkit-gradient(linear,0% 0%, 0% 100%, from("+b.startColor+"), to("+b.endColor+"))"):b.direction=="horizontal"&&this.css("background","-webkit-gradient(linear,0% 0%, 100% 0%, from("+b.startColor+
"), to("+b.endColor+"))"));return this};a.fn.borderRadius=function(d){if(a.browser.msie&&parseInt(a.browser.version)<=8)return this;this.css("webkitBackgroundClip","padding-box");var b={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};if(d!=null)if(typeof d=="object")a.extend(b,d);else if(typeof d=="number")b.topLeft=d,b.bottomLeft=d,b.topRight=d,b.bottomRight=d;else if(typeof d=="string")return this.css("MozBorderRadius",d),this.css("borderRadius",d),this.css("webkitBorderRadius",d),this;d=b.topLeft+
"px "+b.topRight+"px "+b.bottomRight+"px "+b.bottomLeft+"px";this.css("borderRadius",d);this.css("MozBorderRadius",d);this.css("webkitBorderRadius",d);return this};a.fn.boxShadow=function(d){var b={style:"",left:0,top:0,size:0,color:"rgba(0,0,0,0.5)"};d&&a.extend(b,d);a.browser.msie&&parseInt(a.browser.version)<=8||(d=b.style+" "+b.left+"px "+b.top+"px "+b.size+"px "+b.color,this.css("boxShadow",d),this.css("webkitBoxShadow",d),this.css("MozBoxShadow",d));return this};a.fn.boxSizing=function(a){this.css("boxSizing",
a);return this};a.fn.textShadow=function(d){if(a.browser.msie&&parseInt(a.browser.version)<=8)return this;var b={left:0,top:0,color:"black"};d&&a.extend(b,d);this.css("textShadow",b.left+"px "+b.top+"px "+b.color);return this};a.fn.userSelectable=function(d){d==null&&(_selectable=!0);d?a.browser.mozilla?this.css("MozUserSelect",""):(this.unbind("selectstart"),this.css("-webkit-user-select","")):a.browser.mozilla?this.css("MozUserSelect","-moz-none"):(this.bind("selectstart",function(a){if(a.target.tagName!=
"TEXTAREA"&&a.target.tagName!="INPUT")return!1}),this.css("-webkit-user-select","none"));return this};a.fn.rotate=function(a,b){var c=this.get(0);c.angle=b?a:((c.angle==void 0?0:c.angle)+a)%360;var e=0,e=c.angle>=0?Math.PI*c.angle/180:Math.PI*(360+c.angle)/180,f=Math.round(Math.cos(e)*1E3)/1E3,g=Math.round(Math.sin(e)*1E3)/1E3;if(document.all&&!window.opera){var h=document.createElement("img");h.src=c.src;h.height=c.height;h.width=c.width;h.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+
f+",M12="+-g+",M21="+g+",M22="+f+",SizingMethod='auto expand')"}else{h=document.createElement("canvas");c.oImage?h.oImage=c.oImage:(h.oImage=new Image,h.oImage.src=c.src);h.style.width=h.width=Math.abs(f*h.oImage.width)+Math.abs(g*h.oImage.height);h.style.height=h.height=Math.abs(f*h.oImage.height)+Math.abs(g*h.oImage.width);var i=h.getContext("2d");i.save();e<=Math.PI/2?i.translate(g*h.oImage.height,0):e<=Math.PI?i.translate(h.width,-f*h.oImage.height):e<=1.5*Math.PI?i.translate(-f*h.oImage.width,
h.height):i.translate(0,-g*h.oImage.width);i.rotate(e);i.drawImage(h.oImage,0,0,h.oImage.width,h.oImage.height);i.restore()}h.id=c.id;h.angle=c.angle;c.canvas!=void 0?c.canvas.parentNode.replaceChild(h,c.canvas):c.parentNode.replaceChild(h,c);c.canvas=h};a.fn.rotateTo=function(a){var b=this.get(0);b.angle=a;var a=0,a=b.angle>=0?Math.PI*b.angle/180:Math.PI*(360+b.angle)/180,c=Math.round(Math.cos(a)*1E3)/1E3,e=Math.round(Math.sin(a)*1E3)/1E3;if(document.all&&!window.opera){var f=document.createElement("img");
f.src=b.src;f.height=b.height;f.width=b.width;f.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+c+",M12="+-e+",M21="+e+",M22="+c+",SizingMethod='auto expand')"}else{f=document.createElement("canvas");b.oImage?f.oImage=b.oImage:(f.oImage=new Image,f.oImage.src=b.src);f.style.width=f.width=Math.abs(c*f.oImage.width)+Math.abs(e*f.oImage.height);f.style.height=f.height=Math.abs(c*f.oImage.height)+Math.abs(e*f.oImage.width);var g=f.getContext("2d");g.save();a<=Math.PI/2?g.translate(e*f.oImage.height,
0):a<=Math.PI?g.translate(f.width,-c*f.oImage.height):a<=1.5*Math.PI?g.translate(-c*f.oImage.width,f.height):g.translate(0,-e*f.oImage.width);g.rotate(a);g.drawImage(f.oImage,0,0,f.oImage.width,f.oImage.height);g.restore()}f.id=b.id;f.angle=b.angle;b.canvas!=void 0?b.canvas.parentNode.replaceChild(f,b.canvas):b.parentNode.replaceChild(f,b);b.canvas=f};a.fn.rotateRight=function(a){this.rotate(a==void 0?90:a)};a.fn.rotateLeft=function(a){this.rotate(a==void 0?-90:-a)}})(jQuery);
(function(a){var d=a({});a.ajaxQueue=function(b){function c(c){e=a.ajax(b).done(f.resolve).fail(f.reject).then(c,c)}var e,f=a.Deferred(),g=f.promise();d.queue(c);g.abort=function(h){if(e)return e.abort(h);var i=d.queue(),l=a.inArray(c,i);l>-1&&i.splice(l,1);f.rejectWith(b.context||b,[g,h,""]);return g};return g}})(jQuery);
(function(){jQuery.each({getSelection:function(){var a=this.jquery?this[0]:this;return("selectionStart"in a&&function(){var d=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:d,text:a.value.substr(a.selectionStart,d)}}||document.selection&&function(){a.focus();var d=document.selection.createRange();if(d==null)return{start:0,end:a.value.length,length:0};var b=a.createTextRange(),c=b.duplicate();b.moveToBookmark(d.getBookmark());c.setEndPoint("EndToStart",b);return{start:c.text.length,
end:c.text.length+d.text.length,length:d.text.length,text:d.text}}||function(){return{start:0,end:a.value.length,length:0}})()},replaceSelection:function(a){var d=this.jquery?this[0]:this,b=a||"";return("selectionStart"in d&&function(){d.value=d.value.substr(0,d.selectionStart)+b+d.value.substr(d.selectionEnd,d.value.length);return this}||document.selection&&function(){d.focus();document.selection.createRange().text=b;return this}||function(){d.value+=b;return this})()}},function(a){jQuery.fn[a]=
this})})();
$.fn.selection=function(a,d){if(a!==void 0)return this.each(function(){if(this.createTextRange){var b=this.createTextRange();d===void 0||a==d?b.move("character",a):(b.collapse(!0),b.moveStart("character",a),b.moveEnd("character",d));b.select()}else if(this.setSelectionRange)this.setSelectionRange(a,d);else if(this.selectionStart)this.selectionStart=a,this.selectionEnd=d});var b=this[0];if(b.createTextRange){var c=document.selection.createRange(),e=b.value,f=c.text.length;c.text="<->";c=b.value.indexOf("<->");
b.value=e;this.selection(c,c+f);return{start:c,end:c+f}}else if(b.selectionStart!==void 0)return{start:b.selectionStart,end:b.selectionEnd}};
jQuery.extend({getSync:function(a,d,b){jQuery.isFunction(d)&&(b=b||callback,callback=d,d=null);var c=null;jQuery.ajax({async:!1,type:"GET",url:a,data:d,dataType:b,success:function(a){c=a}});return c},getJSONSync:function(a,d){return jQuery.getSync(a,d,"json")},postSync:function(a,d,b){jQuery.isFunction(d)&&(b=b||callback,callback=d,d={});var c=null;jQuery.ajax({async:!1,type:"POST",url:a,data:d,dataType:b,success:function(a){c=a}});return c}});
(function(a){a.fn.toolTip=function(d){if(typeof d=="string"){var b=arguments,c=d;Array.prototype.shift.call(b);return this.each(function(){var d=a(this).data("toolTip");d&&d[c]&&d[c].apply(d,b)})}var e=a.extend({activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,disabled:!1,attribute:"title",content:!1,enter:function(){},exit:function(){}},d);a.toolTip=function(b,c){this.opts=c;this.org_elem=a(b);this.org_elem.data("toolTip",this);
a("#toolTip_holder").length<=0?(this.toolTip_holder=a('<div id="toolTip_holder" class="mx" style="max-width:'+e.maxWidth+';"></div>'),this.toolTip_content=a('<div id="toolTip_content"></div>'),this.toolTip_arrow=a('<div id="toolTip_arrow"></div>'),a("body").append(this.toolTip_holder.html(this.toolTip_content).prepend(this.toolTip_arrow.html('<div id="toolTip_arrow_inner"></div>')))):(this.toolTip_holder=a("#toolTip_holder"),this.toolTip_content=a("#toolTip_content"),this.toolTip_arrow=a("#toolTip_arrow"));
this.toolTip_holder.data("toolTip",this);this.org_title=this.opts.content?this.opts.content:this.org_elem.attr(this.opts.attribute);this.timeout=!1;this.init()};a.toolTip.prototype={init:function(){this.org_title!=""&&(this.opts.content||this.org_elem.removeAttr(this.opts.attribute),this.opts.activation=="hover"?(this.org_elem.bind("mouseover.toolTip",function(){a(this).data("toolTip").show()}),this.org_elem.bind("mouseout.toolTip",function(){a(this).data("toolTip").opts.keepAlive||a(this).data("toolTip").hide()})):
this.opts.activation=="focus"?(this.org_elem.bind("focus.toolTip",function(){a(this).data("toolTip").show()}),this.org_elem.bind("blur.toolTip",function(){a(this).data("toolTip").hide()})):this.opts.activation=="click"&&(this.org_elem.bind("click.toolTip",function(){a(this).data("toolTip").show();return!1}),this.org_elem.bind("mouseout.toolTip",function(){a(this).data("toolTip").opts.keepAlive||a(this).data("toolTip").hide()}),this.opts.keepAlive&&this.toolTip_holder.bind("mouseout.toolTip",function(){a(this).data("toolTip").hide()})))},
show:function(){if(this.opts.disabled)return!0;this.opts.enter.call(this.org_elem);this.toolTip_content.html(function(a){if(!a)return"";a+="";var b="",b=a.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/ /g,"&nbsp;"),b=b.replace(/\'/g,"'"),b=b.replace(/\"/g,"&quot;");return b=b.replace(/\n/g,"<br/>")}(this.org_title));this.toolTip_holder.hide().removeAttr("class").css("margin","0");this.toolTip_arrow.removeAttr("style");var b=parseInt(this.org_elem.offset().top),c=parseInt(this.org_elem.offset().left),
d=parseInt(this.org_elem.outerWidth()),i=parseInt(this.org_elem.outerHeight()),l=this.toolTip_holder.outerWidth(),n=this.toolTip_holder.outerHeight(),o=Math.round((d-l)/2),m=Math.round((i-n)/2),k=Math.round(c+o),p=Math.round(b+i+this.opts.edgeOffset),j="",q="",r=Math.round(l-12)/2;e.defaultPosition=="bottom"?j="_bottom":this.opts.defaultPosition=="top"?j="_top":this.opts.defaultPosition=="left"?j="_left":this.opts.defaultPosition=="right"&&(j="_right");var s=o+c<parseInt(a(window).scrollLeft()),t=
l+c>parseInt(a(window).width());if(s&&o<0||j=="_right"&&!t||j=="_left"&&c<l+this.opts.edgeOffset+5)j="_right",q=Math.round(n-13)/2,r=-12,k=Math.round(c+d+this.opts.edgeOffset),p=Math.round(b+m);else if(t&&o<0||j=="_left"&&!s)j="_left",q=Math.round(n-13)/2,r=Math.round(l),k=Math.round(c-(l+this.opts.edgeOffset+5)),p=Math.round(b+m);c=b+i+this.opts.edgeOffset+n+8>parseInt(a(window).height()+a(window).scrollTop());d=b+i-(this.opts.edgeOffset+n+8)<0;if(c||j=="_bottom"&&c||j=="_top"&&!d)j=="_top"||j==
"_bottom"?j="_top":j+="_top",q=n,p=Math.round(b-(n+5+this.opts.edgeOffset));else if(d|(j=="_top"&&d)||j=="_bottom"&&!c)j=="_top"||j=="_bottom"?j="_bottom":j+="_bottom",q=-12,p=Math.round(b+i+this.opts.edgeOffset);if(j=="_right_top"||j=="_left_top")p+=5;else if(j=="_right_bottom"||j=="_left_bottom")p-=5;if(j=="_left_top"||j=="_left_bottom")k+=5;this.toolTip_arrow.css({"margin-left":r+"px","margin-top":q+"px"});this.toolTip_holder.css({"margin-left":k+"px","margin-top":p+"px"}).attr("class","tip"+j).addClass("mx");
this.toolTip_holder.stop(!0,!0).fadeIn(this.opts.fadeIn)},display:function(){this.toolTip_holder.stop(!0,!0).fadeIn(this.opts.fadeIn)},hide:function(){if(this.opts.disabled)return!0;this.toolTip_holder.fadeOut(e.fadeOut);this.opts.exit.call(this.org_elem)},disable:function(){this.opts.disabled=!0},enable:function(){this.opts.disabled=!1},update:function(a){if(this.opts.disabled)return!0;if(a)this.org_title=this.opts.content=a,this.show()},destroy:function(){this.toolTip_holder.remove();delete this.toolTip_holder;
this.opts=this.timeout=this.org_title=null;this.org_elem.removeData("toolTip");this.org_elem.unbind(".toolTip")},remove:function(){this.org_elem.removeData("toolTip");this.org_elem.unbind(".toolTip")}};return this.each(function(){new a.toolTip(this,e)})}})(jQuery);
(function(a,d,b){function c(){g=d[h](function(){e.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,l);if(c!==e.w||d!==e.h)b.trigger(i,[e.w=c,e.h=d])});c()},f[n])}var e=a([]),f=a.resize=a.extend(a.resize,{}),g,h="setTimeout",i="resize",l=i+"-special-event",n="delay";f[n]=250;f.throttleWindow=!0;a.event.special[i]={setup:function(){if(!f.throttleWindow&&this[h])return!1;var b=a(this);e=e.add(b);a.data(this,l,{w:b.width(),h:b.height()});e.length===1&&c()},teardown:function(){if(!f.throttleWindow&&
this[h])return!1;var b=a(this);e=e.not(b);b.removeData(l);e.length||clearTimeout(g)},add:function(c){function d(c,f,h){var g=a(this),i=a.data(this,l);i.w=f!==b?f:g.width();i.h=h!==b?h:g.height();e.apply(this,arguments)}if(!f.throttleWindow&&this[h])return!1;var e;if(a.isFunction(c))return e=c,d;else e=c.handler,c.handler=d}}})(jQuery,this);
(function(a){a.isIE67=function(){return a.browser.msie&&(a.browser.version=="6.0"||a.browser.version=="7.0")?!0:!1};a.isIE6=function(){return a.browser.msie&&a.browser.version=="6.0"?!0:!1}})(jQuery);
(function(a){function d(c){function d(){o=window.setInterval(h,100)}function g(){window.clearInterval(o)}function h(){var a=parseInt(m.css("top")),c=parseInt(k.css("bottom")),d=m.parent(),e=d.scrollTop(),f=b.step;e>0&&(m.css("top",a-f),k.css("bottom",c+f),d.scrollTop(e-f))}function i(){o=window.setInterval(n,100)}function l(){window.clearInterval(o)}function n(){var a=parseInt(k.css("bottom")),c=parseInt(m.css("top")),d=k.parent(),e=d.scrollTop(),f=d.outerHeight(),h=d.prop("scrollHeight"),g=b.step;
e+f<h&&(k.css("bottom",a-g),m.css("top",c+g),d.scrollTop(e+g))}var o=null,m=a("<div class='upbutton'/>").css({position:"absolute",width:"100%",height:10,top:0,zIndex:9999,display:"none",backgroundImage:"url("+mx.mappath("$theme/images/dockpage_top_hidebutton.png")+")",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"top"}),k=a("<div class='downbutton'/>").css({position:"absolute",width:"100%",zIndex:9999,height:10,bottom:0,display:"none",backgroundImage:"url("+mx.mappath("$theme/images/dockpage_top_showbutton.png")+
")",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"bottom"});c.css({overflow:"hidden"});c.mouseenter(function(){var a=m.parent(),b=a.prop("scrollHeight"),c=a.outerHeight(),a=a.scrollTop();m.css("top",a);k.css("bottom",-a);b>c&&(m.show(),k.show());m.mousedown(d);m.mouseup(g);k.mouseup(l);k.mousedown(i)});c.mouseleave(function(){window.clearInterval(o);m.off("mousedown",d);m.off("mouseup",g);k.off("mouseup",l);k.off("mousedown",i);m.hide();k.hide()});c.append(m);c.append(k)}
var b={step:20},c={upButton:function(){return a(this).find("div.upbutton")},downButton:function(){return a(this).find("div.downbutton")},init:function(){return this.each(function(){d(a(this))})}};a.fn.menuSilde=function(d){var f;a.isPlainObject(d)||!d?(a.extend(b,d),f=c.init):$isString(d)&&c[d]&&(f=c[d]);if(f)return f.call(this)}})(jQuery);$global=window;function $namespace(g){var f=g.split(".");if(f.length==0)return null;var h=f[0];try{eval("("+h+")")}catch(a){throw Error(mx.err("WEBLET_UNDEFINED",[h]));}for(var h=f[0],i=1;i<f.length;i++)h+="."+f[i],eval(h)||eval(h+" = {};");return eval(g)}$ns=$namespace;function $extend(g){if(typeof g=="function"){var f=new g;f.__class__=$extend.caller;g!=MXObject&&g!=MXComponent&&f.__superClasses__.push(g);return f}}
function $getClass(g){if(g==null)return null;switch(typeof g){case "boolean":return Boolean;case "number":return Number;case "string":return String;case "function":return Function;case "object":return typeof g.getClass=="function"?g.getClass():$isDate(g)?Date:$isArray(g)?Array:Object}}
function $instanceOf(g,f){if(g==null)return!1;switch(typeof g){case "boolean":return f==Boolean;case "number":return f==Number;case "string":return f==String;case "function":return f==Function;case "object":return typeof g.instanceOf=="function"?g.instanceOf(f):$isDate(g)?f==Date:$isArray(g)?f==Array:!1}}function $isIE(){return window.navigator.userAgent.toLowerCase().indexOf("msie")!=-1}
function $clearIframeLeak(g){g.onload=null;g.src="about:blank";var f=null;try{f=g.contentWindow}catch(h){f=null}if(f)try{f.document.write(""),$isFunction(f.document.clear)&&f.document.clear()}catch(a){}try{g.src=""}catch(i){}$isIE()&&(top.CollectGarbage(),setTimeout("CollectGarbage();",100))}
MX=function(){function g(a,d){for(var c=0;c<a.length;c++)if(a[c]==d){a.splice(c,1);a[d]=null;delete a[d];break}}function f(a,d){return a.substring(a.length-d.length)==d}function h(b){var d=a.rootPath,c=b.split("/"),e=null,g=null;c.length>1&&(e=c[1],e!="mx"&&(c=null,typeof mx.weblets!="undefined"&&typeof mx.weblets.WebletManager!="undefined"&&(g=mx.weblets.WebletManager.bundles[e],g!=null&&(c=g)),g=c),b.indexOf("~/")==0&&e!="mx"&&(d+=g==null?"":"/"+g));return f(d,"/")?d:d+"/"}var a=this;a.bundleName=
"mx";a.locale="zh_CN";a.theme="aero";a.themePath="~/mx/resources/themes";a.debugMode=!1;a.compressMode=!1;a.globalUploadMode=null;a.errorType="normal";a.enableWebletI18n=!0;a.rootPath=null;a.relativePath=null;var i=!0;a.init=function(){var b=document.getElementsByTagName("script"),b=b[b.length-1].src;if(f(b,"/mx/scripts/framework-debug.js"))a.rootPath=b.substr(0,b.length-30);else if(f(b,"/mx/scripts/framework.js"))a.rootPath=b.substr(0,b.length-24);if(typeof $MX_DEBUGMODE!="undefined")a.debugMode=
$MX_DEBUGMODE;if(typeof $MX_COMPRESSMODE!="undefined")a.compressMode=$MX_COMPRESSMODE;if(a.compressMode==!0)a.rootPath=b.substr(0,b.length-24);if(typeof $SERVER_PATH!="undefined")a.relativePath=f($SERVER_PATH,"/")?$SERVER_PATH.substring(0,$SERVER_PATH.length-1):$SERVER_PATH;if(typeof $MX_LOCALE!="undefined")a.locale=$MX_LOCALE;if(typeof $MX_ERRORTYPE!="undefined")a.errorType=$MX_ERRORTYPE;if(typeof $MX_THEME!="undefined")a.theme=$MX_THEME;if(typeof $MX_THEMEPATH!="undefined")a.themePath=$MX_THEMEPATH;
if(typeof $MX_UPLOADMODE!="undefined")a.globalUploadMode=$MX_UPLOADMODE;if(typeof $MX_ENABLE_WEBLET_I18N!="undefined")a.enableWebletI18n=$MX_ENABLE_WEBLET_I18N;typeof $MX_USERP!="undefined"&&(i=$MX_USERP);if(i==!0&&a.relativePath!=null)a.rootPath=a.relativePath;a.importMessages("mx");a.include("$/css/zero.css");a.include("$/fonts/pictos.css");a.debugMode&&!a.compressMode?(a.importClass("mx.types.Array"),a.importClass("mx.types.Boolean"),a.importClass("mx.types.Date"),a.importClass("mx.types.Function"),
a.importClass("mx.types.HashMap"),a.importClass("mx.types.Number"),a.importClass("mx.types.Object"),a.importClass("mx.types.String"),a.importClass("mx.MXComponent"),a.importClass("mx.MXObject"),a.importClass("mx.MXEvent"),a.importClass("mx.utils.JsonUtil"),a.importClass("mx.utils.SymbolUtil"),a.importClass("mx.utils.CheckUtil"),a.importClass("mx.lib.jquery-mx"),a.importClass("mx.controls.Control"),a.importClass("mx.controls.ErrorBox"),a.importClass("mx.editors.Editor"),a.importClass("mx.containers.Container"),
a.importClass("mx.views.View"),a.importClass("mx.views.ViewController"),a.importClass("mx.windows.Window"),a.importClass("mx.windows.WindowManager"),a.importClass("mx.weblets.WebletContainer"),a.importClass("mx.permissions.PermissionAgentClass"),a.importClass("mx.bizlogic.BizModelAgentClass"),a.include("$theme/theme.css")):(a.include("$theme/min.css"));$.ajaxSetup({global:!0,complete:function(a){var b=a.getResponseHeader("sessionstate"),a=a.getResponseHeader("redirecturl");if(b!=
null&&b=="timeout")mx.indicate("info",mx.msg("SESSION_TIMEOUT")),a!=null?top.window.location.href=a:top.window.location.reload()}});return a};a.log=function(a){typeof console!="undefined"&&typeof console.log!="undefined"&&console.log("[MX] "+a)};a.warn=function(a){typeof console!="undefined"&&typeof console.warn!="undefined"&&console.warn("[MX] "+a)};a.error=function(a){typeof console!="undefined"&&typeof console.error!="undefined"&&console.error("[MX] "+a)};__$indication=null;a.indicate=function(a,
d,c){var e=$(document.body);if(c!=null&&c.$container!=null)e=c.$container;e!=null&&(__$indication==null&&(__$indication=$("<div id='indication' class='mx'><div id='icon'/><pre id='text'/></div>"),__$indication.css("minWidth",140),__$indication.css("maxWidth","90%"),__$indication.hide(),__$indication.borderRadius(12)),e.append(__$indication),c=__$indication.children("#icon"),e=["info","warn","error","user","busy"],$notEmpty(a)&&e.contains(a)?(c.empty(),c.removeClass(),c.removeAttr("style"),c.addClass(a)):
(a=mx.utils.SymbolUtil.getSymbol(a),a!=null?(c.show(),c.css("fontFamily",a.font),c.text(a.text)):c.hide()),__$indication.children("#text").html(d),__$indication.css("left",0),__$indication.css("top",0),__$indication.centralize(),__$indication.stop(!0,!0),__$indication.show().delay(2E3).fadeOut(1200))};var j=null;a.showerror=function(b,d){$isString(b)&&(b=Error(b));var c=null;if(b==null)c=mx.err("GENERAL",["Unknown"]);else{if(b.error!=null&&b.error.message!=null)b=b.error;c=b.message}if(a.errorType&&
a.errorType.toLowerCase()=="console")a.error(c);else{j==null&&(j=new mx.controls.ErrorBox);var e=null;$notEmpty(d)&&(e=d.replace("$serverPath",a.rootPath));j.show(c,e)}};a.mappath=function(b){if(typeof b!="string")return null;if(b.indexOf("~/../")==0)b=f(a.rootPath,"/")?a.rootPath+b.substr(5):a.rootPath+b.substr(4);else if(b.indexOf("~/")==0){var d=b.split("/"),c=null,e=b;d.length>1&&(c=d[1],c.indexOf("$")!=-1&&(d=c.replace(/\$/g,"/"),e=b.replace(c,d)));b=h(b)+e.substr(2)}else b.indexOf("./")==0?
b=h(b)+"mx"+b.substr(1):b.indexOf("$/")==0?b=h(b)+"mx/resources"+b.substr(1):b.indexOf("$locale/")==0?b=h(b)+"mx/resources/locales/"+a.locale+b.substr(7):b.indexOf("$theme/")==0&&(b=a.mappath(a.themePath)+"/"+mx.theme+b.substr(6));return b};a.setThemePath=function(b){if(b!=null)a.themePath=b};a.setTheme=function(b,d){var c=a.mappath(a.themePath),e=null;d!=null?(a.setThemePath(d),e=a.mappath(d)):e=c;if(b!=null){for(var g=null,f=0;f<a.loadedStyles.length;f++)if(g=a.loadedStyles[f],g.indexOf(c+"/"+a.theme)!=
-1){var h=$("link[href='"+g+"']"),i=g.split("/"),i=e+"/"+b+"/"+i[i.length-1];h.attr("href",i);a.loadedStyles[f]=i;delete a.loadedStyles[g];a.loadedStyles[i]=i}a.theme=b}};a.loadingScripts=[];a.loadedScripts=[];a.loadingStyles=[];a.loadedStyles=[];var k=null;a.include=function(b,d){var c=a.mappath(b),e=null,g=null,f=null;if(c.indexOf(".js")==c.length-3)e=a.loadingScripts,g=a.loadedScripts,f="js";else if(c.indexOf(".css")==c.length-4)e=a.loadingStyles,g=a.loadedStyles,f="css";if(!a.debugMode&&f=="css"&&
c.indexOf("resources/themes")!=-1&&c.indexOf("resources/themes/"+a.theme+"/min.css")==-1)typeof d=="function"&&d();else if(e[c]!=null)typeof d=="function"&&e[c].push(d);else if(g[c]!=null)typeof d=="function"&&d();else if(e[c]=typeof d=="function"?[d]:[],e.push(c),document.body){e=null;if(f=="js")e=document.createElement("script");else if(f=="css")e=document.createElement("link"),e.rel="stylesheet";if(e.readyState)e.onreadystatechange=a._include_onload;e.onload=a._include_onload;e.onerror=a._include_onload;
e.dynamic=!0;if(f=="js")e.src=c;else if(f=="css")e.href=c;e.id=c;document.body!=null&&f!="css"?document.body.appendChild(e):(k==null&&(k=document.getElementsByTagName("head")[0]),k.appendChild(e))}else e=null,f=="js"?e="<script src='"+c+"'":f=="css"&&(e="<link rel='stylesheet' href='"+c+"'"),document.write(e+" id='"+c+"' onerror='mx._include_onload(event)' onreadystatechange='mx._include_onload(event);' onload='mx._include_onload(event)'>"+(f=="js"?"<\/script>":""))};$include=a.include;a._include_onload=
function(b){var b=b?b:event,d=null,d=b.srcElement!=null?b.srcElement:b.target;if(!d.readyState||!(d.readyState!="loaded"&&d.readyState!="complete")){d.onload=null;d.onerror=null;if(d.readyState)d.onreadystatechange=null;var c=null,e=d.id,f=[];if(d.tagName=="SCRIPT")c=d.src,e||(e=c),b.type!="error"?(b=a.loadedScripts,d=e,b[d]=c,b.push(d),f=a.loadingScripts[e],g(a.loadingScripts,e)):mx.error("Fail to load '"+c+"'.");else if(d.tagName=="LINK")c=d.href,e||(e=c),b.type!="error"?(b=a.loadedStyles,d=e,b[d]=
c,b.push(d),f=a.loadingStyles[e],g(a.loadingStyles,e)):mx.error("Fail to load '"+c+"'.");for(;f&&f.length>0;)f.pop()(c);if(a.loadingStyles.length==0&&a._styleReady_callbacks.length>0)for(;a._styleReady_callbacks.length>0;){if(a.loadingStyles.length>0)break;c=a._styleReady_callbacks.pop();c()}if(a.loadingScripts.length==0&&a._scriptReady_callbacks.length>0)for(;a._scriptReady_callbacks.length>0;){if(a.loadingScripts.length>0)break;c=a._scriptReady_callbacks.pop();c()}if(a.loadingStyles.length==0&&
a.loadingScripts.length==0&&a._ready_callbacks.length>0)for(;a._ready_callbacks.length>0;){if(a.loadingStyles.length>0||a.loadingScripts.length>0)break;c=a._ready_callbacks.pop();c()}}};a._ready_callbacks=[];a.whenReady=function(b){typeof b=="function"&&(a.loadingStyles.length==0&&a.loadingScripts.length==0?b():a._ready_callbacks.push(b))};a._styleReady_callbacks=[];a.whenStyleReady=function(b){typeof b=="function"&&(a.loadingStyles.length==0?b():a._styleReady_callbacks.push(b))};a._scriptReady_callbacks=
[];a.whenScriptReady=function(b){typeof b=="function"&&(a.loadingScripts.length==0?b():a._scriptReady_callbacks.push(b))};var l=null;a.getScrollBarWidth=function(){if($isEmpty(l)){var a=document.createElement("div");a.style.cssText="overflow:scroll;width:100px;height:100px;visibility:hidden";document.body.appendChild(a);a&&(l={horizontal:a.offsetHeight-a.clientHeight,vertical:a.offsetWidth-a.clientWidth});document.body.removeChild(a)}return l};a.importClass=function(b,d){if(a.debugMode||b.endsWith(".weblet")||!b.startsWith("mx.")){var c=b.split(".",
1),e=null;c.length==1&&(c=c[0],e=b.substr(c.length+1).replace(/\./g,"/"),e="~/"+c+"/scripts/"+e+".js");e!=null&&a.include(e,d)}else typeof d=="function"&&d()};$import=a.importClass;a.importMessages=function(b,d){var c=null,c="$locale/messages.js",e=!0;b=="mx"?c="$locale/messages.js":(c="~/"+b+"/resources/locales/"+a.locale+"/messages.js",c=mx.mappath(c),$.ajax({url:c,type:"GET",async:!1,error:function(){e=!1}}));e&&a.include(c,d)};a.msg=function(a,d){return $format(mx.messages[a],d)};a.err=function(b,
d){return a.msg("ERR_"+b,d)};a.loadMXExtModule=function(b,d){typeof p_extModuleName=="undefined"&&(b="mx");var c=f(a.rootPath,"/")?a.rootPath:a.rootPath+"/",e="mx.extmodule.js",e=b=="mx"?c+"mx/scripts/mx.extmodule.js":c+b+"/scripts/"+(b+".extmodule.js");a.include(e,d)};a.dispose=function(){for(var b=document.getElementsByTagName("head")[0].childNodes,d=b.length-1;d>=0;d--){if(b[d].tagName=="SCRIPT")b[d].onload=null,b[d].onerror=null,b[d].onreadystatechange=null;b[d].removeNode(!0)}for(var c in a.loadedScripts)a.loadedScripts[c]=
null,delete a.loadedScripts[c];a.loadedScripts.length=0;for(c in a.loadedStyles)a.loadedStyles[c]=null,delete a.loadedStyles[c];a.loadedStyles.length=0;for(c in a.loadingScripts)a.loadingScripts[c]=null,delete a.loadingScripts[c];a.loadingScripts.length=0;for(c in a.loadingStyles)a.loadingStyles[c]=null,delete a.loadingStyles[c];a.loadingStyles.length=0;for(c in a)a[c]=null};return a};mx=new MX;mx.init();window.onerror=function(g,f,h){mx.showerror(Error(f+"\r\nLine: "+h+"\r\n\r\n"+g))};
window.onunload=function(){mx.dispose();mx=null;window.jQuery=window.$=null;for(var g in window)try{window[g]=null}catch(f){}};MXObject=function(){var a=this;a.__class__=MXObject;a.__superClasses__=[];a.constructed=!1;a.disposed=!1;a._=function(b){if(a.canConstruct()){if($.isPlainObject(b)){var e=typeof a.on=="function",c;for(c in b){var d=b[c];if(e&&typeof a[c]=="object"&&typeof d=="function"&&c.startsWith("on"))a.on(c.substr(2),d);else a[c]=d;b[c]=null}}a.constructed=!0}};a.getClass=function(){return a.__class__};a.canConstruct=function(){return!a.constructed};a.instanceOf=function(b){return b==a.__class__?!0:b==Object||
b==MXObject?!0:a.__superClasses__.indexOf(b)!=-1};a.endOfClass=function(b){a.__class__.caller!=$extend&&a._(b[0]);return a};a.dispose=function(){a.__superClasses__.clear();a.disposed=!0};a.endOfClass(arguments);return a};MXEvent=function(){var a=this;a.listeners=[];a.addEventListener=function(b){typeof b=="function"&&!a.listeners.contains(b)&&a.listeners.add(b)};a.insertEventListener=function(b,c){typeof c=="function"&&!a.listeners.contains(c)&&a.listeners.insert(b,c)};a.removeEventListener=function(b){return a.listeners.remove(b)};a.clear=function(){a.listeners.clear()};a.fire=function(b){for(var c=0;c<a.listeners.length;c++)a.listeners[c](b)};return a};MXComponent=function(){var a=$extend(MXObject),d={};a.id=null;a.autoInit=!0;a.initialized=!1;d._=a._;a._=function(c){a.canConstruct()&&(d._(c),a.autoInit&&a.init())};a.init=function(){a.initialized=!0};a.on=function(c,e){var b="on"+c;typeof a[b]!="undefined"&&(a[b]==null&&(a[b]=new MXEvent),a[b].addEventListener(e))};a.off=function(c,e){if(c==null&&e==null)for(var b in this)this[b]!=null&&this[b].constructor==MXEvent&&(this[b].clear(),this[b]=null);else b="on"+c,typeof a[b]!="undefined"&&a[b]!=null&&
(e!=null?a[b].removeEventListener(e):a[b].clear())};a.hasBound=function(c){c="on"+c;if(typeof a[c]=="undefined")return!1;return a[c]!=null?a[c].listeners.length>0:!1};a.trigger=function(c,e){var b="on"+c;if(typeof a[b]!="undefined"&&a[b]!=null){var d=null,d=e!=null?e:{};d.target=a;d.type=c;a[b].fire(d)}};d.instanceOf=a.instanceOf;a.instanceOf=function(a){if(a==MXComponent)return!0;return d.instanceOf(a)};d.dispose=a.dispose;a.dispose=function(){a.off();d.dispose()};a.endOfClass(arguments);return a};if($isIE()){if(typeof XMLHttpRequest=="undefined"){var XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(a){}return null};XMLDocument=function(){return new ActiveXObject("MSXML2.FreeThreadedDOMDocument")}}}else HTMLElement.prototype.__defineSetter__("innerText",function(a){return this.textContent=a}),HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.contains=function(a){do if(a==this)return!0;while(a=a.parentNode);
return!1},XMLDocument.prototype.loadXML=function(a){for(var b=this.childNodes,c=b.length-1;c>=0;c--)this.removeChild(b[c]);this.appendChild(this.importNode((new DOMParser).parseFromString(a,"text/xml").documentElement,!0))},XMLDocument.prototype.__defineGetter__("xml",function(){try{return(new XMLSerializer).serializeToString(this)}catch(a){var b=document.createElement("div");b.appendChild(this.cloneNode(!0));return b.innerHTML}}),Element.prototype.__defineGetter__("xml",function(){try{return(new XMLSerializer).serializeToString(this)}catch(a){var b=
document.createElement("div");b.appendChild(this.cloneNode(!0));return b.innerHTML}}),XMLDocument.prototype.__defineGetter__("text",function(){return this.firstChild.textContent}),Element.prototype.__defineGetter__("text",function(){return this.textContent}),Element.prototype.__defineSetter__("text",function(a){this.textContent=a}),CDATASection.prototype.__defineGetter__("text",function(){return this.textContent}),CDATASection.prototype.__defineSetter__("text",function(a){this.textContent=a}),XMLDocument.prototype.selectSingleNode=
Element.prototype.selectSingleNode=function(a){a=this.selectNodes(a);if(!a||a.length<1)return null;return a[0]},XMLDocument.prototype.selectNodes=Element.prototype.selectNodes=function(a){for(var b=new XPathEvaluator,c=b.createNSResolver(this.ownerDocument==null?this.documentElement:this.ownerDocument.documentElement),a=b.evaluate(a,this,c,0,null),b=[];c=a.iterateNext();)b.push(c);return b};function $isArray(a){return a!=null&&typeof a=="object"&&typeof a.length=="number"&&typeof a.swap=="function"}Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1};Array.prototype.first=function(a){if(this.length==0)return null;typeof a!="number"&&(a=0);a>=this.length&&(a=this.length-1);return this[a]};Array.prototype.last=function(a){if(this.length==0)return null;typeof a!="number"&&(a=0);return this.length-a-1>=0?this[this.length-a-1]:this[0]};
Array.prototype.contains=function(a){return this.indexOf(a)!=-1};Array.prototype.add=function(a){return this[this.length]=a};Array.prototype.insert=function(a,b){return this.splice(a,0,b)};Array.prototype.insertBefore=function(a,b){var c=this.indexOf(b);if(c==-1)return!1;this.insert(c,a);return!0};Array.prototype.insertAfter=function(a,b){var c=this.indexOf(b);return c==-1?!1:(c==this.length?this.add(a):this.insert(c+1,a),!0)};Array.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};
Array.prototype.removeAt=function(a){return a>=0&&a<this.length?(this.splice(a,1),!0):!1};Array.prototype.removeLast=function(a){this.length!=0&&(typeof a!="number"&&(a=0),this.removeAt(this.length-a-1))};Array.prototype.clear=function(){this.length>0&&this.splice(0,this.length)};Array.prototype.clone=function(){return this.slice(0,this.length)};Array.prototype.swap=function(a,b){var c=this.indexOf(a),d=this.indexOf(b);this[c]=b;this[d]=a};function $isBoolean(a){return typeof a=="boolean"}function parseBoolean(a){if(typeof a=="boolean")return a;t=a.toLowerCase();return t=="true"||t=="t"};function $isDate(a){return a!=null&&a.constructor==Date}var __regex_yyyyM=/^(\S*)-(\S*)$/,__regex_yyyyMD=/^(\S*)-(\S*)-(\S*)$/,__regex_Hms=/^(\S*):(\S*):(\S*)$/,__regex_Hm=/^(\S*):(\S*)$/;
function parseDate(a){if(a==null||typeof a=="string"&&a.trim()=="")return null;if($isDate(a))return a;var c=1900,b=1,d=1,g=0,i=0,j=0,e=null,f=null,h=null,a=a.trim();a.indexOf(" ")!=-1?e=a.split(" "):a.indexOf("T")!=-1&&(e=a.split("T"));e==null&&(e=[a]);e.length==1?e[0].indexOf(":")!=-1?h=e[0]:f=e[0]:e.length==2&&(f=e[0],h=e[1]);if(f!=null&&(a=f.match(__regex_yyyyMD),a==null&&(a=f.match(__regex_yyyyM),a!=null?h=null:a=[f,f]),a!=null)){a.length>=2&&(c=parseInt(a[1],10),isNaN(c)&&(c=1900));if(a.length>=
3&&(b=parseInt(a[2],10),isNaN(b)||b>12||b<=0))b=1;a.length>=4&&(f=Date.getDaysInMonth(c,b-1),d=parseInt(a[3],10),isNaN(d)||d<=0?d=1:d>f&&(d=f))}if(h!=null){a=h.match(__regex_Hms);a==null&&(a=h.match(__regex_Hm),a==null&&(a=[h,h]));if(a.length>=2&&(g=parseInt(a[1],10),isNaN(g)||g>23||g<0))g=0;if(a.length>=3&&(i=parseInt(a[2],10),isNaN(i)||i>60||i<0))i=0;if(a.length>=4&&(j=parseInt(a[3],10),isNaN(j)||j>60||j<0))j=0}return new Date(c,b-1,d,g,i,j)}Date.today=new Date;
Date.today=new Date(Date.today.getFullYear(),Date.today.getMonth(),Date.today.getDate());
Date.format=function(a,c){if(a!=null){var b;b=c?c:"yyyy-MM-dd HH:mm:ss";var d=a.getYear(),g=a.getMonth()+1,i=a.getDate(),j=a.getHours()%12,e=a.getHours(),f=a.getMinutes(),h=a.getSeconds(),k=a.getFullYear(),l=Number.format(g,"00"),m=Number.format(i,"00"),n=Number.format(j,"00"),o=Number.format(e,"00"),p=Number.format(f,"00"),q=Number.format(h,"00");b=b.replace("yyyy",k).replace("MM",l).replace("dd",m);b=b.replace("HH",o).replace("hh",n).replace("mm",p).replace("ss",q);b=b.replace("yy",d).replace("M",
g).replace("d",i);return b=b.replace("H",e).replace("h",j).replace("m",f).replace("s",h)}else return""};Date.getDaysInMonth=function(a,c){switch(c+1){case 2:return a%400==0||a%4==0&&a%100!=0?29:28;case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;default:return 30}};Date.prototype.addSeconds=function(a){return new Date(this*1+a*1E3)};Date.prototype.addMinutes=function(a){return this.addSeconds(a*60)};Date.prototype.addHours=function(a){return this.addMinutes(a*60)};
Date.prototype.addDays=function(a){return this.addHours(a*24)};Date.prototype.addWeeks=function(a){return this.addDays(a*7)};Date.prototype.addMonths=function(a){var c=new Date(this*1),b=c.getMonth()+1+a,d=Math.floor(b/12),a=c.getFullYear()+d,b=Math.abs(d*12-b)%12,d=c.getDate(),g=Date.getDaysInMonth(a,b-1);d>g&&(d=g);c.setDate(1);c.setFullYear(a);c.setMonth(b-1);c.setDate(d);return c};Date.prototype.addYears=function(a){return this.addMonths(a*12)};
Date.prototype.clone=function(){return new Date(this*1)};function $isFunction(a){return typeof a=="function"};$ns("mx.types");
mx.types.HashMap=function(d){var a=this;a.length=0;a.items={};for(var e in d)d.hasOwnProperty(e)&&(a.items[e]=d[e],a.length++);a.setItem=function(b,c){var d=void 0;a.hasItem(b)?d=a.items[b]:a.length++;a.items[b]=c;return d};a.getItem=function(b){return a.hasItem(b)?a.items[b]:void 0};a.hasItem=function(b){return a.items.hasOwnProperty(b)};a.removeItem=function(b){if(a.hasItem(b))return previous=a.items[b],a.length--,delete a.items[b],previous};a.keys=function(){var b=[],c;for(c in a.items)a.hasItem(c)&&b.push(c);
return b};a.values=function(){var b=[],c;for(c in a.items)a.hasItem(c)&&b.push(a.items[c]);return b};a.each=function(b){for(var c in a.items)a.hasItem(c)&&b(c,a.items[c])};a.clear=function(){a.items={};a.length=0};return a};function $isNumber(c){return typeof c=="number"}Number.format=function(c,d){if(c==null)return"";if(typeof d=="undefined")return c+"";if(typeof d=="number")return c+"";var a=c+"";if(d!=null&&d!=""){var a=a.split("."),b=d.split(".");a[0].length<b[0].length&&(a[0]=b[0].substring(0,b[0].length-a[0].length)+a[0]);if(b.length==1)return a[0];else{if(a.length>1)for(;a[1].length<b[1].length;)a[1]+="0";else a[1]=b[1];return(new Number(a[0]+"."+a[1])).toFixed(b[1].length)}}else return a};function $isObject(a){return a!=null&&typeof a=="object"}function $isPlainObject(a){return $.isPlainObject(a)}function $isEmpty(a){return a==null||typeof a=="string"&&a.trim()==""||typeof a=="undefined"}function $notEmpty(a){return!$isEmpty(a)}function $format(a,b){if($isString(a)&&($isArray(b)||$.isPlainObject(b)||$isNumber(b)))return String.format(a,b);return $isNumber(a)?Number.format(a,b):$isDate(a)?Date.format(a,b):a!=null?a.toString():""}
function $isEqual(a,b,c){c==null&&(c=!1);c&&(typeof a=="string"&&(a=a.toLowerCase()),typeof b=="string"&&(b=b.toLowerCase()));if($isArray(a)&&$isArray(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(!$isEqual(a[d],b[d],c))return!1;return!0}if(a==b)return!0;return a==null&&b!=null?!1:a!=null&&b==null?!1:a.valueOf()==b.valueOf()}function $notEqual(a,b,c){return!$isEqual(a,b,c)}
function $compare(a,b,c){typeof a=="undefined"&&(a=null);typeof b=="undefined"&&(b=null);if(b===null&&a!==null)return-1;if(a===null&&b!==null)return 1;c==null&&(c=!1);c&&(typeof a=="string"&&(a=a.toLowerCase()),typeof b=="string"&&(b=b.toLowerCase()));return $isEqual(a,b)?0:typeof a=="string"?a.localeCompare(b):$isNumber(a)||$isDate(a)?b.valueOf()-a.valueOf():1}
function $clone(a){var b=null;if($isArray(a)){for(var b=[],c=a.length;c--;)b[c]=$clone(a[c]);return b}else if($isObject(a)){if(a.constructor==RegExp)b=RegExp(a.source);else for(c in b={},a)b[c]=$clone(a[c]);return b}else return a};function $isString(a){return typeof a=="string"}String.format=function(a,b){if(a==null)return"";typeof a!="string"&&(a=a.toString());if(b==null)return a;if(typeof b=="number"){for(var c=Array(b),d=0;d<c.length;d++)c[d]=a;return c.join("")}c=a;if(a.indexOf("{")!=-1&&a.indexOf("}")!=-1&&($.isArray(b)||$.isPlainObject(b)))for(d in b)c=c.replace("{"+d+"}",b[d]);return c};String.prototype.replaceAll=function(a,b){return this.replace(RegExp(a,"gm"),b)};
String.prototype.contain=function(a){return this.indexOf(a)!=-1};String.prototype.startsWith=function(a){return this.substring(0,a.length)==a};String.prototype.endsWith=function(a){return this.substring(this.length-a.length)==a};String.prototype.trimLeft=function(){return this.replace(/^\s*/,"")};String.prototype.trimRight=function(){return this.replace(/\s*$/,"")};String.prototype.trim=function(){return this.trimRight().trimLeft()};
String.prototype.getByteCount=function(){return this.replace(/[^\x00-\xff]/g,"**").length};String.prototype.containsAsianCharacters=function(){return/.*[\u4e00-\u9fa5]+.*$/.test(this)};var com={anychart:{}};com.anychart.AnyChart=function(){this.constructor(arguments)};AnyChart=com.anychart.AnyChart;AnyChart.utils={};AnyChart.utils.hasProp=function(b){return typeof b!="undefined"};AnyChart.utils.push=function(b,c){b[b.length]=c};var tmpUa=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():null,tmpUp=navigator&&navigator.platform?navigator.platform.toLowerCase():null;AnyChart.platform={};AnyChart.platform.isWin=tmpUp?/win/.test(tmpUp):/win/.test(tmpUa);
AnyChart.platform.isMac=!AnyChart.platform.isWin&&(tmpUp?/mac/.test(tmpUp):/mac/.test(tmpUa));AnyChart.platform.hasDom=AnyChart.utils.hasProp(document.getElementById)&&AnyChart.utils.hasProp(document.getElementsByTagName)&&AnyChart.utils.hasProp(document.createElement);AnyChart.platform.webKit=/webkit/.test(tmpUa)?parseFloat(tmpUa.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;AnyChart.platform.isIE=!+"\u000b1";AnyChart.platform.isFirefox=/firefox/.test(tmpUa);
AnyChart.platform.protocol=location.protocol=="https:"?"https:":"http:";AnyChart.platform.flashPlayerVersion=[0,0,0];
if(AnyChart.utils.hasProp(navigator.plugins)&&typeof navigator.plugins["Shockwave Flash"]=="object"){var d=navigator.plugins["Shockwave Flash"].description;if(d&&(!AnyChart.utils.hasProp(navigator.mimeTypes)||!navigator.mimeTypes["application/x-shockwave-flash"]||navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin))AnyChart.platform.isIE=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),AnyChart.platform.flashPlayerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10),AnyChart.platform.flashPlayerVersion[1]=
parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),AnyChart.platform.flashPlayerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof window.ActiveXObject!="undefined")try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a&&(d=a.GetVariable("$version")))AnyChart.platform.isIE=!0,d=d.split(" ")[1].split(","),AnyChart.platform.flashPlayerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}catch(e){}
AnyChart.platform.hasRequiredVersion=AnyChart.platform.flashPlayerVersion!=null&&Number(AnyChart.platform.flashPlayerVersion[0])>=9;AnyChart.platform.needFormFix=AnyChart.platform.hasRequiredVersion&&AnyChart.platform.isIE&&AnyChart.platform.isWin;
if(AnyChart.platform.needFormFix)AnyChart.platform.needFormFix=Number(AnyChart.platform.flashPlayerVersion[0])==9,AnyChart.platform.needFormFix=AnyChart.platform.needFormFix&&Number(AnyChart.platform.flashPlayerVersion[1])==0,AnyChart.platform.needFormFix=AnyChart.platform.needFormFix&&Number(AnyChart.platform.flashPlayerVersion[2])<115;
AnyChart.utils.addGlobalEventListener=function(b,c){if(AnyChart.utils.hasProp(window.addEventListener))window.addEventListener(b,c,!1);else if(AnyChart.utils.hasProp(document.addEventListener))document.addEventListener(b,c,!1);else if(AnyChart.utils.hasProp(window.attachEvent))AnyChart.utils.attachEvent(window,"on"+b,c);else if(typeof window["on"+b]=="function"){var f=window["on"+b];window["on"+b]=function(){f();c()}}else win["on"+b]=c};AnyChart.utils.listeners=[];
AnyChart.utils.attachEvent=function(b,c,f){b.attachEvent(c,f);AnyChart.utils.push(AnyChart.utils.listeners,[b,c,f])};AnyChart.utils.isDomLoaded=!1;AnyChart.utils.domLoadListeners=[];AnyChart.utils.addDomLoadEventListener=function(b){AnyChart.utils.isDomLoaded?b():AnyChart.utils.push(AnyChart.utils.domLoadListeners,b)};
AnyChart.utils.execDomLoadListeners=function(){if(!AnyChart.utils.isDomLoaded){try{var b=document.getElementsByTagName("body")[0].appendChild(document.createElement("span"));b.parentNode.removeChild(b)}catch(c){return}AnyChart.utils.isDomLoaded=!0;for(var b=AnyChart.utils.domLoadListeners.length,f=0;f<b;f++)AnyChart.utils.domLoadListeners[f]()}};
AnyChart.utils.registerDomLoad=function(){AnyChart.platform.hasDom&&(AnyChart.utils.hasProp(document.readyState)&&(document.readyState=="complete"||document.getElementsByTagName("body")[0]||document.body)&&AnyChart.utils.execDomLoadListeners(),AnyChart.utils.isDomLoaded||(AnyChart.utils.hasProp(document.addEventListener)&&document.addEventListener("DOMContentLoaded",AnyChart.utils.execDomLoadListeners,!1),AnyChart.platform.isIE&&AnyChart.platform.isWin&&(document.attachEvent("onreadystatechange",
function(){document.readyState=="complete"&&(document.detachEvent("onreadystatechange",arguments.callee),AnyChart.utils.execDomLoadListeners())}),window==top&&function(){if(!AnyChart.utils.isDomLoaded){try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}AnyChart.utils.execDomLoadListeners()}}()),AnyChart.platform.webKit&&function(){AnyChart.utils.isDomLoaded||(/loaded|complete/.test(document.readyState)?AnyChart.utils.execDomLoadListeners():setTimeout(arguments.callee,
0))}(),AnyChart.utils.addGlobalEventListener("load",AnyChart.utils.execDomLoadListeners)))};AnyChart.dispatchEvent=function(b,c){b==null||c==null||AnyChart.chartsMap&&AnyChart.chartsMap[b]&&AnyChart.chartsMap[b].dispatchEvent(c)};AnyChart.getChartById=function(b){return b!=null&&AnyChart.chartsMap&&AnyChart.chartsMap[b]?AnyChart.chartsMap[b]:null};AnyChart.charts=[];AnyChart.chartsMap={};
AnyChart.register=function(b){b.id="__AnyChart___"+AnyChart.charts.length;AnyChart.chartsMap[b.id]=b;AnyChart.utils.push(AnyChart.charts,b)};AnyChart.disposeFlashObject=function(b,c){if(b&&b.nodeName=="OBJECT")AnyChart.platform.isIE&&AnyChart.platform.isWin?(b.style.display="none",function(){b.readyState==4?(AnyChart.platform.needFormFix&&c!=null&&AnyChart.disposeFlashObjectInIE(window[c]),AnyChart.disposeFlashObjectInIE(b)):setTimeout(arguments.callee,10)}()):b.parentNode&&b.parentNode.removeChild(b)};
AnyChart.disposeFlashObjectInIE=function(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode&&b.parentNode.removeChild(b)};
AnyChart.__disposeInIE=function(){if(AnyChart){if(AnyChart.utils&&AnyChart.utils.listeners)for(var b=0,c=AnyChart.utils.listeners.length;b<c;b++)AnyChart.utils.listeners[b][0].detachEvent(AnyChart.utils.listeners[b][1],AnyChart.utils.listeners[b][2]);if(AnyChart.charts)try{for(;AnyChart.charts.length>0;)AnyChart.charts[AnyChart.charts.length-1].dispose()}catch(f){}for(b in AnyChart)AnyChart[b]=null}AnyChart=null};
AnyChart.registerDispose=function(){AnyChart.platform.isIE&&AnyChart.platform.isWin&&(window.attachEvent("onbeforeunload",function(){AnyChart.__disposeInIE()}),window.attachEvent("onunload",function(){AnyChart.__disposeInIE()}))};AnyChart._removeSWF=function(){AnyChart.platform.isIE&&AnyChart.platform.isWin&&AnyChart.__disposeInIE()};
AnyChart.utils.JSConverter={isAttribute:function(b){b=typeof b;return b=="string"||b=="number"||b=="boolean"},isArray:function(b){return b instanceof Array},createNode:function(b,c){var f="<"+b;if(c!=null){if(typeof c.functionName!="undefined")c["function"]=c.functionName,delete c.functionName;for(var g in c)g!="format"&&g!="text"&&g!="custom_attribute_value"&&g!="attr"&&AnyChart.utils.JSConverter.isAttribute(c[g])&&(f+=" "+g+'="'+c[g]+'"')}f+=">";if(c!=null)for(g in c)if(g=="arg"&&AnyChart.utils.JSConverter.isArray(c[g]))for(var i=
c[g],h=0;h<i.length;h++)f+="<arg><![CDATA["+i[h]+"]]\></arg>";else if(g=="custom_attribute_value"||g=="attr")f+="<![CDATA["+c[g]+"]]\>";else if(g=="format"||g=="text")f+="<"+g+"><![CDATA["+c[g]+"]]\></"+g+">";else if(g=="cdata")f+="<![CDATA["+c[g]+"]]\>";else if(AnyChart.utils.JSConverter.isArray(c[g])){i=c[g];for(h=0;h<i.length;h++)f+=AnyChart.utils.JSConverter.createNode(g,i[h])}else AnyChart.utils.JSConverter.isAttribute(c[g])||(f+=AnyChart.utils.JSConverter.createNode(g,c[g]));f+="</"+b+">";return f},
convert:function(b){return AnyChart.utils.JSConverter.createNode("anychart",b)}};AnyChart.FFPrintFix={};AnyChart.FFPrintFix.fix=function(b,c,f,g,i,h,k){var j=document.getElementsByTagName("head"),j=j.length>0?j[0]:null;if(j!=null)b.ffPrintScreenStyle=AnyChart.FFPrintFix.createDisplayStyle(j,g,i,h,k),b.ffPrintStyle=AnyChart.FFPrintFix.createPrintStyle(j,g,i,h,k),b.ffPrintFixImg=AnyChart.FFPrintFix.createImage(c,f)};
AnyChart.FFPrintFix.createDisplayStyle=function(b,c,f,g,i){var h=document.createElement("style");h.setAttribute("type","text/css");h.setAttribute("media","screen");g=g+"#"+i;i=g+" img";h.appendChild(document.createTextNode(g+(" object { width:"+c+"; height:"+f+";padding:0; margin:0; }\n")));h.appendChild(document.createTextNode(i+" { display: none; }"));return b.appendChild(h)};
AnyChart.FFPrintFix.createPrintStyle=function(b,c,f,g,i){var h=document.createElement("style");h.setAttribute("type","text/css");h.setAttribute("media","print");g=g+"#"+i;i=g+" img";c=" { display: block; width: "+c+"; height: "+f+"; }";h.appendChild(document.createTextNode(g+" object { display: none; }\n"));h.appendChild(document.createTextNode(i+c));return b.appendChild(h)};
AnyChart.FFPrintFix.createImage=function(b,c){var f=document.createElement("img"),f=b.appendChild(f);f.src="data:image/png;base64,"+c;return f};AnyChart.utils.registerDomLoad();AnyChart.swfFile=null;AnyChart.preloaderSWFFile=null;AnyChart.messages={preloaderInit:"Initializing... ",preloaderLoading:"Loading... ",init:"Initializing...",loadingXML:"Loading xml...",loadingResources:"Loading resources...",loadingTemplates:"Loading templates...",noData:"No data",waitingForData:"Waiting for data..."};
AnyChart.width=550;AnyChart.height=400;AnyChart.enableFirefoxPrintPreviewFix=!0;AnyChart.enableMouseEvents=!0;AnyChart.enableChartMouseEvents=!1;
AnyChart.prototype={swfFile:null,preloaderSWFFile:null,id:null,width:null,height:null,bgColor:null,wMode:"transparent",enableFirefoxPrintPreviewFix:!1,flashObject:null,target:null,ffPrintFixImg:null,ffPrintScreenStyle:null,ffPrintStyle:null,messages:null,xmlFile:null,_xmlSource:null,enableMouseEvents:!0,constructor:function(b){this.swfFile=AnyChart.swfFile;this.preloaderSWFFile=AnyChart.preloaderSWFFile;if(b.length>0&&(this.swfFile=b[0],b.length>1))this.preloaderSWFFile=b[1];this.ffPrintStyle=this.ffPrintScreenStyle=
this.ffPrintFixImg=this.target=null;this.messages={};this.messages.preloaderInit=AnyChart.messages.preloaderInit;this.messages.preloaderLoading=AnyChart.messages.preloaderLoading;this.messages.init=AnyChart.messages.init;this.messages.loadingXML=AnyChart.messages.loadingXML;this.messages.loadingResources=AnyChart.messages.loadingResources;this.messages.loadingTemplates=AnyChart.messages.loadingTemplates;this.messages.noData=AnyChart.messages.noData;this.messages.waitingForData=AnyChart.messages.waitingForData;
this.width=AnyChart.width;this.height=AnyChart.height;this.bgColor="#FFFFFF";this.wMode="transparent";this._needSetXMLDataAfterCreation=this._needSetXMLFileAfterCreation=this._isHTMLWrited=this._isChartCreated=!1;this.visible=!0;this.enableFirefoxPrintPreviewFix=AnyChart.enableFirefoxPrintPreviewFix;this.enableMouseEvents=AnyChart.enableMouseEvents;this.enableChartMouseEvents=AnyChart.enableChartMouseEvents;this._listeners=null;AnyChart.register(this)},write:function(b){if(AnyChart.platform.hasRequiredVersion&&
!this._created)this._isHTMLWrited=this._isChartCreated=!1,AnyChart.platform.hasRequiredVersion&&(arguments.length==0&&(b="__chart_generated_container__"+this.id,document.write('<div id="'+b+'"></div>')),this._createFlashObject(b))},_createFlashObject:function(b){if(AnyChart.utils.hasProp(b)&&b!=null&&AnyChart.platform.hasDom&&!(AnyChart.platform.webKit&&AnyChart.platform.webKit<312)){var c=this;AnyChart.utils.addDomLoadEventListener(function(){typeof b=="string"?c._execCreateFlashObject(document.getElementById(b)):
c._execCreateFlashObject(b)})}},_addParam:function(b,c,f){var g=document.createElement("param");g.setAttribute("name",c);g.setAttribute("value",f);b.appendChild(g)},_generateStringParam:function(b,c){return'<param name="'+b+'" value="'+c+'" />'},_rebuildExternalInterfaceFunctionForFormFix:function(b,c){eval('obj[functionName] = function(){return eval(this.CallFunction("<invoke name=\\"'+c+'\\" returntype=\\"javascript\\">" + __flash__argumentsToXML(arguments,0) + "</invoke>"));}')},_execCreateFlashObject:function(b){this.target=
b;this.enableFirefoxPrintPreviewFix=this.enableFirefoxPrintPreviewFix&&AnyChart.platform.isFirefox;var c=this.width+"",f=this.height+"",g=this.preloaderSWFFile?this.preloaderSWFFile:this.swfFile;if(AnyChart.platform.isIE&&AnyChart.platform.isWin){var i='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';i+=' id="'+this.id+'"';i+=' width="'+c+'"';i+=' height="'+f+'"';i+=' codebase="'+AnyChart.platform.protocol+'//fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">';i+=this._generateStringParam("movie",
g);i+=this._generateStringParam("bgcolor",this.bgColor);i+=this._generateStringParam("allowScriptAccess","always");i+=this._generateStringParam("flashvars",this._buildFlashVars());this.wMode!=null&&(i+=this._generateStringParam("wmode",this.wMode));i+="</object>";if(AnyChart.platform.needFormFix){c=null;for(f=b;f;){if(f.nodeName!=null&&f.nodeName.toLowerCase()=="form"){c=f;break}f=f.parentNode}if(c!=null){window[this.id]={};window[this.id].SetReturnValue=function(){};b.innerHTML=i;window[this.id].SetReturnValue=
null;var b={},h;for(h in window[this.id])typeof window[this.id][h]=="function"&&(b[h]=window[this.id][h]);this.flashObject=window[this.id]=c[this.id];for(h in b)this._rebuildExternalInterfaceFunctionForFormFix(this.flashObject,h)}else b.innerHTML=i,this.flashObject=document.getElementById(this.id)}else b.innerHTML=i,this.flashObject=document.getElementById(this.id)}else{h=document.createElement("object");h.setAttribute("type","application/x-shockwave-flash");h.setAttribute("id",this.id);h.setAttribute("width",
c);h.setAttribute("height",f);h.setAttribute("data",g);h.setAttribute("style","visibility: "+(this.visible?"visible":"hidden"));this._addParam(h,"movie",g);this._addParam(h,"bgcolor",this.bgColor);this._addParam(h,"allowScriptAccess","always");this._addParam(h,"flashvars",this._buildFlashVars());this.wMode!=null&&this._addParam(h,"wmode",this.wMode);if(b.hasChildNodes())for(;b.childNodes.length>0;)b.removeChild(b.firstChild);this.flashObject=b.appendChild(h)}this._isHTMLWrited=this.flashObject!=null;
this._onHTMLCreate()},_buildFlashVars:function(){var b="",b="__externalobjid="+this.id;this.preloaderSWFFile!=null&&(b+="&swffile="+this.swfFile);this.xmlFile!=null&&(b+="&xmlfile="+this.xmlFile);this.enableMouseEvents&&(b+="&__enableevents=1");this.enableChartMouseEvents&&(b+="&__enablechartmouseevents=1");this.messages&&(this.messages.preloaderInit!=null&&(b+="&preloaderInitText="+this.messages.preloaderInit),this.messages.preloaderLoading!=null&&(b+="&preloaderLoadingText="+this.messages.preloaderLoading),
this.messages.init!=null&&(b+="&initText="+this.messages.init),this.messages.loadingXML!=null&&(b+="&xmlLoadingText="+this.messages.loadingXML),this.messages.loadingTemplates!=null&&(b+="&templatesLoadingText="+this.messages.loadingTemplates),this.messages.loadingResources!=null&&(b+="&resourcesLoadingText="+this.messages.loadingResources),this.messages.noData!=null&&(b+="&nodatatext="+this.messages.noData),this.messages.waitingForData!=null&&(b+="&waitingfordatatext="+this.messages.waitingForData));
return b},setSize:function(b,c){this.width=b;this.height=c;this.flashObject&&(this.flashObject.setAttribute("width",this.width+""),this.flashObject.setAttribute("height",this.height+""),this.updatePrintForFirefox())},_onBeforeChartDraw:function(){this._createFFPrintFixObjects()},_createFFPrintFixObjects:function(){if(this.enableFirefoxPrintPreviewFix&&this.target!=null){var b=this.getPng();if(!(b==null||b.length==0)){var c=this.target.getAttribute("id");c==null&&(c="__stockchartcontainer__"+this.id,
this.target.setAttribute("id",c));AnyChart.FFPrintFix.fix(this,this.target,b,this.width+"",this.height+"",this.target.nodeName,c)}}},_disposeFFPrintFixObjects:function(){if(this.enableFirefoxPrintPreviewFix&&this.target!=null){if(this.ffPrintFixImg)this.ffPrintFixImg.parentNode&&this.ffPrintFixImg.parentNode.removeChild(this.ffPrintFixImg),this.ffPrintFixImg=null;if(this.ffPrintScreenStyle)this.ffPrintScreenStyle.parentNode&&this.ffPrintScreenStyle.parentNode.removeChild(this.ffPrintScreenStyle),
this.ffPrintScreenStyle=null;if(this.ffPrintStyle)this.ffPrintStyle.parentNode&&this.ffPrintStyle.parentNode.removeChild(this.ffPrintStyle),this.ffPrintStyle=null}},updatePrintForFirefox:function(){this._disposeFFPrintFixObjects();this._createFFPrintFixObjects()},_listeners:null,addEventListener:function(b,c){if(this._listeners==null)this._listeners={};this._listeners[b]==null&&(this._listeners[b]=[]);this._listeners[b].push(c)},removeEventListener:function(b,c){if(!(this._listeners==null||this._listeners[b]==
null)){for(var f=-1,g=0;g<this._listeners[b].length;g++)if(this._listeners[b][g]==c){f=g;break}f!=-1&&this._listeners[b].splice(f,1)}},dispatchEvent:function(b){if(!(b==null||b.type==null))if(b.type=="create"?(this._onChartLoad(),this._onBeforeChartCreate()):b.type=="draw"&&this._onBeforeChartDraw(),b.target=this,!(this._listeners==null||this._listeners[b.type]==null))for(var c=this._listeners[b.type].length,f=0;f<c;f++)this._listeners[b.type][f](b)},visible:!0,show:function(){this.visible=!0;if(this.flashObject)this.flashObject.style.visibility=
"visible",this.flashObject.setAttribute("width",this.width+""),this.flashObject.setAttribute("height",this.height+"")},hide:function(){this.visible=!1;if(this.flashObject)this.flashObject.style.visibility="hidden",this.flashObject.setAttribute("width","1px"),this.flashObject.setAttribute("height","1px")},dispose:function(){this._onHTMLCreate=this._onChartLoad=null;this.remove()},removeFlashObject:function(){this.flashObject&&(this.flashObject.Dispose&&this.flashObject.Dispose(),AnyChart.disposeFlashObject(this.flashObject,
this.id),this._disposeFFPrintFixObjects());this.flashObject=null},remove:function(){this.removeFlashObject();if(AnyChart&&AnyChart.charts)for(var b=0;b<AnyChart.charts.length;b++)if(AnyChart.charts[b]==this){AnyChart.charts[b]=null;AnyChart.charts.splice(b,1);break}AnyChart&&AnyChart.chartsMap&&this.id!=null&&(AnyChart.chartsMap[this.id]=null)},_isChartCreated:!1,_isHTMLWrited:!1,_needSetXMLFileAfterCreation:!1,_needSetXMLDataAfterCreation:!1,_onBeforeChartCreate:function(){this.flashObject=document.getElementById(this.id);
this._isChartCreated=!0;this._needSetXMLFileAfterCreation&&this._execSetXMLFile();this._needSetXMLDataAfterCreation&&this._execSetXMLData()},setXMLFile:function(b){this.xmlFile=b;this._isChartCreated?this._isHTMLWrited&&this._execSetXMLFile():this._needSetXMLFileAfterCreation=!0},_checkPresetXMLSource:function(){if(this._xmlSource!=null&&this._created&&this._loaded){var b=this;setTimeout(function(){b.setXMLDataFromString(b._xmlSource)},1)}},_execSetXMLFile:function(){this.xmlFile!=null&&this.flashObject&&
this.flashObject.SetXMLDataFromURL&&this.flashObject.SetXMLDataFromURL(this.xmlFile)},_isXMLData:function(b){for(b=String(b);b.charAt(0)==" "&&b.length>0;)b=b.substr(1);return b.charAt(0)=="<"},setData:function(b){if(b!=null)this._xmlSource=this._isXMLData(b)?String(b):AnyChart.utils.JSConverter.convert(b),this._isChartCreated?this._execSetXMLData():this._needSetXMLDataAfterCreation=this._xmlSource!=null},setJSData:function(b){this.setData(b)},_execSetXMLData:function(){this._xmlSource!=null&&this.flashObject&&
this.flashObject.SetXMLDataFromString&&this.flashObject.SetXMLDataFromString(this._xmlSource)},updateData:function(b,c){this.flashObject!=null&&this.flashObject.UpdateData!=null&&this.flashObject.UpdateData(b,c)},updatePointData:function(b,c,f){this.flashObject!=null&&this.flashObject.UpdatePointData!=null&&this.flashObject.UpdatePointData(b,c,f)},setPlotCustomAttribute:function(b,c){this.flashObject!=null&&this.flashObject.SetPlotCustomAttribute!=null&&this.flashObject.SetPlotCustomAttribute(b,c)},
addSeries:function(b){this.flashObject!=null&&this.flashObject.AddSeries!=null&&this.flashObject.AddSeries(b)},removeSeries:function(b){this.flashObject!=null&&this.flashObject.RemoveSeries!=null&&this.flashObject.RemoveSeries(b)},addSeriesAt:function(){this.flashObject!=null&&this.flashObject.AddSeriesAt!=null&&this.flashObject.AddSeriesAt(seriesId)},updateSeries:function(b,c){this.flashObject!=null&&this.flashObject.UpdateSeries!=null&&this.flashObject.UpdateSeries(b,c)},showSeries:function(b,c){this.flashObject!=
null&&this.flashObject.ShowSeries!=null&&this.flashObject.ShowSeries(b,c)},addPoint:function(b,c){this.flashObject!=null&&this.flashObject.AddPoint!=null&&this.flashObject.AddPoint(b,c)},addPointAt:function(b,c,f){this.flashObject!=null&&this.flashObject.AddPointAt!=null&&this.flashObject.AddPointAt(b,c,f)},removePoint:function(b,c){this.flashObject!=null&&this.flashObject.RemovePoint!=null&&this.flashObject.RemovePoint(b,c)},updatePoint:function(b,c,f){this.flashObject!=null&&this.flashObject.UpdatePoint!=
null&&this.flashObject.UpdatePoint(b,c,f)},clear:function(){this.flashObject!=null&&this.flashObject.Clear!=null&&this.flashObject.Clear()},refresh:function(){this.flashObject!=null&&this.flashObject.Refresh!=null&&this.flashObject.Refresh()},highlightSeries:function(b,c){this.flashObject!=null&&this.flashObject.HighlightSeries!=null&&this.flashObject.HighlightSeries(b,c)},highlightPoint:function(b,c,f){this.flashObject!=null&&this.flashObject.HighlightPoint!=null&&this.flashObject.HighlightPoint(b,
c,f)},highlightCategory:function(b,c){this.flashObject!=null&&this.flashObject.HighlightCategory!=null&&this.flashObject.HighlightCategory(b,c)},selectPoint:function(b,c,f){this.flashObject!=null&&this.flashObject.SelectPoint!=null&&this.flashObject.SelectPoint(b,c,f)},view_highlightSeries:function(b,c,f){this.flashObject!=null&&this.flashObject.View_HighlightSeries!=null&&this.flashObject.View_HighlightSeries(b,c,f)},view_highlightPoint:function(b,c,f,g){this.flashObject!=null&&this.flashObject.View_HighlightPoint!=
null&&this.flashObject.View_HighlightPoint(b,c,f,g)},view_highlightCategory:function(b,c,f){this.flashObject!=null&&this.flashObject.View_HighlightCategory!=null&&this.flashObject.View_HighlightCategory(b,c,f)},view_selectPoint:function(b,c,f,g){this.flashObject!=null&&this.flashObject.View_SelectPoint!=null&&this.flashObject.View_SelectPoint(b,c,f,g)},view_setPlotCustomAttribute:function(b,c,f){this.flashObject!=null&&this.flashObject.View_SetPlotCustomAttribute!=null&&this.flashObject.View_SetPlotCustomAttribute(b,
c,f)},view_addSeries:function(b,c){this.flashObject!=null&&this.flashObject.View_AddSeries!=null&&this.flashObject.View_AddSeries(b,c)},view_removeSeries:function(b,c){this.flashObject!=null&&this.flashObject.View_RemoveSeries!=null&&this.flashObject.View_RemoveSeries(b,c)},view_addSeriesAt:function(b){this.flashObject!=null&&this.flashObject.View_AddSeriesAt!=null&&this.flashObject.View_AddSeriesAt(b,seriesId)},view_updateSeries:function(b,c,f){this.flashObject!=null&&this.flashObject.View_UpdateSeries!=
null&&this.flashObject.View_UpdateSeries(b,c,f)},view_showSeries:function(b,c,f){this.flashObject!=null&&this.flashObject.View_ShowSeries!=null&&this.flashObject.View_ShowSeries(b,c,f)},view_addPoint:function(b,c,f){this.flashObject!=null&&this.flashObject.View_AddPoint!=null&&this.flashObject.View_AddPoint(b,c,f)},view_addPointAt:function(b,c,f,g){this.flashObject!=null&&this.flashObject.View_AddPointAt!=null&&this.flashObject.View_AddPointAt(b,c,f,g)},view_removePoint:function(b,c,f){this.flashObject!=
null&&this.flashObject.View_RemovePoint!=null&&this.flashObject.View_RemovePoint(b,c,f)},view_updatePoint:function(b,c,f,g){this.flashObject!=null&&this.flashObject.View_UpdatePoint!=null&&this.flashObject.View_UpdatePoint(b,c,f,g)},view_clear:function(b){this.flashObject!=null&&this.flashObject.View_Clear!=null&&this.flashObject.View_Clear(b)},view_refresh:function(b){this.flashObject!=null&&this.flashObject.View_Refresh!=null&&this.flashObject.View_Refresh(b)},updateViewPointData:function(b,c,f,
g){this.flashObject!=null&&this.flashObject.UpdateViewPointData!=null&&this.flashObject.UpdateViewPointData(c,f,g)},setXMLDataFromString:function(b){this.flashObject!=null&&this.flashObject.SetXMLDataFromString!=null&&this.flashObject.SetXMLDataFromString(b.toString())},setXMLDataFromURL:function(b){this.flashObject!=null&&this.flashObject.SetXMLDataFromURL!=null&&this.flashObject.SetXMLDataFromURL(b)},setViewXMLFile:function(b,c){this.flashObject!=null&&this.flashObject.UpdateViewFromURL!=null&&
this.flashObject.UpdateViewFromURL(b,c)},setViewData:function(b,c){this.flashObject!=null&&this.flashObject.UpdateViewFromString!=null&&this.flashObject.UpdateViewFromString(b,c)},setLoading:function(b){this.flashObject&&this.flashObject.SetLoading&&this.flashObject.SetLoading(b)},getPng:function(){return this.flashObject.GetPngScreen()},getJpeg:function(){return this.flashObject.GetJPEGScreen()},printChart:function(){this.flashObject.PrintChart()},saveAsImage:function(){this.flashObject.SaveAsImage()},
saveAsPDF:function(){this.flashObject.SaveAsPDF()},getInformation:function(){return this.flashObject.GetInformation()},scrollXTo:function(b){this.flashObject!=null&&this.flashObject.ScrollXTo!=null&&this.flashObject.ScrollXTo(b)},scrollYTo:function(b){this.flashObject!=null&&this.flashObject.ScrollYTo!=null&&this.flashObject.ScrollYTo(b)},scrollTo:function(b,c){this.flashObject!=null&&this.flashObject.ScrollTo!=null&&this.flashObject.ScrollTo(b,c)},viewScrollXTo:function(b,c){this.flashObject!=null&&
this.flashObject.ViewScrollXTo!=null&&this.flashObject.ViewScrollXTo(b,c)},viewScrollYTo:function(b,c){this.flashObject!=null&&this.flashObject.ViewScrollXTo!=null&&this.flashObject.ViewScrollYTo(b,c)},viewScrollTo:function(b,c,f){this.flashObject!=null&&this.flashObject.ViewScrollTo!=null&&this.flashObject.ViewScrollTo(b,c,f)},setXZoom:function(b){this.flashObject!=null&&this.flashObject.SetXZoom!=null&&this.flashObject.SetXZoom(b)},setYZoom:function(b){this.flashObject!=null&&this.flashObject.SetYZoom!=
null&&this.flashObject.SetYZoom(b)},setZoom:function(b,c){this.flashObject!=null&&this.flashObject.SetZoom!=null&&this.flashObject.SetZoom(b,c)},setViewXZoom:function(b,c){this.flashObject!=null&&this.flashObject.SetViewXZoom!=null&&this.flashObject.SetViewXZoom(b,c)},setViewYZoom:function(b,c){this.flashObject!=null&&this.flashObject.SetViewYZoom!=null&&this.flashObject.SetViewYZoom(b,c)},setViewZoom:function(b,c,f){this.flashObject!=null&&this.flashObject.SetViewZoom!=null&&this.flashObject.SetViewZoom(b,
c,f)},getXScrollInfo:function(){if(this.flashObject!=null&&this.flashObject.GetXScrollInfo!=null)return this.flashObject.GetXScrollInfo()},getYScrollInfo:function(){if(this.flashObject!=null&&this.flashObject.GetYScrollInfo!=null)return this.flashObject.GetYScrollInfo()},getViewXScrollInfo:function(b){if(this.flashObject!=null&&this.flashObject.GetViewXScrollInfo!=null)return this.flashObject.GetViewXScrollInfo(b)},getViewYScrollInfo:function(b){if(this.flashObject!=null&&this.flashObject.GetViewYScrollInfo!=
null)return this.flashObject.GetViewYScrollInfo(b)},animate:function(){this.flashObject!=null&&this.flashObject.RepeatAnimation!=null&&this.flashObject.RepeatAnimation()},showAxisMarker:function(b,c){this.flashObject!=null&&this.flashObject.ShowAxisMarker!=null&&this.flashObject.ShowAxisMarker(b,c)},_onChartLoad:function(){},_onHTMLCreate:function(){}};(function(a){var b;a.fn.jqprint=function(f){b=a.extend({},a.fn.jqprint.defaults,f);f=this instanceof jQuery?this:a(this);if(b.operaSupport&&a.browser.opera){var d=window.open("","jqPrint-preview");d.document.open();var c=d.document}else{var e=a("<iframe  />");b.debug||e.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"});e.appendTo("body");c=e[0].contentWindow.document}b.importCSS&&(a("link[media=print]").length>0?a("link[media=print]").each(function(){c.write("<link type='text/css' rel='stylesheet' href='"+
a(this).attr("href")+"' media='print' />")}):a("link").each(function(){c.write("<link type='text/css' rel='stylesheet' href='"+a(this).attr("href")+"' />")}));c.write("<style>html, body{width:100%; height:100%;margin:0;overflow:initial;}</style>");b.printContainer?c.write(f.outer()):f.each(function(){c.write(a(this).html())});c.close();(b.operaSupport&&a.browser.opera?d:e[0].contentWindow).focus();setTimeout(function(){(b.operaSupport&&a.browser.opera?d:e[0].contentWindow).print();d&&d.close()},1E3)};
a.fn.jqprint.defaults={debug:!1,importCSS:!0,printContainer:!0,operaSupport:!0};jQuery.fn.outer=function(){return a(a("<div></div>").html(this.clone())).html()}})(jQuery);(function(d){function fa(a){var b=this,c=a.target,f=d.data(c,y),e=r[f],g=e.popupName,h=k[g];if(!(b.disabled||d(c).attr(m)==m)){var j={editor:b,button:c,buttonName:f,popup:h,popupName:g,command:e.command,useCSS:b.options.useCSS};if(e.buttonClick&&e.buttonClick(a,j)===!1)return!1;if(f=="source")s(b)?(delete b.range,b.$area.hide(),b.$frame.show(),c.title=e.title):(b.$frame.hide(),b.$area.show(),c.title="Show Rich Text"),setTimeout(function(){t(b)},100);else if(!s(b))if(g){var i=d(h);if(g=="url"){if(f==
"link"&&O(b)==="")return B(b,mx.msg("RET_INSERT_LINK")+".",c),!1;i.children(":button").unbind(o).bind(o,function(a){a.stopPropagation();a.preventDefault();var a=i.find(":text"),c=d.trim(a.val());c!==""&&u(b,j.command,c,null,j.button);a.val("http://");p();v(b)})}else g=="pastetext"&&i.children(":button").unbind(o).bind(o,function(a){a.stopPropagation();a.preventDefault();var a=i.find("textarea"),c=a.val().replace(/\n/g,"<br />");c!==""&&u(b,j.command,c,null,j.button);a.val("");p();v(b)});if(c!==d.data(h,
C))return P(b,h,c),!1;return}else if(f=="print")b.$frame[0].contentWindow.print();else if(!u(b,j.command,j.value,j.useCSS,c))return!1;v(b)}}function Q(a){a=d(a.target).closest("div");a.css(H,a.data(y)?"#FFF":"#FFC")}function R(a){d(a.target).closest("div").css(H,"transparent")}function ga(a){a.stopPropagation();a.preventDefault();var b=a.data.popup,c=a.target;if(!(b===k.msg||d(b).hasClass(D))){var f=d.data(b,C),e=d.data(f,y),g=r[e],h=g.command,j,l=this.options.useCSS;e=="font"?j=c.style.fontFamily.replace(/"/g,
""):e=="size"?(c.tagName=="DIV"&&(c=c.children[0]),j=c.innerHTML):e=="style"?j="<"+c.tagName+">":e=="color"?j=S(c.style.backgroundColor):e=="highlight"&&(j=S(c.style.backgroundColor),i?h="backcolor":l=!0);b={editor:this,button:f,buttonName:e,popup:b,popupName:g.popupName,command:h,value:j,useCSS:l};if(!(g.popupClick&&g.popupClick(a,b)===!1)){if(b.command&&!u(this,b.command,b.value,b.useCSS,f))return!1;p();v(this)}}}function E(a){for(var b=1,c=0,d=0;d<a.length;++d)b=(b+a.charCodeAt(d))%65521,c=(c+
b)%65521;return c<<16|b}function T(a,b,c,f,e){if(k[a])return k[a];var g=d(n).hide().addClass(ha).appendTo("body");f?g.html(f):a=="color"?(b=b.colors.split(" "),b.length<10&&g.width("auto"),d.each(b,function(a,b){d(n).appendTo(g).css(H,"#"+b)}),c=ia):a=="font"?d.each(b.fonts.split(","),function(a,b){d(n).appendTo(g).css("fontFamily",b).html(b)}):a=="size"?d.each(b.sizes.split(","),function(a,b){d(n).appendTo(g).html("<font size="+b+">"+b+"</font>")}):a=="style"?d.each(b.styles,function(a,b){d(n).appendTo(g).html(b[1]+
b[0]+b[1].replace("<","</"))}):a=="url"?(g.html(mx.msg("RTE_ENTER_URL")+':<br><input type=text value="http://" size=35><br><input type=button value="'+mx.msg("RTE_SUBMIT")+'">'),c=D):a=="pastetext"&&(g.html(mx.msg("RET_PASTE_TEXT")+".<br /><textarea cols=40 rows=3></textarea><br /><input type=button value="+mx.msg("RTE_SUBMIT")+">"),c=D);!c&&!f&&(c=U);g.addClass(c);i&&g.attr(I,"on").find("div,font,p,h1,h2,h3,h4,h5,h6").attr(I,"on");(g.hasClass(U)||e===!0)&&g.children().hover(Q,R);k[a]=g[0];return g[0]}
function V(a,b){b?(a.$main.addClass("disabled"),a.$area.attr(m,m),a.disabled=!0):(a.$main.removeClass("disabled"),a.$area.removeAttr(m),delete a.disabled);try{i?a.doc.body.contentEditable=!b:a.doc.designMode=!b?"on":"off"}catch(c){}t(a)}function u(a,b,c,f,e){F(a);if(!i){if(f===void 0||f===null)f=a.options.useCSS;a.doc.execCommand("styleWithCSS",0,f.toString())}var f=!0,g;if(i&&b.toLowerCase()=="inserthtml")w(a).pasteHTML(c);else if(i&&(b=="undo"||b=="redo"))a.doc.execCommand(b,!1,"none"),a.sourceMode()?
a.updateFrame():a.updateTextArea(),d(a).triggerHandler(z);else{try{f=a.doc.execCommand(b,0,c||null)}catch(h){g=h.description,f=!1}f||("cutcopypaste".indexOf(b)>-1?B(a,"For security reasons, your browser does not support the "+b+" command. Try using the keyboard shortcut or context menu instead.",e):B(a,g?g:"Error executing the "+b+" command.",e))}t(a);return f}function v(a){setTimeout(function(){s(a)?a.$area.focus():a.$frame[0].contentWindow.focus();t(a)},0)}function w(a){if(a=W(a))try{if(i)return a.createRange();
return a.getRangeAt(0)}catch(b){}return null}function W(a){if(i&&a.doc)return a.doc.selection;if(a.$frame[0].contentWindow)return a.$frame[0].contentWindow.getSelection()}function S(a){var b=/rgba?\((\d+), (\d+), (\d+)/.exec(a),c=a.split("");if(b)for(a=(b[1]<<16|b[2]<<8|b[3]).toString(16);a.length<6;)a="0"+a;return"#"+(a.length==6?a:c[1]+c[1]+c[2]+c[2]+c[3]+c[3])}function p(){d.each(k,function(a,b){d(b).hide().unbind(o).removeData(C)})}function X(){var a=d("link[href$='jquery.cleditor.css']").attr("href");
return a.substr(0,a.length-19)+"images/"}function J(a){var b=a.options;if(x(a))try{d.isFunction(b._blur_callback)&&a.customBlur(!1),d.isFunction(b._focus_callback)&&a.customFocus(!1),d.isFunction(b._keyup_callback)&&a.customKeyup(!1)}catch(c){}}function Y(a){var b=a.options;if(x(a))try{J(a),d.isFunction(b._blur_callback)&&a.customBlur(b._blur_callback),d.isFunction(b._focus_callback)&&a.customFocus(b._focus_callback),d.isFunction(b._keyup_callback)&&a.customKeyup(b._keyup_callback)}catch(c){}}function K(a){L=
!1;var b=a.$main;if(a.$frame)M(a);else{var c='<iframe frameborder="0" src="'+mx.mappath("$/html/blank.html")+"?rnd="+Math.random()+'">',b=a.$frame=d(c).hide().appendTo(b);if(i)b.one("load",function(){M(a)});else b.on("load",function(){L=!0;M(a)})}}function ja(a){var b=a.$frame;if(b){b.attr("src","");try{J(a)}catch(c){}finally{b.remove()}i&&(CollectGarbage(),setTimeout(function(){CollectGarbage()},2E3))}b=a.$frame=d('<iframe frameborder="0" src="javascript:true;">').hide().appendTo(a.$main)}function x(a){var a=
a.$frame,b=null;try{b=a[0].contentWindow}catch(c){}return b}function Z(a){var b=null,c=x(a);if(c)try{b=a.doc=c.document}catch(d){if(ja(a),c=x(a))try{b=a.doc=c.document}catch(e){}}return b}function ka(a){var b=Z(a);if(b)a=a.options,b.open(),b.write(a.docType+"<html>"+(a.docCSSFile===""?"":'<head><link rel="stylesheet" type="text/css" href="'+a.docCSSFile+'" /></head>')+'<body style="'+a.bodyStyle+'"></body></html>'),b.close()}function q(a,b,c){a.unbind(b,c);a.bind(b,c)}function M(a){var b=x(a);if(i?
b:b&&L){var c=Z(a),b=x(a),f=a.$frame;f.attr("src","");c=d(c);Y(a);ka(a);i&&q(c,"click",function(){v(a)});G(a);i&&(q(c,"beforedeactivate beforeactivate selectionchange keypress",function(b){if(b.type=="beforedeactivate")a.inactive=!0;else if(b.type=="beforeactivate")!a.inactive&&a.range&&a.range.length>1&&a.range.shift(),delete a.inactive;else if(!a.inactive){if(!a.range)a.range=[];for(a.range.unshift(w(a));a.range.length>2;)a.range.pop()}}),q(f,"focus",function(){F(a)}));q(d.browser.mozilla?c:d(b),
"blur",function(){$(a,!0);a.customBlur()});q(c,"click",function(){p();a.customFocus()});q(c,"keyup",function(){t(a);a.customKeyup()});q(c,"mouseup",function(){t(a)});N?a.$area.show():f.show();aa(a)}}function aa(a){if(a.doc){var b=a.$toolbar,c=b.children("div:last"),d=a.$main.width(),e=a.options,g=a.$frame,h=a.$main,c=c.offset().top+c.outerHeight()-b.offset().top+1;b.height(c);c=(/%/.test(""+e.height)?h.height():parseInt(e.height))-c;g.width(d).height(c);a.$area.width(d).height(la?c-2:c);V(a,a.disabled)}}
function t(a){if(!N&&d.browser.webkit&&!a.focused)a.$frame[0]&&a.$frame[0].contentWindow&&a.$frame[0].contentWindow.focus(),window.focus(),a.focused=!0;var b=a.doc;i&&(b=w(a));var c=s(a);d.each(a.$toolbar.find("."+ba),function(f,e){var g=d(e),h=d.cleditor.buttons[d.data(e,y)],j=h.command,l=!0;if(a.disabled)l=!1;else if(h.getEnabled)l=h.getEnabled({editor:a,button:e,buttonName:h.name,popup:k[h.popupName],popupName:h.popupName,command:h.command,useCSS:a.options.useCSS}),l===void 0&&(l=!0);else if(i&&
(j=="undo"||j=="redo"))l=!0;else if((c||N)&&h.name!="source"||i&&(j=="undo"||j=="redo"))l=!1;else if(j&&j!="print"&&(i&&j=="hilitecolor"&&(j="backcolor"),!i||j!="inserthtml"))try{l=b.queryCommandEnabled(j)}catch(na){l=!1}l?(g.removeClass(ca),g.removeAttr(m)):(g.addClass(ca),g.attr(m,m))})}function F(a){try{i&&a.range&&a.range[0].select()}catch(b){}}function O(a){F(a);if(w(a)){if(i)return w(a).text;return W(a).toString()}}function B(a,b,c){var d=T("msg",a.options,ma);d.innerHTML=b;P(a,d,c)}function P(a,
b,c){var f,e,g=d(b);if(c){var h=d(c);f=h.offset();e=--f.left;f=f.top+h.height()}else h=a.$toolbar,f=h.offset(),e=Math.floor((h.width()-g.width())/2)+f.left,f=f.top+h.height()-2;p();g.css({left:e,top:f}).show();c&&(d.data(b,C,c),g.bind(o,{popup:b},d.proxy(ga,a)));setTimeout(function(){g.find(":text,textarea").eq(0).focus().select()},100)}function s(a){return a.$area.is(":visible")}function G(a,b){var c=a.$area.val(),f=a.options,e=f.updateFrame,g=d(a.doc).find("body");if(e){var h=E(c);if(b&&a.areaChecksum==
h)return;a.areaChecksum=h}c=e?e(c):c;c=c.replace(/<(?=\/?script)/ig,"&lt;");if(f.updateTextArea)a.frameChecksum=E(c);c!=g.html()&&(g.html(c),d(a).triggerHandler(z))}function $(a,b){var c=d(a.doc.body).html(),f=a.options,e=f.updateTextArea,g=a.$area;if(e){var h=E(c);if(b&&a.frameChecksum==h)return;a.frameChecksum=h}c=e?e(c):c;if(f.updateFrame)a.areaChecksum=E(c);c!=g.val()&&(g.val(c),d(a).triggerHandler(z))}d.cleditor={defaultOptions:{width:500,height:250,controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source",
colors:"FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana",sizes:"1,2,3,4,5,6,7",styles:[["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],
["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],useCSS:!1,docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',docCSSFile:"",bodyStyle:"margin:4px; font:10pt Arial,Verdana; cursor:text"},buttons:{init:"bold,,|italic,,|underline,,|strikethrough,,|subscript,,|superscript,,|font,,fontname,|size,Font Size,fontsize,|style,,formatblock,|color,Font Color,forecolor,|highlight,Text Highlight Color,hilitecolor,color|removeformat,Remove Formatting,|bullets,,insertunorderedlist|numbering,,insertorderedlist|outdent,,|indent,,|alignleft,Align Text Left,justifyleft|center,,justifycenter|alignright,Align Text Right,justifyright|justify,,justifyfull|undo,,|redo,,|rule,Insert Horizontal Rule,inserthorizontalrule|image,Insert Image,insertimage,url|link,Insert Hyperlink,createlink,url|unlink,Remove Hyperlink,|cut,,|copy,,|paste,,|pastetext,Paste as Text,inserthtml,|print,,|source,Show Source"},
imagesPath:function(){return X()}};d.fn.cleditor=function(a){var b=d([]);this.each(function(c,f){if(f.tagName=="TEXTAREA"){var e=d.data(f,da);e||(e=new cleditor(f,a));b=b.add(e)}});return b};var H="backgroundColor",C="button",y="buttonName",z="change",da="cleditor",o="click",m="disabled",n="<div>",I="unselectable",ba="cleditorButton",ca="cleditorDisabled",ha="cleditorPopup",U="cleditorList",ia="cleditorColor",D="cleditorPrompt",ma="cleditorMsg",i=d.browser.msie,la=/msie\s6/i.test(navigator.userAgent),
N=/iphone|ipad|ipod/i.test(navigator.userAgent),k={},ea,r=d.cleditor.buttons;d.each(r.init.split("|"),function(a,b){var c=b.split(","),d=c[0];r[d]={stripIndex:a,name:d,title:c[1]===""?d.charAt(0).toUpperCase()+d.substr(1):c[1],command:c[2]===""?d:c[2],popupName:c[3]===""?d:c[3]}});delete r.init;cleditor=function(a,b){var c=this;c.options=b=d.extend({},d.cleditor.defaultOptions,b);var f=c.$area=d(a).hide().data(da,c).blur(function(){G(c,!0);c.customBlur()}),e=c.$main=d(n).addClass("cleditorMain").width(b.width).height(b.height),
g=c.$toolbar=d(n).addClass("cleditorToolbar").appendTo(e),h=d(n).addClass("cleditorGroup").appendTo(g);d.each(b.controls.split(" "),function(a,f){if(f==="")return!0;if(f=="|")d(n).addClass("cleditorDivider").appendTo(h),h=d(n).addClass("cleditorGroup").appendTo(g);else{var e=r[f],m=d(n).data(y,e.name).addClass(ba).attr("title",e.title).bind(o,d.proxy(fa,c)).appendTo(h).hover(Q,R),k={};if(e.css)k=e.css;else if(e.image)k.backgroundImage="url("+X()+e.image+")";if(e.stripIndex)k.backgroundPosition=e.stripIndex*
-24;m.css(k);i&&m.attr(I,"on");e.popupName&&T(e.popupName,b,e.popupClass,e.popupContent,e.popupHover)}});e.insertBefore(f).append(f);ea||(d(document).click(function(a){a=d(a.target);a.add(a.parents()).is("."+D)||p()}),ea=!0);e.on("resize",function(){K(c)});K(c)};var A=cleditor.prototype;d.each([["clear",function(a){a.$area.val("");G(a)}],["disable",V],["execCommand",u],["focus",v],["hidePopups",p],["sourceMode",s,!0],["refresh",K],["select",function(a){setTimeout(function(){s(a)?a.$area.select():
u(a,"selectall")},0)}],["selectedHTML",function(a){F(a);a=w(a);if(i&&a)return a.htmlText;var b=d("<layer>")[0];b.appendChild(a.cloneContents());return b.innerHTML},!0],["selectedText",O,!0],["showMessage",B],["updateFrame",G],["updateTextArea",$],["reSize",aa],["offCustomEvent",J],["onCustomEvent",Y]],function(a,b){A[b[0]]=function(){for(var a=[this],d=0;d<arguments.length;d++)a.push(arguments[d]);a=b[1].apply(this,a);if(b[2])return a;return this}});A.change=function(a){var b=d(this);return a?b.bind(z,
a):b.trigger(z)};A.customBlur=function(a){var b=d(this);if(d.isFunction(a))return b.bind("custom_blur",a);else if(typeof a=="boolean"&&!a)return b.unbind("custom_blur");else if(typeof a=="undefined")return b.trigger("custom_blur")};A.customFocus=function(a){var b=d(this);if(d.isFunction(a))return b.bind("custom_focus",a);else if(typeof a=="boolean"&&!a)return b.unbind("custom_focus");else if(typeof a=="undefined")return b.trigger("custom_focus")};A.customKeyup=function(a){var b=d(this);if(d.isFunction(a))return b.bind("custom_keyup",
a);else if(typeof a=="boolean"&&!a)return b.unbind("custom_keyup");else if(typeof a=="undefined")return b.trigger("custom_keyup")};var L=!1})(jQuery);jQuery.cookie=function(d,c,a){if(typeof c!="undefined"){a=a||{};if(c===null)c="",a=$.extend({},a),a.expires=-1;var b="";if(a.expires&&(typeof a.expires=="number"||a.expires.toUTCString))typeof a.expires=="number"?(b=new Date,b.setTime(b.getTime()+a.expires*864E5)):b=a.expires,b="; expires="+b.toUTCString();var e=a.path?"; path="+a.path:"",f=a.domain?"; domain="+a.domain:"",a=a.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(c),b,e,f,a].join("")}else{c=null;if(document.cookie&&document.cookie!=
""){a=document.cookie.split(";");for(b=0;b<a.length;b++)if(e=jQuery.trim(a[b]),e.substring(0,d.length+1)==d+"="){c=decodeURIComponent(e.substring(d.length+1));break}}return c}};(function(c){typeof define==="function"&&define.amd?define(["jquery"],c):typeof exports==="object"?module.exports=c:c(jQuery)})(function(c){function k(b){var a=b||window.event,g=[].slice.call(arguments,1),d=0,e=0,h=0,f=0,f=0,b=c.event.fix(a);b.type="mousewheel";if(a.wheelDelta)d=a.wheelDelta;a.detail&&(d=a.detail*-1);a.deltaY&&(d=h=a.deltaY*-1);if(a.deltaX)e=a.deltaX,d=e*-1;if(a.wheelDeltaY!==void 0)h=a.wheelDeltaY;a.wheelDeltaX!==void 0&&(e=a.wheelDeltaX*-1);f=Math.abs(d);if(!j||f<j)j=f;f=Math.max(Math.abs(h),
Math.abs(e));if(!i||f<i)i=f;a=d>0?"floor":"ceil";d=Math[a](d/j);e=Math[a](e/i);h=Math[a](h/i);g.unshift(b,d,e,h);return(c.event.dispatch||c.event.handle).apply(this,g)}var l=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],g="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],j,i;if(c.event.fixHooks)for(var m=l.length;m;)c.event.fixHooks[l[--m]]=c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=
g.length;b;)this.addEventListener(g[--b],k,!1);else this.onmousewheel=k},teardown:function(){if(this.removeEventListener)for(var b=g.length;b;)this.removeEventListener(g[--b],k,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});if(!this.JSON)this.JSON={};
(function(){function k(a){return a<10?"0"+a:a}function o(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var c=r[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function l(a,i){var c,d,h,m,g=e,f,b=i[a];b&&typeof b==="object"&&typeof b.toJSON==="function"&&(b=b.toJSON(a));typeof j==="function"&&(b=j.call(i,a,b));switch(typeof b){case "string":return o(b);case "number":return isFinite(b)?String(b):"null";case "boolean":case "null":return String(b);
case "object":if(!b)return"null";e+=n;f=[];if(Object.prototype.toString.apply(b)==="[object Array]"){m=b.length;for(c=0;c<m;c+=1)f[c]=l(c,b)||"null";h=f.length===0?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(j&&typeof j==="object"){m=j.length;for(c=0;c<m;c+=1)d=j[c],typeof d==="string"&&(h=l(d,b))&&f.push(o(d)+(e?": ":":")+h)}else for(d in b)Object.hasOwnProperty.call(b,d)&&(h=l(d,b))&&f.push(o(d)+(e?": ":":")+h);h=f.length===0?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+
g+"}":"{"+f.join(",")+"}";e=g;return h}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,i,c){var d;n=e="";if(typeof c==="number")for(d=0;d<c;d+=1)n+=" ";else typeof c==="string"&&(n=c);if((j=i)&&typeof i!=="function"&&(typeof i!=="object"||typeof i.length!=="number"))throw Error("JSON.stringify");return l("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&typeof b==="object")for(g in b)Object.hasOwnProperty.call(b,g)&&(f=c(b,g),f!==void 0?b[g]=f:delete b[g]);return e.call(a,d,b)}var d,a=String(a);q.lastIndex=0;q.test(a)&&(a=a.replace(q,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof e==="function"?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})();var dhtmlXVaultObject=function(){var a=navigator.appName;this.IE=a.indexOf("Explorer")>-1;this.Opera=a.indexOf("Opera")>-1;this.isUploadFileAll=this.isUploadFile=!1;this.counter=1;this.baseUrl=this.sessionId=this.idRowSelected=null;this.imPath="imgs/";this.allowTypes=this.limitTypes=this.uploadMode=this.colName=this.pkVal=this.primaryKey=this.tableName=this.filePath="";this.isVirtual=!1;this.strings={preview:mx.msg("UPLOAD_PREVIEW"),remove:mx.msg("UPLOAD_REMOVE"),upload:mx.msg("UPLOAD"),done:mx.msg("UPLOAD_COMPLETE"),
undone:mx.msg("UPLOAD_UNSTART"),error:mx.msg("UPLOAD_ERROR"),btnAdd:mx.msg("UPLOAD_BTN_ADD"),btnUpload:mx.msg("UPLOAD_BTN_UPLOAD"),btnClean:mx.msg("UPLOAD_BTN_CLEAN"),btnClose:mx.msg("UPLOAD_BTN_CLOSE")};this.strings.errors={TooBig:"File is too big ({0};bytes).\nMax allowed size is {1}.",PostSize:"Undefined server error. Possible issues:\n- Unicode file name incorrectly processed by the server;\n- File size is bigger than server's post-request limit ({0})."};this.filesLimit=0;this.fileList={};this.items=
[];this.uploadedCount=0;this.inpMAX_FILE_SIZE=this.progressDemo=null;this.MAX_FILE_SIZE=943718400;this.owner=this.inpUPLOAD_IDENTIFIER=null};dhtmlXVaultObject.prototype.setBaseUrl=function(a){this.baseUrl=a};dhtmlXVaultObject.prototype.setImagePath=function(a){this.imPath=a;this.preLoadImages()};
dhtmlXVaultObject.prototype.create=function(a){this.owner=a;this.type=a.type;this.setFilesLimit(a.filesLimit);this.limitTypes=a.limitTypes;this.allowTypes=a.allowTypes;this.filePath=a.filePath;this.maxSize=a.maxSize;this.totalMaxSize=a.totalMaxSize;if(this.IE&&this.maxSize!=-1&&!dhtmlXVaultObject.fso)try{dhtmlXVaultObject.fso=new ActiveXObject("Scripting.FileSystemObject")}catch(b){}this.isVirtual=a.isVirtual;if(this.type!="path")this.tableName=a.tableName,this.primaryKey=a.primaryKey,this.pkVal=
a.pkVal,this.colName=a.colName,this.uploadMode=a.uploadMode;var c=parseInt(a.height)-32;this.parentObject=a.$e[0];this.parentObject.style.position="relative";try{this.parentObject.appendChild("<iframe src='about:blank' id='dhtmlxVaultUploadFrame' name='dhtmlxVaultUploadFrame' style='display:none;position:absolute;left:-1000px;width:1px;height:1px'></iframe>")}catch(d){}this.containerDiv=document.createElement("div");this.containerDiv.className="dhxvlt_panel2border";this.containerDiv.style.cssText=
"position:absolute;overflow-y:auto;height:"+(c-10)+"px;background-color:#FFFFFF;top:10px;left:10px;z-index:1;width:412px";this.parentObject.appendChild(this.containerDiv);this.container=document.createElement("div");this.container.className="dhxvlt_panelbg dhxvlt_panelborder";this.container.style.position="absolute";var f="7px",h="";a.context&&(f=0,h="<td style='width:78px;height:32px;padding-right: 7px;' align='right'><div class='dhxvlt_rbtn'><span class='dhxvlt_rbtn3'></span><span class='dhxvlt_rbtn2'><nobr><img src='"+
this.imPath+"close.png' style='width:10px;height:10px;margin-top: 6px;'/>"+this.strings.btnClose+"</nobr></span><span class='dhxvlt_rbtn1'></span></div></td>");this.container.innerHTML="<table border='0' width='435px'><tr><td style='width:416px' colspan='3' align='center' id='cellContainer'><div style='height:"+c+"px'></div></td></tr><tr id='_btns'><td style='width:78px;height:32px;padding-left: 8px' align='left'><div class='dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2'><nobr id='_add_file'><img src='"+
this.imPath+"add.gif'/> "+this.strings.btnAdd+"</nobr></span><span class='dhxvlt_lbtn3'></span></div><div class='btnAddDiv'><input type='file' id='file' name='file' value='' class='dhxvlt_hidden "+(this.Opera?"dhxvlt_fo":"")+"'/></div></td><td style='width:138px;height:32px' align='left'><div class='dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2' id='_upload_file'><nobr><img src='"+this.imPath+"upload.gif'/> "+this.strings.btnUpload+"</nobr></span><span class='dhxvlt_lbtn3'></span></div></td><td style='width:138px;height:32px;padding-right: "+
f+";' align='right'><div class='dhxvlt_rbtn'><span class='dhxvlt_rbtn3'></span><span class='dhxvlt_rbtn2' id='_clear_file'><nobr><img src='"+this.imPath+"clean.gif'/>"+this.strings.btnClean+"</nobr></span><span class='dhxvlt_rbtn1'></span></div></td>"+h+"</tr></table>";this.parentObject.appendChild(this.container);var g=this;this.container.childNodes[0].rows[1].cells[1].childNodes[0].onclick=function(){g.uploadAllItems()};this.container.childNodes[0].rows[1].cells[2].childNodes[0].onclick=function(){g.removeAllItems();
g.changeErrorState()};if(a.context)this.container.childNodes[0].rows[1].cells[3].childNodes[0].onclick=function(){g.close()};this.fileContainer=this.container.childNodes[0].rows[1].cells[0].childNodes[1];a=document.getElementById("_fileSelectionHiddenArea");a==null&&(c=document.createElement("div"),$(c).attr("id","_fileSelectionHiddenArea"),$(c).css({width:"1px",height:"1px"}),a=c,this.fileContainer.appendChild(c));this.currentFile=this.fileContainer.childNodes[0];this.currentFile.onchange=function(){g._file_change(this)};
this.IE&&$.browser.version=="8.0"?this.uploadForm=document.createElement("<form enctype='multipart/form-data' target='dhtmlxVaultUploadFrame' method='post'>"):(this.uploadForm=document.createElement("form"),this.uploadForm.method="post",this.uploadForm.encoding="multipart/form-data",this.uploadForm.target="dhtmlxVaultUploadFrame");this.container.appendChild(this.uploadForm);this.inpMAX_FILE_SIZE=document.createElement("input");this.inpMAX_FILE_SIZE.type="hidden";this.inpMAX_FILE_SIZE.name="xMAX_FILE_SIZE";
this.inpMAX_FILE_SIZE.value=this.MAX_FILE_SIZE;this.uploadForm.appendChild(this.inpMAX_FILE_SIZE);this.inpUPLOAD_IDENTIFIER=document.createElement("input");this.inpUPLOAD_IDENTIFIER.type="hidden";this.inpUPLOAD_IDENTIFIER.name="UPLOAD_IDENTIFIER";this.uploadForm.appendChild(this.inpUPLOAD_IDENTIFIER);this.tblListFiles=null;this.tblProgressBar=this.createProgressBar();this.percentPanel=this.createPercentPanel();this.containerDiv.appendChild(this.percentPanel);this.progressDemo=this.createProgressDemo();
a=this.getUploadedFiles();this.owner.fileNames="";for(c=0;c<a.length;c++)g.addFile(a[c].attName,!1,a[c].attSize),this.owner.fileNames=this.owner.fileNames+a[c].attName+";"};
dhtmlXVaultObject.prototype._file_change=function(a){if(window.navigator.userAgent.indexOf("MSIE")>-1){a.select();document.getElementById("_fileSelectionHiddenArea").focus();var b=document.selection.createRange().text;if(this.IE&&($.browser.version=="9.0"||$.browser.version=="8.0"||$.browser.version=="7.0"||$.browser.version=="6.0"))if(dhtmlXVaultObject.fso)var c=dhtmlXVaultObject.fso.GetFile(b).size;else this.maxSize>0&&(c=!1)}this.addFile(b,!0,c)||this._cloneFile(a)};
dhtmlXVaultObject.prototype._cloneFile=function(a){var b=this,a=$(a),c=a.clone().val("");c.on("change",function(){b._file_change(c.get(0))});this.currentFile=c[0];a.after(c);a.remove()};dhtmlXVaultObject.prototype.createXMLHttpRequest=function(){var a=null;window.ActiveXObject?a=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(a=new XMLHttpRequest);return a};dhtmlXVaultObject.prototype.getFileName=function(a){a=a.split("\\");a=a[a.length-1];a=a.split("/");return a[a.length-1]};
dhtmlXVaultObject.prototype.getFileType=function(a){a=a.split(".");return a[a.length-1].toLowerCase()};dhtmlXVaultObject.prototype.selectItem=function(a){var b=this.getCurrentRowListFiles(a);if(this.idRowSelected){var c=this.getCurrentRowListFiles(this.idRowSelected);if(c){if(c.id!=b.id)b.className="dhxvlt_rowsel",this.idRowSelected=a,c.className="dhxvlt_row"}else b.className="dhxvlt_rowsel",this.idRowSelected=a}else b.className="dhxvlt_rowsel",this.idRowSelected=a;this.onitemselected({item:this.getItemInfo(this.idRowSelected)})};
dhtmlXVaultObject.prototype.downLoad=function(a,b){if($isEmpty(b)||document.getElementById("rowListFiles"+b).attributes.isUpload.value=="true"){var c=a.replace(/\+/g,"%2B"),d=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",f=d?"&filePath="+d:"";this.type=="path"?window.open(encodeURI(encodeURI(this.baseUrl+"?option=download&filePath="+d+"&fileName="+c+"&"+this.rnd()))):(this.type=="form"||this.type=="grid")&&window.open(encodeURI(encodeURI(this.baseUrl+"?option=download&tableName="+this.tableName+
"&pkVal="+this.pkVal+"&colName="+this.colName+"&fileName="+c+"&uploadMode="+this.uploadMode+"&isVirtual="+this.isVirtual+f+"&"+this.rnd())))}};dhtmlXVaultObject.prototype.enableAddButton=function(a){this.currentFile.disabled=!a;var b=this.currentFile.parentNode.previousSibling.childNodes[1].childNodes[0].childNodes[0];b.src=this.imPath+(a?"add.gif":"add_d.gif");b.parentNode.className=a?"":"dhxvlt_dis"};
dhtmlXVaultObject.prototype.readOnly=function(a){var b=this;a?(this.enableAddButton(!1),a=this.container.childNodes[0].rows[1].cells[1].childNodes[0],a.onclick=null,$(a).find("nobr").addClass("dhxvlt_dis"),a=this.container.childNodes[0].rows[1].cells[2].childNodes[0],a.onclick=null,$(a).find("nobr").addClass("dhxvlt_dis"),this.tblListFiles&&(a=$(this.tblListFiles).find("tr[fileItemId]"),a.each(function(a,b){$(b).attr("fileItemId");$(b).attr("fileItemName");$(b).find("td[removeCell=removeCell]").children().each(function(a,
b){$(b).attr("id")=="dhxvlt_icoremove"&&$(b).hide();$(b)[0].onclick=null})}))):(this.filesLimit<=0?this.enableAddButton(!0):this.checkFilesLimit(),a=this.container.childNodes[0].rows[1].cells[1].childNodes[0],a.onclick=function(){b.uploadAllItems()},$(a).find("nobr").removeClass("dhxvlt_dis"),a=this.container.childNodes[0].rows[1].cells[2].childNodes[0],a.onclick=function(){b.removeAllItems()},$(a).find("nobr").removeClass("dhxvlt_dis"),this.tblListFiles&&(a=$(this.tblListFiles).find("tr[fileItemId]"),
a.each(function(a,d){var f=$(d).attr("fileItemId"),h=$(d).attr("fileItemName");$(d).find("td[removeCell=removeCell]").children().each(function(a,c){$(c).attr("id")=="dhxvlt_icoremove"&&$(c).show();$(c)[0].onclick=function(a){b.removeItem(f,h);a&&a.stopPropagation()}})})))};dhtmlXVaultObject.prototype.checkFilesLimit=function(){this.filesLimit>0&&this.enableAddButton(this.getTotalFilesCount()<this.filesLimit)};
dhtmlXVaultObject.prototype.getTotalFileSize=function(){var a=0;this.tblListFiles&&$(this.tblListFiles).find("tr[fileItemId]").each(function(b,c){var d=$(c).attr("fileItemSize");d||(d=0);a+=parseInt(d)});return a};
dhtmlXVaultObject.prototype.addFile=function(a,b,c){var d=this,f=this.createId(),h=a;if(b){var g=this.currentFile,e=this.getNames(),j=this.getFileName(g.value);if((";"+e).indexOf(";"+j+";")>-1){mx.indicate("info",mx.msg("UPLOAD_REPEATEDLY"));return}if(g.files&&g.files[0]){if(c=g.files[0].size,this.maxSize!=-1&&g.files[0].size>this.maxSize*1024){mx.indicate("warn",mx.msg("UPLOAD_SIZE_LIMIT",[this.maxSize+"KB"]));return}}else if(c>0||c===!1)if(this.maxSize!=-1&&(c>this.maxSize*1024||c===!1)){mx.indicate("warn",
mx.msg("UPLOAD_SIZE_LIMIT",[this.maxSize+"KB"]));return}if(this.totalMaxSize!=-1){if(c===!1){mx.indicate("warn","\u65e0\u6cd5\u83b7\u53d6\u6dfb\u52a0\u6587\u4ef6\u7684\u5927\u5c0f,\u8bf7\u964d\u4f4e\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e!");return}e=this.getTotalFileSize();e+=c;if(this.totalMaxSize*1024<e){mx.indicate("warn",mx.msg("UPLOAD_TOTALSIZE_LIMIT",[this.totalMaxSize+"KB"]));return}}if(this.allowTypes!=null&&this.allowTypes!=""&&(","+this.allowTypes.toLowerCase()+",").indexOf(","+this.getFileType(g.value)+
",")==-1){this.markError(!0,mx.msg("FILE_TYPE_ALLOWED",[this.allowTypes]),"bottom");mx.indicate("info",mx.msg("ERR_FILE_TYPE_LIMITED"));return}if($notEmpty(this.limitTypes)&&(","+this.limitTypes.toLowerCase()+",").indexOf(","+this.getFileType(g.value)+",")>=0){this.markError(!0,mx.msg("FILE_TYPE_LIMITED",[this.limitTypes]),"bottom");mx.indicate("info",mx.msg("ERR_FILE_TYPE_LIMITED"));return}this.changeErrorState();g.id="file"+f;g.name=g.id;try{if(g.value=="")return;if(!this.onAddFile(g)){g.value=
"";return}}catch(k){}this.fileList[f]={id:f,name:g.value,path:a,uploaded:!1,error:!1};g.disabled=!0;g.style.display="none";this.uploadForm.appendChild(g);a=document.createElement("div");$(a).css({width:"1px",height:"1px"});this.fileContainer.appendChild(a);var i=document.createElement("input");i.type="file";i.className="dhxvlt_hidden"+(this.Opera?" dhxvlt_fo":"");i.id="file";i.name=i.id;this.currentFile=i;d=this;i.onchange=function(){d._file_change(i)};this.fileContainer.appendChild(i);e=document.getElementById("_fileSelectionHiddenArea");
e==null&&(a=document.createElement("div"),$(a).attr("id","_fileSelectionHiddenArea"),$(a).css({width:"1px",height:"1px"}),e=a,this.fileContainer.appendChild(a));h=this.getFileName(g.value)}g=this.getImgFile(h);a=this.containerDiv;if(this.tblListFiles==null)this.tblListFiles=this.createTblListFiles(),a.appendChild(this.tblListFiles);a=this.tblListFiles.insertRow(this.tblListFiles.rows.length);a.setAttribute("fileItemId",f);a.setAttribute("id","rowListFiles"+f);a.setAttribute("fileItemSize",c+"");a.setAttribute("fileItemName",
h);b?a.setAttribute("isUpload","false"):a.setAttribute("isUpload","true");a.onclick=function(){d.selectItem(f)};a.ondblclick=function(){d.downLoad(h,f)};e=document.createElement("td");e.align="center";a.appendChild(e);c=document.createElement("table");e.appendChild(c);c.style.cssText="border-bottom:1px solid #E2E2E2";c.cellPadding="0px";c.cellSpacing="0px";c.border="0px";c.id="tblContent"+f;a=c.insertRow(c.rows.length);e=document.createElement("td");e.rowSpan=2;e.align="center";this.IE?(j=document.createElement("span"),
j.style.cssText="width:40px;height:40px;display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+g+" ')",e.appendChild(j)):e.innerHTML="<img src='"+g+"'/>";e.style.width="60px";a.appendChild(e);e=document.createElement("td");e.align="left";e.vAlign="bottom";e.style.cssText="width:300px;height:30px";e.innerHTML="<div class='fileName'><div class='fileName'>"+h+"</div></div> ";e.className="fileName";a.appendChild(e);e=document.createElement("td");e.style.cssText="width:140px;height:30px";
if(".jpg,.jpeg,.gif,.png,.bmp,.tiff".indexOf(h.substring(h.lastIndexOf(".")).toLowerCase())>-1)e.innerHTML="<div title='"+this.strings.preview+"' id='dhxvlt_icopreview'></div><a href='javascript:void(0)' class='link dhxvlt_txtpreview'>"+this.strings.preview+"</a>",e.firstChild.onclick=e.childNodes[1].onclick=function(a){d.previewItem(f,h);a&&a.stopPropagation()};e.vAlign="bottom";e.align="center";a.appendChild(e);e=document.createElement("td");e.setAttribute("removeCell","removeCell");e.style.cssText=
"width:140px;height:30px";e.innerHTML="<div title='"+this.strings.remove+"' id='dhxvlt_icoremove'></div><a href='javascript:void(0)' class='link dhxvlt_txtremove'>"+this.strings.remove+"</a>";e.firstChild.onclick=e.childNodes[1].onclick=function(a){d.removeItem(f,h);d.changeErrorState();a&&a.stopPropagation()};e.vAlign="bottom";e.align="center";a.appendChild(e);a=c.insertRow(c.rows.length);e=document.createElement("td");e.align="left";e.style.cssText="width:300px;height:30px";a.appendChild(e);e=document.createElement("td");
e.style.cssText="width:140px;height:30px";a.appendChild(e);e=document.createElement("td");e.style.cssText="width:140px;height:30px";a.appendChild(e);e.innerHTML="<a href='javascript:void(0)' class='link' style='visibility:hidden'>"+this.strings.upload+"</a>";e.firstChild.onclick=function(){d.uploadFile(f);return!1};e.vAlign="middle";e.align="center";a.appendChild(e);b&&(this.showMessageInfo(f,this.strings.undone),this.showPreviewImg(f,!0));this.checkFilesLimit();return!0};
dhtmlXVaultObject.prototype.markError=function(a,b,c){var d=$(this.containerDiv);a?(c==void 0&&(c="bottom"),d.addClass("error"),d.toolTip({content:b,defaultPosition:c}),$("#toolTip_holder").css("z-index",9999999)):(d.removeClass("error"),d.toolTip("destroy"))};dhtmlXVaultObject.prototype.changeErrorState=function(){var a=!1;this.tblListFiles&&$(this.tblListFiles).find("tr[fileItemId]").each(function(b,c){if($(c).attr("uploadTypeError")=="true")return a=!0,!1});a||this.markError(!1)};
dhtmlXVaultObject.prototype.getFileExtension=function(a){var b="",a=a.split(".");a.length>1&&(b=a[a.length-1].toLowerCase());return b};
dhtmlXVaultObject.prototype.getImgFile=function(a){var b=this.imPath+"ico_image.png",c=this.imPath+"ico_video.png",d=this.imPath+"ico_sound.png",f=this.imPath+"ico_zip.png",h=this.imPath+"ico_file.png",a=this.getFileExtension(a);if(a=="")return h;if("jpg,jpeg,gif,png,bmp,tiff".indexOf(a)!=-1)return b;if("avi,mpg,mpeg,rm,move".indexOf(a)!=-1)return c;if("wav,mp3,ogg".indexOf(a)!=-1)return d;if("zip,rar,tar,tgz,arj".indexOf(a)!=-1)return f;return h};dhtmlXVaultObject.prototype.createId=function(){return this.counter++};
dhtmlXVaultObject.prototype.createTblListFiles=function(){var a=document.createElement("table");a.id="tblListFiles";a.style.backgroundColor="#FFFFFF";a.cellPadding="0";a.cellSpacing="0";a.border="0";return a};
dhtmlXVaultObject.prototype.removeItem=function(a,b){var c=b.replace(/\+/g,"%2B");if(confirm(mx.msg("CONFIRM_DELETE",[c]))){var d=this.createXMLHttpRequest();d.open("POST",this.baseUrl,!1);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var f=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",h=f?"&filePath="+f:"";this.type=="path"?d.send("option=delete&filePath="+f+"&fileName="+c+"&"+this.rnd()):(this.type=="form"||this.type=="grid")&&d.send("option=delete&tableName="+
this.tableName+"&primaryKey="+this.primaryKey+"&pkVal="+this.pkVal+"&colName="+this.colName+"&fileName="+c+"&uploadMode="+this.uploadMode+"&isVirtual="+this.isVirtual+h+"&"+this.rnd());if(d.status==200)$notEmpty(d.responseText)&&(c=this.getCurrentRowListFiles(a),c.parentNode.removeChild(c),delete this.fileList[a],this.items.remove(this.items[b]),delete this.items[b],this.checkFilesLimit(),this.owner.removeFile(b));else throw"error";}};
dhtmlXVaultObject.prototype.previewItem=function(a,b){if(this.fileList[a])this.owner.preview(this.fileList[a]);else{var c=null;if($isEmpty(a)||document.getElementById("rowListFiles"+a).attributes.isUpload.value=="true"){var d=b.replace(/\+/g,"%2B"),f=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",h=f?"&filePath="+f:"";if(this.type=="path")c=encodeURI(encodeURI(this.baseUrl+"?option=download&filePath="+f+"&fileName="+d+"&"+this.rnd()));else if(this.type=="form"||this.type=="grid")c=encodeURI(encodeURI(this.baseUrl+
"?option=download&tableName="+this.tableName+"&pkVal="+this.pkVal+"&colName="+this.colName+"&fileName="+d+"&uploadMode="+this.uploadMode+"&isVirtual="+this.isVirtual+h+"&"+this.rnd()))}this.owner.preview(c)}};
dhtmlXVaultObject.prototype.close=function(){var a=!1;if(this.tblListFiles!=null&&this.tblListFiles.rows.length>0)for(var b=0;b<this.tblListFiles.rows.length;b++)if(this.tblListFiles.rows[b].attributes.isUpload.value=="false"){a=!0;break}(!a||a&&confirm(mx.msg("CONFIRM_CLOSE")))&&this.owner&&$.isFunction(this.owner._closeWindow)&&this.owner._closeWindow()};
dhtmlXVaultObject.prototype.removeErrorFileItem=function(){var a=this;this.tblListFiles&&$(this.tblListFiles).find("tr[fileItemId]").each(function(b,c){var d=$(c);if(d.attr("isUpload")=="error"){var f=d.attr("fileItemId");a.owner.removeFile(a.getFileName(d.attr("fileItemName")));a.fileList[f]&&delete a.fileList[f];d.remove()}})};
dhtmlXVaultObject.prototype.removeAllItems=function(){if(!this.isUploadFile&&confirm(mx.msg("CONFIRM_DELETE_ALL"))){var a=this.createXMLHttpRequest();a.open("POST",this.baseUrl,!1);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var b=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",c=b?"&filePath="+b:"";this.type=="path"?a.send("option=deleteAll&filePath="+b+"&"+this.rnd()):(this.type=="form"||this.type=="grid")&&a.send("option=deleteAll&tableName="+this.tableName+
"&primaryKey="+this.primaryKey+"&pkVal="+this.pkVal+"&colName="+this.colName+"&uploadMode="+this.uploadMode+"&isVirtual="+this.isVirtual+c+"&"+this.rnd());if(a.status==200){if($notEmpty(a.responseText)){if(this.tblListFiles!=null&&(a=this.tblListFiles.rows.length,a>0))for(b=0;b<a;b++)this.tblListFiles.deleteRow(0);this.fileList={};this.items=[];this.owner.fileNames=""}this.markError(!1)}else throw"error";}this.checkFilesLimit()};
dhtmlXVaultObject.prototype.uploadAllItems=function(){var a=-1;if(this.tblListFiles!=null&&this.tblListFiles.rows.length>0){for(var b=0;b<this.tblListFiles.rows.length;b++)if(this.tblListFiles.rows[b].attributes.isUpload.value=="false"){a=b;this.owner&&this.owner.parent&&this.owner.parent.setBusy&&this.owner.parent.setBusy();break}if(a!=-1)this.isUploadFileAll=!0,this.uploadFile(this.tblListFiles.rows[b].attributes.fileItemId.value);else{if(this.isUploadFileAll)try{this.onUploadComplete(this.objToArray(this.fileList))}catch(c){}this.fileList=
{};this.isUploadFileAll=!1;this.owner&&this.owner.parent&&this.owner.parent.setBusy&&this.owner.parent.setBusy(!1)}}};dhtmlXVaultObject.prototype.objToArray=function(a){var b=[],c;for(c in a)b[b.length]=a[c];return b};
dhtmlXVaultObject.prototype.createProgressDemo=function(){var a=this.imPath+"pb_demoupload.gif",b=document.createElement("table");b.cellPadding="0";b.cellSpacing="0";b.border="0";b.style.cssText="height:10px;width:153px;display:none;";b.id="progress";var c=b.insertRow(b.rows.length),d=document.createElement("td");d.style.cssText="font-size:1px;border:1px solid #A9AEB3;";d.innerHTML="<img src="+a+" style = 'width:150px;height:8px;'/>";c.appendChild(d);return b};
dhtmlXVaultObject.prototype.createProgressBar=function(){var a=this.imPath+"pb_back.gif",b=this.imPath+"pb_empty.gif",c=document.createElement("table");c.cellPadding="0";c.cellSpacing="0";c.border="0";c.style.cssText="height:10px;width:149px;border-bottom:0px !important;display:none";c.id="progress";var d=c.insertRow(c.rows.length),f=document.createElement("td");f.style.cssText="font-size:1px;background-image:url("+a+");width:150px;height:10px;border:1px solid #A9AEB3";f.align="right";a=document.createElement("img");
a.src=b;a.style.width="100%";a.style.height="7px";f.appendChild(a);d.appendChild(f);return c};dhtmlXVaultObject.prototype.createPercentPanel=function(){var a=document.createElement("div");a.style.cssText="font-size:9px;height:8px;position:absolute;left:210px;width:20px;display:none;padding-top:0px";a.id="percentCompletedValue";return a};
dhtmlXVaultObject.prototype.endLoading=function(a,b){this.isUploadFile=!1;this.progressDemo.style.display="none";this.container.appendChild(this.progressDemo);var c=this.fileList[a];if(c)c.error=b,c.uploaded=!b;try{this.onFileUploaded(c)}catch(d){}if(b)try{this.onUploadComplete(this.objToArray(this.fileList))}catch(f){}(c=this.getCurrentInputFile(a))&&c.parentNode.removeChild(c)};
dhtmlXVaultObject.prototype.startRequest=function(a){var b=this.createXMLHttpRequest();b.open("POST",this.baseUrl,!1);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.send("option=startUpload&id="+a+"&"+this.rnd());if(b.status==200){if(!b.responseText)throw"error";this.sessionId=b.responseText;this.inpUPLOAD_IDENTIFIER.value=this.sessionId}else throw"error";};
dhtmlXVaultObject.prototype.sendIdSession=function(a){try{var b=this.createXMLHttpRequest();b.open("post",this.baseUrl,!1);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.send("option=getProgress&sessionId="+this.sessionId+"&"+this.rnd());if(b.status==200){var c=b.responseText;if(c){var d=c.split(":");if(d[0]=="error"){if(d[1]==-2){var f=document.getElementById("dhtmlxVaultUploadFrame");if(f)f.src="about:blank";alert(this.printf(this.strings.errors.TooBig,d[2],
d[3]))}else d[1]==-3&&alert(this.printf(this.strings.errors.PostSize,d[2]));throw"error";}b=null;c.charAt(2)==":"?(b=c.substring(3,c.length),c=parseInt(c.substring(0,2))):c=parseInt(c,10);if(isNaN(c))throw"error";if(c==-1)this.uploadedCount++,this.showMessageInfo(a,this.strings.done),this.showPreviewImg(a,!0),this.onitemuploaded(),this.endLoading(a,!1),this.isUploadFileAll&&this.uploadAllItems(),this.getUploadedFiles();else if(c==-2||c==-3||c==-4){this.endLoading(a,!0);this.isUploadFile=this.isUploadFileAll=
!1;this.showMessageInfo(a,this.strings.error);var h=this.getCurrentTblContent(a);h.parentNode.parentNode.attributes.isUpload.value="error";this.owner&&this.owner.parent&&this.owner.parent.setBusy&&this.owner.parent.setBusy(!1);if(c==-3)mx.indicate("info",mx.msg("FILE_TYPE_LIMITED",[b])),this.markError(!0,mx.msg("FILE_TYPE_LIMITED",[b]),"bottom"),h.parentNode.parentNode.attributes.uploadTypeError.value="true";else if(c==-4)mx.indicate("info",mx.msg("FILE_TYPE_ALLOWED",[b])),this.markError(!0,mx.msg("FILE_TYPE_ALLOWED",
[b]),"bottom"),h.parentNode.parentNode.attributes.uploadTypeError.value="true"}else{var g=this;try{window.setTimeout(function(){g.sendIdSession(a)},500)}catch(e){}}}}else throw"error";}catch(j){this.endLoading(a,!0),this.isUploadFile=this.isUploadFileAll=!1,this.showMessageInfo(a,this.strings.error),h=this.getCurrentTblContent(a),h.parentNode.parentNode.attributes.isUpload.value="error"}};
dhtmlXVaultObject.prototype.printf=function(){for(var a=arguments.length,b=arguments[0],c=1;c<a;c++)b=b.replace(RegExp("\\{"+(c-1)+"\\}","g"),arguments[c]);return b};dhtmlXVaultObject.prototype.showMessageInfo=function(a,b){var c=this.getCurrentTblContent(a);c.rows[1].cells[0].innerHTML="<font class='text'>"+b+"</font>";c.rows[1].cells[0].vAlign="top"};dhtmlXVaultObject.prototype.showPreviewImg=function(a,b){this.getCurrentTblContent(a).rows[0].cells[2].style.visibility=b?"visible":"hidden"};
dhtmlXVaultObject.prototype.showProgressInfo=function(a){this.tblProgressBar.rows[0].cells[0].firstChild.style.width=100-a+"%";this.percentPanel.innerHTML="<nobr>"+a+"%</nobr>"};dhtmlXVaultObject.prototype.getFilesCount=function(){return this.tblListFiles&&this.tblListFiles.rows?this.tblListFiles.rows.length:0};dhtmlXVaultObject.prototype.getTotalFilesCount=function(){var a=0;if(this.tblListFiles!=null&&this.tblListFiles.rows.length>0)for(var b=0;b<this.tblListFiles.rows.length;b++)a++;return a};
dhtmlXVaultObject.prototype.getCurrentRowListFiles=function(a){for(var b=0;b<this.tblListFiles.rows.length;b++)if(this.tblListFiles.rows[b].id=="rowListFiles"+a)return this.tblListFiles.rows[b]};dhtmlXVaultObject.prototype.getCurrentTblContent=function(a){for(var b=0;b<this.tblListFiles.rows.length;b++)if(this.tblListFiles.rows[b].cells[0].firstChild.id=="tblContent"+a)return this.tblListFiles.rows[b].cells[0].firstChild};
dhtmlXVaultObject.prototype.getFormField=function(a,b){for(var c=this.uploadForm.getElementsByTagName("input"),d=0;d<c.length;d++){var f=c[d];if(f.type.toLowerCase()==a&&f.name==b)return f}return null};dhtmlXVaultObject.prototype.getCurrentInputFile=function(a){return this.getFormField("file","file"+a)};
dhtmlXVaultObject.prototype.uploadFile=function(a){if(!this.isUploadFile){this.selectItem(a);var b=this.getCurrentTblContent(a);b.parentNode.parentNode.attributes.isUpload.value="true";b.parentNode.parentNode.setAttribute("uploadTypeError",!1);this.isUploadFile=!0;this.getCurrentInputFile(a).disabled=!1;this.progressDemo.style.display="inline";this.getCurrentRowListFiles(a).cells[0].firstChild.rows[1].cells[0].appendChild(this.progressDemo);try{this.startRequest(a),this.sendIdSession(a)}catch(c){this.endLoading(a,
!0);this.isUploadFile=this.isUploadFileAll=!1;b.rows[1].cells[0].innerHTML+="<font class='text'>"+this.strings.error+"</font>";b.rows[1].cells[0].vAlign="top";return}if(this.isUploadFile){var d={setUdsParam:function(a){d.udsParam=JSON.stringify(a)}},b={cancel:!1,item:d};this.onitemuploading(b);if(!b.cancel){b=b.item.udsParam;if(this.type=="path")this.uploadForm.action=encodeURI(this.baseUrl+"?option=upload&sessionId="+this.sessionId+"&fileName="+this.getFileName(this.getCurrentInputFile(a).value)+
"&userfile="+this.getCurrentInputFile(a).id+"&filePath="+this.filePath+"&"+this.rnd());else if(this.type=="form"||this.type=="grid")this.uploadForm.action=encodeURI(this.baseUrl+"?option=upload&sessionId="+this.sessionId+"&tableName="+this.tableName+"&primaryKey="+this.primaryKey+"&pkVal="+this.pkVal+"&colName="+this.colName+(this.filePath?"&filePath="+this.filePath:"")+"&uploadMode="+this.uploadMode+"&udsParam="+b+"&isVirtual="+this.isVirtual+"&"+this.rnd());a=document.createElement("iframe");a.id=
"myfrm";a.width=0;a.height=0;a.frameborder=0;a.src="about:blank";a.name="myfrm";document.body.appendChild(a);window.frames.myfrm.name="myfrm";this.uploadForm.target="myfrm";this.uploadForm.submit()}}}};
dhtmlXVaultObject.prototype.preLoadImages=function(){for(var a=["add.gif","add_d.gif","btn1.gif","btn2.gif","btn3.gif","clean.gif","upload.gif","delete.gif","ico_file.png","ico_image.png","ico_sound.png","ico_video.png","ico_zip.png","pb_back.gif","pb_demoupload.gif","pb_empty.gif","rowsel.gif"],b=Array(a.length),c=0;c<a.length;c++)b[c]=new Image,b[c].src=this.imPath+a[c]};dhtmlXVaultObject.prototype.setFilesLimit=function(a){a=parseInt(a);if(!isNaN(a)&&a>=0)this.filesLimit=a};
dhtmlXVaultObject.prototype.setFormField=function(a,b){if(this.uploadForm){var c=this.getFormField("hidden",a);if(b===null)c&&this.uploadForm.removeChild(c);else{if(!c)c=document.createElement("input"),c.type="hidden",c.name=a,this.uploadForm.appendChild(c);c.value=b}}else alert("Please call setFormField() method after create()!")};dhtmlXVaultObject.prototype.onAddFile=function(){return!0};dhtmlXVaultObject.prototype.onUploadComplete=function(a){for(var b=0;b<a.length;b++)this.owner.appendFile(this.getFileName(a[b].name))};
dhtmlXVaultObject.prototype.onFileUploaded=function(){var a=this.objToArray(this.fileList),b=!0;$(a).each(function(){if(!this.uploaded)return b=!1});if(b)this.onallitemuploaded()};dhtmlXVaultObject.prototype.onitemuploading=function(){};dhtmlXVaultObject.prototype.onitemuploaded=function(){};dhtmlXVaultObject.prototype.onitemselected=function(){};
dhtmlXVaultObject.prototype.getItemInfo=function(a){var b=this.fileList[a];b||(a=$(this.getCurrentTblContent(a)).find("div[class=fileName]:last").text(),a=$.trim(a),b=this.items[a]);return b};
dhtmlXVaultObject.prototype.getUploadedFiles=function(){var a=[],b=this.createXMLHttpRequest();b.open("POST",this.baseUrl,!1);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var c=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",d=c?"&filePath="+c:"";this.type=="path"?b.send("option=getFile&filePath="+c+"&"+this.rnd()):(this.type=="form"||this.type=="grid")&&b.send("option=getFile&tableName="+this.tableName+"&pkVal="+this.pkVal+"&colName="+this.colName+"&uploadMode="+
this.uploadMode+d+"&"+this.rnd());if(b.status==200&&$notEmpty(b.responseText))try{a=eval("("+b.responseText+")");this.items=[];for(b=0;b<a.length;b++)this.items.add(a[b]),this.items[a[b].attName]=a[b]}catch(f){}return a};dhtmlXVaultObject.prototype.rnd=function(){return"rnd="+Math.random()};
dhtmlXVaultObject.prototype.getNames=function(){var a="";this.owner&&this.owner.fileNames&&(a+=this.owner.fileNames);for(var b in this.fileList)if($isObject(this.fileList[b])&&$isString(this.fileList[b].name)){var c=this.fileList[b].name,c=this.getFileName(c);a+=c+";"}return a};
dhtmlXVaultObject.prototype.refreshPk=function(a,b){if($isArray(a)&&a.length>0){for(var c="",d=0;d<a.length;d++)$notEmpty(a[d].mxVirtualId)&&(c=c+a[d].mxVirtualId+":"+a[d][b]+";");d=this.createXMLHttpRequest();d.open("POST",this.baseUrl,!1);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var f=this.filePath?this.filePath.replace(/\+/g,"%2B"):"";d.send("option=refreshPk&tableName="+this.tableName+"&replaceValues="+c+(f?"&filePath="+f:"")+"&isVirtual="+this.isVirtual+
"&"+this.rnd());if(d.status==200&&$notEmpty(d.responseText))return"success"}};$ns("mx.bizlogic");$import("mx.rpc.RESTClient");
mx.bizlogic.BizModelAgentClass=function(){function m(){h==null&&(h=new mx.rpc.RESTClient);return h}function p(a,b){var c={successful:!0},g,e;if($instanceOf(b.dataForm,mx.datacontrols.DataForm))g=b.dataForm;if($isString(b.fieldName))e=b.fieldName;if($notEmpty(g)&&a&&a.successful){if($notEmpty(a.resultValue.items)&&a.resultValue.items.length>0){var f=a.resultValue.items[0];if($notEmpty(f)&&f.length>0){if($notEmpty(e)&&$notEmpty(g.getEditor(e)))g.getEditor(e).markError(!0,f[0].errorsToDefaulFormatString);
else{for(e=0;e<f.length;e++)g.getEditor(f[e].fieldName)!=null&&g.getEditor(f[e].fieldName).markError(!0,f[e].errorsToDefaulFormatString);g.entityContainer._submitting=!1}c.successful=!1}}}else mx.indicate("error",String.format(mx.msg("ERR_VALIDATING"),mx.msg("ERR_SERVICE_INVALID"))),c.successful=!1;return c}function q(a,b,c){var g={successful:!0,resultHint:""},c=c.resultValue.items;if(c==null||c.length==null)c=[];for(var b=$isString(b)?JSON.parse(b).items:b.items,e=0;e<b.length;e++){for(var f=b[e],
d=c[e],h=f[a.entityContainer.primaryKey]||f.mxVirtualId,l={},f=n(f),i=0;i<f.length;i++)l[f[i].key]=f[i].val;var f=l,j;for(j in f){for(var l=!1,i="",k=0;k<d.length;k++)if(d[k]&&d[k].error&&d[k].fieldName==j){l=!0;i=d[k].errorsToDefaulFormatString;break}l?(g.successful=!1,typeof j=="string"&&a.markError(h,j,!0,i)):typeof j=="string"&&a.markError(h,j,!1)}}return g}function n(a){var b=[],c;for(c in a)if($.isPlainObject(a[c]))for(var d=n(a[c]),e=0;e<d.length;e++)b.push({key:c+"."+d[e].key,val:d[e].val});
else b.push({key:c,val:a[c]});return b}var d=$extend(MXComponent);d.onvalidate=null;d.onsaving=null;d.onsaved=null;var o={},h=null;o.init=d.init;d.init=function(){o.init()};d.saveOne2Many=function(a,b,c,g,e,f){var h={items:[]};$.isPlainObject(b)?(b[c]=g,h.items.add(b),d.validate(a,JSON.stringify(h),f).successful?(b={cancel:!1},d.trigger("saving",b),b.cancel||(a={result:m().post(a+"save",JSON.stringify(h),e)},d.trigger("saved",a))):mx.indicate("warn",mx.msg("ERR_VALIDATING"))):mx.indicate("warn",mx.msg("ERR_VALIDATING"))};
d.validate=function(a,b,c){if($isEmpty(c)){c=b;b=null;b={};_datas=[];if(c.dataForm)_changeItem=c.dataForm.entityContainer._changedItems;else if(c.dataGrid)b=c.dataGrid.entityContainer._changedItems;$.each(b,function(a,b){_datas.add(b)});b=JSON.stringify({items:_datas})}if($isEmpty(a))return a={successful:!1,resultHint:mx.msg("ERR_VALIDATING")};if($isEmpty(b))return a={successful:!0};a=m().send(a+"validate","POST",b,!1,c);$notEmpty(a)&&$notEmpty(a.responseText)&&(a=JSON.parse(a.responseText));d.trigger("validate",
a);$.isPlainObject(c)&&(c.dataForm?a=p(a,c):c.dataGrid&&(a=q(c.dataGrid,b,a)));return a};d.endOfClass(arguments);return d};mx.bizlogic.BizModelAgent=new mx.bizlogic.BizModelAgentClass;$ns("mx.charts");$import("mx.lib.anychart");$import("mx.containers.Panel");$import("mx.utils.FlashPluginUtil");$import("mx.windows.MessageBox");
mx.charts.ChartWrapper=function(){function g(b){for(var c={},i=[],e,d=b.rows,f,h=0,g=d.length;h<g;h++)e={},f=d[h].cells,e.name=f[0].value,e.y=f[1].value,f=a.pointOptions[e.name],jQuery.isPlainObject(f)&&jQuery.each(f,function(a,b){e[a]=b}),i.push(e);c.point=i;if($notEmpty(b.name))c.name=b.name;if($notEmpty(b.threshold))c.threshold=b.threshold;b=a.seriesOptions[c.name];jQuery.isPlainObject(b)&&jQuery.each(b,function(a,b){c[a]=b});return c}function k(){a.chart._loaded=!0;a.trigger("load")}function l(){a.chart._created=
!0;a.trigger("create")}var a=$extend(MXComponent),d={};a.width=600;a.height=400;a.data=null;a.chart=null;a.panel=null;a.title=null;a.data_plot_setting={};a.chart_settings={};a.styles={};a.palettes={};a.thresholds={};a.pointOptions={};a.seriesOptions={};a.plotType="CategorizedVertical";a.onload=null;a.oncreate=null;a.onpointclick=null;a.onpointmouseover=null;a.onpointmouseout=null;a.globalSettings=null;a.init=function(){var b;mx.utils.FlashPluginUtil.isInstall()?b=!0:((new mx.windows.MessageBox({reusable:!0,
title:mx.messages.TITLE,showOkButton:!0,showCancelButton:!1,okButtonText:mx.messages.OK,message:mx.messages.FLASH_PLUGIN_NOT_INSTALLED,imgkey:"info"})).show(),b=!1);if(b)a.initialized=!0,b=Math.random()*1E4,a.chart=a.plotType!="Radar"?new com.anychart.AnyChart(mx.mappath("$/swf/AnyChart.swf?r="+b)):new com.anychart.AnyChart(mx.mappath("$/swf/RadarPolar.swf?r="+b)),a.chart.width=a.width,a.chart.height=a.height,a.chart._onChartLoad=k,a.chart._onHTMLCreate=l,a.onpointclick&&a.onpointclick.listeners.length>
0&&a.chart.addEventListener("pointClick",a.onpointclick.listeners[0]),a.onpointmouseover&&a.onpointmouseover.listeners.length>0&&a.chart.addEventListener("pointMouseOver",a.onpointmouseover.listeners[0]),a.onpointmouseover&&a.onpointmouseover.listeners.length>0&&a.chart.addEventListener("pointMouseOut",a.onpointmouseout.listeners[0])};a.setChartType=function(b){a.plotType=b};a.setData=function(b){a.data={};var c;if($.isArray(b)){c=[];for(var d=0;d<b.length;d++)c.add(g(b[d]))}else c=g(b);a.data.series=
c};var j=null;a.draw=function(b){a.chart.setJSData(a.getJsonData());j=b!=void 0?window.setTimeout(function(){a.chart&&(a.chart.write(b),delete j)},200):window.setTimeout(function(){a.chart&&(a.chart.write(a.panel.$body.get(0)),delete iTimeDelay)},100)};d.dispose=a.dispose;a.dispose=function(){d.dispose();a._onHTMLCreate=null;a._onHTMLCreate=null;if(a.chart)a.chart.removeEventListener("pointClick"),a.chart.removeEventListener("pointMouseOver"),a.chart.removeEventListener("pointMouseOut"),a.chart.dispose(),
a.chart=null};a.getJsonData=function(){var b={};b.width=a.width;b.height=a.height;b.plot_type=a.plotType;b.data_plot_settings=a.data_plot_setting;b.chart_settings=a.chart_settings;b.data=a.data;b.styles=a.styles;b.palettes=a.palettes;b.thresholds=a.thresholds;b.chart_settings.title=a.title;b.margin={all:0};var c={animation:{enabled:!0},image_export:{url:mx.mappath("$/swf/saveasimage/AnyChartPNGSaver.jsp"),use_title_as_file_name:"true"}};c.context_menu={version_info:!1,about_anychart:!1,save_as_image_item_text:{cdata:mx.msg("SAVE_AS_IMAGE")},
print_chart_item_text:{cdata:mx.msg("PRINT_CHART")}};c=$.extend(c,a.globalSettings);return{margin:{all:0},settings:c,charts:{chart:b}}};d.endOfClass=a.endOfClass;a.endOfClass=function(b){d.endOfClass(b);if($isEmpty(a.panel))a.panel=new mx.containers.Panel({width:a.width+30,height:a.height+30,title:a.title?a.title.text:""})};a.endOfClass(arguments);return a};$ns("mx.containers");$import("mx.containers.Panel");
mx.containers.Accordion=function(){function o(a){var c=a.$e,a=parseInt(c.get(0).style.bottom),c=parseInt(c.get(0).style.top);if($isNumber(c)&&isNaN(a))return!0;return!1}function p(a){var c=a.$e,a=parseInt(c.get(0).style.bottom),c=parseInt(c.get(0).style.top);if($isNumber(a)&&isNaN(c))return!0;return!1}function q(a){var c=a.$e,a=parseInt(c.get(0).style.bottom),c=parseInt(c.get(0).style.top);if($isNumber(a)&&$isNumber(c)&&!isNaN(a)&&!isNaN(c))return!0;return!1}function l(b,c,e){var d=a.panels,f=d.length,
g=$instanceOf(b,mx.containers.Panel)?d.indexOf(b):b,c=$instanceOf(c,mx.containers.Panel)?d.indexOf(c):c,k=d.indexOf(a.selection);$isEmpty(b)&&(g=0);$isEmpty(c)&&(c=f-1);g>c&&(b=g,g=c,c=b);for(b=g;b<=c;b++)if(k-b<0){var g=d[b],f=e,h=a.panels,j=h.length,i=h.indexOf(g),h=r(g),j=(j-1-i)*a.panelHeadHeight,i=g.$e.outerHeight(),m=a.panelHeadHeight;f?o(g)?g.$e.css({top:"auto",bottom:h}).animate({bottom:j},a.speed):q(g)?g.$e.css({top:"auto",height:i}).animate({height:m},a.speed):g.$e.animate({bottom:j},a.speed):
g.$e.css({top:"auto",height:m,bottom:j})}else if(k-b>0)g=d[b],f=e,h=a.panels.indexOf(g),f?p(g)?g.$e.css({bottom:"auto",top:s(g)}).animate({top:h*a.panelHeadHeight},a.speed):q(g)&&g.$e.css({bottom:"auto",height:a.panelHeadHeight}).animate({top:h*a.panelHeadHeight},a.speed):g.$e.css({top:h*a.panelHeadHeight,height:a.panelHeadHeight,bottom:"auto"});else{g=e;f=a.selection;i=a.panels;h=i.length;j=i.indexOf(f);i.indexOf(n);var i=s(f),m=j*a.panelHeadHeight,l=r(f),h=(h-j-1)*a.panelHeadHeight;g?o(f)?f.$e.css({height:"auto",
bottom:l}).animate({bottom:h},a.speed):p(f)&&f.$e.css({height:"auto",top:i}).animate({top:m},a.speed):a.selection.$e.css({top:m,height:"auto",bottom:h});$.isIE6()&&a.$e.height()!=0&&a.selection.$e.css({height:a.$e.height()-(a.panels.length-1)*a.panelHeadHeight-1})}}function s(b){var c=a.panels,b=c.indexOf(b),e,d,f=0;for(e=0;e<b;e++)d=c[e],f+=d==n?k:d.$e.outerHeight();return f}function r(b){for(var c=a.panels,e=c.length,d,f=0,b=c.indexOf(b)+1;b<e;b++)d=c[b],f+=d==n?k:c[b].$e.outerHeight();return f}
function u(){a.panelHeadHeight=parseInt(a.panelHeadHeight);if($isArray(a.panels)){var b=a.panels;a.panels=[];a.appendPanels(b);$.isIE6()&&a.$e.resize(function(){for(var b=0;b<a.panels.length;b++){var e=a.panels[b];if(e.$e.hasClass("selection")){e.$e.css({height:a.$e.height()-(a.panels.length-1)*a.panelHeadHeight-1});break}}})}}var a=$extend(mx.containers.Container),t={};a.panels=[];a.selection=null;a.width="100%";a.height="100%";a.panelHeadHeight=21;a.speed="normal";a.animated=!0;a.enabled=!0;a.onselectionchanging=
null;a.onselectionchanged=null;t.init=a.init;a.init=function(){if($.isIE67()){if(a.width=="100%")a.width=null;if(a.height=="100%")a.height=null}t.init();a.$e.addClass("accordion");u()};a.appendPanels=function(b){if($isArray(b))for(var c=0;c<b.length;c++)a.appendPanel(b[c])};a.appendPanel=function(b,c){var e,d;$.isPlainObject(b)||$instanceOf(b,mx.containers.Panel)?e=b.name||b.id:$isString(b)&&(e=b);if(typeof a.panels[e]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[e]));$.isPlainObject(b)?(b.headHeight=
a.panelHeadHeight,b.height=a.panelHeadHeight,d=new mx.containers.Panel(b)):$instanceOf(b,mx.containers.Panel)?d=b:$isString(b)&&(d=new mx.containers.Panel({name:b,title:c,height:a.panelHeadHeight,headHeight:a.panelHeadHeight}));if(!$isEmpty(d))d.owner=a,d.$head.on("click",function(){a.enabled&&a.selectPanel(d,!0)}),a.panels.add(d),a.panels[d.name]=d,a.$e.append(d.$e),a._appendPanel(d),a.trigger("ctrladded",{ctrl:d}),a.selection==null&&a.panels.length>0&&a.selectPanel(0)};a._appendPanel=function(a){a.$e.css({position:"absolute"});
a.$body.css({display:"none"});l()};a.removePanel=function(b){var c=null,e=a.panels.length;$isNumber(b)||$isString(b)?c=a.panels[b]:$instanceOf(b,mx.containers.Panel)&&(c=b);var b=a.panels.indexOf(c),d=a.panels.indexOf(a.selection);if(c!=null)c.$e.remove(),a.panels.remove(c),delete a.panels[c.name],d==b?(a.selection=null,a.selectPanel(0)):(b>=e-1&&--b,l(d,b,a.animated))};a.removePanels=function(b){for(var c=b.length-1;c>=0;c--)a.removePanel(b[c])};a.setSpeed=function(b){a.speed=b};a.selectPanel=function(b,
c){var e=null;if($isObject(b))e=b;else if($isNumber(b)||$isString(b))e=a.panels[b];if(a.selection!=e){var d={cancel:!1,panel:e};a.trigger("selectionchanging",d);if(!d.cancel){var d=e,f=a.selection;if(!$isEqual(d,f))$notEmpty(f)?(n=f,k=f.$e.outerHeight(),f.$e.removeClass("selection"),f.$body.css({display:"none"})):(n=null,k=0),d.$e.addClass("selection"),d.$body.css({display:"block"}),a.selection=d,a.$container=d.$container,d.setPadding(a.padding),l(d,f,a.animated);c&&a.trigger("selectionchanged",{panel:e})}}};
var n,k=0;a.endOfClass(arguments);return a};$ns("mx.containers");$import("mx.layouts.LayoutFactory");
mx.containers.Container=function(){function f(a){var c=null;if($.isPlainObject(a)){var d=eval("("+a.cType+")");$isFunction(d)&&(c=new d(a))}return c}function g(b){var c={cancel:!1,event:b};a.trigger("contextmenu",c);if(c.cancel)return!1;if(a.contextMenu!=null)if($instanceOf(a.contextMenu,mx.controls.ContextMenu))return a.contextMenu.show(b.clientX,b.clientY),!1;else if($.isPlainObject(a.contextMenu))return a.contextMenu=new mx.controls.ContextMenu(a.contextMenu),a.contextMenu.show(b.clientX,b.clientY),
!1;for(var c=b.target.parentNode,d,e;c!=null;){d=$(c).data("control");if(typeof d!="undefined"&&d.enableBrowserContextMenu){e=d.enableBrowserContextMenu;break}c=c.parentNode}if(!e&&b.target.className.indexOf("container")==-1&&b.target.tagName!="EMBED")return!1}var a=$extend(mx.controls.Control),e={};a.position="relative";a.width="auto";a.height="100%";a.contextMenu=null;a.controls=[];a.$container=null;a.layout=null;a.layoutOptions=null;a.onctrladded=null;a.onctrlremoved=null;a.oncontextmenu=null;
e.init=a.init;a.init=function(){e.init();a.$e.addClass("container");if(a.$container==null)a.$container=a.$e;if(a.controls.length>0){var b=a.controls;a.controls=[];for(var c=0;c<b.length;c++)a.addControl(b[c])}a.padding!=null&&a.setPadding(a.padding);a.$e.on("contextmenu",g);if($notEmpty(a.layout))a.layout=mx.layouts.LayoutFactory.createLayout(a.layout,$.extend({owner:a},a.layoutOptions))};a.setPadding=function(b){if(typeof b!="undefined"&&a.$container!=null)a.padding=b,a.$container.css("padding",
b)};a.addControl=function(b,c){if(b!=null&&($.isPlainObject(b)&&(b=f(b)),$notEmpty(b))){b.parent=a;c===!0&&($.isIE67()?a.$container.append("<div style='clear:both;height:1px;width:0px'></div>"):a.$container.append("<br/>"));a.controls.add(b);a.$container.append(b.$e);if($notEmpty(b.id)){if($isNumber(b.id))b.id=b.id.toString()}else b.id="childControl_"+(a.controls.length-1);a.controls[b.id]=b;a.trigger("ctrladded",{ctrl:b})}};a.addControls=function(b){if($.isArray(b))for(var c=0;c<b.length;c++)a.addControl(b[c])};
a.findControl=function(b){if(arguments.length==0)return null;else if(arguments.length==1){var c=a.$e.find("[alias="+b+"]");return c.length>0?c.data("control"):null}else if(arguments.length==2)return c=a.$e.find("["+arguments[0]+"="+arguments[1]+"]"),c.length>0?c.data("control"):null};a.findControlByPermissionID=function(b){return a.findControl("permissionID",b)};a.append=function(b){a.$container.append(a.$wrap(b))};a.removeControl=function(b,c){if(b!=null){b.parent=null;if(a.controls.remove(b)){$notEmpty(b.id)&&
delete a.controls[b.id];if(b.$e)try{b.$e.detach()}catch(d){}c==!0&&($isFunction(b.dispose)&&b.dispose(),b=null)}a.trigger("ctrlremoved",{ctrl:b})}};e.dispose=a.dispose;a.dispose=function(){for(var b=a.controls,c=b.length-1;c>=0;c--){var d=b[c];d.controls?(b.splice(c,1),delete a.controls[d.id],d.dispose(!0)):a.removeControl(d,!0)}e.dispose();a.$container&&a.$container.empty().remove()};a.clear=function(){for(var b=a.controls,c=b.length-1;c>=0;c--){var d=b[c];d.controls&&d.controls.length>0?d.dispose():
a.removeControl(d,!0)}};a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.DockPage=function(){var a=$extend(mx.containers.Container),g={};a.width=null;a.height=null;a.name=null;a.text=null;a.imageUrl=null;a.imageKey=null;a.position=null;a.dockMode="dockable";a.dockPosition="left";a.hovering=!1;a.displayHead=!1;a.$button=null;a.$head=null;a.$body=null;a.belongDockPanel=!1;var c=a.$hideGroup=null;g.init=a.init;a.init=function(){g.init();a.$body=$("<div id=body />");a.$container=a.$body;a.$e.append(a.$body);a.$e.addClass("dockPage");a.setDockPosition(a.dockPosition);a.setDockMode(a.dockMode);
a._createButton();if(a.displayHead){a.$head=$("<div id='head' style='height:21px;line-height:21px;'><div id=title/><div id=buttonGroup/></div>");var b=$("<div id=closeButton>");b.click(function(){a.close()});b.attr("title",mx.msg("CLOSE"));c=$("<div id=dockableButton>");c.click(function(){a.updateDockMode()});c.attr("title",mx.msg("AUTO_HIDE"));a.$head.children("#buttonGroup").append(c);a.belongDockPanel||c.css("visibility","hidden");a.$head.children("#buttonGroup").append(b);a.$e.append(a.$head);
a.text!=null&&a.setText(a.text);a.$body.css("padding-top",21)}a.$hideGroup=$("<div id=hideGroup />");a.$hideGroup.on("click",function(){a.close()});a.$e.append(a.$hideGroup);a.$e.mouseenter(a._onmouseenter);a.$e.mouseleave(a._onmouseleave)};a.setImageKey=function(b){a.imageKey=b;a.imageKey!=null?a.setImageUrl("$/icons/"+a.imageKey+".png"):a.setImageUrl(null)};a.setImageUrl=function(b){a.imageUrl=b;var c=null,c=a.$button.children("span#img");b==null?c.remove():(c.length==0&&(c=$("<span id='img'/>"),
a.$button.prepend(c)),c.css("background-image","url("+mx.mappath(b)+")"))};a._createButton=function(){var b=$("<a class='normal'/>");b.attr("id",a.name);$text=$("<span id='text'/>");$text.text(a.text);b.append($text);a.$button=b;a.imageUrl!=null?a.setImageUrl(a.imageUrl):a.imageKey!=null&&a.setImageKey(a.imageKey)};a.setText=function(b){if(!$isEmpty(b)){a.text=b;if($isEqual(a.dockPosition,"left")||$isEqual(a.dockPosition,"right"))b=b.split("").join("</br>");a.$head!=null&&a.$head.children("#title").html(a.text);
a.$button.children("span#text").html(b)}};a.setDockMode=function(b){if($notEmpty(b))a.$e.removeClass(a.dockMode),a.dockMode=b,a.$e.addClass(b),$notEmpty(c)&&("autoHide"==b?c.attr("title",mx.msg("DOCK_ABLE")):"dockable"==b&&c.attr("title",mx.msg("AUTO_HIDE")))};a.updateDockMode=function(){var b=null;"dockable"==a.dockMode?b="autoHide":"autoHide"==a.dockMode&&(b="dockable");a.setDockMode(b);a.belongDockPanel&&a.owner.setDockMode(a.dockMode)};a.setDockPosition=function(b){if($notEmpty(b))a.$e.removeClass(a.dockPosition),
a.dockPosition=b,a.$e.addClass(b)};a.setBelongDockPanel=function(b){a.belongDockPanel=b;$notEmpty(c)&&c.css("visibility",b==!0?"visible":"hidden")};var e=null,f=null,d=!0;a.toggleShow=function(){if(a.belongDockPanel)a.owner.selectPage(a);else if("left"==a.dockPosition||"right"==a.dockPosition)e==null&&(e=a.$e.width()),a.$body.toggle(!d),a.displayHead&&a.$head.toggle(),(d=!d)?a.$e.css("width",e):a.$e.css("width","5px"),a.$e.toggleClass("hiding");else if("top"==a.dockPosition||"bottom"==a.dockPosition)f==
null&&(f=a.$e.height()),a.$body.toggle(!d),a.displayHead&&a.$head.toggle(),(d=!d)?a.$e.css("height",f):a.$e.css("height","5px"),a.$e.toggleClass("hiding")};a.close=function(){a.belongDockPanel?a.owner.hidePage(a.name):a.toggleShow()};a._onmouseenter=function(){a.hovering=!0};a._onmouseleave=function(){a.hovering=!1;"autoHide"==a.dockMode&&a.close()};a.endOfClass(arguments);return a};$ns("mx.containers");$import("mx.containers.DockPage");
mx.containers.DockPanel=function(){function g(){if($isArray(a.pages)){var b=a.pages;a.pages=[];a.appendPages(b)}}function h(b){if(a.selection!=null&&(a.selection.$button.removeClass("selected"),a.selection.$button.addClass("normal"),a.selection.$e.detach(),a.selection==b)){a.hidePage(a.selection);return}b.$button.addClass("selected");b.$button.removeClass("normal");a.selection=b;if(a.dockPosition=="top"||a.dockPosition=="bottom")b.height||b.setHeight(150),b.$e.css(a.dockPosition,a.$e.height()+"px");
else if(a.dockPosition=="right"||a.dockPosition=="left")b.width||b.setWidth(150),b.$e.css(a.dockPosition,a.$e.width()+"px");a.$e.append(b.$e);b.$e.toggleClass("mx",!0);b.$e.hide();b.$e.show(a.speed,function(){a._dockPanelShadowOpen()})}var a=$extend(mx.containers.Container),e={};a.dockMode="dockable";a.dockPosition="left";a.onselectionchanged=null;a.onselectionchanging=null;a.selection=null;a.position=null;a.width=null;a.height=null;a.hovering=!1;a.speed="normal";a.pages=[];a.$buttonContainer=null;
a.$dockPanelShadow=$("<div style='position:relative;z-index:-1;' />");a.ondockmodechanged=null;a.onopened=null;a.onclosed=null;var f=!1;e.init=a.init;a.init=function(){e.init();a.$e.addClass("dockPanel");a.$e.addClass(a.dockPosition);a.$buttonContainer=$("<div id='buttonContainer'/>");a.$e.append(a.$buttonContainer);a.$e.resize(function(){a.dockPosition=="right"?a.$dockPanelShadow.css("float","right"):a.$dockPanelShadow.css("float","left");if(a.dockPosition!="bottom"&&!f){var b=a.$e.parent();b.prepend(a.$dockPanelShadow);
$.browser.msie&&$.browser.version==9&&b.css("overflow","hidden");f=!0}var b=a.$e.width(),c=a.$e.height();a.$dockPanelShadow.width(b+"px");a.$dockPanelShadow.height(c+"px")});g()};a.addControls=function(b,c){if($.isArray(b))for(var d=0;d<b.length;d++)a.addControl(b[d],c)};a.addControl=function(b,c){var d;if(!$isEmpty(b)){if($isEmpty(c))d=a.pages.first();else if($isNumber(c)||$isString(c))d=a.pages[c];$notEmpty(d)&&(d.addControl(b),a.controls.add(b),a.controls[b.id]=b,a.trigger("ctrladd",{ctrl:b}))}};
a.removeControl=function(b,c){var d;if($instanceOf(b,mx.controls.Control)&&a.controls.contains(b))d=b.parent,a.controls.remove(b),delete a.controls[b.id],a.pages.contains(d)&&(d.removeControl(b,c),a.trigger("ctrlremoved",{ctrl:b}))};a.appendPages=function(b){if($isArray(b))for(var c=0;c<b.length;c++)a.appendPage(b[c])};a.appendPage=function(b,c){var d=null;arguments.length==1&&$isObject(b)?d=$.isPlainObject(b)?new mx.containers.DockPage(b):b:arguments.length==2&&(d=new mx.containers.DockPage({name:b,
text:c,belongDockPanel:!0,displayHead:!0}));if(typeof a.pages[d.name]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[d.name]));d.owner=a;d.setBelongDockPanel(!0);d.setDockPosition(a.dockPosition);d.setDockMode(a.dockMode);a.$buttonContainer.append(d.$button);if("dockable"==a.dockMode)d.$button.on("click",a._button_click);else"autoHide"==a.dockMode&&(d.$button.mouseenter(a._onmouseenter_button),d.$button.mouseleave(a._onmouseleave_button));a.pages.add(d);return a.pages[d.name]=d};a.selectPage=
function(b,c){var d=null;if($isObject(b))d=b;else if($isNumber(b)||$isString(b))d=a.pages[b];if(a.selection==d)a.hidePage(d);else{var e={cancel:!1,page:d};a.trigger("selectionchanging",e);e.cancel||(h(d),c&&a.trigger("selectionchanged"))}};a.hidePage=function(b){var c=null;if($isObject(b))c=b;else if($isNumber(b)||$isString(b))c=a.pages[b];c.$button.removeClass("selected");c.$button.addClass("normal");c.$e.hide(a.speed,function(){a.selection=null;a._dockPanelShadowClose()})};a.setDockMode=function(b){a.dockMode=
b;if($isArray(a.pages)){for(b=0;b<a.pages.length;b++){var c=a.pages[b];"dockable"==a.dockMode?(c.$button.off(),c.$button.on("click",a._button_click)):"autoHide"==a.dockMode&&(c.$button.off(),c.$button.mouseenter(a._onmouseenter_button),c.$button.mouseleave(a._onmouseleave_button));c.setDockMode(a.dockMode)}a.dockMode=="autoHide"?a._dockPanelShadowClose():a.dockMode=="dockable"&&a._dockPanelShadowOpen();a.trigger("dockmodechanged")}};a._dockPanelShadowOpen=function(){if(a.dockMode=="dockable"){if(a.dockPosition==
"right"||a.dockPosition=="left")var b=a.$e.height(),c=a.selection==null?a.$e.width():a.$e.width()+a.selection.$e.width();else if(a.dockPosition=="top"||a.dockPosition=="bottom")b=a.selection==null?a.$e.height():a.selection.$e.height()+a.$e.height(),c=a.$e.width();a.$dockPanelShadow.animate({width:c+"px",height:b+"px"},"fast",function(){a.trigger("opened")})}else a.trigger("opened")};a._dockPanelShadowClose=function(){var b=a.$e.height(),c=a.$e.width();a.$dockPanelShadow.animate({width:c+"px",height:b+
"px"},"fast",function(){a.trigger("closed")})};a._button_click=function(){var b=a.pages[this.id];b!=null&&a.selectPage(b,!0)};a._onmouseenter_button=function(){a.selectPage(this.id,!0);a.hovering=!0};a._onmouseleave_button=function(){a.hovering=!1;window.setTimeout(function(){a.hovering==!1&&$notEmpty(a.selection)&&a.selection.hovering==!1&&a.hidePage(a.selection)},200)};a.setSpeed=function(b){a.speed=b};e.dispose=a.dispose;a.dispose=function(){e.dispose();if(a.$dockPanelShadow)a.$dockPanelShadow.remove(),
a.$dockPanelShadow=null};a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.DockPanelPort=function(){function g(a){if(a==void 0||a==null)return 0;var c=0;a.dockMode=="dockable"&&(c=a.selection==null?0:a.selection.$e.height());return a.$e.height()+c}function f(a){if(a==void 0||a==null)return 0;var c=0;a.dockMode=="dockable"&&(c=a.selection==null?0:a.selection.$e.width());return a.$e.width()+c}var a=$extend(mx.containers.Container),e={};a.width="100%";a.height="100%";a.name=null;a._layoutContainers=[];a._dockPanels=[];e.init=a.init;a.onload=null;a.dockPages=[];
a.init=function(){e.init();a._initLayout();a._initDockPage();a.$e.resize(function(){a._renderLayout()})};a._initDockPage=function(){if($isArray(a.dockPages))for(var b=0;b<a.dockPages.length;b++){var c=new mx.containers.DockPage(a.dockPages[b]);a.addDockPage(c)}};e.addControl=a.addControl;a.addControl=function(b){a._layoutContainers.content!=null&&a._layoutContainers.content.addControl(b)};a.removeControl=function(b,c){a._layoutContainers.content!=null&&a._layoutContainers.content.removeControl(b,
c)};a.addControlToDockPage=function(b,c,d){c==void 0&&(c="left");d==void 0&&(d=0);if(!$instanceOf(b,mx.controls.Control))throw Error("control params illegal");if(c!="left"&&c!="top"&&c!="right"&&c!="bottom")throw Error("position illegal");if(a._dockPanels[c]==void 0)throw Error("position "+c+" dockPage undefined");if(a._dockPanels[c].pages[d]==void 0)throw Error("index "+d+" dockpage undefined");a._dockPanels[c].pages[d].addControl(b)};a.addDockPage=function(b){if(!$instanceOf(b,mx.containers.DockPage))throw Error("control type must be DockPage");
if(b.dockPosition==void 0)b.dockPosition="left";if(b.dockPosition!="left"&&b.dockPosition!="top"&&b.dockPosition!="right"&&b.dockPosition!="bottom")throw Error("dockPosition illegal");a._dockPanels[b.dockPosition]==void 0&&(a._dockPanels[b.dockPosition]=new mx.containers.DockPanel({dockPosition:b.dockPosition}),(b.dockPosition=="top"||b.dockPosition=="bottom")&&a._dockPanels[b.dockPosition].$e.css({"float":"none",height:"auto","z-index":"101"}),a._layoutContainers[b.dockPosition].addControl(a._dockPanels[b.dockPosition]),
a._initDockPanelEvent(a._dockPanels[b.dockPosition]));a._dockPanels[b.dockPosition].appendPage(b)};a._initLayout=function(){a.setCss({overflow:"hidden"});a._layoutContainers.top=new mx.containers.Container({name:"top",width:"100%",height:"auto",position:"absolute",top:"0px"});a._layoutContainers.bottom=new mx.containers.Container({name:"bottom",width:"100%",height:"auto",position:"absolute",bottom:"0px"});a._layoutContainers.center=new mx.containers.Container({width:"100%",position:"absolute"});a._layoutContainers.left=
new mx.containers.Container({name:"left",width:"auto",height:"100%",position:"absolute",left:"0px",css:{display:"inline-block"}});a._layoutContainers.right=new mx.containers.Container({name:"right",width:"auto",height:"100%",position:"absolute",right:"0px",css:{display:"inline-block"}});a._layoutContainers.content=new mx.containers.Container({name:"content",position:"relative",css:{"float":"left",overflow:"auto"}});a._layoutContainers.center.addControl(a._layoutContainers.left);a._layoutContainers.center.addControl(a._layoutContainers.content);
a._layoutContainers.center.addControl(a._layoutContainers.right);e.addControl(a._layoutContainers.top);e.addControl(a._layoutContainers.bottom);e.addControl(a._layoutContainers.center)};a._initDockPanelEvent=function(b){b.dockPosition=="top"?(b.on("opened",function(){var b=a._getCenterHeight(),d=g(a._dockPanels.top);a._layoutContainers.center.$e.animate({"margin-top":d+"px",height:b+"px"},"fast")}),b.on("closed",function(){var b=a._getCenterHeight(),d=a._layoutContainers.top.$e.height();a._layoutContainers.center.$e.animate({"margin-top":d+
"px",height:b+"px"},"fast")})):b.dockPosition=="bottom"?(b.on("opened",function(){var b=a._getCenterHeight();a._layoutContainers.center.$e.animate({height:b+"px"},"fast")}),b.on("closed",function(){var b=a._getCenterHeight();a._layoutContainers.center.$e.animate({height:b+"px"},"fast")})):b.dockPosition=="left"?(b.on("opened",function(){var b=f(a._dockPanels.left),d=a._getContentWidth();a._layoutContainers.content.$e.animate({"margin-left":b+"px",width:d+"px"},"fast")}),b.on("closed",function(){var b=
f(a._dockPanels.left),d=a._getContentWidth();a._layoutContainers.content.$e.animate({"margin-left":b+"px",width:d+"px"},"fast")})):b.dockPosition=="right"&&(b.on("opened",function(){var b=f(a._dockPanels.right),d=a._getContentWidth();a._layoutContainers.content.$e.animate({"margin-right":b+"px",width:d+"px"},"fast")}),b.on("closed",function(){var b=f(a._dockPanels.right),d=a._getContentWidth();a._layoutContainers.content.$e.animate({"margin-right":b+"px",width:d+"px"},"fast")}))};a._renderLayout=
function(){var b=a.$e.width(),c=a.$e.height(),d=f(a._dockPanels.left),e=f(a._dockPanels.right),h=g(a._dockPanels.top),i=g(a._dockPanels.bottom),c=c-h-i;a._layoutContainers.content.setCss({width:b-d-e+"px","margin-left":d+"px"});a._layoutContainers.center.setCss({height:c+"px","margin-top":h+"px"})};a._getContentWidth=function(){var b=a.$e.width(),c=a._layoutContainers.left.$e.width(),d=a._layoutContainers.right.$e.width();return b-c-d};a._getCenterHeight=function(){var b=a.$e.height(),c=g(a._dockPanels.top),
d=g(a._dockPanels.bottom);return b-c-d};a.endOfClass(arguments);return a};$ns("mx.containers");$import("mx.containers.Split");
mx.containers.HSplit=function(){function o(b){a.toggleExpanded();b.stopPropagation()}function p(b){i=b.clientY;$.isIE67()?(d=a.$panel1.height(),j=a.$panel2.height()):d=g?a.$panel1.outerHeight():a.$panel2.outerHeight();b.stopPropagation();a._cover(!0);$(document.body).userSelectable(!1);$(document).on("mousemove",k);$(document).one("mouseup",function(){$(document).off("mousemove",k);a._cover(!1)})}function k(b){b=b.clientY-i;$.isIE6()&&(a.activePanelIndex==0&&b>0&&a.$panel1.hasClass("hide")?a.$panel1.removeClass("hide"):
a.activePanelIndex==1&&b<0&&a.$panel2.hasClass("hide")&&a.$panel2.removeClass("hide"));var c={panel1:{width:a.$panel1.width(),height:a.$panel1.height()},panel2:{width:a.$panel2.width(),height:a.$panel2.height()}};a.trigger("resizing",c);if(!g||!(b+d<=a.threshold[0]||b+d+a.threshold[1]>=a.$e.height()-e))if(g||!(d-b<=a.threshold[1]||d-b+a.threshold[0]>=a.$e.height()-e))$.isIE67()?(a.$panel1.css("height",b+d),a.$panel1.css("bottom",b+d),a._$splitter.css("top",a.$panel1.outerHeight()),a.$panel2.css("top",
a.$panel1.outerHeight()+(parseInt(a.$panel2.css("marginTop"))==0?e:0)),a.$panel2.css("height",j-b)):g?(a._$splitter.css("top",b+d),a.$panel1.css("height",b+d),a.$panel2.css("top",b+d)):(a._$splitter.css("bottom",d-b),a.$panel2.css("height",d-b),a.$panel1.css("bottom",d-b)),a.trigger("resize",{panel1:{width:a.$panel1.width(),height:a.$panel1.height()},panel2:{width:a.$panel2.width(),height:a.$panel2.height()}})}function q(){if(a.activePanelIndex==1&&$isEqual(a.$panel2.css("display"),"none")&&g){var b=
a.$e.outerHeight()-e-parseInt(a.$e.css("borderTopWidth"))-parseInt(a.$e.css("borderBottomWidth"));a.$panel1.css("height",b);a._$splitter.css("top",b)}a.activePanelIndex==0&&$isEqual(a.$panel1.css("display"),"none")&&!g&&(b=a.$e.outerHeight()-e-parseInt(a.$e.css("borderTopWidth"))-parseInt(a.$e.css("borderBottomWidth")),a.$panel2.css("height",b),a._$splitter.css("bottom",b))}function l(a){var c;$isString(a)?c=a.endsWith("%")?a:parseInt(a):$isNumber(a)&&(c=a);return c}var a=$extend(mx.containers.Split),
h={};a.orientation="horizontal";a.rows="auto, auto";var e=3,c=0,m=0,f=0,n=0,g=!0;h.collapse=a.collapse;h.expand=a.expand;h.init=a.init;a.init=function(){h.init();a.$panel1&&a.$panel1.attr("id","hPanel1");a.$panel2&&a.$panel2.attr("id","hPanel2");a._$splitter&&a._$splitter.attr("id","hSplitter");a.$container.addClass("hSplit");a.resizable||(e=0);var b=0;if(a.splitOptions.panel1=="auto"&&a.splitOptions.panel2=="auto")b="50%",a.$panel1.css("height",b),a.$panel2.css("marginTop",e),a.$panel2.css("top",
b);else if(a.splitOptions.panel1=="auto"&&a.splitOptions.panel2!="auto"){var c=a.splitOptions.panel2,b=l(c);a.$panel1.css("marginBottom",e);a.$panel1.css("bottom",b);a.$panel2.css("height",b);g=!1}else if(a.splitOptions.panel1!="auto")c=a.splitOptions.panel1,b=l(c),a.$panel1.css("height",b),a.$panel2.css("marginTop",e),a.$panel2.css("top",b);a.resizable&&(a._$splitter_btn.attr("id",a.activePanelIndex==0?"topSpiltterBtn":"bottomSpiltterBtn"),a._$splitter_btn.addClass(a.activePanelIndex==0?"top":"bottom"),
g?a._$splitter.css("top",b):a._$splitter.css("bottom",b),a._$splitter_btn.on("mousedown",o),a._$splitter.on("mousedown",p));if($.isIE67())a.$container.resize(function(){a.$panel2.css("marginTop",0);a.$panel1.css("width",a.$container.parent().width()-(a.$panel1.outerWidth()-a.$panel1.width()));a.$panel2.css("width",a.$container.parent().width()-(a.$panel2.outerWidth()-a.$panel2.width()));a.$panel1.is(":hidden")||a.$panel1.hasClass("hide")?(a.$panel2.css("top",a.resizable?e:0),a.$panel2.css("height",
a.$container.parent().height()-(a.resizable?e:0)-(a.$panel2.outerHeight()-a.$panel2.height()))):a.$panel2.is(":hidden")||a.$panel2.hasClass("hide")?a.$panel1.css("height",a.$container.parent().height()-(a.resizable?e:0)-(a.$panel1.outerHeight()-a.$panel1.height())):a.splitOptions.panel1=="auto"&&a.splitOptions.panel2!="auto"&&!($isString(c)&&c.indexOf("%")!=-1)?a.$panel1.css("height",a.$container.parent().height()-a.$panel2.outerHeight()-(a.resizable?e:0)-(a.$panel1.outerHeight()-a.$panel1.height())):
(a.$panel2.css("top",a.$panel1.outerHeight()+(a.resizable?e:0)),a.$panel2.css("height",a.$container.parent().height()-a.$panel1.outerHeight()-(a.resizable?e:0)-(a.$panel2.outerHeight()-a.$panel2.height())));a.resizable&&a._$splitter.css("top",a.$panel1.is(":hidden")||a.$panel1.hasClass("hide")?0:a.$panel1.outerHeight())});else a.$e.one("resize",function(){a.$e.resize(q)})};a.expand=function(){if(!a.expanded){var b=a.$panel1.outerHeight(),d=a.$panel2.outerHeight();a._do_resizing_();a._$splitter_btn.removeClass("collapsed");
a.activePanelIndex==0?($.isIE67()?(a._$splitter.css("top",c),a.$panel2.css("height",a.$panel2.height()-c),a.$panel2.css("top",c+e)):(c=b,f=d,g?(a.$panel1.css("height",c),a._$splitter.css("top",c),a.$panel2.css("top",c)):(a.$panel1.css("bottom",f-c),a._$splitter.css("bottom",f-c),a.$panel2.css("height",f-c))),$.isIE6()?(a.$panel1.removeClass("hide"),a.$panel1.animate({height:m},150)):a.$panel1.animationShow({speed:250,animation:"fadeIn"})):($.isIE67()?(b=a.$panel1.height()-f,a.$panel1.css("height",
b),a._$splitter.css("top",a.$panel1.outerHeight())):(c=b,f=d,g?(b=c-f,a.$panel1.css("height",b),a._$splitter.css("top",b),a.$panel2.css("top",b)):(a.$panel1.css("bottom",f),a._$splitter.css("bottom",f),a.$panel2.css("height",f))),$.isIE6()?(a.$panel2.removeClass("hide"),a.$panel2.animate({height:n},150)):a.$panel2.animationShow({speed:250,animation:"fadeIn"}));h.expand()}};a.collapse=function(){if(a.expanded){a._do_resizing_();a._$splitter_btn.addClass("collapsed");if(a.activePanelIndex==0){c=a.$panel1.outerHeight();
f=a.$panel2.outerHeight();m=a.$panel1.height();if($.isIE67())a._$splitter.css("top",0),a.$panel2.css("height",a.$panel2.height()+c),a.$panel2.css("top",e);else if(g)a._$splitter.css("top",0),a.$panel2.css("top",0);else{var b=c+f;a._$splitter.css("bottom",b);a.$panel2.css("height",b)}$.isIE6()?(a.$panel1.animate({height:0},150),a.$panel1.addClass("hide")):a.$panel1.animationHide({speed:250,animation:"fadeOut"})}else c=a.$panel1.outerHeight(),f=a.$panel2.outerHeight(),n=a.$panel2.height(),$.isIE67()?
(b=a.$panel1.height()+f,a.$panel1.css("height",b),a._$splitter.css("top",a.$panel1.outerHeight())):g?(b=c+f,a.$panel1.css("height",b),a._$splitter.css("top",b)):(a.$panel1.css("bottom",0),a._$splitter.css("bottom",0)),$.isIE6()?(a.$panel2.animate({height:0},150),a.$panel2.addClass("hide")):a.$panel2.animationHide({speed:250,animation:"fadeOut"});h.collapse()}};var i=0,d=0,j=0;a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.HtmlContainer=function(){function h(b){$.ajax({url:b,success:function(b,e,c){var f=b;if(b.indexOf("id='$mx-framework$'")>0)var f=b.indexOf("<meta "),g=b.indexOf("id='$mx-framework$'"),g=b.indexOf("'><\/script>",g)+11,f=b.substr(0,f)+b.substring(g);a.$container.html(f);a._load_callback(b,e,c)}})}function i(){if(a.url){var b=a.url.lastIndexOf("/"),d=a.url.lastIndexOf("/",b-1),e=a.url.lastIndexOf("/",d-1),e=a.url.substring(e+1,d),b=a.url.substring(d+1,b),b=new mx.weblets.WebletContainer({$e:a.$e,webletID:b,
bundleName:e}),d=a.url.split("?"),c=null;d.length>0&&(c=d[1].split("&"));b.on("webletload",function(a){if(a.weblet){var b=null;$.each(c,function(d,c){b=c.split("=");b.length>0&&b[0]!="rnd"&&a.weblet.context!=null&&(a.weblet.context[b[0]]=b[1])})}})}}var a=$extend(mx.containers.Container),c={};a.url=null;a.isCache=!0;a.type="ajax";a.iframe=null;a.onload=null;c.init=a.init;a.init=function(){c.init();a.setUrl(a.url);if("Iframe"==a.type)a.$container.append("<iframe style='width:100%;height:100%;' frameborder=0></iframe>"),
a.iframe=a.$("iframe").get(0);a._load()};a._load=function(){a.$e.setBusy();var b=a.url;if(!a.isCache||mx.debugMode)b+=b.indexOf("?")!=-1?"&rnd="+Math.random():"?rnd="+Math.random();"Iframe"==a.type?($clearIframeLeak(a.iframe),a.iframe.src=mx.mappath(b),$(a.iframe).one("load",a._iframe_load_callback)):"ajax"==a.type?h(b):"weblet"==a.type&&i()};a.setUrl=function(b){if($notEmpty(b))b.startsWith("~/")&&(b=mx.mappath(b)),a.url=b};a._load_callback=function(b,c,e){a.$e.setBusy(!1);c=="success"?a.trigger("load"):
(_loadsuccess=!1,mx.showerror(Error(mx.err("LOADING",["An error occured: "+e.status+" "+e.statusText]))))};a._iframe_load_callback=function(){a.$e.setBusy(!1);a.trigger("load")};c.dispose=a.dispose;a.dispose=function(b){b=b===!1?!1:!0;try{$clearIframeLeak(a.iframe)}catch(d){}b&&c.dispose()};a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.Panel=function(){var a=$extend(mx.containers.Container),b={};a.width="100%";a.height="100%";a.headHeight=21;a.name=null;a.title=null;a.displayHead=!0;a.$head=null;a.$body=null;b.init=a.init;a.init=function(){if($.isIE67()&&a.width=="100%")a.width=null;a.$head=$("<div id='head'><div id=title/></div>");a.$head.css({height:parseInt(a.headHeight)+"px","line-height":parseInt(a.headHeight)+"px"});a.$body=$("<div id=body/>");a.$container=a.$body;b.init();a.$e.attr("id",a.name);a.$e.append(a.$head);
a.$e.append(a.$body);a.$e.addClass("panel");a.displayHead?a.$body.css("top",parseInt(a.headHeight)+"px"):a.$head.hide();a.title!=null&&a.setTitle(a.title)};a.setTitle=function(b){a.title=b;a.$head!=null&&a.$head.children("#title").text(b)};a.endOfClass(arguments);return a};$ns("mx.containers");$import("mx.containers.HSplit");$import("mx.containers.VSplit");
mx.containers.PanelLayout=function(){function m(c){var c=c.target,n=c.activePanelIndex,d=c.$panel1.outerHeight();n!=0||$isEmpty(b)||$isEmpty(a.$panelMiddle)||(c.threshold[1]=a.$panelMiddle.outerHeight()+10,c.$panel1.css("display")=="none"&&b.$panel2.css("display")=="none"?(c=b.$panel1.height()-d,b.$panel1.height(c),b._$splitter.css("top",c)):c.$panel1.css("display")!="none"&&b.$panel2.css("display")=="none"&&(c=b.$panel1.height()+d,b.$panel1.height(c),b._$splitter.css("top",c)))}function h(){e=new mx.containers.HSplit({rows:a.topPanelHeight+
",auto",resizable:a.topPanelResizable,borderThick:a.borderThick,onresizing:m,owner:a});a.$panelTop=e.$panel1;(a.bottomPanelVisible||a.leftPanelVisible||a.rightPanelVisible)&&e.$panel2.css({border:"none",padding:0})}function i(){b=new mx.containers.HSplit({rows:a.middlePanelHeight+",auto",resizable:a.bottomPanelResizable,activePanelIndex:1,borderThick:a.borderThick,owner:a});(a.leftPanelVisible||a.rightPanelVisible)&&b.$panel1.css({border:"none",padding:0});a.$panelMiddle=b.$panel1;a.$panelBottom=
b.$panel2}function j(){f=new mx.containers.VSplit({cols:a.leftPanelWidth+",auto",resizable:a.leftPanelResizable,onresize:o,borderThick:a.borderThick,onresizing:p,owner:a});a.rightPanelVisible&&f.$panel2.css({border:"none",padding:0});a.$panelLeft=f.$panel1;if(!a.rightPanelVisible)a.$panelMiddle=f.$panel2}function k(){var c=null,b=a.middlePanelWidth;$isString(a.leftPanelWidth)&&$isString(a.middlePanelWidth)&&a.leftPanelVisible&&(c=parseInt(a.leftPanelWidth.substr(0,a.leftPanelWidth.length-1)),b=parseInt(a.middlePanelWidth.substr(0,
a.middlePanelWidth.length-1)),b=b*100/(100-c)+"%");d=new mx.containers.VSplit({cols:b+", auto",resizable:a.rightPanelResizable,activePanelIndex:1,borderThick:a.borderThick,owner:a});a.$panelMiddle=d.$panel1;a.$panelRight=d.$panel2}function o(c){if(d!=null)if(d.expanded){if(f.expanded){var c=d.$panel1,b=a.middlePanelWidth;if($isString(a.leftPanelWidth)&&$isString(a.middlePanelWidth))var e=parseInt(a.leftPanelWidth.substr(0,a.leftPanelWidth.length-1)),b=parseInt(a.middlePanelWidth.substr(0,a.middlePanelWidth.length-
1)),b=b*100/(100-e)+"%";c.animate({width:b},100)}}else d.$panel1.css("width",c.panel2.width-q)}function p(a){a=a.target;$notEmpty(d)&&(a.threshold[1]=d.$panel1.outerWidth()+10)}function l(){b!=null?b.addControl(f):e!=null&&e.addControl(f,1)}var a=$extend(mx.containers.Container),g={};a.topPanelVisible=!0;a.leftPanelVisible=!0;a.rightPanelVisible=!0;a.bottomPanelVisible=!0;a.topPanelResizable=!0;a.leftPanelResizable=!0;a.rightPanelResizable=!0;a.bottomPanelResizable=!0;a.topPanelHeight=80;a.middlePanelHeight=
300;a.leftPanelWidth="20%";a.middlePanelWidth="60%";a.borderThick="1px";a.$panelTop=null;a.$panelLeft=null;a.$panelMiddle=null;a.$panelRight=null;var b=a.$panelBottom=null,e=null,f=null,d=null,q=3;g.init=a.init;a.init=function(){g.init();a.topPanelVisible&&a.bottomPanelVisible?(h(),i(),e.addControl(b,1)):a.topPanelVisible&&!a.bottomPanelVisible?h():!a.topPanelVisible&&a.bottomPanelVisible&&i();a.leftPanelVisible&&a.rightPanelVisible?(j(),k(),f.addControl(d,1),l()):a.leftPanelVisible&&!a.rightPanelVisible?
(j(),l()):!a.leftPanelVisible&&a.rightPanelVisible&&(k(),f!=null?f.addControl(d,1):b!=null?b.addControl(d):e!=null&&e.addControl(d,1));e!=null?g.addControl(e):b!=null?g.addControl(b):f!=null?g.addControl(f):d!=null&&g.addControl(d)};a.addControls=function(c,b){$isArray(c)&&$.each(c,function(c,d){a.addControl(d,b)})};g.addControl=a.addControl;a.addControl=function(b,d,e){if(b!=null){switch(d){case "top":a.$container=a.$panelTop;break;case "left":a.$container=a.$panelLeft;break;case "middle":a.$container=
a.$panelMiddle;break;case "right":a.$container=a.$panelRight;break;case "bottom":a.$container=a.$panelBottom;break;default:a.$container=a.$panelMiddle}d==!0&&(e=!0);a.$container!=null&&g.addControl(b,e)}};a.append=function(b,d){if(b!=null){var e=a.$panelMiddle;switch(d){case "top":e=a.$panelTop;break;case "left":e=a.$panelLeft;break;case "right":e=a.$panelRight;break;case "bottom":e=a.$panelBottom}e!=null&&e.append(a.$wrap(b))}};a.togglePanel=function(c){$isEmpty(c)&&(c="left");switch(c.toLowerCase()){case "left":a.leftPanelVisible&&
f.toggleExpanded();break;case "top":a.topPanelVisible&&e.toggleExpanded();break;case "right":a.rightPanelVisible&&d.toggleExpanded();break;case "bottom":a.bottomPanelVisible&&b.toggleExpanded()}};a.getInnerHSplit=function(){return e};a.getInnerHSplitBottom=function(){return b};a.getInnerVSplit=function(){return f};a.getInnerVSplitRight=function(){return d};a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.Split=function(){var a=$extend(mx.containers.Container),c={};a.$panel1=null;a.$panel2=null;a.width="100%";a.height="100%";a.borderThick="1px";a.orientation="vertical";a.resizable=!1;a.activePanelIndex=0;a.padding=0;a.expanded=!0;a.threshold=10;a.onresize=null;a.onresizing=null;a.splitOptions=null;a.owner=null;a._$splitter=null;a._$splitter_btn=null;c.init=a.init;a.init=function(){a.$panel1=$("<div/>");a.$panel2=$("<div/>");c.init();a.$container.addClass("split");a.$panel1.addClass("panel1");
a.$panel2.addClass("panel2");a.setBorderThick(a.borderThick);a.$container.append(a.$panel1);if(a.resizable&&(a._$splitter=$("<div class='splitter'><table><tbody><tr><td><span/></td></tr></tbody></table></div>"),a._$splitter_btn=a._$splitter.find("span"),a.$container.append(a._$splitter),a.changeTitle(),$isNumber(a.threshold))){var b=a.threshold;a.threshold=[b,b]}a.$container.append(a.$panel2);a.loadOptions()};a.setPadding=function(b){if($notEmpty(a.$panel1)&&$notEmpty(a.$panel2)&&$notEmpty(b))a.$panel1.css({padding:b}),
a.$panel2.css({padding:b}),a.paddding=b};a.addControls=function(b,d,e){if($.isArray(b))for(var c=0;c<b.length;c++)a.addControl(b[c],d,e)};c.addControl=a.addControl;a.addControl=function(b,d,e){if(b!=null)a.$container=d==0||typeof d=="undefined"?a.$panel1:a.$panel2,d===!0&&(e=!0),c.addControl(b,e)};c.append=a.append;a.append=function(b,d){a.$container=d==0||typeof d=="undefined"?a.$panel1:a.$panel2;c.append(b)};a.expand=function(){a.expanded=!0;a.trigger("resize",{panel1:{width:a.$panel1.width(),height:a.$panel1.height()},
panel2:{width:a.$panel2.width(),height:a.$panel2.height()}})};a.collapse=function(){a.expanded=!1;a.trigger("resize",{panel1:{width:a.$panel1.width(),height:a.$panel1.height()},panel2:{width:a.$panel2.width(),height:a.$panel2.height()}})};a.toggleExpanded=function(){a.expanded?a.collapse():a.expand();a.changeTitle()};a.changeTitle=function(){a._$splitter_btn.attr("title",a.expanded?mx.msg("SPLITTER_HIDE"):mx.msg("SPLITTER_SHOW"))};a.setBorderThick=function(b){a.borderThick=b;a.$panel1.css("border-width",
a.borderThick);a.$panel2.css("border-width",a.borderThick)};a.loadOptions=function(){var b=null,b=a.orientation=="vertical"?a.cols.replace(/\*/g,"auto").split(","):a.rows.replace(/\*/g,"auto").split(","),d=null,c=null;b.length==2&&(d=b[0].trim(),c=b[1].trim());a.splitOptions={panel1:d,panel2:c}};a._do_resizing_=function(){var b={panel1:{width:a.$panel1.width(),height:a.$panel1.height()},panel2:{width:a.$panel2.width(),height:a.$panel2.height()}};a.trigger("resizing",b)};a._cover=function(b){($isBoolean(b)?
b:1)?(b=$("<div style='position:absolute;height:100%;width:100%; left:0; top:0' id='splitCover'/>"),b.css("zIndex",99999),a.$e.append(b)):(b=a.$e.children("div#splitCover"),$notEmpty(b)&&b.remove())};a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.TabControl=function(){function i(){a.$container.addClass("tabControl");a.$container.append("<div id=head class=tab-head></div><div id=body class=tab-body></div>");a.$head=a.$("#head");a.$head.userSelectable(!1);a.$body=a.$("#body");a.setPadding(a.padding);a.$right_scroll_div=$("<div class='head-right'/>");a.$right_scroll_div.on("mouseover",g);a.$head.append(a.$right_scroll_div);a.$left_scroll_div=$("<div class='head-left'/>");a.$left_scroll_div.on("mouseover",c);a.$head.append(a.$left_scroll_div);
a.$head.on("mouseenter",k);a.$head.on("mouseleave",l);var b=a.$container.get(0);$(b);if(typeof $MX_TAB_HIDEMODE!="undefined")a.tabHideMode=$MX_TAB_HIDEMODE;a.$head.on("click","a",function(){a.enabled&&a.selectPage($(this).attr("id"),!0)});a.$head.on("click","a .tab-close-icon",function(b){if(a.enabled){var m=$(this).parent().attr("id");a.removePage(m);b.stopPropagation();return!1}});a.headerVisible||a.setHeaderVisible(a.headerVisible);if($isArray(a.pages))b=a.pages,a.pages=[],a.appendPages(b);$.isIE67()&&
a.$container.resize(function(){a.$body.css("height",a.$container.height()-a.$head.outerHeight()-parseInt(a.$body.css("padding"))*2-4)})}function b(b){var c=b.$button.prevAll("a"),e=0;c.each(function(a){e+=c.eq(a).outerWidth()});var d=a.$head.scrollLeft(),f=a.$head.outerWidth(),b=e+b.$button.outerWidth();e<d?a.$head.scrollLeft(e-1):b>d+f&&a.$head.scrollLeft(b-f);if(a.$right_scroll_div.css("display")!="none"||a.$left_scroll_div.css("display")!="none")a.$right_scroll_div.css("right",0-a.$head.scrollLeft()),
a.$left_scroll_div.css("left",a.$head.scrollLeft())}function g(){a.$right_scroll_div.one("mouseout",f);j=window.setInterval(n,100)}function c(){a.$left_scroll_div.one("mouseout",f);j=window.setInterval(o,100)}function f(){window.clearInterval(j)}function n(){var b=a.$head.scrollLeft();a.$head.scrollLeft(b+20);a.$right_scroll_div.css("left",a.$head.scrollLeft()+a.$head.width()-a.$right_scroll_div.width()-2);a.$left_scroll_div.css("left",a.$head.scrollLeft())}function o(){var b=a.$head.scrollLeft();
a.$head.scrollLeft(b-20);a.$right_scroll_div.css("left",a.$head.scrollLeft()+a.$head.width()-a.$right_scroll_div.width()-2);a.$left_scroll_div.css("left",a.$head.scrollLeft())}function k(){var b=a.$head.get(0).scrollWidth,c=a.$head.get(0).offsetWidth;b>c&&(a.$right_scroll_div.css("left",a.$head.scrollLeft()+a.$head.width()-a.$right_scroll_div.width()-2),a.$left_scroll_div.css("left",a.$head.scrollLeft()),a.$right_scroll_div.show(),a.$left_scroll_div.show())}function l(){a.$right_scroll_div.css("left",
a.$head.scrollLeft()+a.$head.width()-a.$right_scroll_div.width()-2);a.$left_scroll_div.css("left",a.$head.scrollLeft());a.$right_scroll_div.hide();a.$left_scroll_div.hide()}var a=$extend(mx.containers.Container),h={};a.width="100%";a.height="100%";a.headerVisible=!0;a.displayIcon=!1;a.pages=[];a.selection=null;a.tabHideMode="detach";a.onselectionchanged=null;a.onselectionchanging=null;a.$head=null;a.$body=null;a.$left_scroll_div=null;a.$right_scroll_div=null;h.init=a.init;a.init=function(){h.init();
i()};a.setHeaderVisible=function(b){b==null&&(b=!0);b?a.$("> #head").show():a.$("> #head").hide();a.headerVisible=b};a.setPadding=function(b){if(typeof b!="undefined"&&a.$body!=null)a.padding=b,a.$body.css("padding",a.padding)};a.appendPage=function(b,c,e){var d=$.isPlainObject(b)||$instanceOf(b,mx.containers.TabPage)?b.name:b;if(typeof a.pages[d]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[d]));d=null;arguments.length==1&&typeof b=="object"?d=$.isPlainObject(b)?new mx.containers.TabPage(b):
b:arguments.length==2?d=new mx.containers.TabPage({name:b,text:c}):arguments.length==3&&(d=new mx.containers.TabPage({name:b,text:c,closable:e}));d.owner=a;d.parent=a;d.setDisplayIcon();a.$head.append(d.$button);a.tabHideMode=="hide"&&(d.initialized||d.init(),a.$body.append(d.$container),d.$container.hide());a.pages.add(d);a.pages[d.name]=d;a.trigger("ctrladded",{ctrl:d});a.pages.length==1&&a.selectPage(d,!0);return d};a.appendPages=function(b){if($isArray(b))for(var c=0;c<b.length;c++)a.appendPage(b[c])};
a.removePage=function(b){var c=null,c=typeof b=="object"?b:a.pages[b];c!=null&&c.close()};a.removeOtherPages=function(){if(a.selection!=null)for(;a.pages.length>1;)a.pages[0]==a.selection?a.removePage(1):a.removePage(0);else a.clearPages()};a.clearPages=function(){for(;a.pages.length>0;)a.removePage(0)};a.selectPage=function(c,f){var e=null;if(typeof c=="object")e=c;else if(typeof c=="number"||typeof c=="string")e=a.pages[c];if(e&&(e.initialized||e.init(),a.selection!=e)){var d={cancel:!1,page:e};
a.trigger("selectionchanging",d);if(!d.cancel)a.selection!=null&&(a.selection.$button.removeClass("selected"),a.tabHideMode=="detach"?a.selection.$container.detach():a.selection.$container.hide()),b(e),e.$button.addClass("selected"),a.selection=e,a.tabHideMode=="detach"&&a.$body.append(a.selection.$container),e.$container.show(),f&&a.trigger("selectionchanged",{page:e})}};var j=null;h.dispose=a.dispose;a.dispose=function(){if(a.pages!=null){for(var b=0;b<a.pages.length;b++)a.pages[b].dispose(),a.pages[b]=
null;a.pages.clear()}h.dispose()};a.endOfClass(arguments);return a};
mx.containers.TabPage=function(){function i(){var c=b.$container?b.$container.find("IFRAME"):null;c&&c.length>0&&$.each(c,function(b,c){try{$clearIframeLeak(c)}catch(g){}});(c=b.$container?b.$container.find("OBJECT"):null)&&c.length>0&&$.each(c,function(b,c){try{$(c).empty().remove()}catch(g){}})}var b=$extend(mx.containers.Container),g={};b.owner=null;b.$button=$("<a><span class='tab-text'/></a>");b.name=null;b.text=null;b.visible=!0;b.closable=!1;b.imageUrl=null;b.imageKey=null;b.autoInit=!1;b.onhiding=
null;b.onhide=null;b.onclose=null;b.onclosing=null;g.init=b.init;b.init=function(){b.initialized||(g.init(),b.$container.addClass("tab-page"))};b.setImageUrl=function(c){if(c!=null)b.imageUrl=c,b.setDisplayIcon()};b.setImageKey=function(c){if(c!=null)b.imageKey=c,c=mx.mappath("$/icons/"+c+".png"),b.setImageUrl(c)};b.setClosable=function(c){var f=b.$button.find(".tab-close-icon"),g=null;f.length>0&&(g=$(f[0]));c?g==null&&(g=$("<span class='tab-close-icon'/>"),b.$button.append(g)):g!=null&&g.remove();
b.closable=c};b.setDisplayIcon=function(){if(!$isEmpty(b.owner)){var c=b.$button.find(".tab-icon"),f=null;c.length>0&&(f=$(c[0]));b.owner.displayIcon?(f==null&&(f=$("<span class='tab-icon'/>"),b.$button.prepend(f)),f.css("backgroundImage","url("+mx.mappath(b.imageUrl)+")")):f!=null&&f.remove()}};b.append=function(c){typeof c.jquery!="undefined"?b.$container.append(b.$wrap(c)):typeof c.$e!="undefined"&&b.addControl(c)};b.remove=function(c){b.$wrap(c).remove()};b.getIndex=function(){return b.owner!=
null?b.owner.pages.indexOf(b):-1};b.setText=function(c){b.text=c;b.$button.children(".tab-text").text(b.text!=null?b.text:"")};b.setVisible=function(c){(b.visible=c)?b.$button.css("display",""):b.$button.css("display","none")};b.show=function(){b.setVisible(!0)};b.hide=function(){var c={cancel:!1};b.trigger("hiding",c);if(c.cancel)return!1;b.setVisible(!1);b.trigger("hide")};b.close=function(){var c={page:b,cancel:!1};b.trigger("closing",c);if(c.cancel)return!1;b.owner.pages.remove(b);b.owner.pages[b.name]=
null;delete b.owner.pages[b.name];b.trigger("close",{page:b});b.$container!=null&&b.$container.remove();b.$button!=null&&b.$button.remove();delete b.$e;delete b.$button;if(b.owner.selection==b)b.owner.selection=null,b.owner.pages.length>0&&b.owner.selectPage(0);typeof b.dispose=="function"&&b.dispose();return!0};g.dispose=b.dispose;b.dispose=function(){i();g.dispose()};g.endOfClass=b.endOfClass;b.endOfClass=function(c){g.endOfClass(c);b.$button.attr("id",b.name);b.setClosable(b.closable);b.setImageUrl(b.imageUrl);
b.setImageKey(b.imageKey);b.text!=null&&b.setText(b.text);b.visible||b.setVisible(b.visible);return b};b.endOfClass(arguments);return b};$ns("mx.containers");$import("mx.containers.Split");
mx.containers.VSplit=function(){function k(b){a.toggleExpanded();b.stopPropagation()}function l(b){f=a.$panel1.width();h=b.clientX;b.stopPropagation();a._cover(!0);$(document.body).userSelectable(!1);$(document).on("mousemove",j);$(document).one("mouseup",function(){$(document).off("mousemove",j);a._cover(!1)})}function j(b){b=b.clientX-h;$.isIE6()&&(a.activePanelIndex==0&&b>0&&a.$panel1.hasClass("hide")?a.$panel1.removeClass("hide"):a.activePanelIndex==1&&b<0&&a.$panel2.hasClass("hide")&&a.$panel2.removeClass("hide"));
a._do_resizing_();f+b<=a.threshold[0]||b+f+a.threshold[1]>=a.$e.width()-e||(a.$panel1.css("width",f+b),a.trigger("resize",{panel1:{width:a.$panel1.width(),height:a.$panel1.height()},panel2:{width:a.$panel2.width(),height:a.$panel2.height()}}))}function m(){a.activePanelIndex==1&&$isEqual(a.$panel2.css("display"),"none")&&a.$panel1.width(a.$e.outerWidth()-e-g(a.$e.css("borderLeftWidth"))-g(a.$e.css("borderRightWidth")))}function g(a){if(typeof a=="undefined")return 0;a=parseInt(a);return isNaN(a)?
0:a}var a=$extend(mx.containers.Split),c={};a.orientation="vertical";a.cols="auto, auto";var e=3,d=0;c.init=a.init;a.init=function(){c.init();a.$panel1&&a.$panel1.attr("id","vPanel1");a.$panel2&&a.$panel2.attr("id","vPanel2");a._$splitter&&a._$splitter.attr("id","vSplitter");a.$container.addClass("vSplit");a.resizable||(e=1);a.splitOptions.panel1=="auto"&&a.splitOptions.panel2=="auto"?a.$panel1.css("width","50%"):a.splitOptions.panel1!="auto"&&a.$panel1.css("width",a.splitOptions.panel1);a.resizable?
(a._$splitter_btn.on("mousedown",k),a._$splitter_btn.attr("id",a.activePanelIndex==0?"leftSpiltterBtn":"rightSpiltterBtn"),a._$splitter_btn.addClass(a.activePanelIndex==0?"left":"right"),a._$splitter.on("mousedown",l)):a.$panel1.css("margin-right",e);$(window).one("load",function(){d=a.$panel1.width()});if($.isIE67())a.$container.resize(function(){a.$panel1.css("height",a.$container.parent().height()-(a.$panel1.outerHeight()-a.$panel1.height()));a.$panel2.css("height",a.$container.parent().height()-
(a.$panel2.outerHeight()-a.$panel2.height()));(a.$panel2.is(":hidden")||a.$panel2.hasClass("hide"))&&a.$panel1.css("width",a.$container.parent().width()-(a.$panel1.outerWidth()-a.$panel1.width())-e)});else a.$e.one("resize",function(){a.$e.resize(m)})};c.expand=a.expand;a.expand=function(){if(!a.expanded){a._do_resizing_();a._$splitter_btn.removeClass("collapsed");var b=a.$panel2.find(".vSplit");a.activePanelIndex==0?$.isIE6()?a.$panel1.removeClass("hide"):a.$panel1.show():$.isIE6()?a.$panel2.removeClass("hide"):
a.$panel2.show();a.splitOptions.panel1=="auto"?d=a.$e.outerWidth()*0.5:a.splitOptions.panel1.endsWith("%")&&(d=a.$e.outerWidth()*(parseInt(a.splitOptions.panel1)/100));c.expand();a.$panel1.animate({width:d},300,function(){a.changeTitle();if(b.size()>0){b=b.first();b.find(".panel2").size();var c=b.children(".panel1"),f=b.children(".panel2"),g=f.find(".vSplit"),h=g.children(".panel1"),j=g.children(".panel2"),i=c.css("padding"),i=i!=""?parseInt(i):3;h.size()>0?h.width(function(){if(j.is(":hidden"))return a.$e.width()-
d-e*3-c.outerWidth()-i*4}):c.width(function(b,c){return f.is(":hidden")?a.$e.outerWidth()-d-e*2-i*2-2:c})}})}};c.collapse=a.collapse;a.collapse=function(){if(a.expanded){a._do_resizing_();a._$splitter_btn.addClass("collapsed");if(d==0&&(d=a.$panel1.outerWidth(),$.browser.msie&&a.parent&&a.parent.middlePanelWidth))a.parent.leftPanelVisible?d=$isString(a.parent.leftPanelWidth)&&a.parent.leftPanelWidth.indexOf("%")!=-1?a.$e.outerWidth()*(parseInt(a.parent.leftPanelWidth)/100):a.parent.leftPanelWidth:
$isString(a.parent.middlePanelWidth)&&a.parent.middlePanelWidth.indexOf("%")!=-1?d*=parseInt(a.parent.middlePanelWidth)/100:d=a.parent.middlePanelWidth;if(a.activePanelIndex==0)a.$panel1.animate({width:0},300,function(){$.isIE6()?a.$panel1.addClass("hide"):a.$panel1.hide();c.collapse();a.changeTitle()});else{var b=a.$e.outerWidth()-e-g(a.$e.css("borderLeftWidth"))-g(a.$e.css("borderRightWidth"));$.isIE67()&&(b=a.$panel1.width()+a.$panel2.outerWidth(!0));a.$panel1.animate({width:b},300,function(){$.isIE6()?
a.$panel2.addClass("hide"):a.$panel2.hide();c.collapse();a.changeTitle()})}}};var h=0,f=0;a.endOfClass(arguments);return a};$ns("mx.containers");
mx.containers.Wizard=function(){function b(){a.enabled==!0&&(a.$bottom.find("#btnBack").enabled(a.canMoveBack()),a.$bottom.find("#btnNext").enabled(a.canMoveNext()),a.$bottom.find("#btnFinish").enabled(a.canFinish()));a.enabled==!1&&(a.$bottom.find("#btnBack").enabled(!1),a.$bottom.find("#btnNext").enabled(!1),a.$bottom.find("#btnFinish").enabled(!1))}var a=$extend(mx.controls.Control),c={};a.width="auto";a.height="100%";a.steps=[];a.activeStep=null;a.$head=null;a.$body=null;a.$bottom=null;a.stepToggleMode=
"detach";a.onstepchanging=null;a.onstepchanged=null;a.oncancelled=null;a.onfinished=null;c.init=a.init;a.init=function(){if($.isIE67()&&a.width=="auto")a.width="100%";c.init();a.$e.addClass("wizard");a.$e.html("<div id='head'><dl><dt/><dd/></div><div id='body'/><div id='bottom'><div id='buttonGroup'><button id='btnBack' disabled/><button id='btnNext' disabled/><button id='btnFinish' disabled/><button id='btnCancel'/></div></div>");a.$head=a.$e.children("#head");a.$body=a.$e.children("#body");a.$bottom=
a.$e.children("#bottom");a.$bottom.find("#btnBack").text("< "+mx.msg("BACK")).click(function(){a.moveBack()});a.$bottom.find("#btnNext").text(mx.msg("NEXT")+" >").click(function(){a.moveNext()});a.$bottom.find("#btnFinish").text(mx.msg("FINISH")).click(function(){a.finish()});a.$bottom.find("#btnCancel").text(mx.msg("CANCEL")).click(function(){a.cancel()});if(a.steps==null)a.steps=[];else{var b=a.steps;a.steps=[];for(var d=0;d<b.length;d++)a.appendStep(b[d])}$.isIE6()&&a.$body&&a.$e.resize(function(){a.$body.css({height:a.$e.height()-
a.$head.outerHeight()-a.$bottom.outerHeight()})})};a.setEnabled=function(c){if(typeof c!="undefined")a.enabled=c,a.$e.toggleClass("disabled",!c),a.$bottom!=null&&b()};a.appendStep=function(c){var d=null,d=$.isPlainObject(c)?new mx.containers.WizardStep(c):c;d.initialized||d.init();if($notEmpty(a.steps[d.name]))throw Error(mx.err("DUPLICATED_ITEM",[d.name]));a.steps.add(d);$notEmpty(d.name)&&(a.steps[d.name]=d);d.owner=a;a.steps.length==1?a.moveTo(0):b()};a.appendSteps=function(b){for(var c=0;c<b.length;c++)a.appendStep(b[c])};
a.canMoveBack=function(){if(a.activeStep==null)return!1;return a.activeStep.allowMoveBack&&a.activeStep.getLastStep()!=null};a.canMoveNext=function(){if(a.activeStep==null)return!1;return a.activeStep.getNextStep()!=null};a.canFinish=function(){if(a.activeStep==null)return!1;return a.activeStep.getIndex()==a.steps.length-1||a.activeStep.allowFinish};a.moveTo=function(b,c){var f=null,f=typeof b=="object"?b:a.steps[b];if(f!=null){if(a.activeStep!=null){var e={cancel:!1,step:a.activeStep,nextStep:f};
a.trigger("stepchanging",e);if(e.cancel)return}if(e=a.activeStep)a.activeStep.active=!1,a.activeStep.trigger("deactivate"),a.stepToggleMode=="hide"?a.activeStep.$e.hide():a.activeStep.$e.detach();a.activeStep=f;a.stepToggleMode=="hide"&&a.activeStep.$e.show();if(!c&&e)a.activeStep.lastStep=e;a.$body.append(a.activeStep.$e);a.activeStep.active=!0;a.refresh();a.activeStep.trigger("activate");a.trigger("stepchanged")}};a.moveNext=function(){a.canMoveNext()&&a.moveTo(a.activeStep.getNextStep())};a.moveBack=
function(){a.canMoveBack()&&a.moveTo(a.activeStep.getLastStep(),!0)};a.finish=function(){a.trigger("finished")};a.cancel=function(){a.trigger("cancelled")};a.refresh=function(){b();a.activeStep.text!=null&&a.$head.find("dt").text(a.activeStep.text);a.activeStep.description!=null&&a.$head.find("dd").text(a.activeStep.description)};a.endOfClass(arguments);return a};
mx.containers.WizardStep=function(){var b=$extend(mx.containers.Container),a={};b.owner=null;b.name=null;b.text=null;b.description=null;b.active=!1;b.allowMoveBack=!0;b.allowFinish=!1;b.lastStep=null;b.onactivate=null;b.ondeactivate=null;a.init=b.init;b.init=function(){a.init();b.$e.attr("id",b.name);b.setDescription(b.description);b.$e.addClass("wizardStep")};b.setText=function(a){b.text=a};b.setDescription=function(a){b.description=a};b.getLastStep=function(){var a=b.getIndex();if(a==0)return null;
if(b.lastStep==null&&a>0)return b.owner.steps[a-1];return b.lastStep};b.getNextStep=function(){var a=b.getIndex();if(a>-1&&a<b.owner.steps.length-1)return b.owner.steps[a+1];return null};b.getIndex=function(){return b.owner!=null?b.owner.steps.indexOf(b):-1};b.activate=function(){b.owner!=null&&b.owner.moveTo(b)};b.endOfClass(arguments);return b};$ns("mx.controls");
mx.controls.Button=function(){function e(){a.enabled!=!1&&a.trigger("click")}var a=$extend(mx.controls.Control),d={};a.text="";var c=a.onclick=null;d.init=a.init;a.init=function(){c=$("<input type='button'/>");d.init();a.$e.addClass("buttonDiv");a.$e.append(c);a.setText(a.text);a.$e.on("click",e);a._refreshState()};a.setText=function(b){a.text=b;c.val(a.text)};d.setWidth=a.setWidth;a.setWidth=function(b){d.setWidth(b);$isString(b)&&b.endsWith("%")?c.css("width","100%"):typeof b!="undefined"&&c.css("width",
a.width)};d.setHeight=a.setHeight;a.setHeight=function(a){d.setHeight(a);$isString(a)&&a.endsWith("%")?c.css("height","100%"):typeof a!="undefined"&&c.css("height",a)};a._refreshState=function(){c!=null&&c.attr("disabled",!a.enabled)};a.setEnabled=function(b){if(typeof b!="undefined")a.enabled=b,a.$e.toggleClass("disabled",!b),a._refreshState()};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.editors.TimeEditor");
mx.controls.Calendar=function(){function u(b){a.navigateToPrevMonth();b.stopPropagation()}function v(b){a.navigateToNextMonth();b.stopPropagation()}function s(){i=l;j=o;if(c==null&&c==null){c=$("<div id='ymSelector'/>");c.addClass("ymSelector_displayTime");var b=$("<div id='ymSelector_top'/>");c.append(b);b.append($("<div>"+mx.msg("MONTH")+"</div>"));for(var d=$("<table/>"),f=1;f<=2;f++){var e=$("<tr/>");d.append(e);for(var m=1;m<=6;m++){var g=$("<td/>");g.attr("id",(f-1)*6+m-1);g.text((f-1)*6+m);
e.append(g)}}b.append(d);d.on("click","td",w);b=$("<div id='ymSelector_center'/>");c.append(b);b.append($("<div><a id='yearPrev' href='javascript:void(0)' style='text-decoration:none;'/>"+mx.msg("YEAR")+"<a id='yearNext'  href='javascript:void(0)' style='text-decoration:none;'/></a>"));d=$("<table/>");b.append(d);d.on("click","td",x);b.on("click","#yearPrev",y);b.on("click","#yearNext",z);b=$("<div id='ymSelector_bottom'/>");c.append(b);d=$("<input type='button' id='ok_YM' value='"+mx.msg("OK")+"'/>");
f=$("<input type='button' id='cancel_YM'value='"+mx.msg("CANCEL")+"'/>");b.append(d);b.append(f);d.click(A);f.click(B);a.$e.append(c)}b=j;d=c.find("#ymSelector_center table");d.empty();for(f=1;f<=3;f++){e=$("<tr/>");d.append(e);for(m=1;m<=4;m++){g=$("<td/>");if(f==2&&m==2)g.attr("id",b),g.text(b);else{var h=(f-1)*4+m,h=h<6?b-(6-h):b+(h-6);g.attr("id",h);g.text(h)}e.append(g)}}c.show();c.find("#ymSelector_top #"+i).addClass("monthSelected");c.find("#ymSelector_center #"+j).addClass("yearSelected");
a.$e.find("table#calendarTable").length!=0&&(a.timeEditor!=null?c.height(a.$e.find("table#calendarTable").outerHeight()+14):c.height(a.$e.find("table#calendarTable").outerHeight()))}function C(b){a.enabled&&(s(),b.stopPropagation())}function w(b){a.enabled&&(c!=null&&(c.find(".monthSelected").removeClass("monthSelected"),$(b.target).addClass("monthSelected"),i=parseInt($(b.target).attr("id"))),b.stopPropagation())}function y(){a.enabled&&t(!0)}function z(){a.enabled&&t(!1)}function t(a){if(c!=null){c.find(".yearSelected").removeClass("yearSelected");
var d=c.find("#ymSelector_center td");d.each(function(f){var e=parseInt(d.eq(f).text());d.eq(f).attr("id",a?e-12:e+12);d.eq(f).text(a?e-12:e+12)});c.find("#ymSelector_center #"+j).addClass("yearSelected")}}function x(b){a.enabled&&(c!=null&&(c.find(".yearSelected").removeClass("yearSelected"),$(b.target).addClass("yearSelected"),j=parseInt($(b.target).attr("id"))),b.stopPropagation())}function A(b){a.enabled&&(c!=null&&(a.navigateTo(j,i),n?a.setValue($format(""+j+"-"+(i+1),a.formatString),!0):c.hide()),
b.stopPropagation())}function B(b){a.enabled&&(c!=null&&(n||c.hide()),b.stopPropagation())}function D(b){if(a.enabled){if(a.displayTime){var d=a.timeEditor.value;$isString(d)&&(d=parseDate(d));a.setValue(this.id+" "+$format(d,a.timeEditor.formatString),!0)}else a.setValue(this.id,!0);a.trigger("dateclick");b.stopPropagation()}}function E(b){if(a.value==null)a.value=new Date;a.setValue($format(a.value,"yyyy-MM-dd")+" "+$format(parseDate(b.target.value),"HH:mm:ss"),!0)}var a=$extend(mx.controls.Control),
r={},p=new Date,p=new Date(p.getFullYear(),p.getMonth(),p.getDate());a.value=null;a.formatString="yyyy-MM-dd";a.displayTime=!1;a.timeEditor=null;a.eTag="<div/>";a.onchanged=null;a.ondateclick=null;var n=!1,k=null;r.init=a.init;a.init=function(){r.init();a.$e.addClass("calendar");if(a.formatString=="yyyy-MM"||a.formatString=="yyyy")n=!0;if(n){var b=a.value;$isEmpty(b)&&(b=$format(new Date,a.formatString));a.setValue(b);s()}else{k=$("<table id=calendarTable/>");k.append("<tr id=naviRow><td><a href='javascript:void(0)' style='text-decoration:none;' id=prevMonthButton></a></td><td colspan=5 id=monthLabel/><td><a href='javascript:void(0)' style='text-decoration:none;' id=nextMonthButton></a></td></tr>");
k.attr("cellPadding",0);k.attr("cellSpacing",0);a.$e.userSelectable(!1);a.$e.append(k);for(b=0;b<7;b++){var d=$("<tr/>");b==0?d.attr("id","weekRow"):d.addClass("dayRow");for(var f=0;f<7;f++){var e=$("<td></td>");b==0&&e.text(mx.msg("DAY_"+f));d.append(e)}k.append(d)}a.$("#monthLabel").click(C);a.$(".dayRow td").click(D);a.$("#prevMonthButton").parent().click(u);a.$("#nextMonthButton").parent().click(v);a.setFormatString(a.formatString);b=a.value;$isEmpty(b)&&(b=$format(new Date,a.formatString));a.setValue(b)}};
a.setValue=function(b,d){$isEmpty(b)&&(b=null);typeof b=="string"&&(b=parseDate(b));var f=!1;a.value*1!=b*1&&(f=!0);a.value=b;var e=b.getFullYear(),c=b.getMonth(),g=new Date(e,c,1),h=new Date(e,c,Date.getDaysInMonth(e,c)),j=null,j=g.getDay()==0?g.addWeeks(-1):g.addDays(-g.getDay()),k=a.$(".dayRow > td");a.$(".selected").removeClass("selected");for(var i=0;i<k.length;i++){var q=j.addDays(i),n=k.eq(i);n.toggleClass("outOfRange",q<g||q>h);n.toggleClass("today",q*1==p*1);n.text(q.getDate());n.attr("id",
$format(q,"yyyy-MM-dd"))}a.$("#monthLabel").text(e+"-"+(c+1));a.value&&(g=a.$("#"+$format(a.value,"yyyy-MM-dd")),g.length>0&&(g.addClass("selected"),g.parent().addClass("selected")));o=e;l=c;a.$(".selected").removeClass("selected");e=$format(a.value,"yyyy-MM-dd");a.value!=null&&(c=a.$("#"+e),c.length&&(c.addClass("selected"),c.parent().addClass("selected")));a.displayTime&&a.timeEditor!=null&&(e=e+" "+Date.format(parseDate(a.timeEditor.value),"HH:mm:ss"),a.timeEditor.setValue(parseDate(e),!1));d&&
f&&a.trigger("changed")};a.setFormatString=function(b){var d=b?b.toLowerCase():"yyyy-mm-dd";if(d=="yyyy-mm-dd hh:mm:ss")a.formatString="yyyy-MM-dd HH:mm:ss",a.setDisplayTime(!0);else if(d=="yyyy-mm-dd hh:mm")a.formatString="yyyy-MM-dd HH:mm",a.setDisplayTime(!0);else if(d=="yyyy-mm-dd")a.formatString="yyyy-MM-dd",a.setDisplayTime(!1);else if(d=="yyyy-mm")a.formatString="yyyy-MM",a.setDisplayTime(!1);else if(d=="yyyy")a.formatString="yyyy",a.setDisplayTime(!1);else throw Error(""+b+"\u3002");};var h=
null;a.setDisplayTime=function(b){b==null&&(b=!0);if(a.formatString=="yyyy-MM"||a.formatString=="yyyy")b=!1;if(a.displayTime=b){if(h==null)h=$("<tr id=timeRow><td colspan=7></td></tr>"),a.timeEditor=new mx.editors.TimeEditor({enabled:a.enabled,width:100,formatString:a.formatString.split(" ")[1],value:a.value?a.value:new Date,left:35,onchanged:E}),h.children("td").append(a.timeEditor.$e),k.append(h);h.is(":hidden")&&(a.timeEditor.setValue(a.value?a.value:new Date),h.show())}else h!=null&&h.hide()};
var o=null,l=null;a.navigateTo=function(b,d){var c,e;arguments.length==1?($isString(b)?e=parseDate(b):$isNumber(b)?e=parseDate(b.toString()):$isObject(b)&&(e=b),$isEmpty(e)&&(e=p),c=e.getFullYear(),e=e.getMonth()):(c=parseInt(b),e=parseInt(d));if(!(o==c&&l==e)&&$notEmpty(a.value)){var h=a.value.getDate(),g=Date.getDaysInMonth(c,e);h>g&&(h=g);a.setValue(new Date(c,e,h),!0)}};a.navigateToNextMonth=function(){a.enabled&&(l==11&&(l=-1,o++),a.navigateTo(o,l+1))};a.navigateToPrevMonth=function(){a.enabled&&
(l==0&&(l=12,o--),a.navigateTo(o,l-1))};r.setEnabled=a.setEnabled;a.setEnabled=function(b){r.setEnabled(b);a.timeEditor&&a.timeEditor.setEnabled(b)};var i=0,j=0,c=null;a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.MenuItem");$import("mx.controls.ToolStrip");
mx.controls.ContextMenu=function(){function d(b){var b=b.target,e=$(b).closest("ul.menu"),c,f=!1;if(e.length>0&&(c=e.data("control"),$isEqual(c,a)||$isEqual(c.owner,a)))f=!0;if(f){c=null;if(b.tagName=="SPAN"||b.tagName=="IMG")c=b.parentNode.parentNode;else if(b.tagName=="A")c=b.parentNode;if(c!=null&&(c.className=="group"||c.className.indexOf("group ")!=-1||c.className.indexOf(" group")!=-1)){$(document).one("mousedown",d);$(document).one("mouseup",d);return}if(b==e.menuSilde("upButton").get(0)||
b==e.menuSilde("downButton").get(0)){$(document).one("mousedown",d);$(document).one("mouseup",d);return}}a.hideDropDown();a.$e.hide();$(document).off("mousedown",d);$(document).off("mouseup",d)}var a=$extend(mx.controls.ToolStrip),g={};a.toolStripType="contextMenu";a.defaultItemType=mx.controls.MenuItem;a.direction="vertical";a.ondropdown=null;a.ondroppingdown=null;g.init=a.init;a.init=function(){g.init();a.$e.addClass("menu");a.$e.menuSilde()};a.show=function(b,e,c){if(a.enabled&&a.hasChildren()&&
(a.dropDownChildItem!=null&&a.dropDownChildItem.hideDropDown(),a.updateItemsVisibility(a.items))){var f={cancel:!1};a.trigger("droppingdown",f);f.cancel||(a.$e.popup({left:b,top:e,speed:c}),$(document).one("mousedown",d),$(document).one("mouseup",d),a.trigger("ondropdown"))}};a.endOfClass(arguments);return a};$ns("mx.controls");
mx.controls.Control=function(){var a=$extend(MXComponent),f={};a.alias=null;a.permissionID=null;a.parent=null;a.display="";a.position=null;a.left=null;a.right=null;a.top=null;a.bottom=null;a.width=null;a.height=null;a.enabled=!0;a.visible=!0;a.border=null;a.padding=null;a.css=null;a.cssClass=null;a.eTag="<div/>";a.$e=null;a.enableBrowserContextMenu=!1;a.layoutConfigs=null;f.init=a.init;a.init=function(){f.init();if(a.$e==null)a.$e=$(a.eTag);a.id!=null&&a.$e.attr("id",a.id);a.alias!=null&&a.$e.attr("alias",
a.alias);a.permissionID!=null&&a.$e.attr("permissionID",a.permissionID);a.$e.data("control",a);a.display!=null&&a.setDisplay(a.display);a.position!=null&&a.setPosition(a.position);a.left!=null&&a.setLeft(a.left);a.right!=null&&a.setRight(a.right);a.top!=null&&a.setTop(a.top);a.bottom!=null&&a.setBottom(a.bottom);a.width!=null&&a.setWidth(a.width);a.height!=null&&a.setHeight(a.height);a.border!=null&&a.setBorder(a.border);a.padding!=null&&a.setPadding(a.padding);a.css!=null&&a.setCss(a.css);a.cssClass!=
null&&a.setCssClass(a.cssClass);a.visible===!1&&a.hide();a.enabled===!1&&a.setEnabled(a.enabled)};var g=null;a.getContext=function(){if(g==null)for(var b=a;b!=null;){if($instanceOf(b,mx.views.ViewPort)){g=b.context;break}b=b.parent}return g};a.setDisplay=function(b){if(typeof b!="undefined")a.display=b,a.$e.css("display",a.display)};a.setPosition=function(b){if(typeof b!="undefined")a.position=b,a.$e.css("position",a.position)};a.setLeft=function(b){if(typeof b!="undefined")a.left=b,a.$e.css("left",
a.left)};a.setRight=function(b){if(typeof b!="undefined")a.right=b,a.$e.css("right",a.right)};a.setTop=function(b){if(typeof b!="undefined")a.top=b,a.$e.css("top",a.top)};a.setBottom=function(b){if(typeof b!="undefined")a.bottom=b,a.$e.css("bottom",a.bottom)};a.setWidth=function(b){if(typeof b!="undefined"&&a.$e)a.width=b,a.$e.css("width",a.width)};a.setHeight=function(b){if(typeof b!="undefined"&&a.$e)a.height=b,a.$e.css("height",a.height)};a.setCss=function(b){a.css=b;a.$e.css(b)};a.setCssClass=
function(b){a.cssClass=b;a.$e.addClass(b)};a.setEnabled=function(b){if(typeof b!="undefined")a.enabled=b,a.$e.toggleClass("disabled",!b)};a.setVisible=function(b){if(typeof b!="undefined"&&a.$e)a.visible=b,a.visible?a.$e.show():a.$e.hide()};a.setPadding=function(b){if(typeof b!="undefined")a.padding=b,a.$e.css("padding",b)};a.setBorder=function(b){if(typeof b!="undefined")a.border=b,a.$e.css("border",b)};a.contains=function(b){try{var c=a.$wrap(b)}catch(d){return!1}return $.contains(a.$e.get(0),c.get(0))};
a.show=function(){a.setVisible(!0)};a.hide=function(){a.setVisible(!1)};a.resizeTo=function(b,c){a.setWidth(b);a.setHeight(c)};a.moveTo=function(b,c){typeof b!="undefined"&&a.setLeft(b);typeof c!="undefined"&&a.setTop(c)};a.getEl=function(){if(null!=a.$e&&a.$e instanceof jQuery)return a.$e.get(0);return null};a.$=function(b){var c=null;return c=a.$e!=null?a.$e.find(b):$(b)};a.$wrap=function(b){var c=null,c=b==null?a.$e:typeof b.jquery!="undefined"?b:typeof b.$e!="undefined"?b.$e:$isString(b)?a.$e==
null?$(b):a.$(b):$(b);if(c==null||c.length==0)throw Error("Nothing is selected by the jQuery expression '"+b+"'."+($isString(b)&&!b.startsWith("#")?" Missing the '#'?":""));return c};f.dispose=a.dispose;a.dispose=function(){g=null;a.off();if(a.$e){try{a.$e.detach()}catch(b){}a.$e.off();a.$e.unbind();a.$e.data("control",null);if($isIE()){var c=a.$e.get(0);if(c){var d=["onresizeend","onblur","onkeydown","ondragstart","onscroll","onpropertychange","ondragenter","onmouseup","oncontextmenu","onbeforeupdate",
"onreadystatechange","onmouseenter","onresize","onselectstart","ondragend","onfocus","onmouseover","ondblclick","onkeypress","onmousewheel","onkeyup","onmovestart","onmouseout","oncellchange","onmousedown","onmouseleave","onclick","ondrag","onresizestart","ondatasetcomplete","onchange","onerror","onload","onselect"],c=c.getElementsByTagName("*"),h;try{for(var j=0;j<c.length;j++){h=c[j];for(var i=0;i<d.length;i++)h[d[i]]&&(h[d[i]]=null);h=null}}catch(k){}}}a.$e.empty().remove();a.$e=null;delete a.$e}f.dispose();
for(var e in a)if(d=typeof a[e],d=="function"||d=="object"){a[e]&&a[e].constructor==MXEvent&&a[e].clear();try{a[e]=null}catch(l){}}};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.DragUploadControl");$import("mx.controls.Slideshow");
mx.controls.DragDataUploadControl=function(){function p(){if(a.displayToolBar&&a.grid){var b=a.$e.outerHeight()-k;a.grid&&a.grid.$e.css({height:b});a.$tipContainer&&a.$tipContainer.css({top:k+l+"px"})}else a.grid&&a.grid.$e.css({height:"100%"}),a.$tipContainer&&a.$tipContainer.css({top:l+"px"})}function q(){a.grid.selection!=null?a.grid.selection.getValue("uploadItem").status==a.uploadStatus.COMPLETE&&a.download():mx.indicate("info",mx.msg("SELECT_ONE_ITEM"))}function r(a){g=null;g=new mx.controls.Slideshow({auto:!0,
direction:"toRight",items:$clone(h)});g.show(a)}function s(b,d){var c=$("<img/>"),e=b.getValue("name");".jpg,.jpeg,.gif,.png,.bmp,.tiff".indexOf(e.substring(e.lastIndexOf(".")).toLowerCase())>-1?(a.preview(b,!0),c.click(function(){a.preview(b)}),c.attr("src",mx.mappath("$theme/images/fileupload/preview.png")),c[0].title=mx.msg("UPLOAD_PREVIEW"),c.css("cursor","pointer")):(c.attr("src",mx.mappath("$theme/images/fileupload/preview2.png")),c[0].title=mx.msg("PREVIEW_NOT_SUPPORT"));d.append(c)}function t(){var b=
[{name:"add",text:mx.msg("UPLOAD_BTN_ADD"),toolTip:mx.msg("UPLOAD_BTN_ADD"),imageUrl:mx.mappath("$theme/images/fileupload/add.gif"),onclick:u},"-",{name:"upload",text:mx.msg("UPLOAD"),toolTip:mx.msg("UPLOAD"),imageUrl:mx.mappath("$theme/images/fileupload/upload.gif"),onclick:a.uploadAll},"-",{name:"remove",text:mx.msg("UPLOAD_REMOVE"),toolTip:mx.msg("UPLOAD_REMOVE"),imageUrl:mx.mappath("$theme/images/fileupload/cut.png"),onclick:a.removeSelection},"-",{name:"clear",text:mx.msg("UPLOAD_BTN_CLEAN"),
toolTip:mx.msg("UPLOAD_BTN_CLEAN"),imageUrl:mx.mappath("$theme/images/fileupload/delete.gif"),onclick:a.clearItems},"-",{name:"download",text:mx.msg("DOWNLOAD"),toolTip:mx.msg("DOWNLOAD"),imageUrl:mx.mappath("$theme/images/fileupload/download.gif"),enabled:!1,onclick:q}];a.context&&(b=b.concat(["-",{name:"close",text:mx.msg("UPLOAD_BTN_CLOSE"),toolTip:mx.msg("UPLOAD_BTN_CLOSE"),imageUrl:mx.mappath("$theme/images/fileupload/close.png"),onclick:a.close}]));return toolBar=new mx.controls.ToolBar({items:b})}
function v(){var b=null;a.displayToolBar&&a.toolBar&&(b=a.toolBar.getItemByName("download"));b&&b.setEnabled(!1);if(a.grid.itemMenu&&a.grid.selection){a.grid.itemMenu.clearItems();var d=a.grid.selection.getValue("uploadItem");d.status==a.uploadStatus.COMPLETE?(a.grid.itemMenu.appendItem("downloadItem",mx.msg("DOWNLOAD")),a.grid.itemMenu.getItemByName("downloadItem").on("click",a.download),b&&b.setEnabled(!0)):d.status==a.uploadStatus.UNSTART&&!a.readOnly&&a.grid.itemMenu.appendItem("uploadItem",mx.msg("UPLOAD"));
a.readOnly||a.grid.itemMenu.appendItem("deleteItem",mx.msg("DELETE"))}}function i(){var b=[],d=j();d.open("POST",a.baseUrl,!1);var c=a.filePath?"&filePath="+a.filePath:"";d.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");d.send("option=getFile&tableName="+a.tableName+"&pkVal="+a.pkVal+"&colName="+a.colName+"&uploadMode="+a.uploadMode+c+"&rnd="+Math.random());if(d.status==200&&$notEmpty(d.responseText))try{b=eval("("+d.responseText+")")}catch(e){}return b}function m(a){if(a){var d=
$("<div class='previewMask mx'/>"),c=$("<table id='maskTable' cellspacing=0; border=0;><tr><td align=center></td></tr></table>"),e=$("<div class='preview'/>"),n=$("<div id='content'/>"),f=$("<div id='btnClose'/>"),o=$("<table cellspacing=0; border=0; align=center><tr><td align=center></td></tr></table>");if(h.length>1){var g=$("<div id='slider'></div>");g[0].title=mx.msg("SLIDESHOW_MODE");g.on("click",r)}f.click(function(){d.detach()});o.find("td").append(a);n.append(o);e.append(n);e.append(f);e.append(g);
c.find("td").append(e);d.append(c);$(document.body).append(d)}}function u(){a.$tipContainer.find("input").get(0).click()}function j(){var a=null;window.ActiveXObject?a=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(a=new XMLHttpRequest);return a}var a=$extend(mx.controls.DragUploadControl),f={};a.fileNames="";a.baseUrl=mx.mappath("~/../mx/servlets/fileUpload");a.params=null;a.tableName="";a.primaryKey="";a.pkVal="";a.colName="";a.uploadMode="";a.filePath=null;a.displayToolBar=!1;a.toolBar=
null;a.isVirtual=!1;a.onclosed=null;var k=25,l=25;f.init=a.init;a.init=function(){f.init();a.displayToolBar&&(a.$e.resize(p),a.toolBar?a.setToolBar(a.toolBar):a.setToolBar(t()));a.url=a.baseUrl;if(a.params==null)a.params={};a.params.option="upload";if(a.filePath)a.params.filePath=a.filePath;a.params.tableName=a.tableName;a.params.primaryKey=a.primaryKey;a.params.pkVal=a.pkVal;a.params.colName=a.colName;a.params.uploadMode=a.uploadMode;a.params.isVirtual=a.isVirtual;a.grid.on("selectionchanged",v);
for(var b=i(),d=0;d<b.length;d++)a.appendItem({name:b[d].attName,fileId:b[d].fileId,size:b[d].attSize,status:a.uploadStatus.COMPLETE});a.grid.on("load",function(){for(var b=0;b<a.items.length;b++)a.items[b].setProgress(100)});a.grid.appendColumn("picpreview",mx.msg("UPLOAD_PREVIEW"),"75","center").renderCell=s;a.grid.load();a.readOnly&&a.setReadOnly(a.readOnly)};a.refreshPk=function(b,d){if($isArray(b)&&b.length>0){for(var c="",e=0;e<b.length;e++)$notEmpty(b[e].mxVirtualId)&&(c=c+b[e].mxVirtualId+
":"+b[e][d]+";");var e=a.filePath?"&filePath="+a.filePath:"",f=j();f.open("POST",a.baseUrl,!1);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");f.send("option=refreshPk&tableName="+a.tableName+e+"&replaceValues="+c+"&rnd="+Math.random());if(f.status==200&&f.responseText)return"success";else throw"error";}};a.download=function(b){typeof b=="string"?b.endsWith(";")&&(b=b.substring(0,b.length-1)):b=a.grid.selection.getValue("uploadItem").name;b=b.replace(/\+/g,"%2B");
window.open(encodeURI(encodeURI(a.baseUrl+"?option=download&tableName="+a.tableName+"&pkVal="+a.pkVal+"&colName="+a.colName+"&fileName="+b+"&uploadMode="+a.uploadMode+(a.filePath?"&filePath="+a.filePath:"")+"&rnd="+Math.random())))};f.appendItem=a.appendItem;a.appendItem=function(b){if(b=f.appendItem(b))a.fileNames=a.fileNames+b.name+";";return b};f.removeItem=a.removeItem;a.removeItem=function(b){typeof b=="number"&&(b=a.items[b]);var d=b.name.replace(/\+/g,"%2B"),c=j(),e=a.filePath?"&filePath="+
a.filePath:"";c.open("POST",a.baseUrl,!1);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");c.send("option=delete&tableName="+a.tableName+"&primaryKey="+a.primaryKey+e+"&pkVal="+a.pkVal+"&colName="+a.colName+"&fileName="+d+"&uploadMode="+a.uploadMode+"&isVirtual="+a.isVirtual+"&rnd="+Math.random());h.remove(h[b.name]);delete h[b.name];if(c.status==200&&c.responseText){$notEmpty(c.responseText)&&f.removeItem(b);d=a.fileNames.split(";");for(c=0;c<d.length;c++)if(d[c]==
b.name){d.remove(d[c]);break}b="";for(c=0;c<d.length;c++)$notEmpty(d[c])&&(b=b+d[c]+";");a.fileNames=b}else throw"error";};a.setToolBar=function(b){if(a.displayToolBar&&b&&$instanceOf(b,mx.controls.ToolBar))a.toolBar&&a.toolBar.$e.remove(),a.toolBar=b,a.$e.prepend(a.toolBar.$e)};f.setReadOnly=a.setReadOnly;a.setReadOnly=function(b){f.setReadOnly(b);a.grid.itemMenu&&a.grid.itemMenu.setEnabled(!0);a.grid.contextMenu&&a.grid.contextMenu.setEnabled(!0);a.grid.deselectAll(!1);a.displayToolBar&&a.toolBar&&
$(a.toolBar.items).each(function(){this.name!="close"&&!this.isSeparator&&this.setEnabled(!a.readOnly)})};a.removeSelection=function(){if(a.grid.selection!=null){var b=a.grid.selection.getValue("uploadItem");a.removeItem(b);a._changeErrorState()}else mx.indicate("info",mx.msg("SELECT_ONE_ITEM"))};a.getUploadedNames=function(){for(var a=[],a=i(),d="",c=0;c<a.length;c++)d+=a[c].attName+";";return d};a.close=function(){a.trigger("closed")};a.preview=function(b,d){var c=b.getValue("uploadItem"),e=b.getValue("name");
if(c.status==a.uploadStatus.COMPLETE)if(e=e.replace(/\+/g,"%2B"),uri=encodeURI(encodeURI(a.baseUrl+"?option=download&tableName="+a.tableName+"&pkVal="+a.pkVal+"&colName="+a.colName+"&fileName="+e+"&uploadMode="+a.uploadMode+(a.filePath?"&filePath="+a.filePath:""))),d===!0){var f={src:uri};h.add(f);h[e]=f}else $img=$("<img src='"+uri+"'/>"),m($img);else if(c.status==a.uploadStatus.UNSTART){var e=new FileReader,g=null;e.onload=function(a){d===!0?(a={src:a.target.result},h.add(a),h[c.name]=a):(g='<img src="'+
a.target.result+'" />',m($(g)))};e.readAsDataURL(c.file)}};var h=[],g=null;a._refreshFileId=function(){for(var b=i(),b=b||[],d=0;d<a.items.length;d++)for(var c=a.items[d],e=0;e<b.length;e++)b[e].attName==c.name&&(c.fileId=b[e].fileId)};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.ProgressBar");$import("mx.datacontrols.DataGrid");$import("mx.io.FileUploader");$import("mx.lib.jquery-cookie");$import("mx.windows.WindowManager");
mx.controls.DragUploadControl=function(){function n(){a.readOnly||a.$tipContainer.find("input").get(0).click()}function o(){var b=!0;$(a.items).each(function(){if(this.status!=a.uploadStatus.COMPLETE)return b=!1});b&&a.trigger("allitemuploaded")}function p(b){var c={cancel:!1,item:b.item};a.trigger("itemuploading",c);b.cancel=c.cancel}function b(){a.trigger("itemuploaded")}function l(a){var b=null;return b=a<1024?a+"B":a>=1024&&a<1048576?i(a/1024)+"KB":i(a/1048576)+"MB"}function i(a){var b=parseFloat(a);
return b=isNaN(b)?0:Math.round(a*100)/100}function d(){a.items.length>0?(a.$tipContainer.hide(),a.grid.$e.show()):(a._markError(!1),a.$tipContainer.show(),a.grid.$e.hide())}function e(){a.$e.on("dragenter",function(a){a.stopPropagation();a.preventDefault()});a.$e.on("dragover",function(a){a.stopPropagation();a.preventDefault()});try{a.$e.get(0).addEventListener("drop",j,!1)}catch(b){}}function g(b){a.$e.get(0).removeEventListener("drop",j,!1);var c;h==null&&(h=$("<div id='loadingMask'></div>"),h.css({position:"absolute",
"z-index":999999,background:"black",left:0,right:0,top:0,bottom:0}),h.opacity(0.1),h.hide());c=h;b?(a.$e.get(0).addEventListener("drop",j,!1),c.hide(),c.detach(),d()):(a.$tipContainer&&a.$tipContainer.hide(),a.$e.append(c),c.show())}function j(a){a.stopPropagation();a.preventDefault();r(a.dataTransfer.files)}function r(b){for(var c=0;c<b.length;c++)a.appendItem(b[c])}function s(b){switch(b){case "uploadItem":a.grid.selection!=null&&(b=a.grid.selection.getValue("uploadItem"),b!=null&&b.upload(!0));
break;case "deleteItem":t();break;case "uploadAll":a.uploadAll();break;case "deleteSelections":a.displayCheckBox?a.removeCheckedItems():t();break;case "deleteAll":a.clearItems()}}function t(){if(a.grid.selection!=null){var b=a.grid.selection.getValue("uploadItem");a.removeItem(b)}}function u(){if(a.grid.selection){var b=a.grid.selection.getValue("id");a.trigger("selectionchanged",{item:a.items[b]})}}function v(){if(!($.cookie("showFileUpgrade")=="ignore"||$.cookie("upgradeWinTip")=="yes")){$.cookie("upgradeWinTip",
"yes");var b=$("<div></div>"),c=$("<span id='tip'>"+mx.msg("UPLOAD_UPGRADE_TIP")+"<span>"+mx.msg("UPLOAD_UPGRADE_IGNORE")+"</span></span>"),d=$("<div id='upgradeBtn'>"+mx.msg("UPGRADE_BTN")+"</div>");b.addClass("uploadUpgrade");d.click(function(){window.open(mx.mappath("~/../mx/resources/chromeframe/default.htm"))});b.append(c);b.append(d);c.find("span").click(function(){k.close()});c=null;c=a.getContext()&&a.getContext().windowManager?a.getContext().windowManager:new mx.windows.WindowManager;k=c.create(mx.windows.Window,
{title:mx.msg("TITLE"),width:500,height:400,resizable:!1,reusable:!0});k.$body.append(b);k.on("close",function(){$.cookie("showFileUpgrade","ignore");$.cookie("upgradeWinTip","no")});k.showDialog()}}var a=$extend(mx.controls.Control),m={};a.displayCheckBox=!1;a.url=mx.mappath("~/../mx/servlets/fileUpload");a.items=[];a.grid=null;a.maxCount=-1;a.params=null;a.itemMenu=null;a.contextMenu=null;a.onuploadcomplete=null;a.maxSize=-1;a.totalMaxSize=-1;a.limitTypes="";a.allowTypes=null;a.$tipContainer=null;
a.isVirtual=!1;a.readOnly=!1;a.uploadStatus={UNSTART:mx.msg("UPLOAD_UNSTART"),UPLOADING:mx.msg("UPLOAD_UPLOADING"),COMPLETE:mx.msg("UPLOAD_COMPLETE"),STOP:mx.msg("UPLOAD_STOP"),ERROR:mx.msg("UPLOAD_ERROR")};a.onitemuploading=null;a.onitemuploaded=null;a.onallitemuploaded=null;var k=a.onselectionchanged=null;m.init=a.init;a.init=function(){function b(c){if(!a.readOnly){try{r(c.target.files)}catch(d){a._markError(!0,mx.msg("UPLOAD_ADVANCE_NOT_SUPPORT"),"bottom")}var c=$(c.target),e=c.clone().val("");
e.on("change",b);q=e;c.after(e);c.remove()}}typeof FileReader=="undefined"&&v();m.init();a.$e.addClass("dragUploadControl");var c={option:"upload",isVirtual:a.isVirtual};if($notEmpty(a.params))a.params=$.extend(a.params,c);a.$tipContainer=$("<div id='tip'><input style='display:none' type='file' name='file' multiple='multiple'/><table cellspacing=0 cellpadding=0><tbody><tr><td align='center'><div><div id='img'/><div id='text'/></div></td></tr></tbody></table></div>");a.$tipContainer.addClass("dragUploadControlTip");
a.$tipContainer.find("#text").text(mx.msg("DRAG_FILE_HERE"));a.$e.append(a.$tipContainer);var q=a.$tipContainer.find("input");q.on("change",b);a.$tipContainer.click(n);q.click(function(a){a.stopPropagation()});if(a.itemMenu==null)a.itemMenu={items:[{name:"uploadItem",text:mx.msg("UPLOAD")},"-",{name:"deleteItem",text:mx.msg("DELETE")}],onitemclick:function(a){s(a.item.name)}};if(a.contextMenu==null)a.contextMenu={items:[{name:"uploadAll",text:mx.msg("UPLOAD_ALL")},"-",{name:"deleteSelections",text:mx.msg("DELETE_SELECTIONS")},
"-",{name:"deleteAll",text:mx.msg("DELETE_ALL")}],onitemclick:function(a){s(a.item.name)}};a.grid=new mx.datacontrols.DataGrid({columns:[{name:"id",caption:"ID"},{name:"name",caption:mx.msg("NAME"),width:100},{name:"size",caption:mx.msg("SIZE"),width:80},{name:"status",caption:mx.msg("STATUS"),width:80,renderCell:function(a,b){var c=a.getValue("uploadItem");b.text(c.status);c.$statusCell=b}},{name:"progress",caption:mx.msg("PROGRESS"),width:120,renderCell:function(a,b){var c=new mx.controls.ProgressBar({width:70}),
f=$("<span style='margin-left:5px;vertical-align:middle;'/>");f.text("0.0%");b.append(c.$e);b.append(f);var d=a.getValue("uploadItem");d.progressBar=c;d.$progressSpan=f}}],displayCheckBox:a.displayCheckBox,itemMenu:a.itemMenu,contextMenu:a.contextMenu,allowPaging:!1,displayRowNumber:!0,onselectionchanged:u});a.grid.entityContainer.type="local";a.grid.load();a.$e.append(a.grid.$e);d();e();a.readOnly&&a.setReadOnly(a.readOnly);a.enabled===!1&&a.setEnabled(a.enabled);a.on("uploadcomplete",o)};a.appendItem=
function(f){var c=(f.name||"").split("."),c=c[c.length-1].toLowerCase();if($notEmpty(a.allowTypes)&&(","+a.allowTypes.toLowerCase()+",").indexOf(","+c+",")==-1)a._markError(!0,mx.msg("FILE_TYPE_ALLOWED",[a.allowTypes]),"bottom"),mx.indicate("info",mx.msg("ERR_FILE_TYPE_LIMITED"));else if($notEmpty(a.limitTypes)&&(","+a.limitTypes.toLowerCase()+",").indexOf(","+c+",")>-1)a._markError(!0,mx.msg("FILE_TYPE_LIMITED",[a.limitTypes]),"bottom"),mx.indicate("info",mx.msg("ERR_FILE_TYPE_LIMITED"));else if(a._changeErrorState(),
a.maxSize!=-1&&f.size>a.maxSize*1024)mx.indicate("warn",mx.msg("UPLOAD_SIZE_LIMIT",[a.maxSize+"KB"]));else{if(a.totalMaxSize!=-1){var e=0;$(a.items).each(function(){e+=parseInt(this.size)});e+=parseInt(f.size);if(e>a.totalMaxSize*1024){mx.indicate("warn",mx.msg("UPLOAD_TOTALSIZE_LIMIT",[a.totalMaxSize+"KB"]));return}}if(a.maxCount>=0&&a.items.length>=a.maxCount)mx.indicate("warn",mx.msg("UPLOAD_COUNT_LIMIT",[a.maxCount]));else return c=null,$.isPlainObject(f)?(f.owner=a,f.params=a.params,c=new mx.controls.DragUploadItem(f)):
$isObject(f)&&(c=new mx.controls.DragUploadItem({params:a.params,file:f,owner:a})),c!=null&&a.items[c.getID()]==null&&(c.on("uploading",p),c.on("uploaded",b),a.grid.appendItem({uploadItem:c,id:c.getID(),name:c.name,size:l(c.size),status:c.status}),a.items[c.getID()]=c,a.items.add(c),d()),c}};a._markError=function(b,c,d){var e=a.$e;b?(d==void 0&&(d="bottom"),e.addClass("error"),e.toolTip({content:c,defaultPosition:d}),$("#toolTip_holder").css("z-index",9999999)):(e.removeClass("error"),e.toolTip("destroy"))};
a._changeErrorState=function(){var b=0;$(a.items).each(function(){this.uploadTypeError&&b++});b==0&&a._markError(!1)};a._removeUploadedErrorFile=function(){for(var b=0;b<a.items.length;){var c=a.items[b];c.status==a.uploadStatus.ERROR?a.removeItem(c):b++}};a.removeItem=function(b){var c=null;typeof b=="number"?c=a.items[b]:typeof b=="object"&&(c=b);c!=null&&(b=c.getID(),delete a.items[b],a.items.remove(c),a.grid.removeItem(b));d()};a.clearItems=function(){for(;a.items.length>0;)a.removeItem(0);a._markError(!1)};
a.removeCheckedItems=function(){var b=a.grid.getCheckedIDs();if(b.length<=0)mx.indicate("info",mx.msg("UPLOAD_FILE_REMOVE"));else for(var c=0;c<b.length;c++)a.removeItem(a.items[b[c]])};a.uploadAll=function(){for(var b=0;b<a.items.length;b++)a.items[b].file!=null&&a.items[b].upload(!0)};a.setParams=function(b){if(a.params!=b)a.params=b};a.setReadOnly=function(b){typeof b=="undefined"&&(b=!0);g(!0);a.readOnly=b;a.grid.itemMenu&&a.grid.itemMenu.setEnabled(!a.readOnly);a.grid.contextMenu&&a.grid.contextMenu.setEnabled(!a.readOnly);
a.$e.get(0).removeEventListener("drop",j,!1);a.readOnly||a.$e.get(0).addEventListener("drop",j,!1)};m.setEnabled=a.setEnabled;a.setEnabled=function(a){m.setEnabled(a);typeof a!="undefined"&&g(a)};var h=null;a.endOfClass(arguments);return a};
mx.controls.DragUploadItem=function(){function n(d){typeof d=="number"?(b.setProgress(d),b.setStatus(b.owner.uploadStatus.UPLOADING)):(d=d.event,d.lengthComputable&&(b.setProgress(Math.round(d.loaded*100/d.total)),b.setStatus(b.owner.uploadStatus.UPLOADING)))}function o(){mx.indicate("error",mx.msg("UPLOAD_ERROR"));b.setStatus(b.owner.uploadStatus.ERROR)}function p(d){if(b.owner!=null){i==!0&&b.trigger("uploaded");var e=d.resultValue,g=null;e.charAt(2)==":"&&(g=e.substring(3,e.length),e=parseInt(e.substring(0,
2)));b.uploadTypeError=!1;e==-2||e==-3||e==-4?(b.setProgress(0),b.setStatus(b.owner.uploadStatus.ERROR),e==-3?(b.uploadTypeError=!0,mx.indicate("info",mx.msg("FILE_TYPE_LIMITED",[g])),b.owner._markError(!0,mx.msg("FILE_TYPE_LIMITED",[g]),"bottom")):e==-4?(b.uploadTypeError=!0,mx.indicate("info",mx.msg("FILE_TYPE_ALLOWED",[g])),b.owner._markError(!0,mx.msg("FILE_TYPE_ALLOWED",[g]),"bottom")):mx.indicate("error",mx.msg("UPLOAD_ERROR"))):(b.setProgress(100),b.setStatus(b.owner.uploadStatus.COMPLETE),
$isFunction(b.owner._refreshFileId)&&b.owner._refreshFileId(),b.owner.grid.deselectAll());b.owner.trigger("uploadcomplete",{resultValue:d.resultValue})}}var b=$extend(MXComponent),l={};b.file=null;b.name=null;b.size=0;b.type=null;b.status=null;b.path=null;b.progress=0;b.fileUploader=null;b.params=null;b.owner=null;b.onuploading=null;b.onuploaded=null;l.init=b.init;b.init=function(){l.init();if(b.file!=null)b.name=b.file.name,b.size=b.file.size,b.type=b.file.type;if(b.fileUploader==null&&b.owner.url!=
null)b.fileUploader=new mx.io.FileUploader({file:b.file,url:b.owner.url,onprogresschange:n,onprogresserror:o,onuploadcomplete:p});b.params!=null&&b.setParams(b.params);b.owner!=null&&b.setStatus(b.status)};var i;b.upload=function(d){if(b.fileUploader&&b.file&&b.status!=b.owner.uploadStatus.COMPLETE&&b.status!=b.owner.uploadStatus.ERROR){b.params.rnd=Math.random();var e={cancel:!1,item:b};b.trigger("uploading",e);e.cancel||(b.fileUploader.upload(),i=d)}};b.cancel=function(){b.fileUploader!=null&&b.fileUploader.cancel()};
b.getName=function(){return b.name};b.getSize=function(){return b.size};b.getType=function(){return b.type};b.getPath=function(){return b.path};b.getID=function(){return b.name+b.size};b.setParams=function(d){if(b.params!=d)b.params=d;b.fileUploader.setParams(b.params)};b.setUdsParam=function(d){if(b.params==null)b.params={};b.params.udsParam=d;if(b.fileUploader&&b.fileUploader.params)d=JSON.stringify(d),b.fileUploader.params.udsParam=d};b.setStatus=function(d){if($isEmpty(d))d=b.owner.uploadStatus.UNSTART;
if(d!=b.status)b.status=d,typeof b.$statusCell!="undefined"&&b.$statusCell.text(b.status)};b.setProgress=function(d){if(b.progressBar)b.progress=d,b.progressBar.setValue(d,!1),b.$progressSpan.text(d+"%")};b.endOfClass(arguments);return b};$ns("mx.controls");$import("mx.utils.ClipboardUtil");
mx.controls.ErrorBox=function(){function g(b,d){a.$e.css({width:"100%",height:"100%",top:0,left:0,margin:0});a.$e.load(b,function(){c=a.$e.find("#message");a.$e.find("#btnClose").on("click",h);f(d)})}function f(b){$notEmpty(c)&&c.length>0&&a.setError(b);e==null&&(e=$("<div class='errorMask mx'/>"),e.append(a.$e));$(document.body).append(e)}function h(){e.detach()}var a=$extend(mx.controls.Control),i={};a.errorPage=null;a.error={messsage:""};var c=null,e=null;i.init=a.init;a.init=function(){i.init();
a.$e.addClass("errorBox");a.$e.boxShadow({left:0,top:0,size:0,color:"rgba(0,0,0,0.5)"});if(a.errorPage==null){$content=$("<div id='content'/>");$content.append("<div id='warmImg'/>");$content.append("<div id='errorImg'/>");var b=$("<div id='warmMessage'/>");$content.append(b);a.$e.append($content);a.$e.append("<div id='btnClose'/>");b.html(mx.msg("HTTP_ERROR_MESSAGE"));try{$notEmpty(mx.errorType)&&mx.errorType=="friendly"||($content.append("<textarea id='message' readonly  />"),c=a.$e.find("#message"))}catch(d){$content.append("<textarea id='message' readonly  />"),
c=a.$e.find("#message")}a.$e.find("#btnClose").click(h)}else a.$e.empty()};a.setError=function(b){error=a.error;$isString(b)?error.message=b:$.isPlainObject(b)&&$isString(b.message)&&$.extend(error,b);c.text(error.message.trim())};a.show=function(b,d){$notEmpty(d)?a.errorPage!=d?(a.errorPage=d,g(a.errorPage,b)):f(b):a.errorPage!=null&&c==null?g(a.errorPage,b):f(b)};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.ToolStrip");
mx.controls.IconTray=function(){function g(a){if(b.enabled)a=a.item,a!=null&&typeof a!="undefined"&&a.enabled&&a.items!=null&&a.items.length!=0&&(a.dropDown("fast"),$(document).one("click",f))}function f(a){for(var c=b.$e.get(0),e=a=a.target,d=!1;e!=null;)if(e=e.parentNode,e==c){d=!0;break}if(d){c=null;if(a.tagName=="SPAN"||a.tagName=="IMG")c=a.parentNode.parentNode;else if(a.tagName=="A")c=a.parentNode;else if(a.tagName=="FONT")c=a.parentNode.parentNode.parentNode;if(c!=null&&(c.className=="group"||
c.className.indexOf("group ")!=-1||c.className.indexOf(" group")!=-1)){$(document).one("click",f);return}}b.hideDropDown()}var b=$extend(mx.controls.ToolStrip),d={};b.useSymbol=!0;b.symbolSize=20;b.toolStripType="iconTray";d.init=b.init;b.init=function(){d.init();b.$e.addClass("iconTray");b.on("itemclick",g)};b.endOfClass(arguments);return b};$ns("mx.controls");
mx.controls.Label=function(){function e(){if($.isIE67()&&c){c.removeAttr("id");c.removeClass("top");c.removeClass("bottom");var b=c.attr("style");b&&c.attr("style",b.replace(/top\s*:\s*[^;]*;*/,""));c.css("top","auto");a.autoWrap&&(c.attr("id","span"),a.verticalAlign=="top"?c.addClass("top"):a.verticalAlign=="bottom"?c.addClass("bottom"):(b=c.height(),b<=0&&(c.appendTo($(document.body)),b=c.height(),a.$e.append(c)),b=(a.height-b)/2,c.css("top",b)))}}function f(){a.enabled!=!1&&a.trigger("click")}
var a=$extend(mx.controls.Control),d={};a.text="";a.textAlign="left";a.verticalAlign="middle";a.width=120;a.height=21;a.fontSize="12px";a.autoWrap=!1;var c=a.onclick=null;d.init=a.init;a.init=function(){d.init();a.$e.addClass("label");c=$("<span/>");a.$e.append(c);c.text(a.text);a.setAutoWrap(a.autoWrap);a.setTextAlign(a.textAlign);a.setVerticalAlign(a.verticalAlign);a.setFontSize(a.fontSize);a.$e.on("click",f)};a.setText=function(b){a.text=b;c.text(b)};a.setTextAlign=function(b){if($notEmpty(b))a.textAlign=
b,a.$e.css("text-align",a.textAlign)};a.setVerticalAlign=function(b){if($notEmpty(b))a.verticalAlign=b,a.$e.css("vertical-align",a.verticalAlign),a.$e.find("span").css("vertical-align",a.verticalAlign);e()};a.setFontSize=function(b){if($notEmpty(b))a.fontSize=b,c.css("font-size",a.fontSize)};d.setHeight=a.setHeight;a.setHeight=function(b){d.setHeight(b);a.autoWrap||($isNumber(b)?a.$e.css("line-height",a.height+"px"):$isString(b)&&b.indexOf("px")>-1&&a.$e.css("line-height",a.height));e()};a.setAutoWrap=
function(b){b?a.$e.css("line-height","normal"):$isNumber(a.height)?a.$e.css("line-height",a.height+"px"):$isString(a.height)&&a.height.indexOf("px")>-1&&a.$e.css("line-height",a.height);a.autoWrap=b;a.$e.toggleClass("autoWrap",a.autoWrap);e()};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.MenuItem");$import("mx.controls.ToolStrip");
mx.controls.MainMenu=function(){function i(){a.$right_scroll_div.one("mouseout",h);g=window.setInterval(j,100)}function k(){a.$left_scroll_div.one("mouseout",h);g=window.setInterval(l,100)}function h(){window.clearInterval(g)}function j(){var b=a.$e.scrollLeft();a.$e.scrollLeft(b+20);a.$right_scroll_div.css("left",a.$e.scrollLeft()+a.$e.width()-a.$right_scroll_div.width()-2);a.$left_scroll_div.css("left",a.$e.scrollLeft())}function l(){var b=a.$e.scrollLeft();a.$e.scrollLeft(b-20);a.$right_scroll_div.css("left",
a.$e.scrollLeft()+a.$e.width()-a.$right_scroll_div.width()-2);a.$left_scroll_div.css("left",a.$e.scrollLeft())}function m(){var b=a.$e.get(0).scrollWidth,c=a.$e.get(0).offsetWidth;b>c&&(a.$right_scroll_div.css("left",a.$e.scrollLeft()+a.$e.width()-a.$right_scroll_div.width()-2),a.$left_scroll_div.css("left",a.$e.scrollLeft()),a.$right_scroll_div.show(),a.$left_scroll_div.show())}function n(){a.$right_scroll_div.css("left",a.$e.scrollLeft()+a.$e.width()-a.$right_scroll_div.width()-2);a.$left_scroll_div.css("left",
a.$e.scrollLeft());a.$right_scroll_div.hide();a.$left_scroll_div.hide()}function o(b){if(a.enabled)b=b.item,b!=null&&typeof b!="undefined"&&b.enabled&&b.items!=null&&b.items.length!=0&&(b.dropDown("fast"),$(document).one("mousedown",d),$(document).one("mouseup",d))}function p(){if(a.$e.find(".droppedDown").length>0){var b=a.getItemByName(this.parentNode.id);b!=null&&typeof b!="undefined"&&b.enabled&&b.items!=null&&b.items.length!=0&&b.dropDown()}}function d(b){var b=b.target,c=$(b),f=c.closest("ul.menu");
f.length==0&&(f=c.closest("ul.mainMenu"));var e=!1;if(f.length>0&&(c=f.data("control"),$isEqual(c,a)||$isEqual(c.owner,a)))e=!0;if(e){c=null;if(b.tagName=="SPAN"||b.tagName=="IMG")c=b.parentNode.parentNode;else if(b.tagName=="A")c=b.parentNode;if(c!=null&&(c.className=="group"||c.className.indexOf("group ")!=-1||c.className.indexOf(" group")!=-1)){$(document).one("mousedown",d);$(document).one("mouseup",d);return}if(b==f.menuSilde("upButton").get(0)||b==f.menuSilde("downButton").get(0)){$(document).one("mousedown",
d);$(document).one("mouseup",d);return}}a.hideDropDown();$(document).off("mousedown",d);$(document).off("mouseup",d)}var a=$extend(mx.controls.ToolStrip),e={};a.toolStripType="mainMenu";a.defaultItemType=mx.controls.MenuItem;e.init=a.init;a.init=function(){a.$right_scroll_div=$("<div class='ul-right'/>");a.$right_scroll_div.on("mouseover",i);a.$left_scroll_div=$("<div class='ul-left'/>");a.$left_scroll_div.on("mouseover",k);e.init();a.$e.addClass("mainMenu");a.$e.on("mouseenter",m);a.$e.on("mouseleave",
n);a.on("itemclick",o);a.$e.on("mouseenter","li > a",p)};e._appendItem=a._appendItem;a._appendItem=function(b){b=e._appendItem(b);b.$e.after(a.$left_scroll_div);b.$e.after(a.$right_scroll_div)};e._insertItem=a._insertItem;a._insertItem=function(b,c,d){b=e._insertItem(b,c,d);a.items.last()==b&&(b.$e.after(a.$left_scroll_div),b.$e.after(a.$right_scroll_div))};var g=null;a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.ToolStripItem");
mx.controls.MenuItem=function(){var a=$extend(mx.controls.ToolStripItem),c={};a.url=null;a.extopts=null;a.isDefault=!1;c.init=a.init;a.init=function(){c.init();a.$e.children("a").mouseenter(a._onmouseenter);a.$e.mouseleave(a._onmouseleave);a.isDefault&&a.markAsDefault(a.isDefault)};a.markAsDefault=function(b){b==null&&(b=!0);a.isDefault=b;a.$e.children("a").css("font-weight",a.isDefault?"bold":"normal")};a.hovering=!1;a._onmouseenter=function(){if(a.enabled)a.hovering=!0,a.parent==null&&a.owner.toolStripType==
"mainMenu"||(a.parent!=null&&a.parent.dropDownChildItem!=null?(a.parent.dropDownChildItem.$e.removeClass("droppedDown"),window.setTimeout(function(){a.parent!=null&&a.parent.dropDownChildItem!=null&&!a.parent.dropDownChildItem.hovering&&a.parent.dropDownChildItem.hideDropDown()},200)):a.parent==null&&a.owner!=null&&a.owner.dropDownChildItem!=null&&(a.owner.dropDownChildItem.$e.removeClass("droppedDown"),window.setTimeout(function(){a.owner!=null&&a.owner.dropDownChildItem!=null&&!a.owner.dropDownChildItem.hovering&&
a.owner.dropDownChildItem.hideDropDown()},200)),a.$e.hasClass("group")&&window.setTimeout(function(){a.hovering&&a.dropDown()},300))};a._onmouseleave=function(){a.hovering=!1};a.endOfClass(arguments);return a};$ns("mx.controls");
mx.controls.ProgressBar=function(){function f(c){var b=(a.value-a.min)/(a.max-a.min)*100;b>100&&(b=100);b<0&&(b=0);a.percentage=b;a.$valueBar.animate({width:b+"%"},c!=!1?"normal":0);a.displayPercentage&&a.$percentage.text(Math.round(b)+"%")}var a=$extend(mx.controls.Control),e={};a.width=200;a.height=12;a.value=0;a.percentage=0;a.displayPercentage=!1;a.min=0;a.max=100;a.$valueBar=$("<div id='bar'></div>");a.$percentage=null;e.init=a.init;a.init=function(){e.init();a.$e.addClass("progressBar");var c=
null,c=parseInt(a.min),b=parseInt(a.max);a.min=isNaN(c)?0:c;a.max=isNaN(b)?0:b;if(a.min>a.max)c=a.min,a.min=a.max,a.max=c;a.$e.append(a.$valueBar);if(a.displayPercentage)a.$percentage=$("<span id='percentage'/>"),a.$e.append(a.$percentage);a.setValue(a.value,!1)};a.setValue=function(c,b){var e=a,d=parseInt(c),d=isNaN(d)?0:d;if(d<a.min)d=a.min;else if(d>a.max)d=a.max;e.value=d;f(b)};a.refresh=function(c){a.$valueBar.css({width:0});f(c)};a.endOfClass(arguments);return a};$ns("mx.controls");
mx.controls.Slider=function(){function t(){l=$("<table width='100%'><tbody><tr><td class='leftDistance' width='"+a.labelWidth+"'>"+a.labelCaption+"</td><td class='r'></td></tr></tbody></table>")}function u(){if(typeof a.sliderValues=="number"||typeof a.sliderValues=="string"){a.sliderValues=parseInt(a.sliderValues);a.sliderValues>=a.maxValue?a.sliderValues=a.maxValue:a.sliderValues=a.sliderValues;a.sliderValues<=a.minValue?a.sliderValues=a.minValue:a.sliderValues=a.sliderValues;if(a.sliderValues%
a.increment!=0)a.sliderValues<a.increment&&(a.sliderValues+=a.increment),a.sliderValues=v(a.increment,a.sliderValues);o(a.sliderValues)}else if(typeof a.sliderValues=="object"){for(var b=0;b<a.sliderValues.length;b++)typeof a.sliderValues[b]=="string"&&(a.sliderValues[b]=parseInt(a.sliderValues[b])),a.sliderValues[b]==0&&a.increment>1&&(a.sliderValues[b]+=a.minValue+a.increment),a.sliderValues[b]>=a.maxValue?a.sliderValues[b]=a.maxValue:a.sliderValues[b]=a.sliderValues[b],a.sliderValues[b]<=a.minValue?
a.sliderValues[b]=a.minValue:a.sliderValues[b]=a.sliderValues[b],a.sliderValues[b]%a.increment!=0&&(a.sliderValues[b]<a.increment&&(a.sliderValues[b]+=a.increment),a.sliderValues[b]=v(a.increment,a.sliderValues[b]));a.sliderValues.sort(function(a,b){return a-b});a.sliderValues.length>=1?o():o(0)}}function v(a,d){var c=d%a;return d<a?d+c:d-c}function o(b){if(b!=void 0)a.sliderValues=[b];i=$('<div id="slider_'+w+'" class="slider_w" minValue='+a.minValue+" maxValue="+a.maxValue+" increment="+a.increment+
"></div>");for(var d,b=0;b<a.sliderValues.length;b++)d=1E3+ +b,a.sliderValues[b]==a.maxValue&&(d-=b*2),f[b]=$("<a attr='"+a.sliderValues[b]+"' class='slder_control' id='sliderControl_"+w+"_"+b+"' style='z-index:"+d+"'/>"),i.append(f[b]);x();l.find("td.r").append(i);a.$e.append(l);b=$(document.body);k.append($("<p>&nbsp;</p>"));b.prepend(k);d=i.find("a");for(b=0;b<d.length;b++)y[b]=d[b].style.zIndex;z=i[0];b=f;for(d=0;d<b.length;d++)$(b[d][0]).on("mousedown",p)}function p(a){a=a||window.event;E(a,
this)}function x(b,d){if(b){if(typeof a.sliderValues=="number")a.sliderValues=[a.sliderValues];for(var c=0;c<f.length;c++){var e=parseInt((a.sliderValues[c]-a.minValue)/(a.maxValue-a.minValue)*100);$(f[c]).animate({left:e+"%","z-index":d[c]},1E3)}}else for(c=0;c<f.length;c++)e=parseInt((a.sliderValues[c]-a.minValue)/(a.maxValue-a.minValue)*100),$(f[c]).css({left:e+"%"})}function E(b,d){if(a.enabled!==!1){var c=b.target,e=parseInt(c.id.charAt(c.id.length-1));A=a.sliderValues[e];B=b.clientX;C=c.offsetLeft;
c.setCapture&&!$isIE()?(c.onmousemove=q,c.onmouseup=r,c.setCapture()):($(document).on("mousemove",function(){q(c,d)}),$(document).on("mouseup",function(){r(c,d)}))}}function q(b,d){var c;b&&$notEmpty(b.target)&&b.target.setCapture!=void 0?(c=b.target,b=b||window.event):(c=d,b=window.event);$(c).siblings("a").removeClass("activityControl");$(c).addClass("activityControl");var e=parseInt(c.id.charAt(c.id.length-1)),h=b.clientX-B+C,f=z.offsetWidth-c.offsetWidth;h<0?h=0:h>f&&(h=f);h/=f;var g=parseInt(h*
(a.maxValue-a.minValue))+a.minValue,h=parseInt(h*100);$notEmpty(a.sliderValues[e-1])&&a.sliderValues[e]<=a.sliderValues[e-1]&&(h=parseInt(c.previousSibling.style.left),a.sliderValues[e]=a.sliderValues[e-1],districtValue=a.sliderValues[e],m=0);$notEmpty(a.sliderValues[e+1])&&a.sliderValues[e]>=a.sliderValues[e+1]&&(h=parseInt(c.nextSibling.style.left),a.sliderValues[e]=a.sliderValues[e+1],districtValue=a.sliderValues[e],m=0);var j;if((A+a.increment-g)%a.increment==0){c.style.left=h+"%";j=g;if(a.showProcessTips&&
m){k[0].innerHTML=j;h=b.clientX;if(g=c.offsetParent){for(var i=g.offsetLeft;g!=null&&g.offsetParent!=null&&g.offsetParent.tagName!="BODY";)i+=g.offsetParent.offsetLeft,g=g.offsetParent;g=i}else g=null;b.clientX<=g&&(h=g+10);b.clientX>=g+f&&(h=g+f+10);k.css({left:h-10+"px",top:F(c.offsetParent)-25+"px",display:"block",cursor:"default"})}j>a.sliderValues[e+1]&&(j=a.sliderValues[e+1]);j<a.sliderValues[e-1]&&(j=a.sliderValues[e-1]);a.sliderValues[e]=j}m=1;a.trigger("changed",{curSliderObj:{sliderBtn:c,
percent:j}})}function r(a,d){document.getElementById("process_wrap").click();var c;c=a.target.setCapture!=void 0?a.target:d;D+=1;c.style.zIndex=D;l.find("div").find(".percent");k.css("display","none");c.releaseCapture&&!$isIE()?(c.onmousemove=null,c.onmouseup=null,c.releaseCapture()):($(document).off(),$isIE()||(d.removeEventListener("mousemove",q,!0),d.removeEventListener("mouseup",r,!0)))}function F(a){if(!a)return null;for(var d=a.offsetTop;a!=null&&a.offsetParent!=null&&a.offsetParent.tagName!=
"BODY";)d+=a.offsetParent.offsetTop,a=a.offsetParent;return d}var a=$extend(mx.controls.Control),n={};a.showProcessTips=!0;a.width="100%";a.labelWidth=0;a.labelCaption="";a.minValue=0;a.maxValue=100;a.increment=1;a.sliderValues=0;a.onchanged=null;var w=Math.round(Math.random()*(new Date).getTime()),i=null,f=[],z=null,l=null,y=[],B=0,C=0,D=2E3,s=null,k=$("<div id='process_wrap'/>");n.init=a.init;a.init=function(){var b;if(a.increment<1)a.increment=1;n.init();a.$e.addClass("slider");t();if(a.maxValue<
a.minValue)b=a.minValue,a.minValue=a.maxValue,a.maxValue=b;u();s=$clone(a.sliderValues)};a.getValue=function(){for(var b="",d=0;d<a.sliderValues.length;d++)b=b+","+a.sliderValues[d];return b.substr(1,b.length)};a.setValue=function(b,d){d==null&&(d=!1);var c;a:if(c=[],typeof b=="number"?c.add(b):$isArray(b)&&(c=b),c.length!=a.sliderValues.length)c=!1;else{for(var e=0;e<c.length;e++)if(c[e]!=a.sliderValues[e]){c=!1;break a}c=!0}if(!c)a.sliderValues=b,a.$e.empty(),t(),u(),s=$clone(a.sliderValues),d&&
a.trigger("changed")};n.setEnabled=a.setEnabled;a.setEnabled=function(b){n.setEnabled(b);for(b=0;b<f.length;b++)$(f[b][0]).off("mousedown",p);if(a.enabled)for(b=0;b<f.length;b++)$(f[b][0]).on("mousedown",p)};a.reset=function(){a.sliderValues=$clone(s);x(!0,y)};var A=0,m=1;a.endOfClass(arguments);return a};$ns("mx.controls");
mx.controls.Slideshow=function(){function d(){if(a.direction=="toTop"||a.direction=="toBottom")var b=$("<a id=topBtn></a>"),c=$("<a id=bottomBtn></a>");else b=$("<a id=leftBtn></a>"),c=$("<a id=rightBtn></a>");b.on("click",j);c.on("click",l);a.$stage.append(b);a.$stage.append(c)}function i(){var b=$("<span id=palyBtn><span></span/>"+mx.msg("PLAY")+"</span>"),c=$("<span id=checkItems><span id=stop></span></span>"),d=$("<span id='crntTime'>"+a.pause/1E3+"\u79d2</span>");c.find("#stop").get(0).title=mx.msg("PAUSE");
d.css({top:1}).appendTo(c);a.auto?b.hide():c.hide();for(var e=0;e<a.pauseTimes.length;e++){var f=$("<span class=pauseItem>"+a.pauseTimes[e]/1E3+"\u79d2</span>");f.css({top:e*20+20,display:"none"});f.attr("pauseTime",a.pauseTimes[e]);f.click(function(){var b=$(this).attr("pauseTime");a.setPause(b);c.find(".pauseItem").hide();d.text($(this).text())});c.append(f)}b.click(function(){a.setAuto(!0);$(this).hide();c.css("display","block")});c.find("#stop").click(function(){a.setAuto(!1);c.hide();b.css("display",
"block")});d.mouseover(function(){c.find(".pauseItem").is(":hidden")&&c.find(".pauseItem").css("display","block")});c.find(".pauseItem").mouseover(function(){c.find(".pauseItem").is(":hidden")&&c.find(".pauseItem").css("display","block")});d.mouseout(function(){c.find(".pauseItem").is(":hidden")||c.find(".pauseItem").hide()});c.find(".pauseItem").mouseout(function(){c.find(".pauseItem").is(":hidden")||c.find(".pauseItem").hide()});a.$stage.append(b);a.$stage.append(c)}function n(){if(!a.items)a.items=
[];for(var b=0;b<a.items.length;b++)$.isPlainObject(a.items[b])&&(a.items[b]=new mx.controls.SlideshowItem(a.items[b]));for(b=0;b<a.items.length;b++){var c=a.items.length,d=(b+1)%c;a.items[b].preItem=a.items[(b+c-1)%c];a.items[b].nextItem=a.items[d];a.items[b].index=b;a.items[b].on("playing",g);(c=a.items[b])&&c.$e&&c.$e.css(h(c.direction,"start"));a.$stage.append(a.items[b].$e)}}function g(b){a.currentItem=b.item}function j(){a.direction=="toRight"||a.direction=="toBottom"?a.showPre():a.showNext()}
function l(){a.direction=="toTop"||a.direction=="toLeft"?a.showPre():a.showNext()}function m(){for(var b=0;b<a.items.length;b++)if(a.items[b].isPlaying)return!0;return!1}function h(b,c){var d={},e=a.$stage.width()||800,f=a.$stage.height()||600;c=="start"?d=b=="toTop"?{top:f+"px"}:b=="toLeft"?{left:e+"px"}:b=="toBottom"?{bottom:f+"px"}:{right:e+"px"}:c=="pause"?d=b=="toTop"?{top:0}:b=="toLeft"?{left:0}:b=="toBottom"?{bottom:0}:{right:0}:c=="finish"&&(d=b=="toTop"?{top:-f+"px"}:b=="toLeft"?{left:-e+
"px"}:b=="toBottom"?{bottom:-f+"px"}:{right:-e+"px"});return d}var a=$extend(MXComponent);a.speed=1E3;a.pause=2E3;a.auto=!0;a.wizardButton=!0;a.playButton=!0;a.pauseTimes=[2E3,3E3,7E3];a.direction="toRight";a.items=[];a.currentItem=null;a.$e=null;a.$stage=null;a.show=function(b){a.$e=$("<div class='slideshow mx'><table id=slideshowTable align='center' cellspacing=0; border=0;><tr><td align=center></td></tr></table></div>");a.$stage=$("<div id='imgStage' align='center'/>");$(document.body).append(a.$e);
a.$e.find("td").append(a.$stage);var c=$("<div id='btnClose'/>");c.click(function(){a.setAuto(!1);a.$e.detach()});a.$e.append(c);a.wizardButton&&d();a.playButton&&i();n();a.currentItem||a.showNext(b);$.isIE6()&&(a.$stage.css("height",a.$e.height()),a.$e.resize(function(){a.$e.height()!=0&&a.$stage.css("height",a.$e.height())}))};var k=null;a.slide=function(b){b===!1?k!=null&&clearInterval(k):a.auto&&(k!=null&&clearInterval(k),k=setInterval(a.showNext,a.pause))};a.showNext=function(b){if(!m()){var c=
h(a.direction,"start"),d=h(a.direction,"pause"),e=h(a.direction,"finish");a.currentItem?(a.slide(!1),a.currentItem.play(a.speed,d,e),a.currentItem.nextItem.play(a.speed,c,d,a.slide)):a.items.length>0&&(a.slide(!1),typeof b=="number"&&b>-1&&b<a.items.length?a.items[b].play(a.speed,c,d,a.slide):a.items[0].play(a.speed,c,d,a.slide))}};a.showPre=function(){if(!m()&&a.currentItem){var b=h(a.direction,"start"),c=h(a.direction,"pause"),d=h(a.direction,"finish");a.currentItem?(a.slide(!1),a.currentItem.play(a.speed,
c,b),a.currentItem.preItem.play(a.speed,d,c,a.slide)):a.items.length>0&&(a.slide(!1),a.items[a.items.length-1].play(a.speed,d,c,a.slide))}};a.setPause=function(b){a.pause=b;a.auto&&a.slide()};a.setAuto=function(b){typeof b=="undefined"&&(b=!0);a.auto=b;a.slide(b)};a.endOfClass(arguments);return a};
mx.controls.SlideshowItem=function(){var d=$extend(MXComponent),i={};d.src="";d.isPlaying=!1;d.$e=null;d.onplaying=null;d.onplayed=null;i.init=d.init;d.init=function(){i.init();d._init()};d._init=function(){d.$e=$("<div class=imgBox><table align=center cellspacing=0><tr><td align=center><div align=center><img src='"+d.src+"'/></div></td></tr></table></div>")};d.play=function(i,g,j,l){g={item:d,fromStyle:g,animateStyle:j,cancel:!1};d.trigger("playing",g);if(!g.cancel)d.isPlaying=!0,j=g.animateStyle,
d.$e.css(g.fromStyle),d.$e.animate(j,{queue:!1,duration:i,complete:function(){d.isPlaying=!1;d.trigger("played",{item:d});$isFunction(l)&&l()}})};d.endOfClass(arguments);return d};$ns("mx.controls");$import("mx.controls.ToolStrip");$import("mx.controls.ToolStripItem");
mx.controls.ToolBar=function(){function b(){if(a.enabled){var b=a.getItemByName(this.parentNode.parentNode.id);typeof b!="undefined"&&b.enabled&&b.items!=null&&b.items.length!=0&&("group"==this.id&&b.dropDown("fast"),$(document).one("mousedown",c),$(document).one("mouseup",c))}}function c(b){var b=b.target,d=$(b).closest("ul.menu"),f,e=!1;if(d.length>0&&(f=d.data("control"),$isEqual(f,a)||$isEqual(f.owner,a)))e=!0;if(e){f=null;if(b.tagName=="SPAN"||b.tagName=="IMG")f=b.parentNode.parentNode;else if(b.tagName==
"A")f=b.parentNode;if(f!=null&&(f.className=="group"||f.className.indexOf("group ")!=-1||f.className.indexOf(" group")!=-1)){$(document).one("mousedown",c);$(document).one("mouseup",c);return}if(b==d.menuSilde("upButton").get(0)||b==d.menuSilde("downButton").get(0)){$(document).one("mousedown",c);$(document).one("mouseup",c);return}}a.hideDropDown();$(document.body).find(".menu").fadeOut("fast");$(document).off("mousedown",c);$(document).off("mouseup",c)}var a=$extend(mx.controls.ToolStrip),e={};
a.toolStripType="toolBar";a.defaultItemType=mx.controls.ToolBarItem;a.useSymbol=!1;a.toolBarType="toolBar";a.imagePosition="left";a.direction="horizontal";a.wrapOverflow=!0;var d;e.init=a.init;a.init=function(){if($.isIE67()&&a.width=="100%")a.width=null;e.init();a.$e.addClass("toolBar");a.imagePosition=="up"&&a.$e.addClass("imgUp");a.direction=="vertical"?(a.$e.addClass("vertical"),$.isIE6()&&a.$e.width()!=0&&a.$e.width()>45&&(a.$e.find("li > a > span#text").css("width",a.$e.width()-40),a.$e.find("li > a > span#group").css("left",
a.$e.width()-45))):a.wrapOverflow||(a.$e.addClass("nowrap"),d=$("<div id=controlBut></div>"),d.on("click",function(){a.$e.toggleClass("nowrap")}),d.on("mouseenter",function(){d.addClass("hover")}),d.on("mouseleave",function(){d.removeClass("hover")}),a.$e.append(d),a.$e.resize(function(){for(var b=0,e=0,c=0;c<a.items.length;c++)b+=a.items[c].$e.outerWidth(),e=e<a.items[c].$e.outerHeight()?a.items[c].$e.outerHeight():e;a.$e.width()<b&&d&&d.css({display:"block",height:e})}));"quickToolBar"==a.toolBarType&&
a.$e.addClass("quickToolBar");var c=$("<li class=toolBarFlag><span/></li>");a.$e.prepend(c);a.$e.on("click","li > a > span",b)};e._appendItem=a._appendItem;a._appendItem=function(b){e._appendItem(b);d&&d.appendTo(a.$e);a.$e.trigger("resize")};e.dispose=a.dispose;a.dispose=function(){d!=null&&(d.off(),d.remove());a.$e.off();a.clearItems();e.dispose()};a.endOfClass(arguments);return a};
mx.controls.ToolBarItem=function(){var b=$extend(mx.controls.ToolStripItem),c={};c.init=b.init;b.init=function(){c.init()};b.setLink=function(){var a=b.$e.children("a");b.$link=a.children("span")};var a=(new Date).getTime();b.makeGroup=function(){if(!b.isGroup){b.isGroup=!0;if(b.items==null)b.items=[];b.$e.addClass("group");var c=b.$e.children("a"),d=null;c.children("span#group");d=$("<span id='group'/>");c.append(d);c=b.name.replace("#","_");b._$menu=$("<ul class='menu' id='"+c+"_"+a+"'/>");b._$menu.data("control",
b);b._$menu.menuSilde();$("body").append(b._$menu)}};b.endOfClass(arguments);return b};$ns("mx.controls");mx.controls.ToolSeparator=function(b){var a=this;a.name=b!=null?b:null;a.owner=null;a.parent=null;a.isSeparator=!0;a.isGroup=!1;a.visible=!0;a.init=function(){a.$e=$("<li class=separator><span/></li>")};a.show=function(){a.$e.css("display","")};a.hide=function(){a.$e.css("display","none")};a.setVisible=function(b){(a.visible=b)?a.$e.css("display",""):a.$e.css("display","none")};a.init();return a};$ns("mx.controls");$import("mx.controls.ToolSeparator");$import("mx.controls.ToolStripItem");
mx.controls.ToolStrip=function(){var b=$extend(mx.controls.Control),j={};b.items=[];b.toolStripType="toolStrip";b.defaultItemType=mx.controls.ToolStripItem;b.useSymbol=!1;b.symbolSize=16;b.imageSize=16;b.dropDownChildItem=null;b.itemAlign="left";b.direction="horizontal";b.eTag="<ul/>";b.onitemclick=null;b.onitemmousedown=null;b.ondropdown=null;b.onhidedropdown=null;b.$right_scroll_div=null;b.$left_scroll_div=null;j.init=b.init;b.init=function(){j.init();if(b.$e[0].tagName!="UL")throw Error(mx.err("CONTROL_WRONG_TAG",
["mx.controls.ToolStrip","UL"]));b.$e.userSelectable(!1);b.$e.contextmenu(function(){return!1});if($isArray(b.items)){var a=b.items;b.items=[];b.appendItems(a)}};b.hasChildren=function(){return b.items.length>0};b.insertItem=function(a,c,d){var f=0,e=null,g=!0,h=function(a){var c=b.items.length;f=a>=c?c>0?c-1:0:a<0?0:a},i=function(a){if($isEqual(a,"-"))e=b._createSeparator(a);else if($.isPlainObject(a))e=b._createItem(a);else if($instanceOf(a,b.defaultItemType)||$instanceOf(a,mx.controls.ToolSeparator))e=
a};switch(arguments.length){case 1:($isObject(a)||$isEqual(c,"-"))&&i(a);break;case 2:if($isNumber(a)&&($isObject(c)||$isEqual(c,"-")))h(a),i(c);else if(($isObject(a)||$isEqual(a,"-"))&&$isBoolean(c))i(a),g=c;break;case 3:if($isNumber(a)&&($isObject(c)||$isEqual(c,"-"))&&$isBoolean(d))h(a),i(c),g=d}$notEmpty(e)&&(e=b._insertItem(f,e,g));return e};b.insertItemBefore=function(a,c){b.insertItem(a,c,!1)};b.insertItemAfter=function(a,c){b.insertItem(a,c,!0)};b.insertSeparator=function(a,c,d){b.insertItem(a,
c,d)};b.insertSeparatorBefore=function(a,c){b.insertItem(a,c,!1)};b.insertSeparatorAfter=function(a,c){b.insertItem(a,c,!0)};b._insertItem=function(a,c,d){c.parent=null;c.owner=b;var f=b.items,e=f.length,g=b.items[a],h=0;e>0&&(h=d?a+1:a);for(a=e-1;a>=h;a--)f[a+1]=f[a];f[h]=c;$instanceOf(c,b.defaultItemType)&&(f["#"+c.name]=c);$notEmpty(g)?d?g.$e.after(c.$e):g.$e.before(c.$e):b.$e.append(c.$e);return c};b._createItem=function(a,c,d){var f=null,e;$.isPlainObject(a)?(c=a.name,e={useSymbol:$isEmpty(a.useSymbol)?
b.useSymbol:a.useSymbol,symbolSize:$isEmpty(a.useSymbol)?b.symbolSize:a.symbolSize,parent:null,owner:b},e=$.extend(a,e)):$instanceOf(a,b.defaultItemType)?(f=a,c=f.name):(e={parent:null,owner:b,name:a,text:c,imageUrl:d,useSymbol:b.useSymbol,symbolSize:b.symbolSize},c=a);$notEmpty(b.getItemByName(c))&&mx.indicate("warn",mx.err("DUPLICATED_ITEM",[c]));$isEmpty(f)&&(f=new b.defaultItemType(e));return f};b.appendItem=function(a,c,d){a=b._createItem(a,c,d);$notEmpty(a)&&b._appendItem(a);return a};b.appendItems=
function(a){if($isArray(a))for(var c=0;c<a.length;c++){var d=a[c];$isString(d)?d=="-"||d=="|"?b.appendSeparator():b.appendItem(d,d):$isObject(d)&&b.appendItem(d)}};b.appendSeparator=function(a){a=b._createSeparator(a);$notEmpty(a)&&b._appendItem(a);return a};b._createSeparator=function(a){var b=null;return b=$instanceOf(a,mx.controls.ToolSeparator)?a:new mx.controls.ToolSeparator(a)};b.setItems=function(a){b.clearItems();b.appendItems(a)};b.removeItem=function(a){a!=null&&(a.$e.remove(),b.items.remove(a),
b.items["#"+a.name]=null,delete b.items["#"+a.name])};b.removeByIndex=function(a){b.removeItem(b.items[a])};b.removeByName=function(a){a=b.getItemByName(a);$notEmpty(a)&&b.removeItem(a)};b.clearItems=function(){for(;b.items.length>0;)b.removeByIndex(0)};b.getItem=function(a){var a=a.split("/"),c=0;if(a.length>0){var d=b.getItemByName(a[c]);if(d!=null){for(c++;c<a.length;)if(d=d.getItemByName(a[c++]),d==null)return null;if(c==a.length)return d}}return null};b.getItemByName=function(a){return b.items["#"+
a]};b.hideDropDown=function(a){b.dropDownChildItem!=null&&b.dropDownChildItem.hideDropDown(a)};b.updateItemsVisibility=function(a){if($isArray(a)){for(var b=a.length,d=0;d<b;d++)a[d].$e.toggle(a[d].visible);for(var f=d=-1,e=0;e<b;){var g=a[e];if(g.visible&&!g.isSeparator)d=f=e;else if(g.visible&&g.isSeparator)if(d==-1)g.hide();else{var h;a:{for(h=e-1;h>=0;h--){var i=a[h];if(i.visible){if(i.isSeparator){h=!1;break a}if(!i.isSeparator){h=!0;break a}}}h=!1}h||g.hide()}e++}for(e=f==-1?-1:f+1;e!=-1&&e<
b;)g=a[e],g.visible&&g.isSeparator&&g.hide(),e++;if(d==-1)return!1;return!0}};b._appendItem=function(a){a.parent=null;a.owner=b;b.items.add(a);b.items["#"+a.name]=a;b.itemAlign=="right"?(a.$e.css("float","right"),b.$e.prepend(a.$e)):b.$e.append(a.$e);return a};b.endOfClass(arguments);return b};$ns("mx.controls");$import("mx.controls.MenuItem");$import("mx.utils.SymbolUtil");
mx.controls.ToolStripItem=function(){function k(b){if(a.enabled&&a.owner.enabled&&!(b.which>=2)&&"group"!=b.target.id){a.trigger("click");for(var b=a.parent,d={item:a};b!=null;)b.trigger("itemclick",d),b=b.parent;a.owner!=null&&a.owner.trigger("itemclick",d)}}function l(b){a.enabled&&a.owner.enabled&&!(b.which>=2)&&"group"!=b.target.id&&(a.owner.trigger("itemmousedown",{item:a,e:b}),b.stopPropagation())}var a=$extend(mx.controls.Control),j={};a.name=null;a.owner=null;a.parent=null;a.items=null;a.text=
null;a.toolTip=null;a.imageUrl=null;a.imageKey=null;a.checked=!1;a.enabled=!0;a.visible=!0;a.useSymbol=!1;a.symbolSize=16;a.isSeparator=!1;a.isGroup=!1;a.droppedDown=!0;a.dropDownChildItem=null;a.eTag="<li class='item'><a/></li>";a.onclick=null;a.onitemclick=null;a.ondropdown=null;a.ondroppingdown=null;a.$link=null;a._$menu=null;j.init=a.init;a.init=function(){j.init();a.$e.userSelectable(!1);a.name!=null&&a.$e.attr("id",a.name);a.text!=null&&a.setText(a.text);a.toolTip!=null&&a.setToolTip(a.toolTip);
a.imageUrl!=null?a.setImageUrl(a.imageUrl):a.imageKey!=null&&a.setImageKey(a.imageKey);a.imageKey==null&&a.setImageKey(null);a.checked&&a.setChecked(a.checked);a.enabled||a.setEnabled(a.enabled);a.visible||a.setVisible(a.visible);a.setLink();a.$e.mouseup(k);a.$e.mousedown(l);if($isArray(a.items)){var b=a.items;a.items=[];a.appendItems(b)}};a.setLink=function(){a.$link=a.$e.children("a");$.isIE6()&&a.$link.attr("href","javascript:void(0)")};a.setText=function(b){a.text=b;var d=a.$e.children("a"),c=
null,c=d.children("span#text");if(b==null)c.remove();else{c.length==0&&(c=$("<span id='text'/>"),d.append(c));if(a.useSymbol&&(d=mx.utils.SymbolUtil.getSymbol(b),d!=null)){c.css("fontFamily",d.font);c.css("fontSize",a.symbolSize);c.text(d.text);return}c.css("fontFamily","");c.css("fontSize","");c.text(b)}};a.setHtml=function(b){b==null&&a.setText(null);var d=a.$e.children("a"),c=null,c=d.children("span");c.length==0&&(c=$("<span/>"),d.append(c));c.html(b);a.text=c.text()};a.setToolTip=function(b){a.$e.children("a").attr("title",
b)};a.setImageUrl=function(b){a.imageUrl=b;var d=a.$e.children("a"),c=null,c=d.children("span#img");b==null?a.owner!=null&&a.owner.imagePosition=="up"?(c=$("<span id='img'/>"),d.prepend(c)):c.remove():(c.length==0&&(c=$("<span id='img'/>"),d.prepend(c)),c.css("background-image","url("+mx.mappath(b)+")"))};a.setImageKey=function(b){a.imageKey=b;if(a.imageKey!=null){if(a.owner!=null){var b=a.owner.imageSize,d=null,d=$.isIE6()?b==16?"$/icons/gif/"+a.imageKey+".gif":"$/icons/gif/"+a.imageKey+"_"+b+".gif":
b==16?"$/icons/"+a.imageKey+".png":"$/icons/"+a.imageKey+"_"+b+".png";a.setImageUrl(d)}}else a.setImageUrl(a.imageUrl)};a.setEnabled=function(b){(a.enabled=b)?a.$e.removeClass("disabled"):a.$e.addClass("disabled")};a.setVisible=function(b){(a.visible=b)?a.$e.css("display",""):a.$e.css("display","none")};a.setChecked=function(b){(a.checked=b)?a.$e.addClass("checked"):a.$e.removeClass("checked")};a.setFont=function(b,d,c,e){var f=a.$e.find("span");typeof b!="undefined"&&f.css("fontFamily",b);typeof d!=
"undefined"&&f.css("fontSize",d);typeof c!="undefined"&&f.css("fontWeight",c);typeof e!="undefined"&&f.css("fontStyle",e)};a.getIndex=function(){if(a.parent!=null)return a.parent.items.indexOf(a);else if(a.owner!=null)return a.owner.items.indexOf(a);return-1};a.toggleChecked=function(){a.setChecked(!a.checked)};var i=(new Date).getTime();a.makeGroup=function(){if(!a.isGroup){a.isGroup=!0;if(a.items==null)a.items=[];a.$e.removeClass("item");a.$e.addClass("group");var b=a.name.replace("#","_");a._$menu=
$("<ul class='menu' id='"+b+"_"+i+"'/>");a._$menu.data("control",a);a._$menu.menuSilde();$("body").append(a._$menu)}};a.hasChildren=function(){return a.items!=null&&a.items.length>0};a.appendItem=function(b,d,c){var e=null;$isObject(b)&&$isEmpty(d)&&$isEmpty(c)?$.isPlainObject(b)?(b.parent=a,b.owner=a.owner,e=new mx.controls.MenuItem(b)):e=b:(b={parent:a,owner:a.owner,name:b,text:d,image:c},e=new mx.controls.MenuItem(b));a._appendItem(e);return e};a.appendItems=function(b){if($isArray(b))for(var d=
0;d<b.length;d++){var c=b[d];$isString(c)?c=="-"||c=="|"?a.appendSeparator():a.appendItem(c,c):$isObject(c)&&a.appendItem(c)}};a.setItems=function(b){a.clearItems();a.appendItems(b)};a.removeItem=function(b){if(b!=null&&(b.$e.remove(),a.items.remove(b),a.items["#"+b.name]=null,delete a.items["#"+b.name],a.items.length==0))a.isGroup=!1,a.$e.removeClass("group"),a.$e.addClass("item"),a.$e.find("ul").remove(),b=a.name.replace("#","_"),$("body").children("ul#"+b+"_"+i).remove()};a.removeByIndex=function(b){a.removeItem(a.items[b])};
a.removeByName=function(b){b=a.getItemByName(b);$notEmpty(b)&&a.removeItem(b)};a.appendSeparator=function(b){var d=null,d=$isObject(b)?b:new mx.controls.ToolSeparator(b);a._appendItem(d);return d};a.clearItems=function(){for(;a.items.length>0;)a.removeByIndex(0)};a.dropDown=function(b){if(a.enabled){var d={cancel:!1};a.trigger("droppingdown",d);if(!d.cancel){b==null&&(b=0);if(a.parent!=null&&a.parent.dropDownChildItem!=null){if(a.parent.dropDownChildItem==a)return;a.parent.dropDownChildItem.hideDropDown()}else if(a.parent==
null&&a.owner!=null&&a.owner.dropDownChildItem!=null){if(a.owner.dropDownChildItem==a)return;a.owner.dropDownChildItem.hideDropDown()}if(a.owner==null||a.owner.updateItemsVisibility(a.items))a.$e.addClass("droppedDown"),a.droppedDown=!0,a.parent!=null?a.parent.dropDownChildItem=a:a.owner.dropDownChildItem=a,a._refreshSubMenus(b),a.trigger("dropdown"),a.owner!=null&&a.owner.trigger("dropdown")}}};a._refreshSubMenus=function(b){var d=a.owner,c=a.parent,e=a.$e.offset(),f=e.top,g=e.left,j=$notEmpty(c)?
parseInt(c._$menu.css("z-index"))+1:parseInt(d.$e.css("z-index"))+1,h=$(document).scrollTop()+$(window).height(),i=$(document).scrollLeft()+$(window).width();$isEmpty(c)&&$isEqual(d.direction,"horizontal")?(f+=a.$e.outerHeight(),a._$menu.outerHeight()+f>h&&a._$menu.css("height",h-f),a._$menu.outerWidth()+g>i&&(g=g+a.$e.outerWidth()-a._$menu.outerWidth())):(g+=a.$e.outerWidth(),f+a._$menu.height()>h&&(a._$menu.height()>h?(f=0,a._$menu.css({height:h})):f=h-a._$menu.outerHeight()),g+a._$menu.outerWidth()>
i&&(g=e.left-a._$menu.outerWidth()));a._$menu.css({top:f,left:g,zIndex:j});a._$menu.fadeIn(b)};a.hideDropDown=function(b){b==null&&(b=0);if(a.droppedDown){a.dropDownChildItem!=null&&a.dropDownChildItem.hideDropDown();a.$e.removeClass("droppedDown");b==0?a._$menu.hide():a._$menu.fadeOut(b);a.droppedDown=!1;if(a.parent!=null)a.parent.dropDownChildItem=null;else if(a.parent==null&&a.owner!=null)a.owner.dropDownChildItem=null;a.owner!=null&&a.owner.trigger("hidedropdown")}};a.show=function(){a.setVisible(!0)};
a.hide=function(){a.setVisible(!1)};a.getItemByName=function(b){return a.items["#"+b]};a._appendItem=function(b){b.parent=a;b.owner=a.owner;a.makeGroup();a.items.add(b);a.items["#"+b.name]=b;a._$menu.append(b.$e);return b};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.ContextMenu");$import("mx.datacontrols.PagedControl");$import("mx.datacontrols.PageNaviBar");$import("mx.datacontrols.DataGridSearchBox");$import("mx.controls.TreeListViewColumnGroup");$import("mx.controls.TreeListViewColumn");$import("mx.controls.TreeListViewItem");$import("mx.rpc.RESTClient");$import("mx.types.HashMap");
mx.controls.TreeListView=function(){function K(b){b.successful?(a.$view.setBusy(!1),a.$allCheckBox.removeClass("checked"),v(b.resultValue.dicts),a.setItems(b.resultValue.items),$notEmpty(a.searchBox)&&a.searchBox._updateEditor(),$notEmpty(b.resultValue.itemCount)&&a.setItemCount(b.resultValue.itemCount),a.trigger("load"),$isFunction(k)&&k()):mx.showerror(b.resultHint,b.errorPage)}function w(){var b=l.length,c,d;$.each(a.allColumns,function(a,f){d=f.$headGroup;c=l.indexOf(d);f.$headCell.attr("rowspan",
b-c)})}function x(){var b,c;$.each(a.allColumns,function(a,e){for(b=e.parent;$notEmpty(b);)c=L(b.columns),b.$headCell.attr("colspan",c),b=b.parent})}function L(a){var c,d=0;$isArray(a)&&$.each(a,function(a,b){c=b.$headCell.attr("colspan");c=$isEmpty(c)?1:parseInt(c);b.visible&&(d+=c)});return d}function y(b,c){var d=a.$headTable2.find("tbody"),e,f;$isEmpty(c)?e=l[0]:(f=l.indexOf(c.$headGroup)+1,e=l[f]);$isEmpty(e)&&(e=$("<tr/>"),d.append(e),l.add(e));$.each(b,function(b,d){d.parent=c;d.$headGroup=
e;$isEmpty(d.columns)?a.appendColumn(d):a.appendColumnGroup(d)})}function z(b,c){var d=$isEmpty(c)?a.items:c.items;$isArray(d)&&d.length>0&&$.each(d,function(a,c){$instanceOf(c,mx.controls.TreeListViewItem)&&(c.insertCell(b),z(b,c))})}function A(b){var c=null,d;if(!$isEmpty(b)){if($isEmpty(b[a.idField]))throw Error(mx.err("PRIMARYKEY_NON_NULLABLE",[a.idField]));d=$isEmpty(b.parentItem)?a.items:b.parentItem.items;if($notEmpty(d["#"+b[a.idField]]))throw Error(mx.err("DUPLICATED_ITEM",[b[a.idField]]));
if($.isPlainObject(b))b.owner=a,b.oncreate=B,b.onremoving=C,b.onremove=D,c=new mx.controls.TreeListViewItem(b);else if($instanceOf(b,mx.controls.TreeListViewItem))c=b,c.owner=a,c.on("create",B),c.on("removing",C),c.on("remove",D);if(!$isEmpty(c))return c}}function E(b){for(var c=b.parentItem,d=$isEmpty(c)?null:c.items.last();d&&d.items.last();)d=d.items.last();$isEmpty(c)?(a.items.add(b),a.items["#"+b.id]=b,a.$bodyTable2.append(b.$e),a.$view1.find("#body table").append(b.$tr)):(c.items.add(b),c.items["#"+
b.id]=b,d=$isEmpty(d)?c:d,d.$e.after(b.$e),d.$tr.after(b.$tr));a._refreshRowNumber(b);b.expanded?b.expand():b.collapse()}function B(b){var c=b.item,d=b.parent,e=b.prevSibling,f=b.nextSibling;c.parentItem=d;c=A(c);if($notEmpty(c))$notEmpty(e)?(f=c,d=f.parentItem,d=$isEmpty(d)?a.items:d.items,d.insertAfter(f,e),d["#"+f.id]=f,e.$e.after(f.$e),e.$tr.after(f.$tr),a._refreshRowNumber(f),f.expanded?f.expand():f.collapse()):$notEmpty(f)?(e=c,d=e.parentItem,d=$isEmpty(d)?a.items:d.items,d.insertBefore(e,f),
d["#"+e.id]=e,f.$e.before(e.$e),f.$tr.before(e.$tr),a._refreshRowNumber(e),e.expanded?e.expand():e.collapse()):$notEmpty(d)&&E(c);b.item=c}function C(b){b.triggerEvent&&a.trigger("deleting",b)}function D(b){var c=b.item,b=b.triggerEvent,d=c.parentItem,d=$isEmpty(d)?a.items:d.items;c.clearItems();if($isEqual(c,a.selection))a.selection=null;var e=d.indexOf(c);d.remove(c);delete d["#"+c.id];c.parentItem=null;c.owner=null;c.$e.remove();c.$tr.remove();a._refreshRowNumber(d[e]);b&&a.trigger("deleted",{id:c.id})}
function F(b){var c=b.parentItem,d=$isEmpty(c)?a.items:c.items,c=$isEmpty(c)?"":c.$tr.attr("num")+".",e;e=d.indexOf(b);for(var b=d.length,f=e;f<b;f++)e=d[f],e.setRowNumber(c+(f+1)),f%2!=0?(e.$e.addClass("even"),e.$tr.addClass("even")):(e.$e.removeClass("even"),e.$tr.removeClass("even")),$isArray(e.items)&&e.items.length>0&&F(e.items[0])}function M(b){var c=b.$tr,d=c.prev(),c=c.nextAll(),e=d.length>0?parseInt(d.attr("num"))+1:a.allowPaging?a.pageSize*(a.pageIndex-1)+1:1;G(b,e);c.each(function(a){var b=
$(this).data("item");G(b,e+a+1)})}function G(a,c){a.setRowNumber(c);c%2!=0?(a.$e.addClass("even"),a.$tr.addClass("even")):(a.$e.removeClass("even"),a.$tr.removeClass("even"))}function N(){a.$e.addClass("treeListView");a.$e.userSelectable(!1);if($isEmpty(a.displayCheckBox)&&$isEmpty(a.singleSelect))a.displayCheckBox=!0,a.singleSelect=!1;else if($isEmpty(a.displayCheckBox)&&$notEmpty(a.singleSelect))a.displayCheckBox=!a.singleSelect;else if($isEmpty(a.singleSelect)&&$notEmpty(a.displayCheckBox))a.singleSelect=
!a.displayCheckBox;else if($notEmpty(a.singleSelect)&&$notEmpty(a.displayCheckBox))a.singleSelect=!a.displayCheckBox;$.each(a.dicts,function(b,d){a.dicts["#"+d.name]=d;$isArray(d.values)&&$.each(d.values,function(a,b){d.values["#"+b.value]=b});var e=$clone(d);H.setItem(e.name,e)});a.$e.contextmenu(O);a.$grid=a.$view=$("<div id=view/>");a.$e.append(a.$view);a.$view1=P();a.$view2=Q();a.$splitter=$("<div class='dragClass' style='width: 2px; top: 0px; position:absolute; cursor:e-resize; display: none;'/>");
a.$splitter.on("mousedown",R);a.$view.append(a.$splitter);a.$e.on("mouseenter mouseleave","#body tr",S);if(a.enabled)a.$e.on("click","td>div>#expandor",p);$isArray(a.images)&&a.appendImages(a.images);if($isArray(a.columns))a._columns=a.columns,a.columns=[],l=[],a.appendColumns(a._columns);if($isEmpty(a.treeField))a.treeField=a.columns[0].name;if($isEmpty(a.idField))a.idField=a.columns[0].name;T();a.allowPaging&&(m=new mx.datacontrols.PageNaviBar({pagedControl:a,position:"absolute",bottom:0,displayRefreshButton:a.displayRefreshButton,
pageIndex:a.pageIndex,pageSize:a.pageSize}),a.$e.append(m.$e),a.$view.css("bottom",25));if($notEmpty(a.searchBox))$.extend(a.searchBox,{pagedControl:a}),a.searchBox=new mx.datacontrols.DataGridSearchBox(a.searchBox),a.searchBox.setFields(),a.searchBox.on("searchparamchanged",U),a.searchBox.on("fieldadd",function(){a.$grid.css("top",a.searchBox.getHeight())}),a.$e.prepend(a.searchBox.$e),a.$view.css("top",a.searchBox.getHeight());var b;if($isArray(a.items))b=a.items,a.items=[];if($.isPlainObject(a.contextMenu))a.contextMenu=
new mx.controls.ContextMenu(a.contextMenu);if($.isPlainObject(a.itemMenu))a.itemMenu=new mx.controls.ContextMenu(a.itemMenu);a.setDisplayHead(a.displayHead);a.client=new mx.rpc.RESTClient({baseUrl:a.baseUrl,mode:"queue"});$isEqual(a.type,"remote")?a.autoLoad&&a.load():a.load(b);a._adjustSizeForIE6()}function U(){var b=null,b=$isEqual(a.searchParamType,"json",!0)?a.searchBox.getJsonSearchParam():a.searchBox.getSearchParam();$notEmpty(b)&&(b={filter:b});a.load(b)}function R(b){var c=b.pageX||b.clientX,
d=a.$view1.width(),e=a.$headTable2.width();rowNumberWidth=a.$view1.find("table #rownumber").width();$(document).css("cursor","e-resize");$(document).on("mousemove",{startX:c,width:d,tableWidth:e,rowNumberWidth:rowNumberWidth},I);$(document).on("mouseup",V);b.stopPropagation()}function I(b){var c=b.pageX||b.clientX,d=b.data.width+c-b.data.startX,e=0;if(a.displayCheckBox&&a.displayRowNumber)e=100;else if(a.displayCheckBox||a.displayRowNumber)e=50;d<e||(a.$view1.find("table #rownumber").width(b.data.rowNumberWidth+
c-b.data.startX),a.$view1.width(d),a.$splitter.css("left",d-1+"px"),a.$view2.css("marginLeft",d+"px"),a.$headTable2.width(b.data.tableWidth),a.$bodyTable2.width(b.data.tableWidth))}function V(){$(document).off("mousemove",I)}function P(){var b=$("<div id=view1><div id=head><table cellspacing=0 cellpadding=0><thead><tr><th id=rownumber></th><th id=checkbox></th></tr></thead><tbody><tr><td id=rownumber class='head-cell'><div style='height: 24px'><span/></div></td><td id=checkbox class='head-cell'><div style='height: 24px'><span/></div></td></tr></tbody></table></div><div id=body><table cellspacing=0 cellpadding=0><thead><tr><th id=rownumber></th><th id=checkbox></th></tr></thead><tbody/></table></div></div>");
a.$head1=b.find("#head");a.$headTable1=a.$head1.children("table");a.$body1=b.find("#body");a.$bodyTable1=a.$body1.children("table");a.$allCheckBox=a.$headTable1.find("tbody tr");a.enabled&&(a.$head1.on("click","td#checkbox span",q),a.$body1.on("click","td#checkbox span",r));a.$view.append(b);return b}function Q(){var b=$("<div id=view2><div id=view2_inner><div id=head><table cellspacing=0 cellpadding=0><thead><tr/></thead><tbody/></table></div><div id=body><table cellspacing=0 cellpadding=0><thead><tr/></thead><tbody/></table></div></div></div>");
a.$head2=b.find("#head");a.$headTable2=a.$head2.children("table");a.$body2=b.find("#body");a.$bodyTable2=a.$body2.children("table");a.$head2.css("marginRight",mx.getScrollBarWidth().vertical);a.enabled&&(a.$body2.on("click","tr",s),a.$body2.on("dblclick","tr",t));a.allowEditing&&a.enabled&&(a.$body2.on("click","td",u),$(document).on("click",W));a.$body2.scroll(X);a.$view.append(b);return b}function T(){var b,c=a.$headTable2.find("tbody tr").length*25-1;a.$headTable1.css("height",c);if(a.displayRowNumber&&
a.displayCheckBox)a.$view1.width(100),a.$view2.css("marginLeft",100),b=100;else{if(a.displayCheckBox||a.displayRowNumber)a.$view1.width(50),a.$view2.css("marginLeft",50),b=50;a.displayRowNumber||a.$view1.find("#rownumber").css("display","none");a.displayCheckBox||a.$view1.find("#checkbox").css("display","none")}(a.displayRowNumber||a.displayCheckBox)&&a.$splitter.css({display:"block",left:b-1,height:c})}function o(b){var c=null;typeof b=="number"&&(c=a.getItem("#view2 tr[num="+b+"]"));typeof b=="string"?
c=a.getItem("#view2 tr[id='"+b+"']"):typeof b=="object"&&(c=b);return c}function v(b){a.dicts=[];H.each(function(b,c){var d=$clone(c);a.dicts.add(d);a.dicts["#"+b]=d;$isArray(d.values)&&$.each(d.values,function(a,b){d.values["#"+b.value]=b})});if($isArray(b))for(var c=b.length,d=0;d<c;d++){var e=b[d],f=a.dicts["#"+e.name];$isEmpty(f)?(a.dicts.add(e),a.dicts["#"+e.name]=e):($.extend(f,e),e=f);$isArray(e.values)&&$.each(e.values,function(a,b){e.values["#"+b.value]=b})}}function J(b){var c=b.$headGroup;
if($isEmpty(c))c=l[0],$isEmpty(c)&&(c=$("<tr/>"),a.$headTable2.find("thead").append(c)),b.$headGroup=c,c.append(b.$headCell);$instanceOf(b,mx.controls.TreeListViewColumn)&&(a.$headTable2.find("thead > tr:first").append(b.$headCol),a.$bodyTable2.find("thead > tr:first").append(b.$bodyCol),c=$("<span class='dragClass' style='width: 2px; position:absolute; right:0px;cursor:e-resize' />"),b.$headCell.find("div").append(c),c.on("mousedown",{column:b},Y))}function Y(b){var c=document,d=b.data.column,e=
d.$headCell,b=b||window.event;e.mouseDownX=b.clientX||b.pageX;e.pareneTdW=$(e).parent().width();e.tdW=$(e).width();e.pareneTableW=a.$headTable2.width();e.setCapture?e.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);c.onmousemove=function(b){b=b||window.event;if(!e.mouseDownX)return!1;var c=e.tdW*1+(b.clientX||b.pageX)*1-e.mouseDownX;c>10&&(d.setWidth(c),b=e.pareneTableW*1+(b.clientX||b.pageX)*1-e.mouseDownX,a.$headTable2.width(b),a.$bodyTable2.width(b))};c.onmouseup=
function(a){e.setCapture?e.releaseCapture():window.captureEvents&&window.releaseEvents(a.MOUSEMOVE|a.MOUSEUP);e.mouseDownX=0}}function Z(b){var b=b.target,c=b.value;b.isValidate&&$notEqual(c,j.getValue(i))&&(j.setValue(i,c),a.trigger("celledited",{value:c}))}function aa(a){var c=a.tag(),a=a.attr("class"),d=!1,e;if(c=="td"&&$notEmpty(a)){a=a.split(" ");e=a.length;for(c=0;c<e;c++)if($isEqual(a[c],"body-cell")){d=!0;break}}return d}function u(b){var c=$(b.target),d;if($.contains(a.$bodyTable2.get(0),
c.get(0))){for(var e=c;!aa(e);)e=e.parent();d=e}else d=void 0;if($notEmpty(d)&&d.length>0){var e=d.attr("id"),f=a.allColumns[e],f=$isEmpty(f)?null:f.editor;if(!(e==a.treeField&&c.attr("id")=="expandor")){if($notEmpty(f)&&(b.target==f.$e.get(0)||f.contains(c)))return!1;a.endEdit();!a.allColumns[e].readOnly&&$notEqual(e,a.idField)&&(b=d.parent().data("item"),a.startEdit(b,e))}}}function W(b){$.contains(a.$bodyTable2.get(0),b.target)||a.endEdit()}function O(b){if(!a.enabled)return!1;for(var c=b.target,
d=a.$bodyTable2.get(0);!(c.tagName=="TR"&&c.parentNode!=null&&c.parentNode.parentNode==d);)if(c=c.parentNode,c==null)break;if(c!=null&&(c=$.data(c,"item"),c!=null))return a.selectItem(c),a.itemMenu!=null&&a.itemMenu.show(b.clientX,b.clientY),!1;a.contextMenu!=null&&a.contextMenu.show(b.clientX,b.clientY);return!1}function s(b){if(a.enabled&&!$isEqual(b.target.id,"expandor")){var c=$(b.currentTarget).data("item");c!=null&&a.selectItem(c);b.stopPropagation()}}function t(b){a.enabled&&!$isEqual(b.target.id,
"expandor")&&(b=$(b.currentTarget).data("item"),b!=null&&a.trigger("itemdoubleclick",{item:b}))}function p(b){a.enabled&&a.getItem(b.currentTarget.parentNode.parentNode.parentNode).toggleExpand()}function X(b){a.$head2.scrollLeft(b.target.scrollLeft);a.$view1.find("#body").scrollTop(b.target.scrollTop)}function S(b){var c=$(this).attr("num"),c=a.$e.find("#body tr[num='"+c+"']");$isEqual(b.type,"mouseenter")?c.addClass("over"):c.removeClass("over")}function q(){a.enabled&&(a.$allCheckBox.toggleClass("checked"),
a.$allCheckBox.hasClass("checked")?a.checkAll():a.uncheckAll())}function r(){a.enabled&&$(this).parent().parent().parent().data("item").toggleChecked()}var a=$extend(mx.datacontrols.PagedControl),n={};a.width="auto";a.height="100%";a.idField=null;a.treeField=null;a.filter=null;a.autoLoad=!0;a.allColumns=[];a.columns=[];a._columns=[];a.items=[];a.images=[];a.selection=null;a.imageSize=16;a.allowDragging=!1;a.allowEditing=!1;a.displayHead=!0;a.displayImage=!0;a.displayRowNumber=!0;a.numberFormat="sequnece";
a.displayCheckBox=null;a.displayRefreshButton=!0;a.singleSelect=null;a.dicts=[];a.baseUrl=null;a.type="remote";a.searchParamType="string";a.contextMenu=null;a.itemMenu=null;a.checkCascade=!0;a.searchBox=null;a.onselectionchanged=null;a.onselectionchanging=null;a.onitemdoubleclick=null;a.onexpanding=null;a.onexpanded=null;a.oncellediting=null;a.oncelledited=null;a.$head2=null;a.$body2=null;a.$headTable2=null;a.$bodyTable2=null;a.$allCheckBox=null;a.onloading=null;a.onload=null;a.ondeleting=null;var m=
a.ondeleted=null,H=new mx.types.HashMap,k=null;n.init=a.init;a.init=function(){if($.isIE67()&&a.height=="100%")a.height=null;n.init();N()};n.setEnabled=a.setEnabled;a.setEnabled=function(b){if($notEmpty(a.$head1)&&$notEmpty(a.$body1)&&$notEmpty(a.$body2)&&b!=a.enabled)if(b){if(a.$e.on("click","td>div>#expandor",p),a.$head1.on("click","td#checkbox span",q),a.$body1.on("click","td#checkbox span",r),a.$body2.on("click","tr",s),a.$body2.on("dblclick","tr",t),a.allowEditing)a.$body2.on("click","td",u)}else a.$e.off("click",
"td>div>#expandor",p),a.$head1.off("click","td#checkbox span",q),a.$body1.off("click","td#checkbox span",r),a.$body2.off("click","tr",s),a.$body2.off("click","td",u),a.$body2.off("dblclick","tr",t);n.setEnabled(b)};a.load=function(b,c,d){var e=null,f=null,g=null;switch(arguments.length){case 1:$isArray(b)?e=b:$isString(b)?f=b:$.isPlainObject(b)?g=b:$isFunction(b)&&(k=b);break;case 2:$isArray(b)?(e=b,$isFunction(c)&&(k=c)):$isString(b)&&(f=b,$.isPlainObject(c)?g=c:$isFunction(c)&&(k=c));break;case 3:$isString(b)&&
(f=b),$.isPlainObject(c)&&(g=c),$isFunction(d)&&(k=d)}var h={cancel:!1,items:e,params:c};a.trigger("loading",h);if(!h.cancel)if($isEqual(a.type,"remote",!0)){e=g;h=null;if($notEmpty(e))h=e.filter;$isEqual(a.searchParamType,"json",!0)?($isEmpty(h)?h=[]:$.isPlainObject(h)&&(h=[h]),$isArray(a.filter)?h=h.concat(a.filter):$.isPlainObject(a.filter)&&h.add(a.filter)):($isEmpty(h)?h="":$.isPlainObject(h)&&(h=$.param(h)),$.isPlainObject(a.filter)?(h!=""&&(h+="&"),h+=$.param(a.filter)):$isString(a.filter)&&
(h!=""&&(h+="&"),h+=a.filter));e=h;$notEmpty(g)&&delete g.filter;a.allowPaging&&(g=$.extend(g,{pageIndex:a.pageIndex,pageSize:a.pageSize}));$notEmpty(e)&&e.length>0&&(g=$.extend(g,{filter:e}));a.$view.setBusy(!0);a.client.get(f,$notEmpty(g)?{params:JSON.stringify(g)}:null,K)}else a.$allCheckBox.removeClass("checked"),a.setItems(e),$notEmpty(a.searchBox)&&a.searchBox._updateEditor(),a.trigger("load"),$isFunction(k)&&k()};a.loadChildren=function(b,c,d){var e=null,f=null,g=null;switch(arguments.length){case 3:$isFunction(d)&&
(g=d);case 2:$.isPlainObject(c)?f=c:$isFunction(c)&&(g=c);case 1:if($isString(b))e=b;else if($isObject(b))e=b.id}$isEqual(a.type,"remote",!0)&&$notEmpty(e)&&(a.$e.setBusy(!0),a.client.get(e+"/children",$notEmpty(f)?{params:JSON.stringify(f)}:null,function(c){if(c.successful){if(a.$e.setBusy(!1),!$isEmpty(b.owner))b.hasLoad=!0,v(c.resultValue.dicts),b.setItems(c.resultValue.items),$isFunction(g)&&g()}else mx.showerror(c.resultHint,c.errorPage)}))};a.moveToPage=function(b){if(a.enabled){var c=null;
$notEmpty(a.searchBox)&&(c=$isEqual(a.searchParamType,"json",!0)?a.searchBox.getJsonSearchParam():a.searchBox.getSearchParam(),$notEmpty(c)&&(c={filter:c}));a.pageIndex=b;a.load(c);a.trigger("pageindexchanged")}};n.setPageSize=a.setPageSize;a.setPageSize=function(b){a.enabled&&(n.setPageSize(b),m!=null&&m.setPageSize(b))};a.getChanges=function(){var b=[];a.$bodyTable2.find("tbody > tr").each(function(){var a=$(this).data("item");a.isChanged()&&b.add(a.getChanges())});return b};a.rejectChanges=function(){a.$bodyTable2.find("tbody > tr").each(function(){var a=
$(this).data("item");a.isChanged()&&a.rejectChanges()})};a.commitChanges=function(){a.$bodyTable2.find("tbody > tr").each(function(){var a=$(this).data("item");a.isChanged()&&a.commitChanges()})};a.getDict=function(b){return a.dicts["#"+b]};a.getDictItem=function(b,c){var d=a.getDict(b),e;$notEmpty(d)&&$isArray(d.values)&&(e=d.values["#"+c]);return e};a.setFilter=function(b){a.filter=b};a.setDisplayHead=function(b){var c=a.$headTable2.find("tbody tr").length;b?(a.$head2.show(),a.$head1.show(),a.$body2.css("top",
c*25),a.$body1.css("top",c*25)):(a.$head2.hide(),a.$head1.hide(),a.$body2.css("top",0),a.$body1.css("top",0))};a.setColumnVisible=function(b,c){if($notEmpty(b)){var d=a.allColumns[b];$notEmpty(d)&&($isEmpty(c)&&(c=!0),d.setVisible(c))}};a.checkItem=function(b){a.enabled&&(b=o(b),$notEmpty(b)&&b.setChecked(!0))};a.unCheckedItem=function(a){a=o(a);$notEmpty(a)&&a.setChecked(!1)};a.appendImage=function(b){if($notEmpty(a.images[b.itemType]))throw Error(mx.err("DUPLICATED_ITEM",[b.itemType]));b!=null&&
b.itemType!=null&&(a.images[b.itemType]=b,a.images.contains(b)||a.images.add(b))};a.appendImages=function(b){b=$clone(b);if($isArray(b))for(var c=0;c<b.length;c++)a.appendImage(b[c])};a.setImages=function(b){a.clearImages();a.appendImages(b)};a.clearImages=function(){for(;a.images.length>0;)delete a.images[a.images[0].itemType],a.images.removeAt(0)};a.appendColumns=function(a){$isArray(a)&&(y(a),w(),x())};var l=[];a.appendColumn=function(b,c,d,e,f){var g,h;arguments.length==1&&typeof b=="object"?
(b.owner=a,h=b.name,$.isPlainObject(b)?g=b:$instanceOf(g,mx.controls.TreeListViewColumn)&&(g=b)):(h=b,g={name:b,text:c,width:d,align:e,dataAlign:f,owner:a});if($notEmpty(a.allColumns[h]))throw Error(mx.err("DUPLICATED_ITEM",[h]));$.isPlainObject(g)&&(g=new mx.controls.TreeListViewColumn(g));if(!$isEmpty(g))return J(g),a.allColumns.add(g),a.allColumns[g.name]=g,$isEmpty(g.parent)?(a.columns.add(g),a.columns[g.name]=g):(g.parent.columns.add(g),g.parent.columns[g.name]=g),w(),a.$body2.find("tbody tr").length>
0&&z(g.name),g};a.appendColumnGroup=function(b){b.owner=a;b=new mx.controls.TreeListViewColumnGroup(b);J(b);y(b._columns,b);$isEmpty(b.parent)?(a.columns.add(b),a.columns[b.name]=b):(b.parent.columns.add(b),b.parent.columns[b.name]=b);x();return b};a.appendItem=function(a){var c=a.items;a.items=[];a=A(a);if(!$isEmpty(a))return E(a),$isArray(c)&&a.appendItems(c),a};a._refreshRowNumber=function(b){a.displayRowNumber&&!$isEmpty(b)&&($isEqual(a.numberFormat,"level")?F(b):M(b))};a.appendItems=function(b){if($isArray(b))for(var c=
0;c<b.length;c++)a.appendItem(b[c])};a.setItems=function(b){a.clearItems();a.appendItems(b)};a.clearItems=function(b){b==void 0&&(b=!0);if(b)for(;a.items.length>0;)a.items[0].remove();else a.$bodyTable1.find("tbody").eq(0).html(""),a.$bodyTable2.find("tbody").eq(0).html("")};a.removeItem=function(a){$notEmpty(a)&&$instanceOf(a,mx.controls.TreeListViewItem)&&a.remove(!0)};a.selectItem=function(b,c){var d=o(b);if(a.selection!=d){var e={cancel:!1,item:d};a.trigger("selectionchanging",e);if(!e.cancel)a.deselectItem(a.selection,
!1),d!=null&&(d.$e.addClass("selected"),d.$tr.addClass("selected")),a.selection=d,c!=!1&&a.trigger("selectionchanged")}};a.deselectItem=function(b,c){var d=o(b);if(d!=null&&a.selection==d)a.selection=null,d.$e.removeClass("selected"),d.$tr.removeClass("selected"),c!=!1&&a.trigger("selectionchanged")};a.checkAll=function(){$.each(a.items,function(a,c){c.setChecked(!0)})};a.uncheckAll=function(){$.each(a.items,function(a,c){c.setChecked(!1)})};a.getCheckedIds=function(){var b=[];a.$bodyTable1.find("tr.checked").each(function(){b.add($(this).data("item").id)});
return b};a.getSelections=function(){var b=[];a.$bodyTable1.find("tr.checked").each(function(){b.add($(this).data("item"))});return b};a.expandAll=function(){for(var b=0;b<a.items.length;b++)a.items[b].expand()};a.getItem=function(b){if(b==null)return null;var b=a.$wrap(b),c=null;b.length==1&&b.tag()=="tr"&&(c=b.data("item"));return c};a.getImageUrlOfItem=function(b){if(b==null)return null;return a.images[b.itemType]!=null?a.images[b.itemType].imageUrl:null};a.isCheckedAll=function(b){var c=!0;$isEmpty(b)&&
(b=a);$.each(b.items,function(a,b){if(!b.checked)return c=!1});return c};a._adjustSizeForIE6=function(){$.isIE6()&&a.$e.resize(function(){var b=a.$e.find("> #view > #view1");b.find("> #body").css("height",a.$e.height()-(a.allowPaging?m.$e.outerHeight():0)-a.$head2.outerHeight());a.$body2.css("height",a.$e.height()-(a.allowPaging?m.$e.outerHeight():0)-a.$head2.outerHeight());a.$head2.css("width",a.$e.width()-b.width()-18);a.$body2.css("width",a.$e.width()-b.width());a.$body2.find("> table").css("width",
a.$e.width()-b.width()-18)})};var j=a.$view=null,i=null;a.startEdit=function(b,c){if(!$isEmpty(b)&&a.allowEditing&&$notEmpty(c)){var d=b.$e.find("td[id='"+c+"']");if(d.length>0){var e=b.getValue(c),f=a.allColumns[c].editor,g={cancel:!1,value:e,column:a.allColumns[c],item:b};a.trigger("cellediting",g);g.cancel||(d.empty(),$instanceOf(a.allColumns[c].editor,mx.editors.CheckEditor)&&(d.css("backgroundImage","none"),f.on("changed",Z)),f.setValue(e,!1),d.append(f.$e),f.focus(),i=c,j=b,$instanceOf(a.allColumns[c].editor,
mx.editors.CheckEditor)&&f.$e.children("span").click())}}};a.endEdit=function(){if($notEmpty(j)&&$notEmpty(i)&&a.allowEditing){var b=j.$e.find("td[id='"+i+"']");if(b.length>0){var c=a.allColumns[i].editor,d=c.value,e=c.isValidate;c.$e.detach();e&&$notEqual(d,j.getValue(i))?(j.setValue(i,d),a.trigger("celledited",{value:d})):a.allColumns[i].renderCell(j,b);i=j=null}}};a.endOfClass(arguments);return a};$ns("mx.controls");
mx.controls.TreeListViewColumn=function(){var a=$extend(MXComponent),i={};a.owner=null;a.parent=null;a.name=null;a.text=null;a.editor="TextEditor";a.editorOption=null;a.dataType="string";a.allowSorting=!0;a.formatString=null;a.width=null;a.readOnly=!1;a.align=null;a.dataAlign=null;a.visible=!0;a.$headGroup=null;a.$headCol=$("<th/>");a.$bodyCol=$("<th/>");a.$headCell=$("<td class='head-cell'><div><span id='caption'/></div></td>");a.isLink=!1;a.linkUrl="#";i.init=a.init;a.init=function(){i.init();a.$bodyCol.attr("id",
a.name).attr("index",a.index);a.$headCol.attr("id",a.name).attr("index",a.index);a.$headCell.attr("id",a.name);a.setText(a.text);a.setWidth(a.width);a.setAlign(a.align);if($notEqual(a.name,a.owner.treeField)){a.$headCol.css("display",a.visible?"":"none");a.$bodyCol.css("display",a.visible?"":"none");a.$headCell.css("display",a.visible?"":"none");for(var b=a.parent,c=a;$notEmpty(b);){if(c.visible)b.setVisible(!0);else{for(var c=b.columns,f=c.length,d=!0,e=0;e<f;e++)c[e].visible&&(d=!1);d&&b.setVisible(!1)}c=
b;b=c.parent}}$notEmpty(a.$headGroup)&&a.$headGroup.append(a.$headCell);if(a.isLink)a.readOnly=!0;if($isEqual(a.name,a.owner.treeField)&&($isEqual(a.editor,"CheckEditor")||$instanceOf(a.editor,mx.editors.CheckEditor)))a.editor="TextEditor";b=a.editor;c=$.extend({width:"100%"},a.editorOption);if($isString(b))a.editor=mx.editors.EditorFactory.createEditor(b,c);else if($.isPlainObject(b)){if($isEmpty(b.type))b.type="TextEditor";a.editor=mx.editors.EditorFactory.createEditor(b.type,$.extend(b,c))}else $instanceOf(b,
mx.editors.Editor)?(b.setWidth("100%"),a.editor=b):a.editor=mx.editors.EditorFactory.createEditor("TextEditor",c);if($instanceOf(a.editor,mx.editors.DropDownEditor)||$instanceOf(a.editor,mx.editors.DropDownGridEditor)||$instanceOf(a.editor,mx.editors.DropDownTreeEditor)||$instanceOf(a.editor,mx.editors.AutoCompleteEditor)||$instanceOf(a.editor,mx.editors.ListEditor)||$instanceOf(a.editor,mx.editors.CheckListEditor))b=a.owner.getDict(a.name),$.isPlainObject(b)&&$isArray(b.values)&&a.editor.appendItems(b.values)};
a.getIndex=function(){return a.owner!=null?a.owner.columns.indexOf(a):-1};a.setRowSpan=function(b){a.rowSpan=b;a.$headCell.attr("rowSpan",b)};a.setText=function(b){a.text=b!=null?b:null;a.$headCell.find("span#caption").text(a.text!=null?a.text:"")};a.setAlign=function(b){b==null&&(b="left");a.align=b;a.$headCell.attr("align",a.align)};a.setDataAlign=function(b){b==null&&(b="left");a.dataAlign=b;a.owner.$bodyTable2.find("td#"+a.name).attr("align",a.dataAlign)};a.setWidth=function(b){b==null&&(b="auto");
a.width=b;a.$headCol.css("width",a.width);a.$bodyCol.css("width",a.width)};a.setVisible=function(b){if(!$isEqual(a.name,a.owner.treeField)&&(typeof b=="undefined"&&(b=!0),!$isEqual(a.visible,b))){a.visible=b;var c=0;b==!1?(c=-1,a.owner.$e.find("#"+a.name).hide()):(c=1,a.owner.$e.find("#"+a.name).show());for(var b=a.parent,f=a,d;b;){if(f.visible)b.setVisible(!0);else{d=b.columns;for(var e=d.length,g=!0,h=0;h<e;h++)d[h].visible&&(g=!1);g&&b.setVisible(!1)}d=parseInt(b.$headCell.attr("colspan"));$.isIE67()&&
(d=parseInt(b.$headCell.prop("colspan")));b.$headCell.attr("colspan",d+c);column=b;b=column.parent}}};a.formatValue=function(b){a.dataType=="date"&&typeof b=="number"&&(b=new Date(b));return a.formatString!=null?$format(b,a.formatString):b!=null?b:""};a.setLinkUrl=function(b,c){a.isLink&&c.attr("href",a.linkUrl)};a.renderCell=function(b,c){var f;if($isEqual(a.name,a.owner.treeField)){var d;c.empty();d=a.owner.displayImage?$("<div><span id='expandor'/><img/>"+(a.isLink?"<a id='text' style='cursor: pointer'/>":
"<span id='text'/>")+"</div>"):$("<div><span id='expandor'/>"+(a.isLink?"<a id='text' style='cursor: pointer'/>":"<span id='text'/>")+"</div>");c.append(d);a.isLink&&a.setLinkUrl(b,c.find("a#text"));f=d.find("#expandor");var e=d.find("img");d=d.find("#text");a.owner.displayImage&&e.attr("src",mx.mappath(b.imageUrl));var g=b.depth*16;f.css("left",g);a.owner.displayImage?(e.css("left",g+16),d.css("left",g+34)):d.css("left",g+16);!b.hasChildren&&($isEmpty(b._items)||b._items.length<=0)&&f.css("display",
"none");f=d}else a.isLink?(f=$("<a id='text' style='cursor: pointer'/>"),c.append(f),a.setLinkUrl(b,f)):f=c;e=b.getValue(a.name);d=a.owner.getDictItem(a.name,e);if($notEmpty(d))e=d.text;$instanceOf(a.editor,mx.editors.CheckEditor)?(e=$isEqual(e,a.editor.checkedValue)?mx.mappath("$theme/images/check_editor_checked.png"):mx.mappath("$theme/images/check_editor_unchecked.png"),f.css({backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",backgroundPositionY:"center"})):(e=a.formatValue(e),f.text(e),
f.attr("title",e));$notEmpty(a.dataAlign)?c.attr("align",a.dataAlign):c.attr("align","left");a.visible?c.show():c.hide()};a.endOfClass(arguments);return a};$ns("mx.controls");
mx.controls.TreeListViewColumnGroup=function(){var a=$extend(MXComponent),c={};a.owner=null;a.parent=null;a.name=null;a.text=null;a.align="center";a.columns=null;a._columns=null;a.$headGroup=null;a.$headCell=$("<td class='head-cellgroup'><div><span id='caption'/></div></td>");a.$bodyCol=$("<th/>");c.init=a.init;a.init=function(){c.init();a._columns=a.columns;a.columns=[];a.$bodyCol.attr("id",a.name);a.$headCell.attr("id",a.name);a.setText(a.text);a.setAlign(a.align);$notEmpty(a.$headGroup)&&a.$headGroup.append(a.$headCell)};
a.setText=function(b){a.text=b!=null?b:null;a.$headCell.find("span#caption").text(a.text!=null?a.text:"")};a.setAlign=function(b){b==null&&(b="left");a.align=b;a.$headCell.attr("align",a.align)};a.setVisible=function(b){$isEmpty(b)&&(b=!0);a.visible=b;a.$headCell.css("display",b?"":"none")};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.controls.TreeListViewColumn");
mx.controls.TreeListViewItem=function(){function i(b){var c=a.$e.children("#"+b.name);b!=null&&b.renderCell(a,c)}var a=$extend(mx.controls.Control),j={};a.eTag="<tr/>";a.owner=null;a.parentItem=null;a.items=[];a.id=null;a.path=null;a.depth=-1;a.itemType=null;a.imageUrl=null;a.expanded=!1;a.values={};a.hasChildren=!1;a.hasLoad=!1;a.checked=!1;a.$tr=$("<tr/>");a.oncreate=null;a.onremoving=null;var g=a.onremove=null,h={},f={};j.init=a.init;a.init=function(){j.init();var b=a;a.values=b;for(var c=a.owner.allColumns,
d=0;d<c.length;d++){var e=c[d].name;a.values[e]=b[e]}h=$.extend(!0,{},a.values);a.id=a.values[a.owner.idField];a.items!=null?a.$e.addClass("folder"):a.$e.addClass("item");a._setItemPathAndDepth();a.$e.attr("id",a.id);a.$e.data("item",a);a.$tr.data("item",a);a.owner.displayRowNumber&&a.owner!=null&&a.owner.displayRowNumber&&(b=$("<td style='text-align:center;' id='rownumber'></td>"),a.$tr.append(b));a.owner.displayCheckBox&&a.owner!=null&&a.owner.displayCheckBox&&(b=$("<td id='checkbox'><div><span/></div></td>"),
a.$tr.append(b),$notEmpty(a.parentItem)&&a.parentItem.checked&&a._setChecked(!0));b=a.owner.allColumns;c=b.length;for(d=0;d<c;d++){var e=b[d],f=$("<td class='body-cell'>");e.renderCell(a,f);f.attr("id",b[d].name);a.$e.append(f)}a.itemType!=null&&a.owner!=null&&a.setItemType(a.itemType);a.owner.displayImage&&a.setImageUrl(a.owner.getImageUrlOfItem(a));a.$e.toggleClass("expanded",a.expanded);for(b=a.parentItem;$notEmpty(b);){if(b.expanded)a.$e.css("display",""),a.$tr.css("display","");else{a.$e.css("display",
"none");a.$tr.css("display","none");break}b=b.parentItem}};a.setImageUrl=function(b){b==null&&(b="$/images/space.png");a.imageUrl=b;g=a.$e.find("td[id='"+a.owner.treeField+"'] img");g!=null&&g.attr("src",mx.mappath(a.imageUrl))};a.setItemType=function(b){a.itemType=b;a.$e.attr("itemType",a.itemType)};a.setRowNumber=function(b){if(a.owner.displayRowNumber&&($isNumber(b)||$isString(b)))a.$tr.attr("num",b),a.$tr.find("#rownumber").text(b),a.$tr.find("#rownumber").attr("title",b),a.$tr.find("#rownumber").css({"white-space":"nowrap",
"text-overflow":"ellipsis","word-break":"keep-all"}),a.$e.attr("num",b)};a.setChecked=function(b){if(a.owner.displayCheckBox&&(a._setChecked(b),a.owner&&a.owner.checkCascade===!0)){a.$e.nextAll("tr[path^='"+a.path+"']").each(function(){$(this).data("item")._setChecked(b)});for(var c=a.parentItem;$notEmpty(c);)(!b||b&&a.owner.isCheckedAll(c))&&c._setChecked(b),c=c.parentItem;$isEmpty(c)&&a.owner.$allCheckBox.toggleClass("checked",a.owner.isCheckedAll())}};a._setChecked=function(b){a.$tr.toggleClass("checked",
b);a.checked=b};a.toggleChecked=function(){a.owner.displayCheckBox&&a.setChecked(!a.checked)};a.getValue=function(b){if($isString(b))return a.values[a.owner.allColumns[b].name];else if($isNumber(b))return a.values[b]};a.setValue=function(b,c){var d,e;if($isNumber(b)||$isString(b))d=a.owner.allColumns[b],e=d.name;if($notEqual(a.values[e],c)&&(a.values[e]=c,f[e]=c,$isEqual(a.owner.idField,e)))a.id=c;i(d)};a.setValues=function(b){for(var c=a.owner.allColumns,d=0;d<c.length;d++){var e=c[d];a.setValue(e.name,
b[e.name])}};a.getValues=function(){for(var b={},c=a.owner.allColumns,d=0;d<c.length;d++){var e=c[d].name;b[e]=a.values[e]}return b};a.getChanges=function(){var b={};b[a.owner.idField]=a.id;return $.extend(!0,b,f)};a.rejectChanges=function(){f={};for(var b=a.owner.allColumns,c=0;c<b.length;c++){var d=b[c];a.values[d.name]=h[d.name];i(d)}};a.commitChanges=function(){f={};$.extend(!0,h,a.values)};a.isChanged=function(){return!($isEmpty(f)||$.isEmptyObject(f))};a.setItems=function(b){a.clearItems();
a.appendItems(b)};a.appendItems=function(b){var c;$isArray(b)&&(c=b);$isEmpty(c)||$.each(c,function(b,c){a.appendItem(c)})};a.appendItem=function(b){var c=b.items;b.items=[];b={item:b,parent:a};a.trigger("create",b);b=b.item;$isArray(c)&&$notEmpty(b)&&b.appendItems(c);return b};a.insertItemAfter=function(b){var c=b.items,d=a.parentItem;b.items=[];b={item:b,parent:d,prevSibling:a};a.trigger("create",b);b=b.item;$isArray(c)&&$notEmpty(b)&&b.appendItems(c);return b};a.insertItemBefore=function(b){var c=
b.items,d=a.parentItem;b.items=[];b={item:b,parent:d,nextSibling:a};a.trigger("create",b);b=b.item;$isArray(c)&&$notEmpty(b)&&b.appendItems(c);return b};a.remove=function(b){b={item:a,triggerEvent:b,cancel:!1};a.trigger("removing",b);b.cancel||a.trigger("remove",b)};a.clearItems=function(){for(;a.items.length>0;)a.items[0].remove(!0)};a.removeItem=function(b){var c=null;$instanceOf(b,mx.controls.TreeListViewItem)?c=b:$isNumber(b)?c=a.items[b]:$isString(b)&&(c=a.items["#"+b]);$notEmpty(c)&&c.remove(!0)};
a.refresh=function(){a.setValues(a.values)};a.select=function(b){a.owner!=null&&a.owner.selectItem(a,b)};a.expand=function(){var b={cancel:!1,item:a};a.owner.trigger("expanding",b);$isEqual(a.owner.type,"remote")&&!a.hasLoad?a.owner.loadChildren(a,b.param,a._expand):a._expand()};a._expand=function(){a._showChildren();a.$e.addClass("expanded");a.expanded=!0;a.owner.trigger("expanded",{item:a})};a.collapse=function(){a._hideChildren();a.$e.removeClass("expanded");a.expanded=!1};a.toggleExpand=function(){a.expanded?
a.collapse():a.expand()};a.isSelected=function(){return a.$e.hasClass("selected")};a.markAsSelected=function(b){arguments.length==0&&(b=!0);a.$e.toggleClass("selected",b)};a.isFolder=function(){return a.$e.hasClass("folder")};a.markAsFolder=function(b){b==null&&(b=!0);a.$e.toggleClass("folder",b);a.$e.toggleClass("item",!b)};a.insertCell=function(b,c){var d=a.owner.allColumns[b];if(!$isEmpty(d)&&!(a.$e.find("td#"+d.name).length>0)){var e=$("<td class='body-cell'>");e.attr("id",d.name);a.$e.append(e);
a.setValue(d.name,c)}};a._createItem=function(b){var c=null;if($.isPlainObject(b))b.owner=a.owner,b.parentItem=a,c=new mx.controls.TreeListViewItem(b);else if(typeof b=="object")c=b,c.owner=a.owner,c.parentItem=a;c._setItemPathAndDepth();return c};a._insertItem=function(b){var c=null;if($.isPlainObject(b))b.owner=a.owner,b.parentItem=a.parentItem,c=new mx.controls.TreeListViewItem(b);else if(typeof b=="object")c=b,c.owner=a.owner,c.parentItem=a.parentItem;c._setItemPathAndDepth();return c};a._showChildren=
function(){if(a.owner!=null&&a.isFolder())for(var b=a.items,c=b.length,d=0;d<c;d++){var e=b[d];e.$e.css("display","");e.$tr.css("display","");e.expanded?e._showChildren():e._hideChildren()}};a._hideChildren=function(){if(a.owner!=null&&a.isFolder())for(var b=a.items,c=b.length,d=0;d<c;d++){var e=b[d];e.$e.hide();e.$tr.hide();e.$e.css("display","none");e.$tr.hide("display","none");e._hideChildren()}};a._setItemPathAndDepth=function(){a.parentItem!=null?(a.path=a.parentItem.path+"/"+a.id,a.$e.attr("path",
a.path),a.depth=a.parentItem.depth+1):(a.path=a.id,a.$e.attr("path",a.path),a.depth=0)};a.endOfClass(arguments);return a};$ns("mx.controls");$import("mx.lib.upload");
mx.controls.UploadControl=function(){function i(){a.trigger("allitemuploaded")}function j(){a.trigger("itemuploaded")}function k(b){var c={cancel:!1,item:b.item};a.trigger("itemuploading",c);b.cancel=c.cancel}function l(b){a.trigger("selectionchanged",b)}function m(a){if(a){var c=$("<div class='previewMask mx'/>"),d=$("<table id='maskTable' cellspacing=0; border=0;><tr><td align=center></td></tr></table>"),e=$("<div class='preview'/>"),f=$("<div id='content'/>"),g=$("<div id='btnClose'/>"),h=$("<table cellspacing=0; border=0; align=center><tr><td align=center></td></tr></table>");
$(document.body).append(c);c.append(d);d.find("td").append(e);e.append(g);e.append(f);f.append(h);h.find("td").append(a);g.click(function(){c.detach()})}}function f(a,c){return"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='"+c+"')"}var a=$extend(mx.controls.Control),e={};a.type="path";a.height="200";a.width="435px";a.baseUrl=mx.mappath("~/../mx/servlets/fileUpload");a.filePath="";a.fileNames="";a.tableName="";a.primaryKey="";a.pkVal="";a.colName="";a.uploadMode="";
a.limitTypes="";a.allowTypes=null;a.maxSize=1E3;a.totalMaxSize=-1;a.vault=null;a.filesLimit=0;a.readOnly=!1;a.onclosed=null;a.onitemuploading=null;a.onselectionchanged=null;a.isVirtual=!1;a.onitemuploaded=null;a.onallitemuploaded=null;a.ignoreGlobalSet=[];e.init=a.init;a.init=function(){e.init();var b;if(b=$notEmpty(mx.globalUploadMode))b=$isArray(a.ignoreGlobalSet)?a.ignoreGlobalSet.contains("globalUploadMode"):!1,b=!b;if(b&&["file","blob","uds"].contains(mx.globalUploadMode))a.uploadMode=mx.globalUploadMode;
a.vault=new dhtmlXVaultObject;a.vault.onitemuploaded=j;a.vault.onallitemuploaded=i;a.vault.onitemuploading=k;a.vault.onitemselected=l;a.vault.isVirtual=a.isVirtual;a.vault.setImagePath(mx.mappath("$theme/images/fileupload/"));a.vault.setBaseUrl(a.baseUrl);a.vault.create(a);a.enabled==!1&&a.setEnabled(a.enabled);a.readOnly&&a.setReadOnly(a.readOnly)};e.setEnabled=a.setEnabled;a.setEnabled=function(b){e.setEnabled(b);a.vault&&a.vault.readOnly(!a.enabled)};a.appendFile=function(b){if((";"+a.fileNames).indexOf(";"+
b+";")==-1)a.fileNames=a.fileNames+b+";"};a.removeFile=function(b){for(var c=a.fileNames.split(";"),d=0;d<c.length;d++)if(c[d]==b){c.remove(c[d]);break}b="";for(d=0;d<c.length;d++)$notEmpty(c[d])&&(b=b+c[d]+";");a.fileNames=b};a.setReadOnly=function(b){typeof b=="undefined"&&(b=!0);a.readOnly=b;a.vault.readOnly(a.readOnly)};a._markError=function(b,c,d){a.vault.markError(b,c,d)};a._removeUploadedErrorFile=function(){a.vault.removeErrorFileItem()};a.refreshPk=function(b,c){a.vault.refreshPk(b,c)};a.download=
function(b){b.endsWith(";")&&(b=b.substring(0,b.length-1));a.vault.downLoad(b)};a.preview=function(a){if(a!=null){var c=null;if(typeof a=="object")if($isIE()){var d=a.path,c=document.createElement("img");(document.body||document.documentElement).appendChild(c);if(c.runtimeStyle)with(c.runtimeStyle)filter=f(d,"image"),zoom=width=height=1,position="absolute",right="9999em",top="-9999em",border=0;d={height:c.offsetHeight,width:c.offsetWidth};c.parentNode.removeChild(c);if(d.height==1&&d.width==1)d.width=
800,d.height=600;c=document.createElement("div");with(c.style)filter=f(a.path,"scale"),height=d.height+"px",width=d.width+"px",overflow="hidden";c=$(c)}else c=void 0;else typeof a=="string"&&(c=$("<img src='"+a+"'/>"));m(c)}};a.getUploadedNames=function(){for(var b=[],b=a.vault.getUploadedFiles(),c="",d=0;d<b.length;d++)c+=b[d].attName+";";return c};a._closeWindow=function(){a.trigger("closed")};a.createXMLHttpRequest=function(){var a=null;window.ActiveXObject?a=new ActiveXObject("Microsoft.XMLHTTP"):
window.XMLHttpRequest&&(a=new XMLHttpRequest);return a};a.endOfClass(arguments);return a};$ns("mx.datacontainers");mx.datacontainers.DataParams=function(){var a={metaParams:null,dataParams:null,mdaParams:null},c={},b={},d={};if(arguments.length==1)a.dataParams=$.extend(b,arguments[0]);else if(arguments.length==2)a.metaParams=$.extend(c,arguments[0]),a.dataParams=$.extend(b,arguments[1]);else if(arguments.length==3)a.metaParams=$.extend(c,arguments[0]),a.dataParams=$.extend(b,arguments[1]),a.mdaParams=$.extend(d,arguments[2]);return a};$ns("mx.datacontainers");$import("mx.datacontainers.EntityContainerBinder");$import("mx.rpc.RESTClient");$import("mx.utils.GUIDUtil");
mx.datacontainers.EntityContainer=function(){function o(){if(!a.loadMeta)return!1;var b=!1;if(a._lastLoad.url!=a.baseUrl)a._lastLoad.url=a.baseUrl,b=!0;if($notEmpty(a.mdaParams)){if(a._lastLoad.clsID!=a.mdaParams.clsID)a._lastLoad.clsID=a.mdaParams.clsID,b=!0}else if($notEmpty(a._lastLoad.clsID))a._lastLoad.clsID=null,b=!0;return b}function l(b){if(!$isEmpty(b))if(b.successful){var c=!1;if($isEmpty(a._tempLoadResult))a._tempLoadResult=b;else{var c=!0,d=a._tempLoadResult;d.resultValue=$.extend(d.resultValue,
b.resultValue)}(!a._changingType||c)&&k(a._tempLoadResult)}else i(b)}function g(b){if(!$isEmpty(b))if(b.successful){if($notEmpty(b.resultValue.primaryKey))a.primaryKey=b.resultValue.primaryKey;var c=!1;if($isEmpty(a._tempLoadResult))a._tempLoadResult=b;else{var c=!0,d=a._tempLoadResult;d.resultValue=$.extend(d.resultValue,b.resultValue)}(!a._loadData||c)&&k(a._tempLoadResult)}else i(b)}function k(b){a._submitting=!1;if($isEmpty(b.resultValue))throw Error(mx.err("RESULT_VALUE_EMPTY"));a._parseDicts(b.resultValue);
a._parseMeta(b.resultValue);a._parseData(b.resultValue);a._loadData=!0;b=a._setLoadArgs(b.resultValue);a.trigger("load",b);$notEmpty(a._loadCallBack)&&a._loadCallBack(b)}function i(b){a._lastLoad.url=null;a._lastLoad.clsID=null;a._showError("LOADING",b)}function e(b){a._submitting=!1;if($.isPlainObject(b))if($notEmpty(a._saveCallBack)&&a._saveCallBack(b),b.successful){b=a._resetNewData(b);a.clearChanges();var c={};c.result=b;a.trigger("saved",c)}else(b.type=="info"||b.type=="warn")&&$isArray(b.resultValue)?
a.trigger("validate",{result:b.resultValue}):a._showError("SAVING",b);else a._showError("SAVING")}function p(b){$isEmpty(b)&&(b={});if($isArray(b.items))$.each(b.items,function(a,b){delete b.mxVirtualId});else{b.items=[];for(var c in a._changedItems)b.items.add(a._changedItems[c]);b.items=m.jsonHierarchy(b.items)}if($notEmpty(a.mdaParams))b.clsID=a.mdaParams.clsID;return b}function f(b){b=h(b);return a.client.async==null||a.client.async==!0?b.get:b.getSync}function h(b){var c=a.client;b in n&&(c=
n[b]);return c}var a=$extend(MXComponent),j={};a.type="remote";a.baseUrl=null;a.actions={};var n={};a.actionOverideBaseUrl=!1;a.loadByPost=!1;a.mdaParams=null;a.client=null;a.data=null;a.meta=null;a.dicts=null;a.primaryKey="id";a.changed=!1;a.loadMeta=!0;a.enableLocalMask=!1;a.iscID=null;a.canModify=!0;a.onloading=null;a.onload=null;a.onchanging=null;a.onchanged=null;a.onsaving=null;a.onsaved=null;a.onvalidate=null;a.onerror=null;a._changedItems={};a._oldData={};a._loadDataPara={};a._loadMetaPara=
{};a._submitting=!1;a._lastLoad={};a._tempLoadResult=null;a._changingType=!1;a._loadData=!0;a._loadCallBack=null;var m=a._saveCallBack=null,q={timeStamp:null,procID:null};j.init=a.init;a.init=function(){j.init();a.type=="remote"&&a.setBaseUrl(a.baseUrl);m=mx.datacontainers.JSON2Flat({meta:a.meta})};a.setBaseUrl=function(b){a.baseUrl=b;b=mx.mappath(a.baseUrl);$isEmpty(b)?a.client=null:$isEmpty(a.client)?a.client=new mx.rpc.RESTClient({baseUrl:b,mode:"queue"}):a.client.setBaseUrl(b)};a.load=function(){if(!a._submitting){a._submitting=
!0;var b=a._parseArgs(arguments),c=b.path,d=b.para,b=b.callBack;a._loadCallBack=$notEmpty(b)?b:null;b={cancel:!1};b=$.extend(b,a._setLoadingArgs());a.trigger("loading",b);if(!b.cancel){a.clearChanges();var e={},b={};if($notEmpty(d)){var r=!1;if($notEmpty(d.dataParams))r=!0,e=d.dataParams;if($notEmpty(d.metaParams))r=!0,b=d.metaParams;r||(e=d)}if(a.type=="remote"){if($notEmpty(a.client)){a._changingType=o();a._loadDataPara=e;a._loadMetaPara=b;if($notEmpty(a.mdaParams))a._loadDataPara.clsID=a.mdaParams.clsID,
a._loadMetaPara.clsID=a.mdaParams.clsID;a._tempLoadResult=null;a._changingType&&a.loadMeta&&(b=a._makePath("meta","meta",null),$notEmpty(a.iscID)&&a.iscID!="-1"&&(b=b==null?"/"+a.iscID:b+"/"+a.iscID),d=f("meta"),d(b,{params:JSON.stringify(a._loadMetaPara)},g));a._loadData?(c=a._makePath("data",null,c),d=a.loadByPost?a._getClientPostMode("data"):f("data"),d(c,{params:JSON.stringify(a._loadDataPara)},l)):(c={successful:!0,resultValue:{}},c.resultValue.items=null,l(c))}}else if(a.type=="local"){var p=
a.data,h=a.meta;a.data=null;a.meta=null;c=function(){k(a._prepareLocalData(p,h,e))};a.enableLocalMask?(d=Date.now(),q.procID&&clearTimeout(q.procID),q={timeStamp:d,procID:setTimeout(c,500)}):c()}}}};a._makePath=function(b,c,d){var e=b in a.actions?a.actions[b]:null;if($notEmpty(e))return b in n||(n[b]=new mx.rpc.RESTClient({mode:"queue"})),n[b].setBaseUrl(e),d;return d||c};a.setValue=function(b,c,d,e){if(a.canModify){if(!$isEmpty(b)){var f={cancel:!1,entity:b,fieldName:c,oldValue:b[c],newValue:d};
e&&a.trigger("changing",f);if(!f.cancel){f=b[a.primaryKey];$isEmpty(a._oldData[f])&&(a._oldData[f]={});$isEmpty(a._changedItems[f])&&(a._changedItems[f]={},a._changedItems[f][a.primaryKey]=f);var g=a._oldData[f];g[c]||(g[c]=b[c]);b[c]=d;a._changedItems[f][c]=d;a.hasChanged(!0);f={entity:b,fieldName:c,value:b[c]};e&&a.trigger("changed",f);return b}}}else a._notAllowedTip()};a.save=function(){if(a.changed&&!a._submitting){var b=a._parseArgs(arguments),c=b.path,d=b.para,b=b.callBack;a._saveCallBack=
$notEmpty(b)?b:null;d=JSON.stringify(p(d));b={cancel:!1,data:a.data,param:d};a.trigger("saving",b);if(!b.cancel&&(c=a._makePath("save","save",c),$notEmpty(a.client)))a._getClientPostMode("save")(c,d,e),a._submitting=!0}};a.bind=function(b){mx.datacontainers.EntityContainerBinder.bind(a,b)};a.getChanges=function(){return a._changedItems};a.getChangedItems=function(){var b=[];jQuery.each(a._changedItems,function(a,d){b.add(d)});return b};a.hasChanged=function(b){if(arguments.length>0)a.changed=b;return a.changed};
a.clearChanges=function(){a.hasChanged(!1);a._changedItems={};a._oldData={}};a.checkSaved=function(b){var c=!0;$notEmpty(a._changedItems[b])&&$isEmpty(a._changedItems[b][a.primaryKey])&&(c=!1);return c};a._parseArgs=function(a){var c={};if($notEmpty(a))for(var d=0;d<a.length;d++)if(a[d]!=void 0)if($isString(a[d])||$isNumber(a[d]))c.path=a[d];else if($isFunction(a[d]))c.callBack=a[d];else if($notEmpty(a[d]))c.para=a[d];return c};a._getSavingData=function(){return JSON.stringify(p())};a._prepareLocalData=
function(b,c){var d={resultValue:{}};$isArray(b)?d.resultValue.items=b:(d.resultValue.items=[],d.resultValue.items.add(b));if($isArray(a.dicts))d.resultValue.dicts=a.dicts;if($notEmpty(c))d.resultValue.columns=c;return d};a._parseMeta=function(b){if($notEmpty(b.columns))a.meta=b.columns,m.setMeta(a.meta);if(typeof b.canModify!="undefined")a.canModify=b.canModify};a._parseData=function(b){a.data=m.jsonFlat(b.items)};a._parseDicts=function(b){a.dicts=b.dicts;if($isArray(a.dicts))for(b=0;b<a.dicts.length;b++){var c=
a.dicts[b];if($.isPlainObject(c)&&typeof c.name!="undefined"&&typeof c.values!="undefined")a.dicts[c.name]=c.values}};a._resetNewData=function(a){return a.resultValue.items};a._setLoadArgs=function(){var b={};b.columns=a.meta;b.items=a.data;return b};a._showError=function(b,c){var d,f;$.isPlainObject(c)?(d=c.resultHint||mx.msg("ERR_UNKNOWN"),f=c.errorPage):(c={type:"error"},d=mx.msg("ERR_UNKNOWN"));a._submitting=!1;var e={message:d,cancel:!1};a.trigger("error",e);e.cancel||(c.type!="error"?c.type==
"warn"||c.type=="info"?mx.indicate(c.type,d):typeof c.error!="undefined"&&c.error=="timeout"?mx.indicate("error",mx.msg("REQUEST_TIMEOUT")):mx.indicate("info",d):mx.showerror(Error(mx.err(b,[d])),f))};a._notAllowedTip=function(){var b=mx.msg("OPERATION_NOT_ALLOWED"),c={message:b,cancel:!1};a.trigger("error",c);c.cancel||mx.indicate("warn",b)};a._setLoadingArgs=function(){return{}};a._getJsonFlatter=function(){return m};a._getClientPostMode=function(a){return h(a).post};a.endOfClass(arguments);return a};
mx.datacontainers.JSON2Flat=function(){function o(e){$.each(i,function(g,f){if($isArray(f)){for(var h=f.length,a="$.",j=0;j<h;j++)a+=f[j]+(j==h-1?"":".");(h=jsonPath(e,a))&&(e[f.join(".")]=h[0])}});$.each(i,function(g,f){$isArray(f)&&delete e[f[0]]})}function l(e){for(var g in e)if(g.contain(".")){for(var f=g.split("."),h=e,a=f.length,j=0;j<a-1;j++){var i=f[j];$isEmpty(h[i])&&(h[i]={});h=h[i]}h[f[a-1]]=e[g];delete e[g]}}var g=$extend(MXComponent),k={};g.meta=null;var i=[];k.init=g.init;g.init=function(){k.init();
g.setMeta(g.meta)};g.setMeta=function(e){if(!$isEmpty(e))g.meta=e,i=jsonPath(g.meta,"$.*.name"),$.each(i,function(e,f){$notEmpty(f)&&f.contain(".")&&(i[e]=f.split("."))})};g.clear=function(){g.meta=null;i=[]};g.jsonFlat=function(e){$isArray(e)?$.each(e,function(e,f){o(f)}):$.isPlainObject(e)&&o(e);return e};g.jsonHierarchy=function(e){$isArray(e)?$.each(e,function(e,f){l(f)}):$.isPlainObject(e)&&l(p_item);return e};g.endOfClass(arguments);return g};$ns("mx.datacontainers");$import("mx.datacontainers.GridEntityContainer");$import("mx.datacontainers.FormEntityContainer");$import("mx.datacontainers.TreeEntityContainer");mx.datacontainers.EntityContainerBinder=function(){function c(d){for(var b in a)if(d.instanceOf(a[b]))return b}var a={};a.form=mx.datacontainers.FormEntityContainer;a.grid=mx.datacontainers.GridEntityContainer;a.tree=mx.datacontainers.TreeEntityContainer;this.bind=function(a,b){var e=c(a),f=c(b);eval("(_"+e+"_"+f+")")(a,b)};return this};
mx.datacontainers.EntityContainerBinder=new mx.datacontainers.EntityContainerBinder;$ns("mx.datacontainers");$import("mx.datacontainers.EntityContainer");$import("mx.utils.GUIDUtil");
mx.datacontainers.FormEntityContainer=function(){var a=$extend(mx.datacontainers.EntityContainer),d={};a.loadDicts=!0;a.defaultValues=null;d.init=a.init;a.init=function(){d.init()};d.load=a.load;a.load=function(){var b=a._parseArgs(arguments);if($isEmpty(b.path)&&a.type=="remote")a._loadData=a.loadDicts,b.path="null";d.load(b.path,b.para,b.callBack)};a.getValue=function(b){if($notEmpty(a.data)){var c=a.data[b];if(c===void 0)if($isString(b)&&b.indexOf(".")>-1){for(var b=b.split("."),c=null,d=0;d<b.length;d++){var e=
b[d];if(d==0)c=a.data[e];else if(c)c=c[e];else break}b=c}else b=null;else b=c;return b}return null};d.setValue=a.setValue;a.setValue=function(b,c,f){return d.setValue(a.data,b,c,f)};d._parseData=a._parseData;a._parseData=function(b){a.data=$isEmpty(b)||$isEmpty(b.items)?{}:$isArray(b.items)?b.items[0]:b.items;if($isEmpty(a.data))a.data={};if($isEmpty(a.data[a.primaryKey])){if(b=mx.utils.GUIDUtil.newGUID(),a.data[a.primaryKey]=b,a._changedItems[b]={},a._changedItems[b].mxVirtualId=b,$notEmpty(a.defaultValues))for(var c in a.defaultValues)a.setValue(c,
a.defaultValues[c])}else d._parseData({items:[a.data]}),a.data=a.data[0];a._startEdit()};a._startEdit=function(){a.data.setValue=function(b,c){a.setValue(b,c,!0)}};a._resetNewData=function(b){b=b.resultValue.items;if($isArray(b)&&b.length>0)a.data=$.extend(a.data,b[0]);return b};a.isCreate=function(){return $notEmpty(a.data)&&!a.checkSaved(a.data[a.primaryKey])};a.endOfClass(arguments);return a};$ns("mx.datacontainers");$import("mx.datacontainers.EntityContainer");$import("mx.utils.GUIDUtil");
mx.datacontainers.GridEntityContainer=function(){function h(b){a._submitting=!1;if(b.successful){for(b=0;b<a._deleteIDs.length;b++){var c=a._deleteIDs[b];a.data.remove(a.getEntityByKey(c));$notEmpty(a._changedItems[c])&&(a._changedItems[c]=null,delete a._changedItems[c]);$notEmpty(a._oldData[c])&&(a._oldData[c]=null,delete a._oldData[c])}a.trigger("deleted",{IDs:a._deleteIDs})}else a._showError("DELETING",b)}var a=$extend(mx.datacontainers.EntityContainer),f={};a.itemCount=0;a.data=[];a.editingItem=
null;a.canCreate=!0;a.canDelete=!0;a.onload=null;a.oncreating=null;a.oncreated=null;a.ondeleting=null;a.ondeleted=null;a.onsaved=null;a._deleteIDs=[];f.setValue=a.setValue;a.setValue=function(b,c,e,d){if($isString(b)||$isNumber(b))b=a.getEntityByKey(b);f.setValue(b,c,e,d)};a.startEdit=function(b){var c=a.getEntityByKey(b);if($notEmpty(c))c.setValue=function(b,d){a.setValue(c,b,d,!0)},a.editingItem=c;return c};a.getEntity=function(b){return a.getEntityByKey(b[a.primaryKey])};a.getEntityByIndex=function(b){if(a.data[b])return a.data[b];
return null};a.getEntityByKey=function(b){b=mx.utils.JsonUtil.getItems(a.data,a.primaryKey,b);if($isEmpty(b))return{};return b[0]};a.create=function(b,c){if(a.canCreate){$isEmpty(b)&&(b={});var e={cancel:!1,entity:b};a.trigger("creating",e);if(!e.cancel){var d=b[a.primaryKey];$isEmpty(d)&&(b[a.primaryKey]=mx.utils.GUIDUtil.newGUID(),d=b[a.primaryKey]);a._changedItems[d]={};a._changedItems[d].mxVirtualId=d;for(var g in b)g!=a.primaryKey&&(a._changedItems[d][g]=b[g]);d=a.data;if($notEmpty(c)&&$notEmpty(c.rowNumber)){var f=
d.length;g=c.rowNumber;f<=0||g<1?g=1:g>f&&(g=f+1);for(f-=1;f>=g-1;f--)d[f+1]=d[f];d[g-1]=b;e.rowNumber=g}else d.add(b);a.hasChanged(!0);!(c&&c.triggerEvent==!1)&&a.trigger("created",e);return b}}else a._notAllowedTip()};f.save=a.save;a.removeAll=function(){for(var b=[],c=0;c<a.data.length;c++)b.add(a.data[c][a.primaryKey]);a.remove(b)};a.removeByIndexes=function(b,c){var e=[];if($isArray(b))for(var d=0;d<b.length;d++)e.add(a.data[b[d]][a.primaryKey]);else e.add(a.data[b][a.primaryKey]);a.remove(e,
c)};a.remove=function(b,c,e){if(a.canDelete){if(!a._submitting){a._submitting=!0;var d=[];$isArray(b)?d=b:d.add(b);b={cancel:!1,IDs:d};if($isString(c)||$isNumber(c))e=c,c=null;a.trigger("deleting",b);if(!b.cancel)if(a._deleteIDs=d,a.type=="remote"){if(e=a._makePath("remove","delete",e),$notEmpty(a.client)){for(var b=[],f=0;f<d.length;f++)a.checkSaved(d[f])&&b.add(d[f]);if(b.length==0)h({successful:!0});else{d={ids:b};if($notEmpty(a.mdaParams))d.clsID=a.mdaParams.clsID;$notEmpty(c)&&(d=$.extend(d,
c));a._getClientPostMode("remove")(e,JSON.stringify(d),h)}}}else a.type=="local"&&h({successful:!0})}}else a._notAllowedTip()};f._prepareLocalData=a._prepareLocalData;a._prepareLocalData=function(a,c,e){c=f._prepareLocalData(a,c);c.resultValue.itemCount=a.length;if($notEmpty(e)&&$notEmpty(e.pageIndex))c.resultValue.page={},c.resultValue.page.pageIndex=e.pageIndex,c.resultValue.page.pageSize=e.pageSize;return c};f._parseMeta=a._parseMeta;a._parseMeta=function(b){f._parseMeta(b);if(typeof b.canDel!=
"undefined")a.canDelete=b.canDel;if(typeof b.canCreate!="undefined")a.canCreate=b.canCreate};f._parseData=a._parseData;a._parseData=function(b){f._parseData(b);a.itemCount=b.itemCount};f._resetNewData=a._resetNewData;a._resetNewData=function(b){var c={deleteIDs:[],newData:[]},e;for(e in a._changedItems)$isEmpty(a._changedItems[e][a.primaryKey])&&(a.data.remove(a.getEntityByKey(e)),c.deleteIDs.add(e));b=b.resultValue.items;if($isArray(b))for(e=0;e<b.length;e++){var d=b[e];$isEmpty(a.getEntityByKey(d[a.primaryKey]))&&
(a.data.add(d),c.newData.add(d))}return c};f._setLoadArgs=a._setLoadArgs;a._setLoadArgs=function(b){var c=f._setLoadArgs(b);if($notEmpty(b.page)){var e=parseInt(b.page.pageIndex),b=parseInt(b.page.pageSize);c.items=c.items.slice((e-1)*b,e*b)}c.itemCount=a.itemCount;return c};a.endOfClass(arguments);return a};$ns("mx.datacontainers");$import("mx.datacontainers.EntityContainer");$import("mx.utils.GUIDUtil");
mx.datacontainers.TreeEntityContainer=function(){function n(b,c){var d=c.nextSibling,k=c.prevSibling,f=c.parentNode,g=c.order,e=b[a.primaryKey],i=[];$isEmpty(f)&&($notEmpty(d)?f=a.data["#"+d.parentId]:$notEmpty(k)&&(f=a.data["#"+k.parentId]));if(!$notEmpty(f)||f.hasChildren)if($isEmpty(e)&&(e=mx.utils.GUIDUtil.newGUID(),b[a.primaryKey]=e),b.parentId=$isEmpty(f)?null:f[a.primaryKey],!$notEmpty(a.data["#"+e]))return $isEmpty(f)?(i=a.data||[],a.data=i):(i=f.childNodes||[],f.childNodes=i),i.contains(b)||
($notEmpty(d)?i.insertBefore(b,d):$notEmpty(k)?i.insertAfter(b,k):g?i.add(b):i.insert(0,b)),$isEmpty(i["#"+e])&&(i["#"+e]=b),$isEmpty(a.data["#"+e])&&(a.data["#"+e]=b),$isArray(b.childNodes)&&$.each(b.childNodes,function(a,c){n(c,{parentNode:b})}),b}function p(b){var c=$isEmpty(b)?a.data:b.childNodes;if($isArray(c))for(;c.length>0;)l(c[0],b)}function m(b,c){var d,e;if($isArray(b))$isEmpty(c)?(a.data=a.data||[],d=a.data):(c.childNodes=c.childNodes||[],d=c.childNodes),p(c),$.each(b,function(b,g){e=
g[a.primaryKey];g.parentId=$isEmpty(c)?null:c[a.primaryKey];d.contains(g)||d.add(g);d["#"+e]=g;a.data["#"+e]=g;if($isArray(g.childNodes)){var h=g.childNodes;g.childNodes=[];m(h,g)}})}function q(b){a._submitting=!1;b.successful?o(b):a._showError("DELETING",b)}function l(b,c){if($isArray(b.childNodes)&&b.childNodes.length>0)for(var d=b.childNodes;d.length>0;)l(d[0],b);$isEmpty(c)?a.data.remove(b):$isArray(c.childNodes)&&c.childNodes.remove(b);delete a.data["#"+b[a.primaryKey]]}function o(){var b=a.getNodeEntity(j.id,
j.itemType);l(b,j.parent);b={node:j};a.trigger("deleted",b);$notEmpty(a._removeCallBack)&&a._removeCallBack(b)}var a=$extend(mx.datacontainers.EntityContainer),e={};a.onload=null;a.ondeleting=null;a.ondeleted=null;a.oncreating=null;a.oncreated=null;a.primaryKey="id";a.loadMeta=!1;a.canCreate=!0;var h=a._removeCallBack=null,j=null;e.init=a.init;a.init=function(){e.init();if($isEqual(a.type,"remote"))a.data=[];else{var b=a.data||[];a.data=[];m(b)}};e.load=a.load;a.load=function(b,a){h=null;if(typeof a!=
"undefined")if($isArray(b)||$.isPlainObject(b))e.load(b,a);else{if($instanceOf(b,mx.datacontrols.DataTreeNode)){h=b;var d=b.queryParams!=null?b.queryParams:{};d.itemType=b.itemType;e.load(b.id,d,a)}}else typeof b!="undefined"?$instanceOf(b,mx.datacontrols.DataTreeNode)?(h=b,d=b.queryParams!=null?b.queryParams:{},d.itemType=b.itemType,e.load(b.id,d)):e.load(b):e.load()};a.getNodeEntity=function(b,c){if($notEmpty(b)&&($isString(b)||$isNumber(b))){var d=null;$.each(a.data,function(a,e){e.id===b&&e.itemType===
c&&(d=e)});if(d!=null)return d;return a.data["#"+b]}};a.create=function(b,c){var d={};if(a.canCreate){if($.isPlainObject(c))d.parentNode=a.getNodeEntity(c.parentId,c.itemType),d.nextSibling=a.getNodeEntity(c.nextId,c.itemType),d.prevSibling=a.getNodeEntity(c.prevId,c.itemType),d.order=$isEmpty(c.order)?!0:c.order;d.node=b||{};var e=$.extend(!0,{cancel:!1},d);a.trigger("creating",e);if(!e.cancel){var f=n(d.node,d);d.node=f;e=$.extend(!0,{},d);a.trigger("created",e);return $isEmpty(f)?f:$.extend(!0,
{},f)}}else a._notAllowedTip()};a.remove=function(b,c,d){if(!a._submitting&&(a._submitting=!0,a._removeCallBack=c,c={cancel:!1,node:b},a.trigger("deleting",c),!c.cancel))j=b,c=[],c.add(b.id),$isEqual(a.type,"remote")?(b=a._makePath("remove","delete",d),a._getClientPostMode("remove")(b,JSON.stringify({ids:c}),q)):(a._submitting=!1,o())};e._prepareLocalData=a._prepareLocalData;a._prepareLocalData=function(b){a.data=b;var c={};c.resultValue={nodes:b};return c};a._parseData=function(b){var c=b.nodes,
d=h;if($isEmpty(a.data))a.data=[];if($isArray(c))if(a.type==="local"){if($notEmpty(h))c=$notEmpty(h)&&$isArray(h.childNodes)?h.childNodes:[],b.nodes=c}else a.type=="remote"&&m(c,d)};e._setLoadArgs=a._setLoadArgs;a._setLoadArgs=function(a){var c={};if($notEmpty(h))c.parentNode=h;c.nodes=a.nodes;return c};e._setLoadingArgs=a._setLoadingArgs;a._setLoadingArgs=function(){return{childItemTyps:"",itemType:"",filter:""}};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.controls.ToolBar");$import("mx.datacontrols.DataForm");
mx.datacontrols.ComplexForm=function(){function c(){if(a.displayToolBar)a.toolBar=new mx.controls.ToolBar({items:[{name:"save",text:mx.msg("SAVE"),imageKey:"save",onclick:function(){a.save()}},{name:"refresh",text:mx.msg("REFRESH"),imageKey:"refresh",onclick:function(){a.load()}}]}),a.$e.prepend(a.toolBar.$e)}var a=$extend(mx.datacontrols.DataForm),b={};a.displayToolBar=!0;a.toolBar=null;b.init=a.init;a.init=function(){b.init();a.on("load",function(){c()})};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.controls.ToolBar");$import("mx.datacontrols.DataGrid");
mx.datacontrols.ComplexGrid=function(){function d(){if(a.entityContainer!=null&&a.toolBar!=null){var b=a.toolBar.items["#new"],c=a.toolBar.items["#save"],d=a.toolBar.items["#delete"],e=a.toolBar.items["#edit"];b!=null&&b.setEnabled(a.entityContainer.canCreate?!0:!1);c!=null&&c.setEnabled(a.entityContainer.canModify?!0:!1);e!=null&&e.setEnabled(a.entityContainer.canModify?!0:!1);d!=null&&d.setEnabled(a.entityContainer.canDelete?!0:!1)}}function f(b){switch(b.item.name){case "new":a.create();break;
case "save":a.saveData();break;case "delete":a.remove();break;case "moveup":a.moveUp(!0);break;case "movedown":a.moveDown(!0)}}var a=$extend(mx.datacontrols.DataGrid),c={};a.displayToolBar=!0;a.toolBar=null;a.toolBarHeight=26;a.displayColSplitLine=!1;a.imagePosition="left";c.init=a.init;a.init=function(){c.init();if(a.toolBar==null)a.toolBar=new mx.controls.ToolBar({imagePosition:a.imagePosition,items:[{name:"new",text:mx.msg("NEW"),imageKey:"add"},"-",{name:"save",text:mx.msg("SAVE"),imageKey:"save"},
"-",{name:"delete",text:mx.msg("DELETE"),imageKey:"delete"},"-",{name:"moveup",text:mx.msg("MOVEUP"),imageKey:"moveUp"},{name:"movedown",text:mx.msg("MOVEDOWN"),imageKey:"moveDown"}],onitemclick:f});a.$e.prepend(a.toolBar.$e);a.displayToolBar?(a.displayToolBar=!1,a.setDisplayToolBar(!0)):(a.displayToolBar=!0,a.setDisplayToolBar(!1));d();a.on("load",d)};a._adjustGridSizeForIE6=function(){$.isIE6()&&a.$e.resize(function(){a.$grid.css("height",a.$e.height()-($notEmpty(a.searchBox)&&!a.searchBox.$e.is(":hidden")?
a.searchBox.$e.outerHeight():0)-(a.displayToolBar?a.toolBarHeight:0)-(a.allowPaging?a.pageNaviBar.$e.outerHeight():0));a.$body.css("height",a.$grid.height()-a.$head.outerHeight())})};a.appendToolBarItem=function(b){a.toolBar!=null&&a.toolBar.appendItem(b)};a.appendToolBarItems=function(b){a.toolBar!=null&&a.toolBar.appendItems(b)};a.setDisplayToolBar=function(b){if(a.displayToolBar!=b&&a.toolBar!=null){a.displayToolBar=b;b=0;if(a.displayToolBar){a.toolBar.show();if(a.imagePosition=="up")a.toolBarHeight=
47;b=$notEmpty(a.searchBox)&&a.searchBox.container==null?a.searchBox.getHeight()+a.toolBarHeight:a.toolBarHeight}else a.toolBar.hide(),b=$notEmpty(a.searchBox)&&a.searchBox.container==null?a.searchBox.getHeight():0;a.$grid.css({top:b})}};a.create=function(){a.appendItem()};a.remove=function(){a.removeItems(a.getCheckedIDs())};a.saveData=function(){a.save()};a._toggleSearchBoxShowState=function(){if(a.searchBox.container==null){a.searchBox.toggleShowState();a.$e.find("#toggleShowBtn").toggleClass("toggleShowBtn");
a.$e.find("#toggleShowBtn").toggleClass("toggleHideBtn");var b=a.searchBox.getHeight();a.displayToolBar?a.$grid.animate({top:b+a.toolBarHeight},"fast"):a.$grid.animate({top:b},"fast")}};c.dispose=a.dispose;a.dispose=function(){a.off();c.dispose()};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.utils.PrintUtil");$import("mx.datacontainers.FormEntityContainer");$import("mx.editors.EditorFactory");$import("mx.windows.WindowManager");
mx.datacontrols.DataForm=function(){function g(b){a.fields=$clone(o);if($isEmpty(b)||b.length<=0){if(b=mx.utils.JsonUtil.getItem(a.fields,"name",a.entityContainer.primaryKey,3),$notEmpty(b))b.readOnly=!0,b.nullable=!1,b.visible=a.displayPrimaryKey}else{var c={fields:b,cancel:!1};a.trigger("rendering",c);c.cancel||$.each(b,function(b,c){var f=h(c.name);if($notEmpty(f)){for(i in c)i=="length"&&delete c[i];$.each(c,function(a,b){if($isEmpty(f[a])||$isEqual(a,"readOnly")||$isEqual(a,"maxLength")||$isEqual(a,
"nullable"))f[a]=b})}else f=c,a.fields.add(f);if($isEqual(f.name,a.entityContainer.primaryKey))f.readOnly=!0,f.nullable=!1,f.visible=a.displayPrimaryKey})}}function h(b){var c=null;$notEmpty(b)&&(c=mx.utils.JsonUtil.getItem(a.fields,"name",b),$isEmpty(c)&&(c=mx.utils.JsonUtil.getItem(a.fields,"name",b,2)));return c}function p(a,c,d,e){if($isEmpty(a))d[e]={columns:c};else if($isEmpty(a.columns))a.columns=c;else if($isString(a.columns)){for(var c=c.split(","),d=a.columns.split(","),e=c.length,f=0;f<
e;f++)d.contains(c[f])||d.add(c[f]);a.columns=d.join(",");c.length=0;d.length=0}else throw Error(mx.err("ERR_UNSUPPORTED_FORMAT",[a.columns]));}function r(a){var c=a.tag(),d=0;$isEqual(c,"td")?d=a.attr("colSpan"):$isEqual(c,"tr")&&a.children("td").each(function(){d+=this.colSpan});return d}function q(a,c){$instanceOf(a,mx.editors.Editor)&&($instanceOf(a,mx.editors.CustomEditor)&&a.setEnabledInput(c),a.setEnabled(c))}var a=$extend(mx.controls.Control),j={};a.typeName="DataForm";a.baseUrl=null;a.primaryKey=
null;a.entityContainer=null;a.printHideFields=!1;a.fields=[];a.groups=[];a.editors=[];a.displayPrimaryKey=!1;a.captionColumnWidth=120;a.onvalidate=null;a.ignoreCheckOnHide=!0;a.onloading=null;a.onrendering=null;a.onload=null;a.onsubmit=null;a.maxCols=2;a.fieldCaptionRender=null;var o=[];j.init=a.init;a.init=function(){j.init();a.$e.addClass("dataForm");o=$clone(a.fields);a.$e.tag()=="form"&&a.$e.submit(function(){a.trigger("submit");return!1});if($isEmpty(a.entityContainer))a.entityContainer=new mx.datacontainers.FormEntityContainer({baseUrl:a.baseUrl,
primaryKey:a.primaryKey});a.setEntityContainer(a.entityContainer)};a.load=function(b,c,d){if($isEmpty(a.entityContainer))mx.showerror(Error(mx.err("LOADING",["EntityContainer is Undefined"])));else if($isEmpty(a.entityContainer.baseUrl)&&"remote"==a.entityContainer.type)mx.showerror(Error(mx.err("LOADING",["EntityContainer BaseUrl is Undefined"])));else{var e={cancel:!1};a.trigger("loading",e);if(!e.cancel){var f=e=null,l=null;$isEmpty(b)||$isString(b)||$isNumber(b)?(e=b,$isEmpty(c)||$.isPlainObject(c)?
(f=c,$isFunction(d)&&(l=d)):$isFunction(c)&&(l=c)):$.isPlainObject(b)?(f=b,$isFunction(c)&&(l=c)):$isFunction(b)&&(l=b);b=a.fields;if(m==null){c=[];if($notEmpty(b))for(d=0;d<b.length;d++){var g=b[d];if($isArray(g))for(var h=0;h<g.length;h++)$.isPlainObject(g[h])&&c.add(g[h].name);else $.isPlainObject(g)&&c.add(g.name)}m=c}b=m;b=b.length>0?b.join(","):null;if($notEmpty(f)&&$isEmpty(f.dataParams)&&$isEmpty(f.metaParams))c={},c.dataParams=f,f=c;$notEmpty(b)&&$isString(b)&&($isEmpty(f)?f={metaParams:{columns:b},
dataParams:{columns:b}}:(p(f.metaParams,b,f,"metaParams"),p(f.dataParams,b,f,"dataParams")));$notEmpty(a.entityContainer)&&(a.$e.setBusy(),a.entityContainer.load(e,f,l))}}};a.isNew=function(){return $notEmpty(a.entityContainer)&&a.entityContainer.isCreate()};a.save=function(b,c){var d=a.validate(b);d.successful?a.entityContainer.save(b,c):$notEmpty(d.hint)&&mx.indicate("info",d.hint)};a.getEditor=function(b){b=a.editors[b];return b!=null?b:null};a.selectEditor=function(b){b=a.getEditor(b);b!=null&&
(b.focus(),b.select());return b};a.setEntityContainer=function(b){$notEmpty(a.entityContainer)&&a.entityContainer!=b&&(a.entityContainer.off("load",a._entityContainer_load),a.entityContainer.off("changing",a._entityContainer_changing),a.entityContainer.off("changed",a._entityContainer_changed),a.entityContainer.off("saving",a._entityContainer_saving),a.entityContainer.off("saved",a._entityContainer_saved),a.entityContainer.off("error",a._entityContainer_error),a.entityContainer.off("validate",a._entityContainer_validate));
a.entityContainer=b;$notEmpty(a.entityContainer)&&(a.entityContainer.on("load",a._entityContainer_load),a.entityContainer.on("changing",a._entityContainer_changing),a.entityContainer.on("changed",a._entityContainer_changed),a.entityContainer.on("saving",a._entityContainer_saving),a.entityContainer.on("saved",a._entityContainer_saved),a.entityContainer.on("error",a._entityContainer_error),a.entityContainer.on("validate",a._entityContainer_validate))};var n=[];a.setFields=function(b){$(a.editors).each(function(){this.parent=
null;this.dispose()});a.$e.empty();a.groups=[];var c=null,c=$isArray(b)&&typeof b.caption!="undefined"?b:a._parseFields(b);$.each(n,function(a,b){c[b.name]=b});n=[];a.fields=c;a.editors.clear();b=a._createTable();a.$e.append(b);a._renderFields(a.fields,b)};j.setEnabled=a.setEnabled;a.setEnabled=function(b){b=="undefined"&&(b=!0);j.setEnabled(b);for(var c=0;c<a.editors.length;c++)q(a.editors[c],b)};a.setFieldNullable=function(b,c){var d=a.fields[b];if(d!=null){d.nullable=c;var e=a.getEditor(b);if(e!=
null)e.nullable=d.nullable,e._clearPreValidateState(),e="",$isFunction(a.fieldCaptionRender)?e=a.fieldCaptionRender(d):(e=d.caption+":",d.nullable||(e="<span class=red>* </span>"+e)),a._getFieldCell(b).find("label").html(e)}};a.setFieldCaption=function(b,c){var d=a.fields[b];if(d!=null&&(d.caption=c,a.getEditor(b)!=null)){var e="";$isFunction(a.fieldCaptionRender)?e=a.fieldCaptionRender(d):(e=c+":",d.nullable&&(e="* "+e));a._getFieldCell(b).find("label").html(e)}};a.setFieldVisible=function(b,c){var d=
a.fields[b];if(d!=null){var e=a._getFieldCell(b),f=a.getEditor(b);e.css("display",c?"":"none");f.setVisible(c);d.visible=c}};a.setFieldCaptionVisible=function(b,c){var d=a.fields[b];if(d){var e=a._getFieldCell(b);e.find("div.editor").css("marginLeft",c?a.captionColumnWidth:"0px");e=e.find("label");e.css("width",c?a.captionColumnWidth:"0px");c?e.show():e.hide();d.captionVisible=c}};a.setGroupVisible=function(b,c){var d=a.groups[b];d!=void 0&&d.setVisible(c)};a.setGroupCaption=function(b,c){var d=a.groups[b];
d!=void 0&&d.setCaption(c)};a.setFieldReadOnly=function(b,c){var d=a.fields[b];if(d!=null){d.readOnly=c;var e=a.getEditor(b);e!=null&&e.setReadOnly(d.readOnly)}};a.setFieldEnabled=function(b,c){var d=a.fields[b];if(d!=null){d.enabled=c;var e=a.getEditor(b);e!=null&&q(e,d.enabled)}};a.validate=function(b,c){c==null&&(c=!1);a.blur();for(var d={successful:!0},e=0;e<a.editors.length;e++){var f=a.editors[e];if(!(a.ignoreCheckOnHide&&f.visible==!1)&&(d=f.validate(!0),d=$clone(d),d.successful==!1)){d.hint=
(f.caption?f.caption:"")+d.hint;d.fieldName=f.fieldName;c||f.markError(!0,d.hint);break}}d.successful&&($isEmpty(b)&&(b=a.entityContainer._getSavingData()),$.extend(d,{dataForm:a,param:b}),a.trigger("validate",d));return d};a.focus=function(){if(a.editors.length>0)for(var b=0;b<a.editors.length;b++)if(!a.editors[b].readOnly){a.editors[b].focus();break}};a.blur=function(){if(a.editors.length>0)for(var b=0;b<a.editors.length;b++)a.editors[b].readOnly||a.editors[b].blur()};a.hasChanged=function(){return a.entityContainer.hasChanged()};
a.getId=function(){return a.entityContainer.data[a.entityContainer.primaryKey]};a.printForm=function(b,c,d){var e={dataControl:a,maxCols:a.maxCols,printHideFields:a.printHideFields};if($isEmpty(b))b=!0;else if($.isPlainObject(b))$.extend(e,b),b=!0;else if($instanceOf(b,mx.windows.WindowManager))e.windowManager=b,b=!0;$instanceOf(c,mx.windows.WindowManager)?e.windowManager=c:$.isPlainObject(c)&&$.extend(e,c);$.isPlainObject(d)&&$.extend(e,d);(new mx.utils.PrintUtil(e)).printControl(b)};var k=[];a._getFieldCell=
function(b){if(k[b]!=null)return k[b];else{var c=b.replace(/\./g,"\\."),c=a.$("td#"+c);k.add(c);return k[b]=c}};a._parseFields=function(b){var c=null;if($isArray(b)){c=a._parseFieldGroup(b);if(a.groups[c.name]!=void 0)throw Error(mx.err("DUPLICATED_ITEM",[c.name]));c.name!=void 0&&(a.groups.add(c),a.groups[c.name]=c)}else $.isPlainObject(b)&&(c=a._parseField(b));return c};a._parseFieldGroup=function(b){for(var c=new mx.datacontrols.FormFieldGroup,d=0;d<b.length;d++){var e=b[d],f=null;typeof e=="string"&&
d==0?(c.caption=e,c.name=e):typeof e=="boolean"&&d==1?c.defaultExpanded=e:typeof e=="boolean"&&d==2?c.visible=e:f=a._parseFields(e);f!=null&&c.add(f)}return c};a._parseField=function(a){var c=new mx.datacontrols.FormField;$.extend(c,a);if($isEmpty(c.editorType))c.editorType="TextEditor";if($isEmpty(c.fieldName)&&$isEmpty(c.name)&&c.editorType!="LabelEditor")throw Error(mx.err("FIELDNAME_NON_NULLABLE"));if($isEmpty(c.fieldName)&&$notEmpty(c.name))c.fieldName=c.name;if($notEmpty(c.fieldName)&&$isEmpty(c.name))c.name=
c.fieldName;$notEmpty(c.name)&&n.add(c);return c};a._renderFields=function(b,c,d){for(var d=d||1,e=0;e<b.length;e++){var f=b[e];if($isArray(f)&&$notEmpty(f.caption)){var g=a._renderFieldGroup(f,c,d);if(a.groups[f.name]!=void 0)a.groups[f.name].$e=g}else a._renderField(f,c,d)}};a._createTable=function(){return $("<table cellspacing=0 cellpadding=0 class='formTable'><tbody/></table>")};a._editor_changed=function(b){var b=b.target,c=b.fieldName,d=a.fields[c];d!=void 0&&d.isVirtual||a.entityContainer!=
null&&b.isValidate==!0&&a.entityContainer.setValue(c,b.value,!0)};a._setFieldValues=function(){for(var b=0;b<a.editors.length;b++){var c=a.editors[b],d=!1;if($instanceOf(c,mx.editors.DropDownEditor)||$instanceOf(c,mx.editors.CheckListEditor)||$instanceOf(c,mx.editors.ListEditor)||$instanceOf(c,mx.editors.AutoCompleteEditor)){if(($isEmpty(c.items)||c.items.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[c.fieldName]))c.appendItems(a.entityContainer.dicts[c.fieldName]),
d=!0}else if($instanceOf(c,mx.editors.DropDownTreeEditor)||$instanceOf(c,mx.editors.DropDownGridEditor))if(($isEmpty(c.dicts)||c.dicts.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[c.fieldName]))c.appendDicts(a.entityContainer.dicts[c.fieldName]),d=!0;a.entityContainer!=null&&a.entityContainer.isCreate()?a.entityContainer.canModify&&c.isValidate==!0&&(d&&c.setValue(c.value),$isEmpty(a.entityContainer.getValue(c.name))?$isEmpty(c.value)||a.entityContainer.setValue(c.name,
c.value,!1):c.setValue(a.entityContainer.getValue(c.name))):c.isVirtual||(d=a.entityContainer.getValue(c.fieldName),typeof d!="undefined"&&c.setValue(d))}if($isArray(a.editors))for(b=0;b<a.editors.length;b++)if(c=a.editors[b],c!=null&&c.isValidate===!1)d=c.isValidate,c.markError(!1),c.isValidate=d};a._entityContainer_load=function(b){a.$e.setBusy(!1);b=b.columns;a.fields=[];k=[];g(b);$notEmpty(a.fields)&&(a.setFields(a.fields),a._setFieldValues());(!a.enabled||!a.entityContainer.canModify)&&a.setEnabled(!1);
a.trigger("load")};a._entityContainer_changing=function(){};a._entityContainer_changed=function(b){var c=a.editors[b.fieldName];$notEmpty(c)&&c.setValue(b.value)};a._entityContainer_error=function(){a.$e.setBusy(!1)};a._entityContainer_validate=function(b){b=b.result;if($isArray(b)&&(b=b[0],$isArray(b))){var c;$.each(b,function(b,e){c=a.getEditor(e.fieldName);$notEmpty(c)&&c.markError(!0,e.errorsToDefaulFormatString)})}a.$e.setBusy(!1)};a._entityContainer_saved=function(b){a.$e.setBusy(!1);for(var c=
0;c<a.editors.length;c++)$isFunction(a.editors[c].refreshPk)&&$instanceOf(a.editors[c],mx.editors.FileEditor)&&$isArray(b.result)&&b.result.length>0&&(a.editors[c].type!="path"&&a.editors[c].refreshPk(b.result,a.entityContainer.primaryKey),a.editors[c].setPk(b.result[0][a.entityContainer.primaryKey]))};a._entityContainer_saving=function(){a.$e.setBusy()};j.dispose=a.dispose;a.dispose=function(){a.setEntityContainer(null);if(a.editors!=null){for(var b=0;b<a.editors.length;b++){var c=a.editors[b];c.parent=
null;c.dispose()}a.editors.clear();a.editors=null}if(a.fields!=null)a.fields.clear(),a.fields=null;j.dispose()};var m=null;a._renderFieldGroup=function(b,c,d){var e=$("<tr/>"),f=$("<td>").addClass("fieldGroup").attr("colSpan",1);e.append(f);var g=$("<dl><dt/><dd/></dl>");f.append(g);var f=g.children("dd"),h=a._createTable();a._renderFields(b,h,d+1);f.append(h);g.children("dt").text(b.caption);g.expandable({expanded:b.defaultExpanded});b.visible||e.hide();c.append(e);return e};a._renderField=function(b,
c,d){if(b.name==a.primaryKey||b.name==a.entityContainer.primaryKey)b.readOnly=!0;var e=$.extend($clone(b),{parent:a,enabled:a.enabled});$notEmpty(e)&&$.isPlainObject(e.editorOptions)&&(e=$.extend(e,e.editorOptions));var f=null;if($notEmpty(e.onchanged))f=e.onchanged;e.onchanged=a._editor_changed;e=new mx.editors.EditorFactory.createEditor(e.editorType,e);$notEmpty(e)&&(e.on("changed",f),a.editors[e.name]=e,a.editors.add(e));var g=null,g=b.lineBreak,f=$("<td class='field'/>"),h=null;f.attr("id",b.name);
f.attr("colSpan",b.colSpan);var j=$("<div class='container'/>");$.isIE67()||j.css({marginLeft:15*(2-d),marginRight:5});f.append(j);d=$("<div class='editor'/>").css({marginLeft:b.captionVisible?a.captionColumnWidth:"0px"});if(!e.instanceOf(mx.editors.CheckEditor)){h=$("<label/>").css({width:b.captionVisible?a.captionColumnWidth:"0px"});b.captionVisible||h.hide();var k="",k=$isFunction(a.fieldCaptionRender)?a.fieldCaptionRender(b):(b.nullable==!1?"<span class='red'>*</span> ":"")+b.caption+":";h.html(k);
h.get(0).title=b.caption;j.append(h)}j.append(d);$notEmpty(e)&&d.append(e.$e);$isEqual(b.name,a.entityContainer.primaryKey)?(g=$("<tr/>"),c.prepend(g),c.append($("<tr/>"))):c.find("tr").length==0||r(c.find("tr").last())+b.colSpan>a.maxCols||g?(g=$("<tr/>"),c.append(g)):g=c.find("tr").last();g.append(f);b.visible==!1&&f.css("display","none")};a.endOfClass(arguments);return a};
mx.datacontrols.FormField=function(){return{name:null,fieldName:null,caption:null,readOnly:!1,visible:!0,captionVisible:!0,nullable:!0,enabled:!0,editorType:null,width:"100%",lineBreak:!0,colSpan:1,isVirtual:!1}};
mx.datacontrols.FormFieldGroup=function(){var g=[];g.name=null;g.caption=null;g.visible=!0;g.$e=null;g.defaultExpanded=!0;g.setCaption=function(h){if($isString(h))g.caption=h;g.$e!=void 0&&g.$e.find("dt:first").text(h)};g.setVisible=function(h){if(g.$e!=void 0)if(h==!0)g.$e.css("display",""),g.visible=h;else if(h==!1)g.$e.css("display","none"),g.visible=h};return g};$ns("mx.datacontrols");$import("mx.controls.ContextMenu");$import("mx.datacontrols.DataGridColumn");$import("mx.datacontrols.DataGridItem");$import("mx.datacontrols.PagedControl");$import("mx.datacontrols.PageNaviBar");$import("mx.datacontrols.wizards.ImportExcelWizard");$import("mx.editors.EditorFactory");$import("mx.datacontainers.GridEntityContainer");$import("mx.datacontrols.DataGridSearchBox");$import("mx.utils.ExcelUtil");
mx.datacontrols.DataGrid=function(){function N(b){if(a.usePercentage){if((!$isString(b.initWidth)||!(b.initWidth.indexOf("px")>-1||b.initWidth=="auto"))&&b.widthPercentage==void 0)b.widthPercentage=parseInt(b.initWidth)/100}else if($isString(b.initWidth)&&b.initWidth.indexOf("%")>-1&&b.widthPercentage==void 0)b.widthPercentage=parseInt(b.initWidth)/100}function O(){if(a.setDisplayToolBar){var b=a.displayToolBar;a.displayToolBar=!a.displayToolBar;a.setDisplayToolBar(b);a.displayToolBar=b}else a.searchBox!=
null&&a.searchBox.container==null&&a.$grid.css("top",a.searchBox.getHeight())}function y(b,c){if(q){var d=q.getItem(j);$notEmpty(d)&&(d.reset(),d.markError(!1),a.clearEditor())}$isEmpty(c)&&(c="load");c=="load"?(a.$e.setBusy(),a.entityContainer.load(b)):c=="remove"?(a.$e.setBusy(),a.entityContainer.remove(b)):c=="removeByIndexs"?(a.$e.setBusy(),a.entityContainer.removeByIndexes(b)):c=="save"&&a.entityContainer.save(b)}function la(b){if(!a.enabled)return!1;var c=b.target;if($(c).parents("#head")[0]&&
a.enableHeadContextMenu)a._init_head_contextmenu(),a.headContextMenu.show(b.clientX,b.clientY);else{for(var d=a.$bodyTable.get(0);!(c.tagName=="TR"&&c.parentNode!=null&&c.parentNode.parentNode==d);)if(c=c.parentNode,c==null)break;if(c!=null&&(c=$.data(c,"item"),c!=null))return a.itemMenu!=null&&(a.selectItem(c),a.itemMenu.show(b.clientX,b.clientY)),!1;a.contextMenu!=null&&a.contextMenu.show(b.clientX,b.clientY);return!1}}function P(b){a.clearEditor(b)}function Q(a){a.target.$e.parent().addClass("gridDirtyCell")}
function ma(){var b={},b={pageIndex:a.pageIndex,pageSize:a.pageSize};a.load(b)}function na(){a.load()}function R(b){if(a.clearEditor()===!1)b.cancel=!0}function S(b){$isEmpty(b.rowNumber)?a._appendItem(b.entity):a._insertItem(b.rowNumber,b.entity)}function T(b){a.$e.setBusy(!1);b=b.IDs;if(a.allowPaging&&z)a.entityContainer.data.length==0&&a.pageIndex>1&&(a.pageIndex-=1),a.load({pageIndex:a.pageIndex,pageSize:a.pageSize});else{for(var c=0;c<b.length;c++)for(var d=0;d<a.items.length;d++)if(b[c]==a.items[d].id){D(a.items[d]);
break}E();x()}$notEmpty(A)&&A()}function U(b){if(a.validateOnSaving!=!1){for(var c=0,d=eval("("+b.param+")"),e=0;e<d.items.length;e++){var g=d.items[e],f;f=g;if($isEmpty(f)||f.mxVirtualId==void 0)f=!1;else{var m={};m.id=f.mxVirtualId;m.nullCells=[];for(var h=0;h<a.columns.length;h++){var i=a.columns[h];if(i!=void 0&&i.nullable!=void 0&&!i.nullable&&i.name!=a.primaryKey){var j=f[i.name]!==void 0?f[i.name]:V(i.name,f);$isEmpty(j)&&m.nullCells.add(i)}}a._markCellNotNull(m);f=m.nullCells.length>0?!0:
!1}f&&c++;if(g[a.primaryKey]==void 0)g=!1;else{f={};f[a.primaryKey]=g[a.primaryKey];f.nullCells=[];for(m=0;m<a.columns.length;m++)h=a.columns[m],h!=void 0&&h.nullable!=void 0&&!h.nullable&&h.name!=a.primaryKey&&$isString(h.name)&&g.hasOwnProperty(h.name)&&(i=g[h.name]!==void 0?g[h.name]:V(h.name,g),$isEmpty(i)&&f.nullCells.add(h));a._markCellNotNull(f);g=f.nullCells.length>0?!0:!1}g&&c++}if(c==0){if(a.$e.setBusy(),c={successful:!0},$.extend(c,a.validate()),a.trigger("validate",c),$notEmpty(c)&&!c.successful)b.cancel=
!0,a.$e.setBusy(!1)}else b.cancel=!0,mx.indicate("error",mx.msg("ERR_INPUT_NON_NULLABLE"))}}function V(a,c){if($isString(a)&&a.indexOf(".")>-1&&$.isPlainObject(c)){for(var d=a.split("."),e=null,g=0;g<d.length;g++){var f=d[g];if(g==0)e=c[f];else if(e)e=e[f];else break}return e}return null}function W(b){b=b.result;if($isArray(b)){for(var c,d=a.entityContainer.getChangedItems(),e=0,g=b.length;e<g;e++)c=b[e],$isArray(c)&&c.length>0?$.each(c,function(b,c){a.markError(oa(d[e]),c.fieldName,!0,c.errorsToDefaulFormatString)}):
delete d[e];a.$e.setBusy(!1)}}function oa(b){var c;$notEmpty(b)&&(c=b.mxVirtualId?b.mxVirtualId:b[a.primaryKey]);return c}function X(b){a.$e.setBusy(!1);$notEmpty(a.saveMessage)&&mx.indicate("info",a.saveMessage);for(var c=0;c<a.columns.length;c++){var d=q.getItem(a.columns[c].name);d&&$isFunction(d.refreshPk)&&$isArray(b.result.newData)&&b.result.newData.length>0&&d.refreshPk(b.result.newData,a.entityContainer.primaryKey)}if(a.allowPaging)a.load({pageIndex:a.pageIndex,pageSize:a.pageSize});else{d=
b.result.deleteIDs;b=b.result.newData;if($notEmpty(d))for(c=0;c<d.length;c++)for(var e=0;e<a.items.length;e++)if(d[c]==a.items[e].$e.attr("id")){D(a.items[e]);break}$notEmpty(b)&&a._appendItems(b);a.$e&&a.$e.find(".gridDirtyCell").removeClass("gridDirtyCell")}$notEmpty(F)&&F()}function Y(){a.$e.setBusy(!1)}function B(b){return a.columns[b.attr("id")]}function pa(b){for(var c=b.target;!(c.tagName=="DIV"&&c.parentNode!=null);)if(c=c.parentNode,c==null)return;if($(c).parent("#"+a._tempColumnName).length!=
1){h=$(c).clone();h.append("<span class=rejustInsert id=allowInsertFlag/>");h.$td=$(c).parent();$(document).on("mousemove",Z);$(document).on("mouseup",aa);$(c).parent().append(h);h.addClass("colProxy");h.css("width",$(c).width()+10);h.css("height",$(c).height());var d=$(c).position(),c=$(c).offset();h.css("left",d.left);h.mouseDownX=b.clientX;h.position=d;h.offset=c}}function Z(b){b=b||window.event;if($notEmpty(h)){var c=b.clientX-h.mouseDownX;if(G||!(c<25&&c>-25)){G=!0;c=h.position.left+b.clientX-
h.mouseDownX+a.$body.scrollLeft();h.addClass("colProxyMove");h.css("left",c);for(c=0;c<a.columns.length;c++){var d=b.clientX,e=a.columns[c].$headCell,g=e.offset();e.position();if(g.left!=0){var f=null,f=h.$td.next().length==0?h.$td:h.$td.next();if(d-10<g.left&&d+10>g.left&&h.$td.offset().left!=e.offset().left&&f.offset().left!=e.offset().left){$isEmpty(n)&&(n=$("<div class='mx dataGrid insertFlag'/>"),h.children("span#allowInsertFlag").removeClass("rejustInsert"),h.children("span#allowInsertFlag").addClass("acceptInsert"),
$("body").append(n));n.css("left",g.left-7);n.css("top",g.top-11);h.$insertTd=e;break}else $notEmpty(n)&&(n.remove(),n=null,h.children("span#allowInsertFlag").removeClass("acceptInsert"),h.children("span#allowInsertFlag").addClass("rejustInsert"))}}}}}function aa(){$(document).off("mousemove",Z);$(document).off("mouseup",aa);if(!$isEmpty(h))if($isEmpty(n))h.remove(),h=null;else{for(var b=h.$td.attr("id"),c=h.$insertTd.attr("id"),d=null,e=0;e<a._columns.length;e++)if(b==a._columns[e].name){d=a._columns[e];
a._columns.removeAt(e);break}if(c==a._tempColumnName)a._columns.add(d);else for(e=0;e<a._columns.length;e++)if(c==a._columns[e].name){a._columns.insertBefore(d,a._columns[e]);break}h.$td.insertBefore(h.$insertTd);var g=a.$body.find("td[id='"+b+"']"),f=a.$body.find("td[id='"+c+"']");g.each(function(a){g.eq(a).insertBefore(f.eq(a))});var m=a.$body.find("col[id='"+b+"']"),i=a.$body.find("col[id='"+c+"']");m.each(function(a){m.eq(a).insertBefore(i.eq(a))});d=a.columns[b];a.columns.remove(a.columns[b]);
a.columns.insertBefore(d,a.columns[c]);h.remove();h=null;G=!1;$notEmpty(n)&&(n.remove(),n=null)}}function qa(b){if(!(b.which>=2)&&a.enabled){a.$e.userSelectable(!1);for(var c=b.target;!(c.tagName=="TR"&&c.parentNode!=null&&c.tagName!="TABLE");)if(c=c.parentNode,c==null)return;p=$.data(c,"item");if(p!=null)H=a.$bodyTable.absolutePosition().top,ba=b.clientY,a.$body.one("mouseup",ra),a.$body.on("mousemove",sa)}}function sa(b){var c=null;Math.abs(b.clientY-ba)>ta&&k==null&&(k=p.$e.clone(!0),k.find("td#"+
a._tempColumnName).remove(),a.displayRowNumber&&k.find("td#rownumber").css({width:a.rowNumberColWidth}),a.displayCheckBox&&k.find("td div span#checkBox").closest("td").css({width:"25px"}),s=$('<table cellspacing="0" cellpadding="0"></table>'),a.columns[a._tempColumnName]!=null&&(c=p.$e.find("#"+a._tempColumnName),c=$.isIE67()?c.width():c.outerWidth(),c=a.$bodyTable.width()-c),s.css({position:"absolute",height:"23px",width:c+"px",left:0,top:b.clientY-H-k.height()/2,"table-layout":"fixed"}),s.append(k),
k.find(">td").each(function(a,b){var c=$(b),d=c.attr("id");c.css("overflow","hidden");$dragTd=p.$e.find("#"+d);c=$.isIE67()?$dragTd.width():$dragTd.outerWidth();c!=0&&$(b).css("width",c)}),a.$body.append(s),a.$bodyTable.css("cursor","move"));if(k!=null){var d=ua(k.get(0),b.clientY-k.height()/2);d!=null&&(t=$.data(d,"item"),s.css({"background-color":"white",position:"absolute",height:"23px",width:c+"px",left:0,top:b.clientY-H-k.height()/2,"table-layout":"fixed"}))}}function ra(){a.$body.off("mouseup");
a.$body.off("mousemove");a.$bodyTable.css("cursor","default");a.$e.userSelectable(!0);k!=null&&(s.remove(),k=s=null);if(p==t||t==null)p=t=null;else{if(t!=null&&p!=null){var b=t.$e.prevAll("tr");p.moveTo(b.length);a.items.clear();if(a.allowInterlacedRow)for(var b=a.$bodyTable.get(0).rows,c,d=0;d<b.length;d++)c=b[d],c=$.data(c,"item"),d%2==1?c.$e.addClass("even"):c.$e.removeClass("even"),c.$e.find("td#rownumber").text(a._getRowNumber(d+1)),c.$e.find("td#rownumber").attr("title",a._getRowNumber(d+1)),
a.items.add(c)}a.selectItem(p,!0);t=p=null}}function ua(b,c){for(var d=a.$bodyTable.get(0).rows,e=0;e<d.length;e++){var g=d[e],f=a._getPosition(g).y,h=parseInt(g.offsetHeight)/2;if(g.offsetHeight==0)f=a._getPosition(g.firstChild).y,h=parseInt(g.firstChild.offsetHeight)/2;if(c>f-h&&c<f+h){if(g==b)break;return g}}return null}function va(a,c,d){if($isArray(a)&&$isArray(c))for(var e=0;e<a.length;e++)if(!(a[e].isVirtual&&a[e].isVirtual===!0)){for(var g=a[e][d],f=!1,h=0;h<c.length;h++)if(g==c[h][d]){f=
!0;break}f||a.removeAt(e--)}}function u(){if(a.$body){var b=!0;if(a.items.length>0||a.displayStatisticRow)b=!1;b?(a.$bodyTable.find("#__temp_scroll__").length==0&&(b=$("<tr id=__temp_scroll__ style='visibility:hidden;'><td style='border:none'>&nbsp;</td></tr>"),a.$bodyTable.append(b)),$isIE()):a.$bodyTable.find("#__temp_scroll__").remove()}}function x(){var b=a._tableDiv();if($notEmpty(b)){var c=b.find("tr").length,b=b.find("tr.checked").length;c>0&&c==b?a._checkAll():a._uncheckAll()}}function I(a,
c){for(var d=0;d<a.length;d++)if(a[d].name==c)return a[d];else if($.isArray(a[d].columns)){var e=I(a[d].columns,c);if(e!=null)return e}return null}function ca(){if(!a.entityContainer.loadMeta&&$isEmpty(a.entityContainer.meta)&&$.isArray(a.columns)){a.entityContainer.meta=a.columns;var b=a.entityContainer._getJsonFlatter();$notEmpty(b)&&b.setMeta(a.columns);da=!0}}function ea(b){a.entityContainer=b.target;a._load(b);a.$e.setBusy(!1);$notEmpty(J)&&J(b)}function fa(){}function ga(b){try{var c=b.fieldName,
d=b.value,e=b.entity[a.primaryKey];i=a.$bodyTable!=null?a.$body.find("tr[id='"+e+"']").data("item"):a.$bodyLeftTable.find("tr[id='"+e+"']").length>0?a.$bodyLeftTable.find("tr[id='"+e+"']").data("item"):a.$bodyRightTable.find("tr[id='"+e+"']").data("item");$isEmpty(i)||(i.values[c]=d,a._changeEditorToText(c))}finally{v==!1&&(i=null)}}function wa(){var a=$("<div></div>"),c=$("<span id='tip'>"+mx.msg("DATAGRID_UPGRADE_TIP")+"</span>"),d=$("<div id='upgradeBtn'>"+mx.msg("UPGRADE_BTN")+"</div>");a.addClass("dataGridUpgrade");
d.click(function(){window.open(mx.mappath("~/../mx/resources/chromeframe/default.htm"))});a.append(c);a.append(d);c=(new mx.windows.WindowManager).create({title:mx.msg("DATAGRID_IMPORT"),width:500,height:400,resizable:!1,reusable:!0});c.$body.append(a);c.showDialog()}function ha(){K==null&&(K=new mx.utils.ExcelUtil);return K}function D(b){a.clearEditor();var c=null;$isNumber(b)?c=a.items[b]:$isObject(b)&&(c=b);if(c!=null){b=!1;if(a.selection==c)b=!0,a.selection=null;a.selections.contains(c)&&(b=!0,
a.selections.remove(c));c.owner=null;a.items.remove(c);c._remove();u();b&&a.trigger("selectionchanged");a.trigger("itemremoved")}}function E(){$.each(a.items,function(b,c){a.allowInterlacedRow&&((b+1)%2?c.$e.removeClass("even"):c.$e.addClass("even"));a.displayRowNumber&&(c.$e.find("td#rownumber").text(a._getRowNumber(b+1)),c.$e.find("td#rownumber").attr("title",a._getRowNumber(b+1)))})}function ia(a,c){if($isArray(a)&&!$isEmpty(c))if(c.columns!=void 0&&$isArray(c.columns))for(var d=0;d<c.columns.length;d++)ia(a,
c.columns[d]);else a.add(c.name)}function ja(){a.selection&&a.selection.$e&&(a.selection.$e.offset().top>a.$body.offset().top+a.$body.height()||a.selection.$e.offset().top<a.$body.offset().top)&&a.selection.$e.scrollIntoView()}var a=$extend(mx.datacontrols.PagedControl),w={};a.typeName="DataGrid";a.entityContainer=null;a.pageNaviBar=null;a.width="auto";a.rowNumberColWidth=25;a.height="100%";a.columns=[];a.searchBox=null;a.items=[];a.images=[];a.baseUrl=null;a.primaryKey="id";a.selection=null;a.selections=
[];a.autoSelect=!1;a.moveByShortcutKey=!1;a.autoWrap=!1;a.displayCheckBox=!1;a.displayRowNumber=!1;a.displayStatisticRow=!1;a.displayPrimaryKey=!1;a.allowEditing=!1;a.allowSorting=!1;a.allowMultipleSorting=!1;a.multipleSortColumns=null;a.sortColumn=null;a.sortOrder=!0;a.sorter=null;a.filter=null;a.searchParamType="string";a.allowAdjusting=!0;a.allowDraging=!0;a.allowDraggingColumn=!0;a.allowDraggingItem=!1;a.allowInterlacedRow=!0;a.usePercentage=!1;a.printHideFields=!1;a.editOnSelected=!1;a.activeEditor=
null;a.imageSize=16;a.displayHead=!0;a.displayColSplitLine=!0;a.displayImage=!1;a.contextMenu=null;a.headContextMenu=null;a.enableHeadContextMenu=!0;a.itemMenu=null;a.validateOnSaving=!1;a.enableCellTip=!1;a.saveMessage=mx.msg("SAVE_SUCCESS");a.onselectionchanged=null;a.onselectionchanging=null;a.onitemcreated=null;a.onitemremoved=null;a.onitemclick=null;a.onitemdoubleclick=null;a.onitemchecked=null;a.oncellediting=null;a.oneditorcreating=null;a.oneditorcreated=null;a.oncelledited=null;a.onloading=
null;a.onitemindexchanged=null;a.onload=null;a.onvalidate=null;a.$grid=null;a.$head=null;a.$headTable=null;a.$body=null;a.$bodyTable=null;a._columns=[];a.itemDefaultData=null;a._hasOverrideRenderCell=!1;a.importExcelOptions={};var ka={horizontalBegin:1,horizontalEnd:0,verticalBegin:1,verticalEnd:0,sheetNumber:1,separatorNum:0,saveByDefault:!0},da=!1,L=0;a._isInitRowNumber=!1;var M=a._isInitCheckBox=!1,J=null,r;a._tempColumnName="__temp_Column_rnd__";w.init=a.init;a.init=function(){if($.isIE67()){if(a.width==
"auto")a.width=null;if(a.height=="100%")a.height=null;a._tempColumnName="temp_Column_rnd__"}w.init();a._init()};a._createItem=function(b){if(a.clearEditor()===!1)return null;var c=null;if($.isPlainObject(b))c=new mx.datacontrols.DataGridItem({owner:a,values:b});else if($instanceOf(c,mx.datacontrols.DataGridItem))c=b,c.owner=a;$notEmpty(c)&&!c.initialized&&c.init();return c};a.appendItem=function(b){b==void 0&&(b=a.getItemDefaultData());if($isArray(b))for(var c=0;c<b.length;c++)$notEmpty(a.entityContainer)?
a.entityContainer.create(b[c]):a._appendItem(b[c]);else $notEmpty(a.entityContainer)?a.entityContainer.create(b):a._appendItem(b)};a._appendItem=function(b){b=a._createItem(b);if(b!=null&&!a._synItem(b))return a.items.add(b),a.$bodyTable.append(b.$e),a.allowInterlacedRow&&a.items.length%2==0&&b.$e.addClass("even"),a.displayRowNumber&&(b.$e.find("td#rownumber").text(a._getRowNumber(a.items.length)),b.$e.find("td#rownumber").attr("title",a._getRowNumber(a.items.length))),a.autoSelect&&a.selection==
null&&a.selectNextItem(),a.trigger("itemcreated",{item:b}),x(),u(),b};a._synItem=function(b){if($isEmpty(b.values[a.primaryKey]))a.entityContainer.create(b.values,{triggerEvent:!1}),b.init();else{var c=a.entityContainer.getEntityByKey(b.values[a.primaryKey]);if($isEmpty(c))a.entityContainer.create(b.values,{triggerEvent:!1}),b.init();else for(var d in b.values)if(b.values[d]!==c[d]){var e=$clone(b.values[d]);b.setValue(d,e)}}return!1};a.insertItem=function(b,c){var d=a.entityContainer,e=null;$notEmpty(d)&&
$isNumber(b)&&(e=d.create(c,{rowNumber:b}));return e};a._insertItem=function(b,c){var d=1,e=null,g=a.items.length;switch(arguments.length){case 1:$isObject(b)&&(e=a._createItem(b));break;case 2:$isNumber(b)&&$isObject(c)&&(d=g<=0||b<1?1:b>g?g+1:b,e=a._createItem(c))}$notEmpty(e)&&(e=a.__insertItem(d,e),a.selectItem(e));x();u();return e};a.__insertItem=function(b,c){for(var d=a.items[b-1],e=a.items.length-1;e>=b-1;e--)a.items[e+1]=a.items[e];a.items[b-1]=c;$isEmpty(d)?a.$bodyTable.append(c.$e):d.$e.before(c.$e);
E();return c};var A=null,z=!0;a.removeItems=function(b,c,d){switch(arguments.length){case 3:$isBoolean(d)&&(z=d);case 2:$isFunction(c)?A=c:$isBoolean(c)&&(z=c);case 1:if($isArray(b))break;else{z=!0;A=null;return}default:return}a.clearEditor();for(var e=[],g=[],f=0;f<b.length;f++)$instanceOf(b[f],mx.datacontrols.DataGridItem)?e.add(b[f].values[a.primaryKey]):$.isPlainObject(b[f])?e.add(b[f][a.primaryKey]):$isString(b[f])?e.add(b[f]):$isNumber(b[f])?g.add(b[f]):e.add(b[f].id);$notEmpty(a.entityContainer)&&
(e.length>0&&y(e,"remove"),g.length>0&&y(g,"removeByIndexs"))};a.removeItem=function(b,c){!$isEmpty(b)&&!$isFunction(b)&&a.removeItems([b],c)};var F=null;a.save=function(b,c){if(a.clearEditor()!==!1){var d=null;$notEmpty(b)&&$isFunction(b)?(c=b,d=null):$notEmpty(b)&&$.isPlainObject(b)&&(d=b);F=$notEmpty(c)?c:null;$notEmpty(a.entityContainer)&&y(d,"save")}};a.load=function(b,c){if($isEmpty(a.entityContainer))mx.showerror(Error(mx.err("LOADING",["EntityContainer is Undefined"])));else if($isEmpty(a.entityContainer.baseUrl)&&
"remote"==a.entityContainer.type)mx.showerror(Error(mx.err("LOADING",["EntityContainer BaseUrl is Undefined"])));else{var d={cancel:!1};a.trigger("loading",d);if(!d.cancel){var e=null;$notEmpty(b)&&$isFunction(b)?c=b:$notEmpty(b)&&$.isPlainObject(b)&&(e=b);J=$notEmpty(c)?c:null;d={metaParams:null,dataParams:null};if($notEmpty(e))$isEmpty(e.metaParams)&&$isEmpty(e.dataParams)?d.dataParams=e:d=$.extend(d,e);if(a.allowPaging){d.dataParams=$.extend({pageIndex:a.pageIndex,pageSize:a.pageSize},d.dataParams);
if(a.pageIndex!=d.dataParams.pageIndex)a.pageIndex=d.dataParams.pageIndex;if(a.pageSize!=d.dataParams.pageSize)a.pageSize=d.dataParams.pageSize,a.pageNaviBar.pageSize=a.pageSize}e="";$notEmpty(a.searchBox)&&(e="json"==a.searchParamType?a.searchBox.getJsonSearchParam():a.searchBox.getSearchParam());if($notEmpty(a.filter))if("json"==a.searchParamType)if(e.length>0)if($isArray(a.filter))for(var g=0;g<a.filter.length;g++)e.add(a.filter[g]);else e.add(a.filter);else e=a.filter;else{var f="";if($.isPlainObject(a.filter)){for(g in a.filter)f=
f+"&"+g+"="+a.filter[g];$notEmpty(e)?e+=f:e=f.substring(1,f.length)}else $isString(a.filter)&&(e=$notEmpty(e)?e+"&"+a.filter:a.filter)}if(!$notEmpty(a.searchBox)||a.searchBox.allowSqlKeyQuery||!a.searchBox._isSqlInject){if($notEmpty(e))d.dataParams=$.extend({filter:e},d.dataParams);if($notEmpty(a.sorter))d.dataParams=$.extend({sorter:a.sorter},d.dataParams);if($notEmpty(a._columns))e="",e=a._getColunmsNames().join(","),g={columns:e},d.metaParams=$.extend({columns:e},d.metaParams),d.dataParams=$.extend(g,
d.dataParams);y(d)}}}};a._getColunmsNames=function(){for(var b=[],c=0;c<a._columns.length;c++)ia(b,a._columns[c]);return b};a.setEnableCellTip=function(b){a.enableCellTip=b;var c=a.$bodyTable.find("td");if(b)for(var d=0;d<c.length;d++){var b=$(c[d]),e=B(b);e!=void 0&&(e.editorType=="RichTextEditor"?a._richTextCelltip(c[d]):b.attr("title",b.text()))}else a.$bodyTable.find("td").removeAttr("title"),a.$bodyTable.find("td").unbind("mouseenter"),a.$bodyTable.find("td").unbind("mouseleave"),$notEmpty(r)&&
r.empty()};a._richTextCelltip=function(b){var c=$(b);c.mouseenter(function(b){$isEmpty(r)&&(r=$("<div id='titleDiv'/>"),a.$e.append(r));if($notEmpty(c.text())){var e=$(this).children("div").clone();e.get(0).className=="richTextEditor"&&(e=e.children("div"));r.empty();r.append(e);r.css({left:b.clientX-a.$e.offset().left,top:b.clientY+10-a.$e.offset().top,position:"absolute"});r.show()}});c.mouseleave(function(){r.hide()})};a.setEntityContainer=function(b){if($notEmpty(b)){$notEmpty(a.entityContainer)&&
(a.entityContainer.off("loading",ca),a.entityContainer.off("load",ea),a.entityContainer.off("changing",fa),a.entityContainer.off("changed",ga),a.entityContainer.off("creating",R),a.entityContainer.off("created",S),a.entityContainer.off("deleted",T),a.entityContainer.off("saving",U),a.entityContainer.off("saved",X),a.entityContainer.off("validate",W),a.entityContainer.off("error",Y));a.entityContainer=b;if($notEmpty(b.primaryKey))a.primaryKey=b.primaryKey;a.entityContainer.on("loading",ca);a.entityContainer.on("load",
ea);a.entityContainer.on("changing",fa);a.entityContainer.on("changed",ga);a.entityContainer.on("creating",R);a.entityContainer.on("created",S);a.entityContainer.on("deleted",T);a.entityContainer.on("saving",U);a.entityContainer.on("saved",X);a.entityContainer.on("validate",W);a.entityContainer.on("error",Y)}};a.setDisplayHead=function(b){(a.displayHead=b)?(a.$head.show(),a.$("#upRightBg").show(),l!=null&&l.show()):(a.$head.css("display","none"),a.$("#upRightBg").hide(),l!=null&&l.hide());a._setBodyTop()};
a.setDisplayColSplitLine=function(b){a.displayColSplitLine=b;a.$e.toggleClass("hideColSplitLine",!a.displayColSplitLine)};a.setDisplayStatisticRow=function(b){a.displayStatisticRow=b;a.$statisticRow||a._initStatisticRow();a.displayStatisticRow?a.$statisticRow.show():a.$statisticRow.hide()};a.setDisplayRowNumber=function(b){a.displayRowNumber=b;a._initRowNumber();if(a._isInitRowNumber){if($isArray(a.items)){for(var b=!1,c=0;c<a.items.length;c++){var d=a.items[c];d!=null&&d._initRowNumberCell!=void 0&&
(b=d._initRowNumberCell())}b&&E()}a.displayRowNumber?(a.$e.addClass("rowNumberDataGrid"),a.$headTable.find("tr>td#rownumber").show(),a.$body.find("colgroup>col#rownumber").show(),$.isIE67()?a.$body.find("tr>td#rownumber").css("border-right","1px"):a.$body.find("tr>td#rownumber").show()):(a.$e.removeClass("rowNumberDataGrid"),a.$headTable.find("tr>td#rownumber").hide(),a.$body.find("colgroup>col#rownumber").hide(),$.isIE67()?a.$body.find("tr>td#rownumber").css("border-right","0px"):a.$body.find("tr>td#rownumber").hide())}};
a.setDisplayCheckBox=function(b){a.displayCheckBox=b;a._initCheckBox();if(a._isInitCheckBox){if($isArray(a.items))for(b=0;b<a.items.length;b++){var c=a.items[b];c!=null&&c._initCheckBoxCell!=void 0&&c._initCheckBoxCell()}a.displayCheckBox?(a.$e.addClass("checkDataGrid"),a.$headTable.find("tr>td#checkbox").show(),a.$body.find("colgroup>col#checkbox").show(),$.isIE67()?a.$body.find("tr>td#checkbox").css("border-right","1px"):a.$body.find("tr>td#checkbox").show()):(a.$e.removeClass("checkDataGrid"),
a.$headTable.find("tr>td#checkbox").hide(),a.$body.find("colgroup>col#checkbox").hide(),$.isIE67()?a.$body.find("tr>td#checkbox").css("border-right","0px"):a.$body.find("tr>td#checkbox").hide())}};a.appendImage=function(b){if(typeof a.images[b.name]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[b.name]));b!=null&&b.name!=null&&(a.images.add(b),a.images[b.name]=b)};a.appendImages=function(b){if($isArray(b))for(var c=0;c<b.length;c++)a.appendImage(b[c])};a.setImages=function(b){a.clearImages();
a.appendImages(b)};a.clearImages=function(){for(;a.images.length>0;)a.images[0].remove(),delete a.images[a.images[0].name]};a.appendColumn=function(b,c,d,e){b=a._createColumn(b,c,d,e);b.owner=a;a._appendColumn(b);return b};a.insertColumn=function(b,c,d){if(a.columns[c.name]!=void 0)throw Error(mx.err("DUPLICATED_ITEM",[c.name]));var e=$notEmpty(a.columns[a._tempColumnName])?a.columns.length:a.columns.length-1,g=0,f=null,h=!0,i=function(a){g=e<=0||a<0?0:a>=e?e-1:a},j=function(b){if($.isPlainObject(b)||
$instanceOf(b,mx.datacontrols.DataGridColumn))f=a._createColumn(b)};switch(arguments.length){case 1:$isObject(b)&&j(b);break;case 2:$isNumber(b)&&$isObject(c)&&(i(b),j(c));break;case 3:$isNumber(b)&&$isObject(c)&&$isBoolean(d)&&(i(b),j(c),h=d)}if($notEmpty(f)&&(f=a._insertColumn(g,f,h),$isArray(a.items)))for(h=0;h<a.items.length;h++)i=a.items[h],$instanceOf(i,mx.datacontrols.DataGridItem)&&(i.setValue(f.name,f.value),i.insertCell(f,b));return f};a.insertColumnAfter=function(b,c){a.insertColumn(b,
c,!0)};a.insertColumnBefore=function(b,c){a.insertColumn(b,c,!1)};a._insertColumn=function(b,c,d){a._configColumn(c);var e=a.columns[b],g=a.columns,f=g.length,b=d&&f>0?b+1:b;for(f-=1;f>=b;f--)g[f+1]=g[f];g[b]=c;g[c.name]=c;d?(c.$headCell.insertAfter(e.$headCell),c.$bodyCol.insertAfter(e.$bodyCol),a.displayStatisticRow&&c.$statisticCell.insertAfter(e.$statisticCell)):(c.$headCell.insertBefore(e.$headCell),c.$bodyCol.insertBefore(e.$bodyCol),a.displayStatisticRow&&c.$statisticCell.insertBefore(e.$statisticCell));
return c};a._createColumn=function(b,c,d,e){if(typeof a.columns[b]!="undefined"||typeof a.columns[b.name]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[$isString(b)?b:b.name]));var g=null;$isObject(b)?$.isPlainObject(b)?(b.owner=a,g=a._createInheritColumn(b)):g=b:g=a._createInheritColumn({name:b,caption:c,width:d,align:e,owner:a});return g};a._createInheritColumn=function(a){return new mx.datacontrols.DataGridColumn(a)};a._configColumn=function(b){if(a.allowAdjusting){var c=$("<span class='adjustCol_left'/>"),
d=$("<span class='adjustCol_right'/>");b.$headCell.children("div").prepend(c);b.$headCell.children("div").append(d);c.on("mousedown",a._adjustColumn_mousedown);d.on("mousedown",a._adjustColumn_mousedown);c.on("click",a._adjustColumn_click);d.on("click",a._adjustColumn_click)}if(a.allowDraggingColumn||a.allowDraging)b.$headCell.children("div").on("mousedown",pa);a.allowSorting&&(c=$("<span id='sortOrderSpan'/>"),b.$headCell.children("div").append(c));if(b.isOverrideRenderCell)a._hasOverrideRenderCell=
!0};a._appendColumn=function(b){a._configColumn(b);if(a.columns[a._tempColumnName]!=null){var c=a.columns.length;a.columns[c]=a.columns[a._tempColumnName];a.columns[c-1]=b;b.$headCell.insertBefore(a.columns[a._tempColumnName].$headCell);b.$bodyCol.insertBefore(a.columns[a._tempColumnName].$bodyCol);a.displayStatisticRow&&b.$statisticCell.insertBefore(a.columns[a._tempColumnName].$statisticCell)}else a.columns.add(b),a.$headTable.find("> tbody > tr").append(b.$headCell),a.$bodyTable.children("colgroup").append(b.$bodyCol),
a.displayStatisticRow&&a.$statisticTable.find("> tbody > tr").append(b.$statisticCell);a.columns[b.name]=b;if(b.name==a.primaryKey)b.readOnly=!0,a.displayPrimaryKey||b.setVisible(!1)};a.appendColumns=function(b){if($isArray(b)&&b.length!=0)for(var c=0;c<b.length;c++)$isString(b[c])?a.appendColumn(b[c],b[c]):($.isPlainObject(b[c])||$isObject(b[c]))&&a.appendColumn(b[c])};a.setColumns=function(b){a.clearColumns();a._columns=a._jsonArrayClone(b);b.length>0&&(a._hasTempColumn(b)||b.add({name:a._tempColumnName,
caption:" ",readOnly:!0,width:"auto"}),a.appendColumns(a._jsonArrayClone(b)));a._initColumnsPercentage();a._trigger_body_scroll()};a._trigger_body_scroll=function(){a.$body.trigger("scroll")};a._hasTempColumn=function(b){if($isArray(b))for(var c=0;c<b.length;c++){var d=b[c];if(d!=null&&d.name===a._tempColumnName)return!0}return!1};a._initColumnsPercentage=function(){if(a.usePercentage)for(var b=0;b<a.columns.length;b++){var c=a.columns[b];N(c)}else{for(var d=!1,b=0;b<a.columns.length;b++)c=a.columns[b],
N(c),c.widthPercentage&&(d=!0);d&&a.$e&&a.$e.resize(a._resizeColumns)}L=0;a.$e.trigger("resize")};a._resizeColumns=function(){var b=a.$e.width();if(b!=0&&b!=L){L=b;b-=19;var c=0;a.displayRowNumber&&(c+=a.rowNumberColWidth);a.displayCheckBox&&(c+=25);b-=c;for(c=0;c<a.columns.length;c++){var d=a.columns[c];d.widthPercentage!=void 0&&d.setWidth(parseInt(b*d.widthPercentage))}}};a.clearColumns=function(){for(;a.columns.length>0;)a.removeColumn(0);a._columns=[];a._setBodyTop()};a._removeColumn=function(b){$notEmpty(b.$headCell)&&
(b.$headCell.remove(),b.$bodyCol.remove(),typeof b.$statisticCell!="undefined"&&b.$statisticCell.length>0&&b.$statisticCell.remove());a.$body.find("td[id='"+b.name+"']").remove()};a.removeColumn=function(b){var c=null;$isNumber(b)||$isString(b)?c=a.columns[b]:$isObject(b)&&(c=b);if(!$isEmpty(c)){a._removeColumn(c);for(b=0;b<a._columns.length;b++)if(c.name==a._columns[b].name){a._columns.removeAt(b);break}a.columns.remove(c);delete a.columns[c.name]}};a.setItems=function(b){a.clearItems();a._appendItems(b)};
a.clearItems=function(){for(;a.items.length>0;)D(0);x()};a.selectItem=function(b,c){var d=null;$isNumber(b)?d=a.items[b]:$isObject(b)&&(d=b);if(a.selection!=d){var e={cancel:!1,item:d};a.trigger("selectionchanging",e);if(!e.cancel)a.deselectAll(!1),a.selection=d,a._selectItem(d),a.selections.contains(d)||a.selections.add(d),c!=!1&&a.trigger("selectionchanged")}};a._selectItem=function(b){b!=null&&(b.$e.addClass("selected"),ja(),a.$body.off("resize"),a.$body.on("resize",function(){ja();a.$body.off("resize")}))};
a.selectAll=function(b){for(var c=0;c<a.items.length;c++)a.items[c].setChecked(!0),a.selections.contains(a.items[c])||a.selections.add(a.items[c]);a._toggleSelected(!0);b!=!1&&a.trigger("selectionchanged")};a._toggleSelected=function(b){b==!0?a.$bodyTable.find(">tbody>tr").addClass("selected"):a.$bodyTable.find(">tbody>tr.selected").removeClass("selected")};a.deselectItem=function(b,c){if(b!=null)a.selections.contains(b)&&a.selections.remove(b),a.selection=a.selection==b&&a.selections.length>0?a.selections.last():
null,a._deselectItem(b),c!=!1&&a.trigger("selectionchanged")};a._deselectItem=function(a){a.$e.removeClass("selected")};a.deselectAll=function(b){if(!(a.selection==null&&a.selections.length==0))a.selection=null,a.selections.clear(),a._toggleSelected(!1),b!=!1&&a.trigger("selectionchanged")};a.selectNextItem=function(){var b=-1;if(a.selection!=null)b=a.selection.getIndex();else if(a.items.length>0){a.selectItem(0);return}b!=a.items.length-1&&(b++,a.selectItem(b))};a.selectPreviousItem=function(){var b=
0;a.selection!=null&&(b=a.selection.getIndex());b!=0&&(b--,a.selectItem(b))};a.validate=function(){};a.checkAll=function(){if(a.displayCheckBox){for(var b=0;b<a.items.length;b++)a.items[b].checked||a.items[b].toggleChecked();a._checkAll()}};a._checkAll=function(){a.$headTable.find("tr").eq(0).toggleClass("checked",!0)};a.uncheckAll=function(){if(a.displayCheckBox){for(var b=0;b<a.items.length;b++)a.items[b].checked&&a.items[b].toggleChecked();a._uncheckAll()}};a._uncheckAll=function(){a.$headTable.find("tr").eq(0).toggleClass("checked",
!1)};a.getCheckedItems=function(){var b=[];a.$bodyTable.find("tr.checked").each(function(){var a=$.data(this,"item");$isEmpty(a)||b.add(a)});return b};a.getCheckedIDs=function(){if(I(a._columns,a.primaryKey)==null)return[];var b=[];a.$bodyTable.find("tr.checked").each(function(){var a=$.data(this,"item").id+"";b.add(a)});return b};a.moveItem=function(a,c){a.moveTo(c)};a._multipleSortColumns=[];a.sort=function(b,c){if(a.allowSorting||a.allowMultipleSorting){if(!$isBoolean(c))c=a.sortOrder;var d=null;
$isNumber(b)||$isString(b)?d=a.columns[b]:$isObject(b)&&(d=b);if(d==null||d.allowSorting)if(a.sortColumn!=null&&a.allowSorting&&!a.allowMultipleSorting&&(a.sortColumn.$headCell.removeClass("sort"),a.sortColumn.$headCell.removeClass("ascend"),a.sortColumn.$headCell.removeClass("descend")),d!=null&&a.allowMultipleSorting&&(d.$headCell.removeClass("sort"),d.$headCell.removeClass("ascend"),d.$headCell.removeClass("descend")),a.sortColumn=d,a.sortOrder=c,$notEmpty(a.sortColumn))a.sortColumn.sortOrder=
c,a.sortColumn.$headCell.addClass("sort"),a.sortOrder?a.sortColumn.$headCell.addClass("ascend"):a.sortColumn.$headCell.addClass("descend"),a.allowMultipleSorting&&$notEmpty(a.multipleSortColumns)?(a._multipleSortColumns=a.multipleSortColumns.split(","),$.each(a._multipleSortColumns,function(a,b){$.trim(b)}),d=a._compareMultipleItems):d=a._compareItems,a._sort(d)}};a._sort=function(b){var c=a.items,d=c.length;c.sort(b);a.$bodyTable.children("tbody").detach();for(var e=0;e<d;e++)b=c[e],a.$bodyTable.append(b.$e),
b.$e.data("item",b),a.displayRowNumber&&(b.$e.find("td#rownumber").text(a._getRowNumber(e+1)),b.$e.find("td#rownumber").attr("title",a._getRowNumber(e+1))),a.allowInterlacedRow&&e%2==1?b.$e.addClass("even"):b.$e.removeClass("even")};a._getRowNumber=function(b){return(a.pageIndex-1)*a.pageSize+b};a._compareItems=function(b,c){if(a.sortColumn!=null){var d=a.sortColumn.getIndex();if(d!=-1){var e=b.getValue(d),d=c.getValue(d);$isEqual(a.sortColumn.editorType,"DateTimeEditor")&&(e=parseDate(e),d=parseDate(d));
e=$compare(e,d);return a.sortOrder?-e:e}}return 0};a._compareMultipleItems=function(b,c){var d=0;if(a.sortColumn!=null&&a._multipleSortColumns.length>0){for(var d=!1,e=0;e<a._multipleSortColumns.length;e++)if(a.sortColumn.name==a._multipleSortColumns[e]){d=!0;break}d=d?a.__compareMultipleItems(b,c):a._compareItems(b,c)}return d};a.__compareMultipleItems=function(b,c){for(var d=0,e=null,g=0;g<a._multipleSortColumns.length;g++){var f=!1,e=a._multipleSortColumns[g];e==a.sortColumn.name&&(f=!0);var d=
b.getValue(e),h=c.getValue(e);$isEqual(a.columns[e].editorType,"DateTimeEditor")&&(d=parseDate(d),h=parseDate(h));d=$compare(d,h);if(d!=0||f)break}return a.columns[e].sortOrder?-d:d};a.getImageKeyOfItem=function(b){if(b==null)return null;return a.images[b.itemType]!=null?a.images[b.itemType].value:null};a.hasChanged=function(){return a.entityContainer.hasChanged()};a.setFilter=function(b,c){$isEmpty(c)&&(c=!0);a.filter=$isString(b)?c?b:$notEmpty(a.filter)?a.filter+"&"+b:b:c?b:$.extend(a.filter,b)};
a.exportExcel=function(a,c){var d=null,e=null;c==null?$.isPlainObject(a)?(e=a,d=ha()):(d=$notEmpty(a)?a:ha(),e=d.params):(d=a,e=c);d.setParams(e);d.exportExcel()};w.setPageSize=a.setPageSize;a.setPageSize=function(b){w.setPageSize(b);a.pageNaviBar!=null&&a.pageNaviBar.setPageSize(b)};a.showImportExcelWizard=function(b,c,d){var e=null;if(mx.io.FileUploader.isSupported()){var g;if(a.getContext())g=a.getContext().windowManager;var f=e=null;if($notEmpty(d))g=b,e=c,f=d;else if($notEmpty(c))if($isString(c))g=
b,e=c;else{if($isFunction(c))$isString(b)?(e=b,g=a.getContext().windowManager):$notEmpty(b)&&(g=b),f=c}else $isString(b)?(g=a.getContext().windowManager,e=c):$isFunction(b)?(g=a.getContext().windowManager,f=b):$notEmpty(b)&&(g=b);$.extend(ka,a.importExcelOptions);b={reusable:!1,importExcelOptions:ka,previewGridBaseUrl:a.entityContainer.baseUrl,pk:a.entityContainer.primaryKey,left:"center",top:"center"};if(e!=null)b.importExcelUrl=e;e=g.create(mx.datacontrols.wizards.ImportExcelWizard,b);if(f!=null)e.finishCallback=
f;g=[];for(f=0;f<a.columns.length;f++)a.columns[f].name!=a._tempColumnName&&g.add({name:a.columns[f].name,caption:a.columns[f].caption});e.setImportColumns(g);e.show();return e}else wa()};a._init=function(){a.$e.addClass("dataGrid");a._initGrid();a.$headTable&&a.$headTable.resize(function(){a.$body.find("#temp_body_w").remove();var b=a.$headTable.width();$.isIE6()&&(b-=16);a.$body.append("<div id='temp_body_w' style='width:"+b+"px;height:1px;font-size:0px;border:none;'></div>")});a.autoWrap&&a.$e.addClass("autowrap");
a._initRowNumber();a._initCheckBox();if(a.allowPaging)$notEmpty(a.pageNaviBar)?(a.pageNaviBar.pagedControl=a,a.pageNaviBar.pagedControl.on("load",a.pageNaviBar.refresh),a.pageNaviBar.getPageSizeEditor().setItems(a.pageSizeOptions),a.setPageSize(a.pageNaviBar.pageSize)):a.pageNaviBar=new mx.datacontrols.PageNaviBar({pagedControl:a}),a.$e.append(a.pageNaviBar.$e),a.$grid.css("bottom","25px"),a.on("pageindexchanged",ma);a.usePercentage&&a.$e.resize(a._resizeColumns);a.displayStatisticRow&&a._initStatisticRow();
a.setDisplayColSplitLine(a.displayColSplitLine);$notEmpty(a.searchBox)&&a._setSearchBox(a.searchBox);if($isArray(a.images)){var b=a.images;a.images=[];a.appendImages(b)}a._initMenu();a._initEntityContainer();a._initColumns();u();a.displayHead||a.setDisplayHead(a.displayHead);a._adjustGridSizeForIE6()};a._adjustGridSizeForIE6=function(){$.isIE6()&&a.$e.resize(function(){a.$grid.css("height",a.$e.height()-($notEmpty(a.searchBox)&&!a.searchBox.$e.is(":hidden")?a.searchBox.$e.outerHeight():0)-(a.allowPaging?
a.pageNaviBar.$e.outerHeight():0));a.$body.css("height",a.$grid.height()-a.$head.outerHeight())})};a._initGrid=function(){a.usePercentage&&($.isIE67()?a.$e.css({width:"99.5%",margin:"0px",padding:"0px"}):a.$e.css({width:"100%",margin:"0px",padding:"0px"}));a.$e.append("<div id=grid><div id=head><table class='headTable' cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div><div id=body><table class='bodyTable' cellspacing=0 cellpadding=0><colgroup/></table></div><div id='upRightBg'></div></div>");
var b=a.$("#grid");a.$grid=b;b=a.$("#head");b.userSelectable(!1);a.$head=b;a.$headTable=b.children("table");var c=mx.getScrollBarWidth();b.css("margin-right",c.horizontal);a.$("#upRightBg").css("width",c.horizontal);b=a.$("#body");a.$body=b;a.$bodyTable=b.children("table");b.scroll(a._body_scroll);$(document).keyup(a._keydown);if(a.allowMultipleSorting)a.allowSorting=!0;if(a.allowSorting)a.$headTable.on("click","tr>td>div",a._headTable_click);a.allowDraggingItem&&a.$bodyTable.mousedown(qa);a.$bodyTable.on("click",
"tr",a._bodyTable_click);a.$bodyTable.dblclick(a._bodyTable_dbclick);($notEmpty(a.contextMenu)||$notEmpty(a.itemMenu)||a.enableHeadContextMenu)&&a.$e.contextmenu(la);if(a.allowEditing)a.$bodyTable.on("click","tr>td",a._body_cell_click)};a.setAllowEditing=function(b){if(typeof b!="undefined"&&(a.allowEditing=b,a.$bodyTable&&(a.$bodyTable.off("click","tr>td",a._body_cell_click),a.allowEditing)))a.$bodyTable.on("click","tr>td",a._body_cell_click)};a._initColumns=function(){a._columns=a._jsonArrayClone(a.columns);
a.columns=[];a.setColumns(a._jsonArrayClone(a._columns))};a._initCheckBox=function(){if(!a._isInitCheckBox&&a.displayCheckBox&&a.$headTable.find("tr>td#checkbox").length==0){a.$e.addClass("checkDataGrid");var b=a.$headTable.find("td#rownumber");b.length==0?(a.$headTable.find("> tbody > tr").prepend("<td style='width:25px;' id='checkbox'><div class='first'><span id='checkBox'/></div></td>"),a.$bodyTable.children("colgroup").prepend("<col style='width:25px;' id='checkbox'/>")):(b.after("<td style='width:25px;' id='checkbox'><div class='first'><span id='checkBox'/></div></td>"),
a.$bodyTable.find("col#rownumber").after("<col style='width:25px;' id='checkbox'/>"));a.$e.on("click","tr>td>div>#checkBox",a._item_checkBox_click);a._isInitCheckBox=!0}};a._initRowNumber=function(){if(!a._isInitRowNumber&&a.displayRowNumber&&a.$headTable.find("td#rownumber").length==0){a.$e.addClass("rowNumberDataGrid");var b="<td id='rownumber' style='width:"+a.rowNumberColWidth+"px;text-align:center;'><span id='rownumber' class='first' style='font-size:11px;'></span></td>",c="<col id='rownumber' style='width:"+
a.rowNumberColWidth+"px;'/>";a.$headTable.find("> tbody > tr").prepend(b);a.$bodyTable.children("colgroup").prepend(c);a._isInitRowNumber=!0}};a._initStatisticRow=function(){a.$statisticRow=$("<div id='statisticRow'><table cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div>");a.$statisticTable=a.$statisticRow.find("table");a.displayRowNumber&&a.$statisticTable.find("> tbody > tr").append("<td id='rownumber' style='width:"+a.rowNumberColWidth+"px;display: table-cell;'/>");a.displayCheckBox&&
a.$statisticTable.find("> tbody > tr").append("<td id='checkbox' style='width:25px;display: table-cell;'/>");a.$body.append(a.$statisticRow);a.setDisplayStatisticRow(a.displayStatisticRow)};var l=null;a.setSearchBox=function(b){if($instanceOf(b,mx.datacontrols.DataGridSearchBox)){if(a.searchBox!=null)a.searchBox!=null&&$instanceOf(a.searchBox.container,mx.containers.Container)&&a.searchBox.container.removeControl(a.searchBox,!0),a.$e.find(".dataGridSearchBox").remove(),a.searchBox=null;$instanceOf(b.container,
mx.containers.Container)?(b._isHidden=!0,b.container.addControl(b)):a.$grid.before(b.$e);a.searchBox=b;a.searchBox.pagedControl=a;a.searchBox.on("fieldadd",O);a.searchBox.setFields();a.searchBox.on("searchparamchanged",na);a._initSearchBoxToggle();$(function(){O()})}};a._setBodyTop=function(){$(function(){if(a.$head.parents("body").length!=0)if(a.displayHead){var b=a.$head.outerHeight();a.$body.css("top",b);a.$("#upRightBg").height(b)}else a.$body.css("top",0),a.$("#upRightBg").height(0)})};a._setSearchBox=
function(b){var c=null,c=$.isPlainObject(b)?new mx.datacontrols.DataGridSearchBox(b):b;a.setSearchBox(c)};a._initSearchBoxToggle=function(){l==null&&(l=$("<div id='toggleShowBtn'/>"),a.searchBox.allowHiding&&(l.toggleClass("toggleShowBtn"),l.on("click",a._toggleSearchBoxShowState),a.searchBox.container==null&&a.$grid.append(l)),a.searchBox.initHidden==!1&&(l.toggleClass("toggleHideBtn"),l.toggleClass("toggleShowBtn")))};a._initEntityContainer=function(){if($isEmpty(a.entityContainer)){var b={},b=
{primaryKey:a.primaryKey,baseUrl:a.baseUrl};a.entityContainer=new mx.datacontainers.GridEntityContainer(b)}a.setEntityContainer(a.entityContainer)};a._initMenu=function(){if($.isPlainObject(a.contextMenu))a.contextMenu=new mx.controls.ContextMenu(a.contextMenu);if($.isPlainObject(a.itemMenu))a.itemMenu=new mx.controls.ContextMenu(a.itemMenu)};a._init_head_contextmenu=function(){if(a.headContextMenu==null){a.headContextMenu=new mx.controls.ContextMenu({items:[{name:"selectColumn",text:mx.msg("DATAGRID_SELECT_COLUMNS")},
{name:"selectPrintColumn",text:mx.msg("DATAGRID_SELECT_PRINT_COLUMNS")}],onitemclick:function(b){b=b.item;if(b.parent)if(b.parent.name=="selectColumn"){b.toggleChecked();var c=a.columns[b.name];$isEmpty(c)||c.setVisible(b.checked)}else if(b.parent.name=="selectPrintColumn"&&(b.toggleChecked(),c=a.columns[b.name],!$isEmpty(c)))c.isPrint=b.checked}});for(var b=a.headContextMenu.getItemByName("selectColumn"),c=0;c<a.columns.length;c++){var d=a.columns[c];$isEmpty(d.caption)||d.name==a.primaryKey||(d=
new mx.controls.ToolStripItem({name:d.name,text:d.caption,checked:d.visible}),b.appendItem(d),d.$e.mouseup(function(a){a.stopPropagation()}))}b=a.headContextMenu.getItemByName("selectPrintColumn");for(c=0;c<a.columns.length;c++)d=a.columns[c],$isEmpty(d.caption)||d.name==a.primaryKey||(d=new mx.controls.ToolStripItem({name:d.name,text:d.caption,checked:d.isPrint}),b.appendItem(d),d.$e.mouseup(function(a){a.stopPropagation()}))}return a.headContextMenu};a._item_checkBox_click=function(){if(a.enabled){var b=
this.parentNode.parentNode.parentNode,c=b.parentNode.parentNode.parentNode,d=null,e=$(b);c!=null&&c.id=="head"?e.hasClass("checked")==!0?a.uncheckAll():a.checkAll():(d=$.data(b,"item"),a.displayCheckBox&&d!=null&&d.toggleChecked(),x());a.trigger("itemchecked",{item:d})}};a._bodyTable_dbclick=function(b){if(a.enabled){for(var b=b.target,c=a.$bodyTable.get(0);!(b.tagName=="TR"&&b.parentNode!=null&&b.parentNode.parentNode==c);)if(b=b.parentNode,b==null)return;b=$.data(b,"item");b!=null&&a.trigger("itemdoubleclick",
{item:b})}};a._bodyTable_click=function(b){if(a.enabled){for(var c=b.target,d=a.$bodyTable.get(0);!(c.tagName=="TR"&&c.parentNode!=null&&c.parentNode.parentNode==d);){if($notEmpty(c.id)&&c.id==a._tempColumnName)return;c=c.parentNode;if(c==null)return}c=$.data(c,"item");c!=null&&(a.trigger("itemclick",{item:c}),a.selections.contains(c)?a.selections.contains(c)&&!b.ctrlKey?a.selectItem(c):b.ctrlKey&&a.deselectItem(c):a.selectItem(c))}};a._headTable_click=function(b){if(a.enabled&&a.allowSorting){for(b=
b.target;b.tagName!="TD";)if(b=b.parentNode,b==null)return;a._tempColumnName!=b.id&&a.sort(b.id,a.sortColumn!=null&&a.sortColumn.name==b.id?!a.sortOrder:!0)}};var o=null;a._adjustColumn_mousedown=function(b){var c=$(b.target);$(document).css("cursor","e-resize");$(document).on("mousemove",a._adjustColumn_mousemove);$(document).on("mouseup",a._adjustColumn_mouseup);var d=null,e=null;c.hasClass("adjustCol_left")?(d=c.parent().parent().prev(),e=c.parent().parent(),d.hasClass("hidden")&&(d=d.prev())):
(d=c.parent().parent(),e=c.parent().parent().next(),e.hasClass("hidden")&&(e=e.next()));c.leftTd=d;c.leftTdWidth=d.outerWidth();c.rightTd=e;c.rightTdWidth=e.outerWidth();c.totalWidth=c.leftTdWidth+c.rightTdWidth;c.mouseDownX=d.parent()?b.clientX:b.pageX;o=c;a.$e.userSelectable(!1);b.stopPropagation()};a._adjustColumn_mousemove=function(b){if(o==null)return!1;if(!o.mouseDownX)return!1;b=o.leftTdWidth+(b||window.event).clientX-o.mouseDownX;if(b>10){var c=o.leftTd.attr("id"),d=a.columns[c],e=o.rightTd.attr("id"),
e=a.columns[e];if(!$isEmpty(d)&&!$isEmpty(e)){for(e=0;e<a._columns.length;e++)if(c==a._columns[e].name){$.extend(a._columns[e],{width:b});break}$.isIE67()&&a._adjustColumn_editorWidth(o,b);d.setWidth(b);u()}}};a._adjustColumn_editorWidth=function(b,c){var d=o.leftTd.attr("id"),d=b.closest("table").parent().next().children("table").find("td#"+d);a._autoResizeEditorWidth(d.children("div"),c)};a._autoResizeEditorWidth=function(a,c){a.each(function(){$(this).css("width",c)})};a._adjustColumn_mouseup=
function(){if(o==null)return!1;o.mouseDownX=0;$(document).css("cursor","default");o=null;$(document).off("mousemove",a._adjustColumn_mousemove);$(document).off("mouseup",a._adjustColumn_mouseup);a.$e.userSelectable(!0)};a._adjustColumn_click=function(a){a.stopPropagation()};a._body_scroll=function(b){a.$head.scrollLeft(b.target.scrollLeft)};a._appendItems=function(b){if($isArray(b))for(var c=0;c<b.length;c++)a._appendItem(b[c])};a._load=function(b){var c=[],d=[],e=0;if($notEmpty(b)&&(c=a._jsonArrayClone(b.columns),
e=b.itemCount,d=a._jsonArrayClone(b.items),$notEmpty(d)&&a.allowPaging&&d.length>a.pageSize))for(;d.length>a.pageSize;)d.removeAt(d.length-1);if($notEmpty(c)&&c.length>0&&!da)b=a._jsonArrayClone(a._columns),b=a._mergerColumns(b,c,"name"),a._columns=a._jsonArrayClone(b),b.length>0&&a.setColumns(b);$notEmpty(d)&&a.setItems(d);$notEmpty(e)&&a.setItemCount(e);$notEmpty(a.searchBox)&&a.searchBox._updateEditor();(!a.enabled||!a.entityContainer.canModify)&&a.setEnabled(!1);a.trigger("load");u()};a._toggleSearchBoxShowState=
function(){if(a.searchBox.container==null){a.searchBox.toggleShowState();l.toggleClass("toggleHideBtn");l.toggleClass("toggleShowBtn");var b=a.searchBox.getHeight();a.$grid.animate({top:b},"fast")}};a._keydown=function(b){a.enabled&&a.moveByShortcutKey&&b.ctrlKey&&(b.keyCode==38&&a.moveUp(),b.keyCode==40&&a.moveDown())};var j=null,i=null,v=!1,q=new mx.types.HashMap;a._body_cell_click=function(b){if(!a.isEditorLocked()&&a.enabled&&a.allowEditing){var c=$(b.target);if(c.is("td")){var d=B(c);if($notEmpty(d)&&
!d.readOnly){if(v==!0&&a.clearEditor(b)===!1)return;i=c.parent().data("item");if(!i.enabled)return;var e={cancel:!1,item:i,column:d};a.trigger("cellediting",e);if(e.cancel){i=null;return}if(i&&i!=a.selection&&(a.selectItem(i),a.editOnSelected))return;j=d.name;var g=i.values[j];a.entityContainer.startEdit(i.id);var f=null;if($isEmpty(q.getItem(j))){f={};e=a._jsonArrayClone(a._columns);e=I(e,j);f=$notEmpty(e)&&$.isPlainObject(e.editorOptions)?$.extend(!0,f,e,e.editorOptions):$.extend(!0,f,e);f.parent=
a;f.width="100%";var h=f.editorType;if($isEqual(h,"PictureManagerEditor")||$isEqual(h,"PictureEditor")||$isEqual(h,"FileEditor"))f.height=21;if($isEqual(h,"CheckEditor"))f.displayCaption=!1;if($isEqual(h,"RichTextEditor"))f.height=21,f.owner=!0;e={column:d,editorOptions:f};a.trigger("editorcreating",e);f=mx.editors.EditorFactory.createEditor(h,f);if($instanceOf(f,mx.editors.DropDownEditor)||$instanceOf(f,mx.editors.CheckListEditor)||$instanceOf(f,mx.editors.AutoCompleteEditor)||$instanceOf(f,mx.editors.ListEditor))($isEmpty(f.items)||
f.items.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[j])&&f.appendItems(a.entityContainer.dicts[j]);else if($instanceOf(f,mx.editors.DropDownTreeEditor)||$instanceOf(f,mx.editors.DropDownGridEditor))($isEmpty(f.dicts)||f.dicts.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[j])&&f.appendDicts(a.entityContainer.dicts[j]);q.setItem(j,f)}else{f=q.getItem(j);if($instanceOf(f,mx.editors.DropDownEditor)||$instanceOf(f,mx.editors.ListEditor)){if(($isEmpty(f.items)||
f.items.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[j]))f.clearItems(),f.appendItems(a.entityContainer.dicts[j])}else if($instanceOf(f,mx.editors.DropDownTreeEditor)||$instanceOf(f,mx.editors.DropDownGridEditor))($isEmpty(f.dicts)||f.dicts.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[j])&&f.appendDicts(a.entityContainer.dicts[j]);$isFunction(f.setPk)&&f.setPk(i.id)}c.addClass("editing");f.focus();f.reset();f.setValue(g);f.setVisible(!0);
f.off("changed",Q);f.on("changed",Q);$.isIE67()&&a._autoResizeEditorWidth(f.$e,c.width());e={column:d,editor:f};a.trigger("editorcreated",e);c.html(f.$e);v=!0;a.activeEditor=f;f.editorType=="CheckEditor"&&(c.css({backgroundImage:"none"}),f.$e.children("span").trigger("click"));$(document).on("click",P)}else return}else if(c.is("span#checkBox"))return;b.stopPropagation()}};a._createColumnEditor=function(b){var c={},b=$clone(b),c=$notEmpty(b)&&$.isPlainObject(b.editorOptions)?$.extend(!0,c,b,b.editorOptions):
$.extend(!0,c,b);c.parent=a;return mx.editors.EditorFactory.createEditor(b.editorType,c)};a.getItemDefaultData=function(){if(a.itemDefaultData!=null)return $clone(a.itemDefaultData);for(var b={},c=0;c<a._columns.length;c++){var d=a._columns[c];if(!(d.name==a.primaryKey||d.isVirtual)){var e=a._createColumnEditor(d);e&&e.isValidate&&(b[d.name]=e.getValue())}}a.itemDefaultData=$clone(b);return b};a.clearEditor=function(b){try{if(M!=!0&&(M=!0,v&&!$isEmpty(i)&&!a.isEditorLocked())){var c=q.getItem(j);
if(c!=null){if(!c.isValidate)return c.focus(),!1;if($instanceOf(c,mx.editors.RichTextEditor)&&c.editing)return!1;if($instanceOf(c,mx.editors.ComboEditor)){var d=null;if($notEmpty(b))d=b.target;if($isEmpty(d)||!c.contains(d))c.hideDropDown();else return}var b=i,e=c.value,g=c.$e.parent(),f=B(g);if(f&&$notEmpty(a.entityContainer)){var h=i.values[a.primaryKey];$notEmpty(a.entityContainer.getEntityByKey(h))&&(f.isVirtual===!0&&(i.values[j]=e),a.entityContainer.getEntityByKey(h)[j]==e?a._changeEditorToText(j):
f.isVirtual===!0?a._changeEditorToText(j):a.entityContainer.setValue(h,f.name,e,!0))}else c.$e.detach(),$notEmpty(f)&&f.renderCell(i,g),i=null;g.removeClass("editing");a.trigger("celledited",{column:f,item:b,cell:g});if(a.enableCellTip)if(f&&f.editorType=="RichTextEditor")return;else g.attr("title",g.text());v=!1;a.activeEditor=null}}}finally{M=!1}};a._changeEditorToText=function(b){var c=q.getItem(b);$notEmpty(c)&&typeof c!="undefined"&&(c.$e.detach(),$notEmpty(c.$input)&&c.$input.val(""));c=i.$e.find("td[id='"+
b+"']");if($isEmpty(c))i=null;else{var d=B(c);$notEmpty(d)&&d.renderCell(i,c);$isEmpty(c.text())||(c=i.$e.attr("id"),a.markError(c,b,!1));$isEqual(b,j)&&(j=i=null)}};a._getEditingItem=function(){return i};var C=!1;a.lockEditor=function(){v&&(C=!0);return C};a.unLockEditor=function(){C=!1};a.isEditorLocked=function(){return C};a._getColumnEditors=function(){return q};a._markCellNotNull=function(b){for(var c=0;c<b.nullCells.length;c++)a.markError(b[a.primaryKey],b.nullCells[c].name,!0,b.nullCells[c].caption+
mx.msg("ERR_INPUT_NON_NULLABLE"))};a.setItemEnabled=function(b,c){var d=a._findItemById(b)||a.items[b];d!=null&&d.setEnabled(c)};var h=null,G=!1,n=null,p=null,t=null,k=null,ba=0,H=0,ta=5,s=null;a._getPosition=function(a){var c=0,d=0;if(a.offsetHeight==0)a=a.firstChild;for(;a.offsetParent;)c+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;c+=a.offsetLeft;d+=a.offsetTop;return{x:c,y:d}};a._mergerColumns=function(a,c,d){$isArray(a)||(a=[]);$isArray(c)||(c=[]);va(a,c,d);$.each(c,function(e,g){var f=g[d],
h=!1;$.each(a,function(c,e){if($isEqual(e[d],f)){var i=typeof g.readOnly!="undefined"?g.readOnly:null,j=typeof g.visible!="undefined"?g.visible:null;a[c]=$.extend(g,e);if(i!=null)a[c].readOnly=i;if(j!=null)a[c].visible=j;h=!0}});h||a.add(c[e])});return a};a._tableDiv=function(){return a.$bodyTable};a.moveUp=function(b){if(a.displayCheckBox){var c=a.getCheckedItems();if(!(c.length>0&&a.items.indexOf(c[0])==0)){c.length<=0&&b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"));for(b=0;b<c.length;b++)c[b].moveUp()}}else $notEmpty(a.selection)?
a.selection.moveUp():b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"))};a.moveDown=function(b){if(a.displayCheckBox){var c=a.getCheckedItems();if(!(c.length>0&&a.items.indexOf(c[c.length-1])==a.items.length-1)){c.length<=0&&b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"));for(b=c.length-1;b>=0;b--)c[b].moveDown()}}else $notEmpty(a.selection)?a.selection.moveDown():b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"))};a.printGrid=function(b){$isEmpty(b)&&(b=!0);(new mx.utils.PrintUtil({dataControl:a,
maxCols:2,printHideFields:a.printHideFields})).printControl(b)};a.getColumnEditors=function(){return q};a.markError=function(b,c,d,e){b=a._findItemById(b);$notEmpty(b)&&b.markError(c,d,e)};a._findItemById=function(b){for(var c=0;c<a.items.length;c++)if(a.items[c].id==b)return a.items[c]};a._jsonArrayClone=function(a){var c=null;if($isArray(a))for(var c=[],d=0;d<a.length;d++){var e=$.extend({},a[d]);c.add(e)}return c};var K=null;w.dispose=a.dispose;a.dispose=function(){a.clearItems();a.off();$(document).off("keyup",
a._keydown);$(document).off("click",P);a.searchBox&&(a.searchBox.off(),a.searchBox.dispose());if(a.pageNaviBar){if(a.pageNaviBar.pagedControl)a.pageNaviBar.pagedControl.off(),a.pageNaviBar.pagedControl=null;a.pageNaviBar.off();a.pageNaviBar.dispose();a.pageNaviBar=null}a.contextMenu&&(a.contextMenu.off(),a.contextMenu.dispose());a.itemMenu&&(a.itemMenu.off(),a.itemMenu.dispose());a.$headTable.off();a.$headTable.empty().remove();a.$body.off();a.$body.empty().remove();w.dispose()};a.endOfClass(arguments);
return a};$ns("mx.datacontrols");
mx.datacontrols.DataGridColumn=function(){function g(b){var c="";if(a.items==null&&$notEmpty(a.owner.entityContainer)&&$notEmpty(a.owner.entityContainer.dicts)&&$notEmpty(a.owner.entityContainer.dicts[a.name]))a.items=a.owner.entityContainer.dicts[a.name];if($notEmpty(a.items))if(b=b.getValue(a.name),$notEmpty(a.displayCheckBox)&&a.displayCheckBox==!0||"CheckListEditor"==a.editorType||"DropDownTreeEditor"==a.editorType||"DropDownGridEditor"==a.editorType||"DropDownEditor"==a.editorType||"CustomEditor"==
a.editorType)if($isBoolean(b))c=parseBoolean(b)?mx.msg("CHECKED_VALUE"):mx.msg("UNCHECKED_VALUE");else{if(c="",$notEmpty(b)){c=null;$isArray(b)?c=b:($isNumber(b)&&(b=b.toString()),c=b.split(a.valueSeperator));for(var b=[],d=0;d<c.length;d++)for(var e=0;e<a.items.length;e++)if(c[d]==a.items[e][a.valueMember]){b.add(a.items[e][a.textMember]);break}c=b.join(a.valueSeperator)}}else for(d=0;d<a.items.length;d++)if(b==a.items[d][a.valueMember]){c=a.items[d][a.textMember];break}return c}var a=$extend(MXComponent),
f={};a.owner=null;a.$bodyCol=$("<col style='display: table-column;' />");a.$headCell=$("<td><div class='first'><span id='caption'/></div></td>");a.name=null;a.caption=null;a.dataType="string";a.allowSorting=!0;a.sortOrder=!0;a.locked=!1;a.formatString=null;a.readOnly=!1;a.width=120;a.align=null;a.cssStyle=null;a.dataAlign=null;a.statisticAlign=null;a.visible=!0;a.editorType="TextEditor";a.editorOptions=null;a.valueMember="value";a.valueFormatter=null;a.styleFormatter=null;a.textMember="text";a.statisticValue=
null;a.valueSeperator=",";a.nullable=!0;a.isVirtual=!1;a.isPrint=!0;a.isOverrideRenderCell=!1;f.init=a.init;a.init=function(){f.init();a.owner!=null&&a.owner.displayStatisticRow&&a.initStatisticCell();a.$bodyCol.attr("id",a.name);a.$headCell.attr("id",a.name);a.setCaption(a.caption);a.initWidth=a.width;a.setWidth(a.width);a.setAlign(a.align);a.setDataAlign(a.dataAlign);a.setStatisticAlign(a.statisticAlign);a.visible||a._initVisible(a.visible);a.statisticValue!=null&&a.setStatisticValue(a.statisticValue);
if(a.editorType=="DateTimeEditor"&&$isEmpty(a.formatString))a.formatString="yyyy-MM-dd";if(a.editorType=="TimeEditor"&&$isEmpty(a.formatString))a.formatString="HH:mm:ss"};a.initStatisticCell=function(){if(a.$statisticCell==void 0)a.$statisticCell=$("<td></td>"),a.$statisticCell.attr("id",a.name)};a.getIndex=function(){return a.owner!=null?a.owner.columns.indexOf(a):-1};a.setCaption=function(b){a.caption=b!=null?b:null;a.$headCell.find("span#caption").text(a.caption!=null?a.caption:"")};a.setAlign=
function(b){b==null&&(b="left");a.align=b;a.$headCell.attr("align",a.align)};a.setDataAlign=function(b){b==null&&(b="left");a.dataAlign=b;a.$bodyCol.attr("align",a.dataAlign);a.owner.$bodyTable.find("td#"+a.name).attr("align",a.dataAlign)};a.setStatisticAlign=function(b){if(a.owner!=null&&a.owner.displayStatisticRow)b==null&&(b="right"),a.statisticAlign=b,a.$statisticCell.attr("align",a.statisticAlign)};a.setWidth=function(b){if($notEmpty(b))a.width=a.width+""=="auto"?b:parseInt(b);a.$bodyCol.css("width",
a.width);a.$headCell.css("width",a.width);a.$statisticCell!=null&&a.$statisticCell.length>0&&a.$statisticCell.css("width",a.width)};a.setVisible=function(b){typeof b=="undefined"&&(b=!0);a.visible=b;a._initVisible(b);b==!1?($.isIE67()||a.owner.$grid.find("td[id='"+a.name+"']").hide(),a.owner.$grid.find("col[id='"+a.name+"']").hide()):(a.owner.$grid.find("td[id='"+a.name+"']").show(),a.owner.$grid.find("col[id='"+a.name+"']").show())};a.setStatisticValue=function(b){if(a.owner!=null&&a.owner.displayStatisticRow)a.statisticValue=
b,a.$statisticCell.text(b)};a.formatValue=function(b){if(a.dataType=="date"||a.editorType=="DateTimeEditor"||a.editorType=="TimeEditor")$isNumber(b)?b=new Date(b):$isString(b)&&(b=parseDate(b));if((a.editorOptions&&a.editorOptions.textMode||a.textMode)=="password")if($isString(b)){for(var c="",d=0;d<b.length;d++)c+="*";return c}else return"";return a.formatString!=null?$format(b,a.formatString):b!=null?b:""};a.renderCell=function(b,c){var d="",e=b.getValue(a.name);if($isFunction(a.valueFormatter))if(d=
a.valueFormatter(e),$notEmpty(c))c.text(d);else return d;d="DropDownTreeEditor"==a.editorType||"DropDownEditor"==a.editorType||"CheckListEditor"==a.editorType||"ListEditor"==a.editorType||"DropDownGridEditor"==a.editorType?g(b):"TimeEditor"==a.editorType&&(a.formatString=="HH"||a.formatString=="hh")&&$isString(e)&&!e.contain(":")?a.formatValue(e+":00:00"):a.formatValue(e);if($isEmpty(c)){if(a.editorType=="LinkEditor")return d||a.text}else a.editorType=="RichTextEditor"?(c.empty(),e=$("<div class='editorContainer'>"),
e.append(d),c.append(e),c.children().on("click",function(){$(this).parent("td").click();return!1})):a.editorType=="CheckEditor"?(e=$isEqual(e,a.checkedValue||"T")?mx.mappath("$theme/images/check_editor_checked.png"):mx.mappath("$theme/images/check_editor_unchecked.png"),c.css({backgroundImage:"url("+e+")",backgroundRepeat:"no-repeat",backgroundPositionY:"center"})):a.editorType=="LinkEditor"?(c.empty(),d=d||a.text,c.append(d)):a.editorType=="PictureManagerEditor"&&$notEmpty(d)?(c.empty(),e="<div class='editorContainer' align='center'><img src='"+
mx.mappath("$theme/images/picture_manager_small.gif")+"'/></div>",c.append(e),c.attr("align","center"),c.children().on("click",function(){$(this).parent("td").click();return!1})):c.text(d),a.cssStyle!=null&&c.css(a.cssStyle),$isFunction(a.styleFormatter)&&a.styleFormatter(b,c);return d};a._initVisible=function(b){typeof b=="undefined"&&(b=!0);a.visible=b;b==!1?(a.$headCell.addClass("hidden"),a.$headCell.hide(),a.$bodyCol.hide(),a.$statisticCell!=null&&a.$statisticCell.length>0&&a.$statisticCell.hide()):
(a.$headCell.removeClass("hidden"),a.$headCell.show(),a.$bodyCol.show(),a.$statisticCell!=null&&a.$statisticCell.length>0&&a.$statisticCell.show())};if(arguments.length>0&&$notEmpty(arguments[0].renderCell))a.isOverrideRenderCell=!0;a.endOfClass(arguments);return a};$ns("mx.datacontrols");
mx.datacontrols.DataGridItem=function(){function k(b){var c="";if(a.owner!=null&&a.owner.displayRowNumber){var d="<td id='rownumber' style='width:"+a.owner.rowNumberColWidth+"px;display: table-cell;'></td>";c+=d}a.owner!=null&&a.owner.displayCheckBox&&(c+="<td id='checkbox' style='width:25px;display: table-cell;'><div class='first'><span id='checkBox'/></div></td>");for(var d=a.owner.columns,f=0;f<d.length;f++){var e=d[f],g="<td style='width:"+e.width+(e.width!="auto"?"px":"")+";";$.isIE67()||(g+=
e.visible?"display: table-cell;":"display:none;");g+="' align="+e.dataAlign+" id="+e.name+">";if(f==0&&a.owner.displayImage){g+="<img/><span id='text'/></td>";var h=$(g);a._$img=h.children("img");a.$e=b;e.renderCell(a,h);c+=h.get(0).outerHTML}else{var i="",h=$(g);e.name!=a.owner._tempColumnName&&(i=e.renderCell(a,h));e.editorType=="RichTextEditor"?c=c+g+"<div  class='editorContainer' onclick='$(this).parent(\"td\").click(); return false;'>"+i+"</div></td>":e.editorType=="PictureManagerEditor"?(e=
"",$notEmpty(i)&&(e="<div class='editorContainer' align='center' onclick='$(this).parent(\"td\").click(); return false;'><img src=\""+mx.mappath("$theme/images/picture_manager_small.gif")+'"/></div>'),c=c+g+e+"</td>"):($.isPlainObject(e.cssStyle)&&h.css(e.cssStyle),c+=h.get(0).outerHTML)}}c=$(c);b.append(c)}function l(b){if(a.owner!=null&&a.owner.primaryKey!=null)a.id=a.values[a.owner.primaryKey],b.attr("id",a.id);if(a.owner!=null&&a.owner.displayRowNumber){var c=$("<td id='rownumber' style='width:"+
a.owner.rowNumberColWidth+"px;display: table-cell;'></td>");b.append(c)}a.owner!=null&&a.owner.displayCheckBox&&(c=$("<td id='checkbox' style='width:25px;display: table-cell;'><div class='first'><span id='checkBox'/></div></td>"),b.append(c));for(var c=a.owner.columns,d=0;d<c.length;d++){var f=c[d],e=$("<td style='width:"+f.width+(f.width!="auto"?"px":"")+";display: table-cell;'/>");if(d==0&&a.owner.displayImage)e=$("<td style='width:"+f.width+(f.width!="auto"?"px":"")+";display: table-cell;'><img/><span id='text'/></td>"),
a._$img=e.children("img");$.isIE67()||f.visible||e.hide();e.attr("align",c[d].dataAlign);e.attr("id",c[d].name);e.data("column",c[d]);a.$e=b;f.renderCell(a,e);b.append(e)}}var a=$extend(MXComponent),j={};a.owner=null;a.id=null;a.checked=!1;a.itemType=null;a.imageUrl=null;a.imageKey=null;a.values={};a.enabled=!0;a.$e=null;a._$img=null;j.init=a.init;a.init=function(){j.init();a._init()};a.isNew=function(){return $notEmpty(a.owner)&&$notEmpty(a.owner.entityContainer)&&$notEmpty(a.values)&&!a.owner.entityContainer.checkSaved(a.values[a.owner.primaryKey])};
a.setImageUrl=function(b){a.imageUrl=b;b==null&&(b="$/images/space.png");a._$img!=null&&a._$img.attr("src",mx.mappath(b))};a.setImageKey=function(b){a.imageKey=b;if(a.imageKey!=null){if(a.owner!=null){var b=a.owner.imageSize,c=null,c=b==16?"$/icons/"+a.imageKey+".png":"$/icons/"+a.imageKey+"_"+b+".png";a.setImageUrl(c)}}else a.setImageUrl(null)};a.setChecked=function(b){if(a.owner!=null&&a.owner.displayCheckBox)a.checked=b,a.$e.toggleClass("checked",a.checked)};a.toggleChecked=function(){a.setChecked(!a.checked)};
a.setItemType=function(b){a.itemType=b;a.$e.attr("itemType",a.itemType)};a.getIndex=function(){return a.owner!=null?a.owner.items.indexOf(a):-1};a.getValue=function(b){return $isNumber(b)&&$.isPlainObject(a.values)?a.values[a.owner.columns[b].name]:a.values[b]};a.insertCell=function(b){var c="<td style='width:"+b.width+(b.width!="auto"?"px":"")+";";$.isIE67()||(c+=b.visible?"display: table-cell;":"display:none;");c+="' align="+b.dataAlign+" id="+b.name+">";for(var d=0,f=a.owner.columns.length,c=$(c),
e=0;e<f;e++)b.name==a.owner.columns[e].name&&(d=e);d==0?(d=f>=1?a.owner.columns[1]:null,d==null?a.$e.append(c):a.$e.find("#"+d.name).before(c)):d>=1&&(d=a.owner.columns[d-1],d!=null&&a.$e.find("#"+d.name).after(c));b.renderCell(a,c)};a.setValue=function(b,c){var d;$isNumber(b)?d=a.owner.columns[b].name:$isString(b)&&(d=b);a.owner.entityContainer.setValue(a.values[a.owner.primaryKey],d,c,!0)};a.setValues=function(b){a.values=b;for(var b=a.owner.columns,c=0;c<b.length;c++){var d=b[c];a.setValue(d.name,
a.values[d.name])}};a.changeValues=function(b){for(var c=a.owner.columns,d=0;d<c.length;d++){var f=c[d];$notEmpty(b[f.name])&&a.setValue(f.name,b[f.name])}};a.refresh=function(){a.setValues(a.values)};a.select=function(b){a.owner!=null&&a.owner.selectItem(a,b)};a.remove=function(){a.owner!=null&&a.owner.removeItem(a)};a.moveTo=function(b){var c=!1,d=[],f=a.$e.prevAll("tr");if(f.length<b){var e=b-f.length-1,f=a.$e.nextAll("tr");a.$e.insertAfter(f.eq(e));for(var c=!0,g=0;g<=e;g++)d.add(f.eq(g).data("item"))}else if(f.length>
b){e=f.length-b-1;a.$e.insertBefore(f.eq(e));c=!0;for(g=0;g<=e;g++)d.add(f.eq(g).data("item"))}c&&a.owner!=null&&b<a.owner.items.length&&(a._setMovedItem(d,b),a.owner.trigger("itemindexchanged",{sourceItem:a,targetItems:d}))};a.moveUp=function(){var b=a.$e.prevAll("tr");b.length>0&&a.moveTo(b.length-1)};a.moveDown=function(){var b=a.$e.prevAll("tr");a.moveTo(b.length+1)};a._setMovedItem=function(b,c){a.owner.displayCheckBox&&(a.$e.find("#rownumber").text(a.owner._getRowNumber(c)+1),$.each(b,function(a,
b){b.$e.find("#rownumber").text(b.owner._getRowNumber(b.$e.prop("rowIndex"))+1)}));a.owner.items.remove(a);a.owner.items.insert(c,a)};a.setRowNumber=function(b){$notEmpty(b)&&$isNumber(b)&&(a.$e.find("td#rownumber").text(b),a.$e.find("td#rownumber").attr("title",b))};a.markError=function(b,c,d){b=a.$e.find("td[id='"+b+"']");b.toggleClass("cellError",c);c?b.toolTip({content:d,defaultPosition:"bottom"}):b.toolTip("remove")};a._remove=function(){a.$e.remove()};a._init=function(){var b=$("<tr/>");b.data("item",
a);if(a.owner!=null&&a.owner.primaryKey!=null)a.id=a.values[a.owner.primaryKey],b.attr("id",a.id);a.owner._hasOverrideRenderCell?l(b):k(b);a.owner.enableCellTip&&b.find("td").each(function(b,d){var f=a.values[d.id];$isString(f)||(f+="");$(d).attr("title",f);a.owner.columns[d.id]&&a.owner.columns[d.id].editorType=="RichTextEditor"&&($(d).removeAttr("title"),a.owner._richTextCelltip(d))});a.$e=b;a.itemType!=null&&a.setItemType(a.itemType);a.checked==!0&&a.setChecked(!0);a.owner!=null&&a.owner.displayImage&&
(a.imageKey!=null?a.setImageKey(a.imageKey):a.setImageKey(a.owner.getImageKeyOfItem(a)))};a.setEnabled=function(b){a.enabled=b?!0:!1};a._initRowNumberCell=function(){if(a.$e!=null&&a.$e[0]&&a.$e.children("td#rownumber").length==0)return a.$e.prepend("<td id='rownumber'></td>"),!0;return!1};a._initCheckBoxCell=function(){if(a.$e!=null&&a.$e[0]&&a.$e.children("td#checkbox").length==0){var b=a.$e.children("#rownumber");b.length>0?b.after("<td id='checkbox'><div><span id='checkBox'/></div></td>"):a.$e.prepend("<td id='checkbox'><div><span id='checkBox'/></div></td>")}};
a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.editors.EditorFactory");$import("mx.controls.Button");$import("mx.utils.CheckUtil");$import("mx.windows.MessageBox");
mx.datacontrols.DataGridSearchBox=function(){function s(c){$notEmpty(a.searchButton)&&c.keyCode==13&&p();c.stopPropagation()}function t(a){var b=this;b.criterions=[];b.junction="and";b.columnJunction="and";b.addFilter=function(a,c,f){b.criterions.add({fieldName:a,operator:c,value:f})};b.removeFilter=function(a,c,f){for(var g=0;g<b.criterions.length;g++)b.criterions[g].fieldName==a&&b.criterions[g].operator==c&&b.criterions[g].p_value==f&&b.criterions.splice(g,1)};if($.isPlainObject(a))b.criterions=
$notEmpty(a.criterions)?a.criterions:[],b.junction=$notEmpty(a.junction)?a.junction:"and",b.columnJunction=$notEmpty(a.columnJunction)?a.columnJunction:"and";return b}function q(c){if($isEmpty(c.name))throw Error(mx.err("FIELDNAME_NON_NULLABLE"));if($isEmpty(c.caption))throw Error(mx.err("FIELDCAPTION_NON_NULLABLE"));var b=$("<td class=caption/>"),d=$notEmpty(c.caption)?c.caption+"\uff1a":"";b.width(a.captionColumnWidth);b.text(d);u(d)>a.captionColumnWidth&&b.attr("title",d);d=$("<td class=editor/>");
d.attr("id",c.name);var e=c.width;$notEmpty(e)?a.captionColumnWidth+e<250&&(e=250-a.captionColumnWidth):e=250-a.captionColumnWidth;c.width=e;var f=null,g=$isEmpty(c.editorType)?"TextEditor":c.editorType,f=$clone(c);delete f.visible;f.editorOptions=$clone(f);if(g=="RichTextEditor")f.owner=!0,f.height=21;if(a.isAdvance&&(g=="TextEditor"||g=="DateTimeEditor"||g=="NumberEditor"||g=="TimeEditor"))f=mx.editors.EditorFactory.createEditor("ConditionFilterEditor",f);else if(f=mx.editors.EditorFactory.createEditor(c.editorType,
f),g=="TextEditor"||g=="NumberEditor"){if(!f.onenterkeyup)f.onenterkeyup=new MXEvent;f.on("enterkeyup",function(){p()})}a.editors[c.name]=f;a.editors.add(f);d.append(f.$e);d.width(e);c.visible=$isEmpty(c.visible)?!0:c.visible;c.visible?(b.show(),d.show()):(b.hide(),d.hide());return{captionCell:b,editorCell:d}}function v(){var c=$("<td class=buttonTd/>");a.fields.length%a.itemNumOfRow>0&&c.attr("colSpan",(a.itemNumOfRow-a.fields.length%a.itemNumOfRow)*2+1);if($.isIE67()){var b=$("<div class=searchBoxButtonDiv/>");
b.width(135);c.append(b);a.searchButton=new mx.controls.Button({width:60,text:mx.msg("SEARCH")});a.resetButton=new mx.controls.Button({width:60,text:mx.msg("RESET")});var d=$("<div class=space style='width: 15px; height: 15px; display:inline-block'>");a.searchButton.on("click",o);a.resetButton.on("click",a.reset);b.append(a.searchButton.$e);b.append(d);b.append(a.resetButton.$e)}else a.searchButton=new mx.controls.Button({text:mx.msg("SEARCH")}),a.resetButton=new mx.controls.Button({text:mx.msg("RESET")}),
d=$("<div class=space>"),a.searchButton.on("click",o),a.resetButton.on("click",a.reset),c.append(a.searchButton.$e),c.append(d),c.append(a.resetButton.$e);return c}function w(){if(a._isHidden==!1){var c=a.$e.get(0).scrollWidth,b=a.$e.get(0).offsetWidth;c>b?n==!1&&($.isIE67()&&a.$e.css("overflow-x","scroll"),n=!0,a.pagedControl.$grid.css("top",function(a,c){return parseFloat(c)+17})):n==!0&&(a.pagedControl.$grid.css("top",function(a,c){return parseFloat(c)-17}),n=!1)}}function p(){for(var c=a.editors,
b=0;b<c.length;b++)($instanceOf(c[b],mx.editors.TextEditor)||$instanceOf(c[b],mx.editors.NumberEditor))&&c[b].setValue(c[b].$input.val(),!0);o()}function o(){var c;c=a.isAdvance?a.getJsonSearchParam():a.getSearchParam();if(!(a.allowSqlKeyQuery==!1&&a._isSqlInject)&&(c={cancel:!1,params:c},a.trigger("searching",c),!c.cancel))a.pagedControl&&(a.pagedControl.pageIndex=1),a.trigger("searchparamchanged")}function u(a){for(var b=0,d=0;d<a.length;d++)mx.utils.CheckUtil.isChinese(a[d])&&b++;return b*12+(a.length-
b)*8+12}function x(){if($isArray(a.buttons)){j=$("<div style='width:100%'></div>");for(var c=0;c<a.buttons.length;c++){var b={width:a.buttonWidth,css:{"margin-left":"5px","margin-top":"5px"}};$.extend(b,a.buttons[c]);b=new mx.controls.Button(b);j.append(b);a.buttons[c]=b;j.append(b.$e)}a.buttons.length==0&&$.isIE67()&&j.css("font-size",0);a.$e.append(j);j.resize(function(){a.trigger("fieldadd")})}}var a=$extend(mx.controls.Control),r={};a.width="100%";a.height="auto";a.pagedControl=null;a.searchButton=
null;a.resetButton=null;a.displayButton=!0;a.sqlInjectionCheck=!0;a.allowSqlKeyQuery=!0;a.encodeValue=!1;a._isSqlInject=!1;a.fields=[];a.itemNumOfRow=3;a.captionColumnWidth=100;a.editors=[];a.buttons=[];a.buttonWidth="75px";a.initHidden=!1;a.allowHiding=!0;a.isAdvance=!1;a._isHidden=null;a._messageBox=null;a.onsearchparamchanged=null;a.onsearching=null;a.onfieldadd=null;var l=a.container=null,m=null;r.init=a.init;a.init=function(){r.init();a.$e.addClass("dataGridSearchBox");a.setContainer(a.container);
if(a.allowHiding==!1)a.initHidden=!1;if(typeof $MX_ENABLE_SKQ!="undefined")a.allowSqlKeyQuery=!1;a._isHidden=a.initHidden;l=$("<table cellspacing=0 cellpadding=0></table>");a.$e.append(l);a.$e.on("resize",w);if(a._messageBox==null)a._messageBox=new mx.windows.MessageBox({reusable:!0,title:mx.msg("WARNNING"),cancelButtonText:mx.msg("CLOSE"),message:mx.msg("ERROR_RETURN"),imgkey:"warnning",showOkButton:!1,showCancelButton:!0});a.$e.keyup(s)};a.setFieldVisible=function(a,b){if($isString(a)){var d=l.find("td[id='"+
a+"']"),e=d.prev();b?(d.show(),e.show()):(d.hide(),e.hide())}};a.setFields=function(){a.editors.clear();var c=a.fields,b=null;l.children().remove();for(var d=0;d<c.length;d++){var e=c[d];d%a.itemNumOfRow==0&&(b=$("<tr/>"),l.append(b));e=q(e);b.append(e.captionCell);b.append(e.editorCell)}a.displayButton&&$notEmpty(b)&&b.append(v());a.initHidden&&a.toggleShowState(a.initHidden);x()};a.setContainer=function(c){a.container=$instanceOf(c,mx.containers.Container)?c:null};a.appendField=function(c){if($.isPlainObject(c)&&
$notEmpty(c.name)){a.fields.add(c);var b=l.find("tr:last"),d=b.find("td:last");d.index()%a.itemNumOfRow==0&&(b=$("<tr/>"),b.append(d),l.append(b));c=q(c);d.before(c.captionCell);d.before(c.editorCell);a.trigger("fieldadd")}};a.toggleShowState=function(c){a._isHidden=$notEmpty(c)?c:!a._isHidden;a._isHidden==!0?a.$e.css("display","none"):a.$e.css("display","")};a.getHeight=function(){if(a._isHidden==!0)return 0;if(a.$e)return a.$e.outerHeight();var c=parseInt((a.fields.length+a.itemNumOfRow-1)/a.itemNumOfRow)*
21;if(c==0)return 0;for(var b=6,d=a.editors,e=d.length,f=21,g=0;g<e;g++){var h=parseInt(d[g].height);h>f&&(f=h);if((g+1)%a.itemNumOfRow==0||g==e-1)b+=f-20,f=21}c+=b;b=j!=null?j.height():0;return c+b};a.getJsonSearchParam=function(){a._isSqlInject=!1;for(var c=[],b=a.editors,d=a.fields,e=[],f=0;f<b.length;f++){var g=d[f].name,h=b[f].value;if($instanceOf(b[f],mx.editors.ConditionFilterEditor)){var i=b[f].getJsonValue();$notEmpty(i)&&i.criterions.length>0&&c.add(i)}else if($notEmpty(h)){var i={},j=[];
if($instanceOf(b[f],mx.editors.TextEditor)&&a.sqlInjectionCheck){var k=mx.utils.CheckUtil.isSqlInjection(h);if(!k.successful&&!e.contains(k.hint)){e.add(k.hint);continue}}k={};k.fieldName=g;k.operator="=";k.value=h;j.add(k);i.criterions=j;i.junction="and";i.columnJunction="and";c.add(i)}}if(e.length>0)a._isSqlInject=!0,b=e.join(","),a._messageBox.setMessage(mx.msg("SQL_INJECTION",{sql:b})),a._messageBox.show();return c};a.getSearchParam=function(){a._isSqlInject=!1;for(var c="",b=a.editors,d=a.fields,
e=[],f=0;f<b.length;f++){var g=d[f].name,h=b[f].value;if($notEmpty(h))if($instanceOf(b[f],mx.editors.TextEditor))if(a.sqlInjectionCheck){var i=mx.utils.CheckUtil.isSqlInjection(h);i.successful?c=c+g+"="+(a.encodeValue==!0?encodeURIComponent(h):h)+"&":e.contains(i.hint)||e.add(i.hint)}else c=c+g+"="+(a.encodeValue==!0?encodeURIComponent(h):h)+"&";else c=c+g+"="+(a.encodeValue==!0?encodeURIComponent(h):h)+"&"}m!=null&&(c=$.merge(c,m));if(e.length>0)a._isSqlInject=!0,b=e.join(","),a._messageBox.setMessage(mx.msg("SQL_INJECTION",
{sql:b})),a._messageBox.show();c.length>0&&(c=c.substring(0,c.length-1));return c};a.addJsonFilter=function(a,b,d,e,f){$.isArray(m)||(m=[]);for(var g,h=0;h<m.length;h++){g=m[h];for(var i=0,j=g.criterions.length;i<j;i++)if(g.criterions[i].fieldName==a&&(g.operator!=b||g.value!=d)){g.addFilter(a,b,d);g.junction=e;g.columnjunction=f;return}}e=new t({junction:e,columnJunction:f});e.addFilter(a,b,d);m.add(e)};a.reset=function(){for(var c=0;c<a.editors.length;c++)a.editors[c].reset()};a._updateEditor=function(){for(var c=
0;c<a.editors.length;c++){var b=a.editors[c];if($instanceOf(b,mx.editors.DropDownEditor)||$instanceOf(b,mx.editors.CheckListEditor)||$instanceOf(b,mx.editors.ListEditor)||$instanceOf(b,mx.editors.AutoCompleteEditor)){if($isEmpty(b.items)||b.items.length==0){var d=a.pagedControl,e=d.entityContainer;$notEmpty(e)&&$notEmpty(e.dicts)&&$notEmpty(e.dicts[b.name])?b.appendItems(e.dicts[b.name]):$notEmpty(d.dicts)&&$notEmpty(d.dicts["#"+b.name])&&b.appendItems(d.dicts["#"+b.name].values)}}else if($instanceOf(b,
mx.editors.DropDownTreeEditor)||$instanceOf(b,mx.editors.DropDownGridEditor))if($isEmpty(b.dicts)||b.dicts.length==0)d=a.pagedControl,e=d.entityContainer,$notEmpty(e.dicts)&&$notEmpty(e.dicts[b.name])&&b.appendDicts(e.dicts[b.name])}};var n=!1,j=null;a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.controls.ContextMenu");$import("mx.datacontrols.DataTreeNode");
mx.datacontrols.DataTree=function(){function j(){a.load()}function k(){a.selection!=null&&a.selection.refresh()}function g(b){if(b!=null)typeof b.parentNode=="undefined"?(a.selection=null,a._loadChildren_callback(null,b.nodes)):a._loadChildren_callback(b.parentNode,b.nodes);a.$e&&a.$e.setBusy(!1)}function h(){a.$e.setBusy()}function l(){a.enabled&&a.getNode(this.parentNode.parentNode).toggleExpand()}function m(){if(a.enabled){var b=a.getNode(this.parentNode.parentNode);a.displayCheckBox&&b.toggleChecked(a.checkCascade)}}
function n(){if(a.enabled){var b=a.getNode(this.parentNode);a.selectNode(b);a.trigger("nodeclick",{node:b})}}function o(){if(a.enabled){var b=a.getNode(this.parentNode);b.toggleExpand();a.trigger("nodedoubleclick",{node:b})}}function p(b){if(a.enabled){if(b.target.tagName!="DIV"&&a.nodeMenu!=null)return!0;a.contextMenu!=null&&a.contextMenu.show(b.clientX,b.clientY);return!1}}function q(b){if(a.enabled){var c=a.getNode(this.parentNode);a.selection!=c&&a.selectNode(c);if(a.nodeMenu!=null){c={cancel:!1,
node:a.selection};a.trigger("menushowing",c);if(c.cancel)return;a.nodeMenu.show(b.clientX,b.clientY)}return!1}}var a=$extend(mx.controls.Control),i={};a.width="auto";a.height="100%";a.navigatable=!1;a.autoSelect=!0;a.displayCheckBox=!1;a.checkCascade=!0;a.treeNodeType=mx.datacontrols.DataTreeNode;a.selection=null;a.imageSize=16;a.entityContainer=null;a.baseUrl=null;a.contextMenu=null;a.nodeMenu=null;a.expandAnimation="slideDown";a.collapseAnimation="slideUp";a.speed=100;a.isLasyLoad=!0;a.showDefaultContextMenu=
!0;a.refreshSelectedNode=!1;a.moveByShortcutKey=!1;a.$root=null;a.onselectionchanged=null;a.onselectionchanging=null;a.onexpanding=null;a.onexpanded=null;a.onnodedoubleclick=null;a.onnodeclick=null;a.onmenushowing=null;a.onnodeindexchanged=null;i.init=a.init;a.init=function(){if($.isIE67()){if(a.width=="auto")a.width=null;if(a.height=="100%")a.height=null}i.init();a.$e.children("ul").length>0?a.$root=a.$e.children("ul"):(a.$root=$("<ul/>"),a.$e.append(a.$root));a.$e.userSelectable(!1);a.$e.addClass("dataTree");
a.navigatable&&a.$e.addClass("navigatable");var b={name:"rootRefresh",text:mx.msg("REFRESH"),onclick:j},c={name:"refresh",text:mx.msg("REFRESH"),onclick:k};if($.isPlainObject(a.contextMenu))a.contextMenu.items.insert(0,"-"),a.contextMenu.items.insert(0,b),a.contextMenu=new mx.controls.ContextMenu(a.contextMenu);else if($isEmpty(a.contextMenu)&&a.showDefaultContextMenu)a.contextMenu=new mx.controls.ContextMenu({items:[b]});if($.isPlainObject(a.nodeMenu))a.nodeMenu.items.insert(0,"-"),a.nodeMenu.items.insert(0,
c),a.nodeMenu=new mx.controls.ContextMenu(a.nodeMenu);else if($isEmpty(a.nodeMenu)&&a.showDefaultContextMenu)a.nodeMenu=new mx.controls.ContextMenu({items:[c]});if(a.entityContainer==null)a.entityContainer=new mx.datacontainers.TreeEntityContainer({baseUrl:a.baseUrl});a.setEntityContainer(a.entityContainer);a.$e.on("click","#expandor",l);a.$e.on("click","#checkBox",m);a.$e.on("click","a",n);a.$e.on("dblclick","a",o);a.$e.on("contextmenu","a",q);a.$e.contextmenu(p)};a.load=function(b,c){if(a.entityContainer!=
null)a.$root.empty(),a.entityContainer.load(b,c);else throw Error(mx.err("ERR_ENTITYCONTAINER_NON_NULLABLE"),["DataTree"]);};a.setEntityContainer=function(b){if($notEmpty(b))a.entityContainer=b,$notEmpty(a.entityContainer)&&(a.entityContainer.off("loading",h),a.entityContainer.off("load",g)),a.entityContainer.on("loading",h),a.entityContainer.on("load",g)};a.findNode=function(b){if(b==null)return null;var c=null,b=a.$e.find(b);return c=a.getNode(b)};a.findNodes=function(b){if(b==null)return null;
for(var c=[],b=a.$e.find(b),d=0;d<b.length;d++){var e=a.getNode(b[d]);e!=null&&c.add(e)}return c};a.getNode=function(b,c){if($isEmpty(b))return null;$isString(b)&&(b=arguments.length==2&&$notEmpty(c)?a.$e.find("li[id='"+b+"'][itemType='"+c+"']"):a.$e.find("li[id='"+b+"']"));if($isObject(b)&&(typeof b.jquery=="undefined"&&(b=$(b)),b.length>0)){var d=b.eq(0);if(d.tag()=="li")return d.data("node")}return null};a.getCheckedNodes=function(){var b=[];a.$root.find("li.checked").each(function(){var c=a.getNode(this);
b.add(c)});return b};a.getCheckedNodeIDs=function(){var b=[];a.$root.find("li.checked").each(function(){var c=a.getNode(this);b.add(c.id)});return b};a.selectNode=function(b,c){if(c!=!1){var d={selection:b,cancel:!1};a.trigger("selectionchanging",d);if(d.cancel)return}if(a.selection!=null){if(a.selection.equals(b))return;a.selection.markAsSelected(!1)}a.selection=b;a.selection!=null&&a.selection.markAsSelected(!0);c!=!1&&a.trigger("selectionchanged",{selection:a.selection})};a.selectFirstNode=function(){if(a.selection==
null){var b=a.$e.find("li");b.length>0&&a.enabled&&(b=a.getNode(b),a.selectNode(b))}};a.insertNodeAfter=function(b,c){var d,e=c.data("node"),f={};if(!$isEmpty(e)&&(f.prevId=e.id,$.isPlainObject(b)?d=a.entityContainer.create(b,f):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(d=b),$notEmpty(d)))return d.parent=e.parent,d=a._createNode(d),$isEmpty(d)?e=void 0:(d.$e.insertAfter(e.$e),a.selection==null&&a.autoSelect&&a.selectFirstNode(),e=d),e};a.insertNodeBefore=function(b,c){var d,e=c.data("node"),f=
{};if(!$isEmpty(e)&&(f.nextId=e.id,$.isPlainObject(b)?d=a.entityContainer.create(b,f):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(d=b),$notEmpty(d)))return d.parent=e.parent,d=a._createNode(d),$isEmpty(d)?e=void 0:(d.$e.insertBefore(e.$e),a.selection==null&&a.autoSelect&&a.selectFirstNode(),e=d),e};a.appendNode=function(b){var c;$.isPlainObject(b)?c=a.entityContainer.create(b,{order:!0}):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(c=b);if($notEmpty(c))return a._appendNode(c)};a._appendNode=function(b){b=
a._createNode(b);if(b!=null)return a.$root.append(b.$e),a.selection==null&&a.autoSelect&&a.selectFirstNode(),b};a.prependNode=function(b){var c;$.isPlainObject(b)?c=a.entityContainer.create(b,{order:!1}):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(c=b);if($notEmpty(c))return a._prependNode(c)};a._prependNode=function(b){b=a._createNode(b);if(b!=null)return a.$root.prepend(b.$e),a.selection==null&&a.autoSelect&&a.selectFirstNode(),b};a.appendNodes=function(b){if(b==null||!$isObject(b))return[];var c=
[];if($isArray(b))for(var d=0;d<b.length;d++){var e=a.appendNode(b[d]);$instanceOf(e,mx.datacontrols.DataTreeNode)&&c.add(e)}return c};a.clearNodes=function(){a.$root.empty();a.entityContainer.data=[];a.selection=null;a.trigger("selectionchanged",{selection:null})};a.clearChecked=function(){var b=a.getCheckedNodes();if($isArray(b)){for(var c=0;c<b.length;c++)b[c]&&b[c].setChecked(!1,!0);if(a.selection)a.selection.markAsSelected(!1),a.selection=null}};a.refresh=function(b){a.load(b)};a._createNode=
function(b){var c=null;if($.isPlainObject(b))c=a.treeNodeType,b.owner=a,c=new c(b);else if($isObject(b))c=b;else return;if(a.displayCheckBox){var b=c.$e.children("a"),d=b.children("#expandor"),e=$("<span id='checkBox'/>");d.length>0?d.after(e):b.prepend(e)}c.owner=a;if(!a.isLasyLoad)c.isLasyLoad=!1;c.isSelected()&&c.markAsSelected(!1);return c};a._loadChildren_callback=function(b,c){var d=null;if(b==null){if(d=a.$root,$isArray(c))for(var e=0;e<c.length;e++){var f=$clone(c[e]),f=a._createNode(f);f!=
null&&d.append(f.$e)}}else if($notEmpty(c)&&$isArray(c)&&b!=null)for(d=0;d<c.length;d++)e=$clone(c[d]),b._appendNode(e);a.selection==null&&a.autoSelect&&a.selectFirstNode()};a.endOfClass(arguments);return a};$ns("mx.datacontrols");
mx.datacontrols.DataTreeNode=function(){var a=$extend(MXComponent),k={};a.id=null;a.owner=null;a.parent=null;a.itemType="item";a.text=null;a.imageUrl=null;a.imageKey=null;a.expanded=!1;a.displayMode=null;a.hasChildren=!1;a.childNodes=null;a.queryParams=null;a.isLasyLoad=!0;a.eTag="<li/>";var g=a.$e=null,h=null;k.init=a.init;a.init=function(){k.init();if(a.$e==null)a.$e=$(a.eTag);a.$e.html("<a href='javascript:void(0)' style='text-decoration:none;'><span id='expandor'/><img/><span id='text'/></a>");g=
a.$e.find("span#text");h=a.$e.find("img");a.hasChildren?(a.$e.addClass("folder"),a.$e.find("> a").addClass("folder")):(a.$e.addClass("item"),a.$e.find("> a").addClass("item"));a.$e.data("node",a);a.id!=null&&a.setID(a.id);a.itemType!=null&&a.setItemType(a.itemType);$notEmpty(a.text)&&a.setText(a.text);$notEmpty(a.imageUrl)&&a.setImageUrl(a.imageUrl);$notEmpty(a.imageKey)&&a.setImageKey(a.imageKey);if($notEmpty(a.childNodes)){childNodes=a.childNodes;a.childNodes=[];var b=childNodes;if($isArray(b)&&
!(b.length<=0)){var c=[];if($isArray(b))for(var d=0;d<b.length;d++){var e=a._appendNode(b[d]);$instanceOf(e,mx.datacontrols.DataTreeNode)&&c.add(e)}}}else a.childNodes=[];a.expanded&&(a.hasLoaded()?a._expand():a.expand());$isEmpty(a.imageUrl)&&$isEmpty(a.imageKey)&&($.isIE6()?h.attr("src",a.hasChildren?mx.mappath("$/icons/gif/folder.gif"):mx.mappath("$/icons/gif/item.gif")):h.attr("src",a.hasChildren?mx.mappath("$/icons/folder.png"):mx.mappath("$/icons/item.png")))};a.setID=function(b){a.id=b;a.$e.attr("id",
a.id)};a.setText=function(b){a.text=b;g!=null&&g.text(a.text)};a.setChecked=function(b,c){if(a.owner!=null&&a.owner.displayCheckBox&&(a.$e.toggleClass("checked",b),a.$e.find("> a").toggleClass("checked",b),c)){var d=a.$e.find("li");d.toggleClass("checked",b);a.$e.removeClass("checkedPart");d.removeClass("checkedPart");d=a.$e.find("a");d.toggleClass("checked",b);a.$e.find("> a").removeClass("checkedPart");d.removeClass("checkedPart");for(d=a.parent;d!=null;){var e=d.childNodesCheckedStatus();d.$e.toggleClass("checked",
e=="checked");d.$e.toggleClass("checkedPart",e=="checkedPart");d.$e.find("> a").toggleClass("checked",e=="checked");d.$e.find("> a").toggleClass("checkedPart",e=="checkedPart");d=d.parent}}};a.toggleChecked=function(b){var c=a.isChecked();a.setChecked(!c,b)};a.isChecked=function(){return a.$e.hasClass("checked")};a.childNodesCheckedStatus=function(){var b=a.$e.find("li");if(b.hasClass("checked")){var c="checked";b.each(function(a){b.eq(a).hasClass("checked")||(c="checkedPart")});return c}else return"unchecked"};
a.setImageUrl=function(b){b==null&&(b="$/images/space.png");a.imageUrl=b;a.$e.find("> a > img").attr("src",mx.mappath(a.imageUrl))};a.setImageKey=function(b){a.imageKey=b;if(a.imageKey!=null){var b=a.owner!=null?a.owner.imageSize:16,c=null,c=$.isIE6()?b==16?"$/icons/gif/"+a.imageKey+".gif":"$/icons/gif/"+a.imageKey+"_"+b+".gif":b==16?"$/icons/"+a.imageKey+".png":"$/icons/"+a.imageKey+"_"+b+".png";a.setImageUrl(c)}else a.setImageUrl(null)};a.setItemType=function(b){a.itemType=b;a.$e.attr("itemType",
a.itemType)};a.getParentNode=function(){var b=a.$e.parent().parent("li");if(b.length==0)return null;return a.owner!=null?a.owner.getNode(b):null};a.getPrevNode=function(){return a.$e.prev("li").data("node")};a.getNextNode=function(){return a.$e.next("li").data("node")};a.getValue=function(b){return typeof a[b]!="undefined"?a[b]:a.$e.attr(b)};a.setValue=function(b,c){switch(b){case "id":a.setID(c);break;case "itemType":a.setItemType(c);break;case "text":a.setText(c);break;case "imageUrl":a.setImageUrl(c);
break;case "imageKey":a.setImageKey(c);break;default:a.$e.attr(b,c)}};a.hasLoaded=function(){return f!=null};a.markAsCut=function(b){b==null&&(b=!0);a.$e.find("img").opacity(b?0.3:1)};a.insertNodeAfter=function(b,c){var d,e=c.data("node"),f={};if(!$isEmpty(e)&&(f.prevId=e.id,$.isPlainObject(b)?d=a.owner.entityContainer.create(b,f):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(d=b),$notEmpty(d)))return d.parent=e.parent,d=a._createNode(d),$isEmpty(d)?e=void 0:(a.childNodes.insertAfter(d,p_preNode),
d.$e.insertAfter(e.$e),e=d),e};a.insertNodeBefore=function(b,c){var d,e=c.data("node"),f={};if(!$isEmpty(e)&&(f.nextId=e.id,$.isPlainObject(b)?d=a.owner.entityContainer.create(b,f):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(d=b),$notEmpty(d)))return d.parent=e.parent,d=a._createNode(d),$isEmpty(d)?e=void 0:(a.childNodes.insertBefore(d,e),d.$e.insertBefore(e.$e),e=d),e};a.appendNode=function(b){var c;$.isPlainObject(b)?c=a.owner.entityContainer.create(b,{order:!0,parentId:a.id}):$instanceOf(b,mx.datacontrols.DataTreeNode)&&
(c=b);if($notEmpty(c))return a._appendNode(c)};a._appendNode=function(b){b=a._createNode(b);if(b!=null){a.childNodes.add(b);f!=null&&f.append(b.$e);if(!a.hasChildren)a.hasChildren=!0;return b}};a.prependNode=function(b){var c;$.isPlainObject(b)?c=a.owner.entityContainer.create(b,{order:!1,parentId:a.id}):$instanceOf(b,mx.datacontrols.DataTreeNode)&&(c=b);if($notEmpty(c))return a._prependNode(c)};a._prependNode=function(b){b=a._createNode(b);if(b!=null){a.childNodes.insert(0,b);f!=null&&f.prepend(b.$e);
if(!a.hasChildren)a.hasChildren=!0;return b}};a.appendNodes=function(b){if($isArray(b)&&!(b.length<=0)){var c=[];if($isArray(b))for(var d=0;d<b.length;d++){var e=a.appendNode(b[d]);$instanceOf(e,mx.datacontrols.DataTreeNode)&&c.add(e)}return c}};a.removeNode=function(b,c){var d=!1,e=null;$isBoolean(b)?(d=b,$isFunction(c)&&(e=c)):$isFunction(b)&&(e=b);d?a.owner!=null&&a.owner.entityContainer!=null&&a.owner.entityContainer.remove(a,function(){a._removeNode(e)}):a._removeNode(e)};a._removeNode=function(b){var c=
!1;if(a.owner!=null&&a.owner.selection==a)c=!0,a.owner.selection=null;a.markAsSelected(!1);c&&a.owner!=null&&a.owner.autoSelect&&(c=a.$e.next(),c.length==0&&(c=a.$e.prev()),c.length==0&&(c=a.$e.parent().parent()),c.length!=0&&c.tag()=="li"?(node=a.owner.getNode(c),a.owner.selectNode(node)):a.owner.selectNode(null));a.$e.detach();a.owner=null;$isFunction(b)&&b()};a.select=function(){a.owner!=null&&a.owner.selectNode(a)};var i=null;a.expand=function(b){$isFunction(b)&&(i=b);a.hasChildren&&(b={cancel:!1,
node:a},a.owner!=null&&a.owner.trigger("expanding",b),b.cancel||(!a.hasLoaded()&&a.isLasyLoad?a.owner!=null&&a.owner.entityContainer!=null&&a.owner.entityContainer.load(a,a._expand):a._expand()))};a._expand=function(){f!=null?a.owner!=null&&f.animationShow({speed:a.owner.speed,animation:a.owner.expandAnimation},function(){a.$e.addClass("expanded");a.$e.find("> ul").addClass("expanded");a.$e.find("> a").addClass("expanded");a.expanded=!0}):(a.$e.addClass("expanded"),a.$e.find("> ul").addClass("expanded"),
a.$e.find("> a").addClass("expanded"),a.expanded=!0);a.owner!=null&&a.owner.trigger("expanded",{node:a});$notEmpty(i)&&i()};a.collapse=function(b){if(a.hasChildren)a.$e.removeClass("expanded"),a.$e.find("> ul").removeClass("expanded"),a.$e.find("> a").removeClass("expanded"),a.expanded=!1,a.owner!=null&&f!=null&&f.animationHide({speed:a.owner.speed,animation:a.owner.collapseAnimation}),$isFunction(b)&&b(a)};a.toggleExpand=function(){a.expanded?a.collapse():a.expand()};a.markAsSelected=function(b){arguments.length==
0&&(b=!0);a.$e.toggleClass("selected",b);a.$e.find("> a").toggleClass("selected",b);a.owner!=null&&a.owner.moveByShortcutKey&&($(document).off("keydown"),$(document).on("keydown",function(b){b.ctrlKey&&(b.keyCode==38?a.moveUp():b.keyCode==40&&a.moveDown())}))};a.isSelected=function(){return a.$e.hasClass("selected")};a.refresh=function(b){if(a.hasChildren)f!=null&&(f.empty().remove(),f=null),a.childNodes=[];a.expand(b);$notEmpty(a.owner)&&a.owner.refreshSelectedNode==!0&&a.refreshSelf()};a.refreshSelf=
function(){$notEmpty(a.owner)&&$notEmpty(a.owner.baseUrl)&&$.getJSON(a.owner.baseUrl+"/"+a.id+"/self",{itemType:a.getValue("itemType")},function(b){if(b.successful){var b=b.resultValue,c;$isEmpty(b.nodes)?c=b:b.nodes.length>0&&(c=b.nodes[0]);$notEmpty(c)&&($notEmpty(c.text)&&a.setText(c.text),$notEmpty(c.imageUrl)&&a.setImageUrl(c.imageUrl))}else mx.indicate("error",b.resultHint)})};a.equals=function(b){if(b==null)return!1;return b.$e.get(0)==a.$e.get(0)};a.findNode=function(b){if(b==null)return null;
var c=null,b=a.$e.find(b);return c=a.owner.getNode(b)};var j=0;a.getLevel=function(){if(j!=0)return j;for(var b=1,c=a.parent;c&&c.parent!=null;)b++,c=c.parent;return j=b};a.moveTo=function(b){var c=a.$e.prevAll("li"),d=!1,e=[];if(c.length<b){b=b-c.length-1;c=a.$e.nextAll("li");a.$e.insertAfter(c.eq(b));for(var d=!0,f=0;f<=b;f++)e.add(c.eq(f).data("node"))}else if(c.length>b){b=c.length-b-1;a.$e.insertBefore(c.eq(b));d=!0;for(f=0;f<=b;f++)e.add(c.eq(f).data("node"))}a.owner!=null&&d&&a.owner.trigger("nodeindexchanged",
{sourceNode:a,targetNodes:e})};a.moveUp=function(){var b=a.$e.prevAll("li");b.length>0&&a.moveTo(b.length-1)};a.moveDown=function(){var b=a.$e.prevAll("li");a.moveTo(b.length+1)};var f=null;a._createNode=function(b){var c=null;if($.isPlainObject(b)){c=mx.datacontrols.DataTreeNode;if(a.owner!=null)c=a.owner.treeNodeType;if(c==null)throw Error("TreeNode type can not be null.");b.owner=a.owner;b.parent=a;c=new c(b)}else if($isObject(b))c=b;else return;if(a.owner!=null&&a.owner.displayCheckBox){var b=
c.$e.children("a"),d=b.children("#expandor"),e=$("<span id='checkBox'/>");d.length>0?d.after(e):b.prepend(e)}c.owner=a.owner;c.parent=a;if(!a.isLasyLoad)c.isLasyLoad=!1;c.isSelected()&&c.markAsSelected(!1);b=a.$e.children("ul");b.length>0?f=b:(f=$("<ul/>"),a.$e.append(f));f.css("text-indent",c.getLevel()*20+"px");return c};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.controls.Button");$import("mx.windows.TipsBox");$import("mx.windows.WindowManager");$import("mx.containers.TabControl");$import("mx.layouts.AnchorLayout");$import("mx.containers.DockPage");$import("mx.containers.HSplit");$import("mx.containers.VSplit");$import("mx.containers.Accordion");$import("mx.containers.DockPanel");$import("mx.editors.EditorFactory");
mx.datacontrols.DynamicForm=function(){function l(b){if($instanceOf(b,mx.containers.Container)){b.controls=b.controls.length>0?b.controls:b.panels?b.panels:b.pages?b.pages:b._dockPanels?b._dockPanels:b.steps?b.steps:b.controls;if($isArray(b.controls)&&b.controls.length>0)for(var a=0;a<b.controls.length;a++)l(b.controls[a]);b.on("ctrladded",s)}}function s(b){if(b&&b.ctrl){var a=[];l(b.ctrl);m(b.ctrl,a);o(a)}}function o(b){if($isArray(b))for(i=0;i<b.length;i++)p(b[i]);else p(b)}function p(b){if(b&&
$instanceOf(b,mx.editors.Editor)){if(!$isEmpty(b)){if(a.editors[b.name]!=void 0)throw Error(mx.err("DUPLICATED_ITEM",[b.name]));if(b.name==a.primaryKey||b.name==a.entityContainer.primaryKey)b.setReadOnly(!0),b.setVisible(a.displayPrimaryKey);a.editors.add(b);a.editors[b.name]=b}b.on("changed",a._editor_changed);q[b.name]=b.value}}function m(b,a){if($instanceOf(b,mx.containers.Container)){if(b.controls=b.controls.length>0?b.controls:b.panels?b.panels:b.pages?b.pages:b._dockPanels?b._dockPanels:b.steps?
b.steps:b.controls,$isArray(b.controls))for(var d=0;d<b.controls.length;d++)m(b.controls[d],a)}else $instanceOf(b,mx.editors.Editor)&&a.add(b)}function k(a,c){for(var d=0;d<c.length;d++){var e=n(c[d]);e.parent=a;a.addControl(e)}}function n(a){a.ctype=a.ctype?a.ctype:a.type;if(a.ctype=="mx.containers.TabControl")for(var c=j(a),d=0;d<a.controls.length;d++){var e=a.controls[d];e.ctype="mx.containers.TabPage";if(e.name==void 0||e.name==null||e.name.length==0)throw Error("tabPage name undefined");e.autoInit=
!0;var f=j(e);e.controls&&k(f,e.controls);c.appendPage(f)}else if(a.ctype=="mx.containers.Accordion"){c=j(a);for(d=0;d<a.controls.length;d++){e=a.controls[d];if(e.name==void 0||e.name==null||e.name.length==0)throw Error("Panel name undefined");if(e.title==void 0||e.title==null||e.title.length==0)throw Error("Panel title undefined");c.appendPanel(e.name,e.title);f=c.panels[d];e.controls&&k(f,e.controls)}}else if(a.ctype=="mx.containers.HSplit"){c=j(a);d=c.rows.replace(/\*/g,"auto").split(",").length;
for(e=0;e<a.controls.length;e++){var g=a.controls[e];if(g.index==void 0)throw Error("HSPlit child control index undefined");else if($isNumber(g.index)){if(g.index<0||g.index>d-1)throw Error("HSPlit child control index outindexarray");}else throw Error("HSPlit child control index is not number");var h=n(g),f=c,g=g.index;$isNumber(g)?f.addControl(h,g):f.addControl(h)}}else if(a.ctype=="mx.containers.VSplit"){c=j(a);d=c.cols.replace(/\*/g,"auto").split(",").length;for(e=0;e<a.controls.length;e++){g=
a.controls[e];if(g.index==void 0)throw Error("VSPlit child control index undefined");else if($isNumber(g.index)){if(g.index<0||g.index>d-1)throw Error("VSPlit child control index outindexarray");}else throw Error("VSPlit child control index is not number");h=n(g);f=c;g=g.index;$isNumber(g)?f.addControl(h,g):f.addControl(h)}}else if(a.ctype=="mx.containers.DockPanel"){c=j(a);for(d=0;d<a.controls.length;d++){e=a.controls[d];e.ctype="mx.containers.DockPage";if(e.name==void 0||e.name==null||e.name.length==
0)throw Error("dock name undefined");f=j(e);e.controls&&k(f,e.controls);c.appendPage(f)}}else c=j(a),$instanceOf(c,mx.containers.Container)&&a.controls&&k(c,a.controls);return c}function j(a){var c=$clone(a);delete c.ctype;delete c.controls;if(a.ctype==void 0)a.ctype="mx.editors.TextEditor";return new (eval("("+a.ctype+")"))(c)}var a=$extend(mx.containers.Container),h={};a.baseUrl=null;a.primaryKey=null;a.displayPrimaryKey=!1;a.entityContainer=null;a.editors=[];a.onvalidate=null;a.onloading=null;
a.onload=null;a.onsubmit=null;var r=!1,q=[];a.fields=[];h.init=a.init;a.init=function(){h.init();a.$e.tag()=="form"&&a.$e.submit(function(){a.trigger("submit");return!1});if($isEmpty(a.entityContainer))a.entityContainer=new mx.datacontainers.FormEntityContainer({baseUrl:a.baseUrl,primaryKey:a.primaryKey});a.setEntityContainer(a.entityContainer)};a.load=function(b,c,d){if($isEmpty(a.entityContainer))mx.showerror(Error(mx.err("LOADING",["EntityContainer is Undefined"])));else if($isEmpty(a.entityContainer.baseUrl)&&
"remote"==a.entityContainer.type)mx.showerror(Error(mx.err("LOADING",["EntityContainer BaseUrl is Undefined"])));else{var e={cancel:!1};a.trigger("loading",e);if(!e.cancel){var f=e=null,g=null;$isEmpty(b)||$isString(b)||$isNumber(b)?(e=b,$isEmpty(c)||$.isPlainObject(c)?(f=c,$isFunction(d)&&(g=d)):$isFunction(c)&&(g=c)):$.isPlainObject(b)?(f=b,$isFunction(c)&&(g=c)):$isFunction(b)&&(g=b);$notEmpty(a.entityContainer)&&(a.$e.setBusy(),a.entityContainer.load(e,f,g))}}};a.isNew=function(){return $notEmpty(a.entityContainer)&&
a.entityContainer.isCreate()};a.save=function(b,c){var d=a.validate(b);d.successful?a.entityContainer.save(b,c):$notEmpty(d.hint)&&mx.indicate("info",d.hint)};a.getEditor=function(b){b=a.editors[b];return b!=null?b:null};h.addControl=a.addControl;a.addControl=function(a,c){var d=[];h.addControl(a,c);l(a);m(a,d);o(d)};a.setEntityContainer=function(b){$notEmpty(a.entityContainer)&&a.entityContainer!=b&&(a.entityContainer.off("load",a._entityContainer_load),a.entityContainer.off("changing",a._entityContainer_changing),
a.entityContainer.off("changed",a._entityContainer_changed),a.entityContainer.off("saving",a._entityContainer_saving),a.entityContainer.off("saved",a._entityContainer_saved),a.entityContainer.off("error",a._entityContainer_error));a.entityContainer=b;$notEmpty(a.entityContainer)&&(a.entityContainer.on("load",a._entityContainer_load),a.entityContainer.on("changing",a._entityContainer_changing),a.entityContainer.on("changed",a._entityContainer_changed),a.entityContainer.on("saving",a._entityContainer_saving),
a.entityContainer.on("saved",a._entityContainer_saved),a.entityContainer.on("error",a._entityContainer_error))};h.setEnabled=a.setEnabled;a.setEnabled=function(b){b=="undefined"&&(b=!0);h.setEnabled(b);for(var c=0;c<a.editors.length;c++)a.editors[c].setEnabled(b)};a.validate=function(b,c){c==null&&(c=!1);a.blur();for(var d={successful:!0},e=0;e<a.editors.length;e++){var f=a.editors[e];if(!(a.ignoreCheckOnHide&&f.visible==!1)&&(d=f.validate(!0),d=$clone(d),d.successful==!1)){d.hint=(f.caption?f.caption:
"")+d.hint;d.name=f.name;c||f.markError(!0,d.hint);break}}d.successful&&($isEmpty(b)&&(b=a.entityContainer._getSavingData()),$.extend(d,{dataForm:a,param:b}),a.trigger("validate",d));return d};a.focus=function(){if(a.editors.length>0)for(var b=0;b<a.editors.length;b++)if(!a.editors[b].readOnly){a.editors[b].focus();break}};a.blur=function(){if(a.editors.length>0)for(var b=0;b<a.editors.length;b++)a.editors[b].readOnly||a.editors[b].blur()};a.hasChanged=function(){return a.entityContainer.hasChanged()};
a.getId=function(){return a.entityContainer.data[a.entityContainer.primaryKey]};a._editor_changed=function(b){var c=b.source?b.source.target:b.target,d=b.name?b.name:c.name,b=b.value?b.value:c.value;c.isVirtual||a.entityContainer!=null&&c.isValidate==!0&&a.entityContainer.setValue(d,b,!0)};a._entityContainer_load=function(){a.$e.setBusy(!1);$notEmpty(a.fields)&&!r&&(k(a,a.fields),r=!0);for(var b=0;b<a.editors.length;b++){var c=a.editors[b],d=!1;if($instanceOf(c,mx.editors.DropDownEditor)||$instanceOf(c,
mx.editors.CheckListEditor)||$instanceOf(c,mx.editors.ListEditor)||$instanceOf(c,mx.editors.AutoCompleteEditor)){if(($isEmpty(c.items)||c.items.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[c.name]))c.appendItems(a.entityContainer.dicts[c.name]),d=!0}else if($instanceOf(c,mx.editors.DropDownTreeEditor)||$instanceOf(c,mx.editors.DropDownGridEditor))if(($isEmpty(c.dicts)||c.dicts.length==0)&&$notEmpty(a.entityContainer.dicts)&&$notEmpty(a.entityContainer.dicts[c.name]))c.appendDicts(a.entityContainer.dicts[c.name]),
d=!0;if(a.entityContainer!=null&&a.entityContainer.isCreate()){for(var e=0;e<a.editors.length;e++){var f=a.editors[e];f!=null&&f.setValue(q[f.name])}a.entityContainer.canModify&&c.isValidate==!0&&(d&&c.setValue(c.value),$isEmpty(a.entityContainer.getValue(c.name))?$isEmpty(c.value)||a.entityContainer.setValue(c.name,c.value,!1):c.setValue(a.entityContainer.getValue(c.name)))}else c.isVirtual||(d=a.entityContainer.getValue(c.name),typeof d!="undefined"&&c.setValue(d))}a.enabled||a.setEnabled(!1);a.trigger("load")};
a._entityContainer_changing=function(){};a._entityContainer_changed=function(b){var c=a.editors[b.name];$notEmpty(c)&&c.setValue(b.value)};a._entityContainer_error=function(){a.$e.setBusy(!1)};a._entityContainer_saved=function(b){a.$e.setBusy(!1);for(var c=0;c<a.editors.length;c++)$isFunction(a.editors[c].refreshPk)&&$isArray(b.result)&&b.result.length>0&&(a.editors[c].refreshPk(b.result,a.entityContainer.primaryKey),a.editors[c].setPk(b.result[0][a.entityContainer.primaryKey]))};a._entityContainer_saving=
function(){a.$e.setBusy()};h.dispose=a.dispose;a.dispose=function(){a.setEntityContainer(null);if(a.editors!=null){for(var b=0;b<a.editors.length;b++){var c=a.editors[b];c.parent=null;c.dispose()}a.editors.clear();a.editors=null}if(a.fields!=null)a.fields.clear(),a.fields=null;h.dispose()};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.datacontrols.DataGrid");
mx.datacontrols.GroupHeaderGrid=function(){function l(c){for(var b=0,i;$notEmpty(c);)$instanceOf(c,mx.datacontrols.GroupHeaderGridColumn)?(i=c.$headCell.parent(),b=c.width,i.width(b),c.visible||(i.hide(),$notEmpty(c.$statisticCell)&&c.$statisticCell.hide(),c.$bodyCol.hide())):(i=c.$groupColumn.parent(),b=a(c),i.width(b)),c=c.parent;i.parent().width(b)}function a(c){var h=0;$.each(c.columns,function(c,d){if($instanceOf(d,mx.datacontrols.GroupHeaderGridColumn)){if($isEqual(d.name,b.primaryKey)&&b.displayPrimaryKey||
$notEqual(d.name,b.primaryKey)&&d.visible)h+=d.width}else h+=a(d);$.isIE67()&&(h+=1)});$.isIE67()&&(h-=1);return h}function m(){var c=24*g;b.$e.find("#upRightBg").height(c+4);b.$e.find(".toggleHideBtn").height(c+4);b.$e.find(".toggleShowBtn").height(c+4);b.displayHead&&b.$body.css("top",c+4);b.$head.find("td").attr("align","center");$.each(b.columns,function(c,b){b.$headCell.height((g-b.level+1)*24);b.$headCell.css("lineHeight",((g-b.level+1)*24).toString()+"px")})}function d(){if($.isIE67()){var c=
b.$head.find("td.groupHeader #groupColumn #columnContainer:last-child");c.each(function(b){c.eq(b).css("border-right","none")})}}function e(c){b.__appendGroupHeaderColumn($.extend({parent:c.target},c.column),c.target.$groupColumn)}function j(c){var h=b._createColumn($.extend({parent:c.target},c.column));h.$headCell.height((g-h.level+1)*24);h.$headCell.css("lineHeight",((g-h.level+1)*24).toString()+"px");var a=$("<div id='columnContainer'/>");c.target.$groupColumn.append(a);b.__appendColumn(h,a,!1);
l(h)}var b=$extend(mx.datacontrols.DataGrid),f={};f.init=b.init;b.init=function(){f.init();b.$e.addClass("groupHeaderGrid");d()};f._mergerColumns=b._mergerColumns;b._mergerColumns=function(c,b){if($isArray(c)&&c.length>0)return c;else if($isArray(b)&&b.length>0)return b;return[]};var g=0;b._parseColumns=function(c){var a=c.parent,i=c.columns;$isArray(i)&&$.each(i,function(c,d){var e=$isEmpty(a)?1:a.level+1;d.level=e;g<e&&(g=e);$isEmpty(i["#"+d.name])&&(i["#"+d.name]=d);$isArray(d.columns)&&b._parseColumns({parent:d,
columns:d.columns})})};f.clearColumns=b.clearColumns;b.clearColumns=function(){f.clearColumns();g=0};f.appendColumns=b.appendColumns;b.appendColumns=function(c){$isEmpty(b._columns["#"+b._tempColumnName])&&c.add({name:b._tempColumnName,caption:" ",readOnly:!0,width:"auto"});$.each(c,function(c,a){var d=a.name;if($notEmpty(b._columns["#"+d])&&$notEqual(d,b._tempColumnName))throw Error(mx.err("DUPLICATED_ITEM",[d]));else b._columns.add(a)});b._parseColumns({columns:b._columns});f.appendColumns($clone(c))};
b.setColumns=function(c){b.clearColumns();if(c.length>0)b._columns=c,b._hasTempColumn(b._columns)||b._columns.add({name:b._tempColumnName,caption:" ",readOnly:!0,width:"auto"}),b._parseColumns({columns:b._columns}),f.appendColumns($clone(b._columns)),b._initColumnsPercentage(),c=b.$headTable.width(),b.$body.append("<div style='width:"+c+"px;height:1px;border:none;'></div>")};b.appendColumn=function(c,a,d,g){arguments.length==1&&$.isPlainObject(c)&&typeof c.columns!="undefined"?(c.level=1,b._appendGroupHeaderColumn(c)):
b._appendColumn(c,a,d,g)};b.removeColumn=function(c){var a=null;$isNumber(c)||$isString(c)?a=b.columns[c]:$isObject(c)&&(a=c);if(!$isEmpty(a)){b._removeColumn(a);for(c=0;c<b._columns.length;c++)if(a.name==b._columns[c].name){b._columns.removeAt(c);delete b._columns["#"+a.name];break}b.columns.remove(a);delete b.columns[a.name]}};b._removeColumn=function(c){var a=c.$headCell.parent();if(a.attr("id")=="columnContainer")for(;a.length>0;){var d=a.parent("#groupColumn");if(d.length==0)break;if(d.children("#columnContainer").length-
1>0){var g=a.width(),e=null;a.parents("#columnContainer").each(function(){var c=$(this).width();$(this).width(c-g);e=$(this)});var d=e.parent(),f=d.width();d.width(f-g);break}a=d.parent("#columnContainer")}a.parent("td").length>0?a.parent().remove():a.remove();c.$bodyCol.remove();typeof c.$statisticCell!="undefined"&&c.$statisticCell.length>0&&c.$statisticCell.remove();b.$body.find("td[id='"+c.name+"']").remove()};b._appendColumn=function(c,a,d,e){if(typeof b.columns[c]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",
[c]));c=b._createColumn(c,a,d,e);c.$headCell.height((g-c.level+1)*24);c.$headCell.css("lineHeight",((g-c.level+1)*24).toString()+"px");a=$("<td/>");b.__appendColumn(c,a,!0);l(c);return c};b._appendGroupHeaderColumn=function(c){var a=$("<td class='groupHeader' style='padding:0px'/>");typeof c.columns!="undefined"&&(b.__appendGroupHeaderColumn(c,a),a.find(">div").addClass("first"),c=b.$headTable.find("tbody > tr > td:has(div#"+b._tempColumnName+")"),c.length<=0?b.$headTable.find("> tbody > tr").append(a):
c.before(a))};b.__appendGroupHeaderColumn=function(c,b){var a=$("<div id='columnContainer'/>");b.append(a);var d=$("<div id='groupCaptionDiv'/>"),f=$("<div id='groupColumn'/>");a.append(d);a.append(f);a={onaddcolumngroup:e,onaddcolumn:j,$groupCaption:d,$groupColumn:f,level:c.level||($isEmpty(c.parent)?1:c.parent.level+1)};if(a.level>g)g=a.level;a=new mx.datacontrols.GridColumnGroup($.extend(c,a));m();return a};b._insertColumn=function(c,a,d){var e=b.columns[c];colGroup=e.parent;index=d?c+1:c;groupColumns=
$isEmpty(colGroup)?null:colGroup.columns;a.level=e.level;a.parent=e.parent;a.$headCell.height((g-a.level+1)*24);a.$headCell.css("lineHeight",((g-a.level+1)*24).toString()+"px");c=$isEmpty(colGroup)?$("<td/>"):$("<div id='columnContainer'/>");c.append(a.$headCell);d?(e.$headCell.parent().after(c),groupColumns&&groupColumns.insertAfter(a,e)):(e.$headCell.parent().before(c),groupColumns&&groupColumns.insertBefore(a,e));b.columns.insert(index,a);b.columns[a.name]=a;b._configColumn(a);l(a);return a};b._configColumn=
function(c){if(b.allowAdjusting){var a=$("<span class='adjustCol_right'/>");c.$headCell.append(a);a.on("mousedown",b._adjustColumn_mousedown);a.on("click",b._adjustColumn_click)}b.allowSorting&&(a=$("<span id='sortOrderSpan'/>"),c.$headCell.append(a));b.displayStatisticRow&&b.$statisticTable.find("> tbody > tr").append(c.$statisticCell);$isEqual(c.name,b.primaryKey)&&!b.displayPrimaryKey&&c.setVisible(!1);if(c.isOverrideRenderCell)b._hasOverrideRenderCell=!0;m()};b.__appendColumn=function(c,a,d){a.append(c.$headCell);
b.columns[b._tempColumnName]!=null?(d&&b.columns[b._tempColumnName].$headCell.parent("td").before(a),b.columns[b._tempColumnName].$bodyCol.before(c.$bodyCol)):(d&&b.$headTable.find("> tbody > tr").append(a),b.$bodyTable.children("colgroup").append(c.$bodyCol));b.columns.add(c);b.columns[c.name]=c;b.columns[b._tempColumnName]!=null&&b.columns.swap(c,b.columns[b._tempColumnName]);b._configColumn(c)};b._createColumn=function(a,d,e,f){if($isObject(a)&&!$isString(a)){if($.isPlainObject(a)){a.owner=b;a.level=
a.level||($isEmpty(a.parent)?1:a.parent.level+1);if(a.level>g)g=a.level;a=new mx.datacontrols.GroupHeaderGridColumn(a)}}else a=new mx.datacontrols.GroupHeaderGridColumn({name:a,caption:d,width:e,align:f,owner:b,level:1});a.owner=b;return a};b._initColumns=function(){var a=b.columns;b.columns=[];b.setColumns(a)};var k=null;b._adjustColumn_mousedown=function(a){var d=$(a.target);$(document).css("cursor","e-resize");$(document).on("mousemove",b._adjustColumn_mousemove);$(document).on("mouseup",b._adjustColumn_mouseup);
d=d.parent().attr("id");d=b.columns[d];if(d!=null)k=d,k.srcWidth=$isNumber(d.width)?d.width:d.$headCell.outerWidth();k.mouseDownX=a.clientX;b.$e.userSelectable(!1);a.stopPropagation()};b._adjustColumn_mousemove=function(a){if(k==null)return!1;if(!k.mouseDownX)return!1;a=k.srcWidth+(a||window.event).clientX-k.mouseDownX;a>10&&k!=null&&k.setWidth(a)};b._adjustColumn_mouseup=function(){if(k==null)return!1;$(document).css("cursor","default");k=null;$(document).off("mousemove",b._adjustColumn_mousemove);
$(document).off("mouseup",b._adjustColumn_mouseup);b.$e.userSelectable(!0)};b._headTable_click=function(a){if(b.enabled&&b.allowSorting){for(a=a.target;a.tagName!="TD";){a=a.parentNode;if(a==null)return;if(a.className.indexOf("cellDiv")>-1)break}b._tempColumnName!=a.id&&b.sort(a.id,b.sortColumn!=null&&b.sortColumn.name==a.id?!b.sortOrder:!0)}};b.endOfClass(arguments);return b};
mx.datacontrols.GridColumnGroup=function(){function l(){var d=a.columns;a.columns=[];var e=$("<span id='caption' style='height:100%; text-align:center'/>").attr("id",a.name).text(a.caption);a.$groupCaption.append(e);$notEmpty(a.parent)&&(a.parent.columns.add(a),a.parent.columns[a.name]=a);$isArray(d)&&$.each(d,function(d,b){$isArray(b.columns)?a.trigger("addcolumngroup",{column:$.extend(!0,{},b)}):a.trigger("addcolumn",{column:$.extend(!0,{},b)})})}var a=$extend(MXComponent),m={};a.name=null;a.caption=
null;a.parent=null;a.columns=[];a.$groupCaption=$("<div id='groupCaptionDiv'/>");a.$groupColumn=$("<div id='groupColumn'/>");a.onaddcolumn=null;a.onaddcolumngroup=null;m.init=a.init;a.init=function(){m.init();l()};return a.endOfClass(arguments)};
mx.datacontrols.GroupHeaderGridColumn=function(){function l(a,e){var j=a.parent();j[0]&&(j.tag()!="td"&&(e===!0?l(j,e):e===!1&&j.parent().children("div:visible[id!='groupCaptionDiv']").length==1&&l(j,e)),e===!0?j.show():j.hide())}var a=$extend(mx.datacontrols.DataGridColumn),m={};a.parent=null;a.align="center";a.$headCell=$("<div class='cellDiv first'><span id='caption' style='height:100%'/></div>");m.init=a.init;a.init=function(){m.init();$notEmpty(a.parent)&&(a.parent.columns.add(a),a.parent.columns[a.name]=
a)};a.setAlign=function(d){d==null&&(d="center");a.align=d;a.$headCell.find("span#caption").css("textAlign",a.align)};a.setWidth=function(d){var e=0;a.width=a.width+""=="auto"?a.width:parseInt(a.width);d=d+""=="auto"?d:parseInt(d);if($isNumber(a.width)&&$isNumber(d))d=parseInt(d),e=d-a.width,a.width=d,a.visible==!1?a._setWidth(0,0,!1):a._setWidth(a.width,e,!1);a.$statisticCell!=null&&a.$statisticCell.length>0&&a.$statisticCell.css("width",a.visible?a.width:0)};a._setWidth=function(d,e,j){a.$headCell.css("width",
d);a.$bodyCol.css("width",d);a.$headCell.parent("#columnContainer").css("width",d);d==0?($.isIE67()||a.owner.$e.find("td[id='"+a.name+"']").hide(),a.$bodyCol.hide()):(a.owner.$e.find("td[id='"+a.name+"']").show(),a.$bodyCol.show());var b=a.$headCell.parentsUntil("#head","#columnContainer");b.each(function(a){if((a!=0||!j)&&a>0)a=b.eq(a),$.isIE67()?a.width(a.width()+e):(a.css("border","0px"),a.width(a.outerWidth()+e),a.css("border",""))});var f=a.$headCell.parentsUntil("#head","td");a.parent==null?
f.width(d):$.isIE67()?f.width(f.width()+e+1):(f.css("border","0px"),f.width(f.outerWidth()+e),f.css("border",""))};a._initVisible=function(){};a.setVisible=function(d){typeof d=="undefined"&&(d=!0);if(a.visible!=d)a.visible=d,d==!1?a._setWidth(0,-a.width,!0):a._setWidth(a.width,a.width,!0),l(a.$headCell,a.visible)};if(arguments.length>0&&$notEmpty(arguments[0].renderCell))a.isOverrideRenderCell=!0;a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.datacontrols.DataGrid");
mx.datacontrols.GroupItemGrid=function(){function d(){var b=a.lazyRenderSize*k>h.length?-1:a.lazyRenderSize*k,c=b+a.lazyRenderSize>h.length?h.length:b+a.lazyRenderSize;if(b==-1){for(;h.lenght>0;)h.remove(0);h=[];return[]}k++;return h.slice(b,c)}function g(b){var c=b.items;$tbody=b.$e.find("tbody");$tbody.empty();$.each(c,function(b,c){$tbody.append(c.$e);c.$e.data("item",c);a.displayRowNumber&&(c.$e.find("td#rownumber").text(b+1),c.$e.find("td#rownumber").attr("title",b+1));a.allowInterlacedRow&&
b%2==1?c.$e.addClass("even"):c.$e.removeClass("even")})}function f(){var b=a.$body[0].scrollHeight;parseInt(a.$body.scrollTop())+parseInt(a.$body.height())>b&&(b=d(),a.transformToGroups(b))}function e(b){if(!a.enabled)return!1;var c=b.target;if($(c).parents("#head")[0]&&a.enableHeadContextMenu)a._init_head_contextmenu(),a.headContextMenu.show(b.clientX,b.clientY);else{for(a.$bodyDiv.get(0);!(c.tagName=="TR"&&c.parentNode!=null);)if(c=c.parentNode,c==null)break;if(c!=null&&(c=$.data(c,"item"),c!=null))return a.itemMenu!=
null&&(a.selectItem(c),a.itemMenu.show(b.clientX,b.clientY)),!1;a.contextMenu!=null&&a.contextMenu.show(b.clientX,b.clientY);return!1}}var a=$extend(mx.datacontrols.DataGrid),j={};a.groups=[];a.allowPaging=!1;a.lazyRender=!0;a.lazyRenderSize=50;a.expandGroupByDefault=!0;a.groupColumn=null;j.init=a.init;a.init=function(){j.init();a.$headTable&&a.$headTable.resize(function(){var b=a.$headTable.width();$.isIE6()&&(b-=16);a.$body.find("#bodyDiv").width(b)});a.sorter=a.groupColumn+" ASC";if(a.groupColumn==
null)throw Error(mx.err("NON_NULLABLE",["groupColumn"]));a.$e.addClass("groupItemGrid")};var h=[];a.setItems=function(b){for(var c=b,e=[],i=0;i<c.length;i++)e["#"+c[i][a.groupColumn]]||(e["#"+c[i][a.groupColumn]]=[],e.add(c[i][a.groupColumn])),e["#"+c[i][a.groupColumn]].add(c[i]);c=[];for(i=0;i<e.length;i++)c=c.concat(e["#"+e[i]]);h=c;a.clearItems();a.lazyRender&&(b=d());a.transformToGroups(b)};var k=0;a.clearItems=function(){for(;a.groups.length>0;)a.removeGroup(0)};a.transformToGroups=function(b){for(var c=
null,d=0;d<b.length;d++){var e=b[d][a.groupColumn];if(a.groups["#"+e]==null&&(c==null||c.groupName!=e))c=a.appendGroup({groupName:e});a._appendItem(b[d])}};a.appendGroup=function(b){var c=null;if($.isPlainObject(b))b.owner=a,c=new mx.datacontrols.DataGridItemGroup(b);else if(arguments.length==1&&$isObject(b))c=b,c.owner=a;c.initialized||c.init();a.$bodyDiv.append(c.$e);a.groups.add(c);a.groups["#"+c.groupName]=c;c.$groupTable.on("click","tr>td",a._body_cell_click);return c};a.appendGroups=function(b){if($isArray(b))for(var c=
0;c<b.length;c++)a.appendGroup(b[c])};a._createColumn=function(b,c,d,e){if(typeof a.columns[b]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[b]));var f=null;$isObject(b)?$.isPlainObject(b)?(b.owner=a,f=new mx.datacontrols.GroupItemGridColumn(b)):f=b:f=new mx.datacontrols.GroupItemGridColumn({name:b,caption:c,width:d,align:e,owner:a});return f};a._appendItem=function(b){var c=null;$.isPlainObject(b)?c=b[a.groupColumn]:arguments.length==1&&$isObject(b)&&(c=b.getValue(a.groupColumn));var d=a.groups["#"+
c];d==null&&(d=a.appendGroup({groupName:c}));return d.appendItem(b)};a.removeGroup=function(b){var c=null;$isString(b)?c=a.groups["#"+b]:$isNumber(b)?c=a.groups[b]:arguments.length==1&&$isObject(b)&&(c=b);c!=null&&(c.clearItems(),c.$e.remove(),a.groups.remove(c),delete a.groups["#"+c.groupName])};a.removeGroups=function(b){b.sort();for(var c=b.length;c>0;)a.removeGroup(b[--c])};a.removeItem=function(b){var c=null;$isNumber(b)?c=a.items[b]:arguments.length==1&&$isObject(b)&&(c=b);typeof c.group!="undefined"&&
c.group!=null&&c.group.removeItem(c)};a.removeItems=function(b){for(var c=0;c<b.length;c++)a.removeItem(b[c])};j.selectAll=a.selectAll;a.selectAll=function(){j.selectAll();a.$bodyDiv.find("#itemGroup table tr").addClass("selected")};a.deselectAll=function(b){if(!(a.selection==null&&a.selections.length==0))a.selection=null,a.selections.clear(),a.$bodyDiv.find("tbody>tr.selected").removeClass("selected"),b!=!1&&a.trigger("selectionchanged")};a.getCheckedItems=function(){var b=[],c;a.$body.find("tbody tr.checked").each(function(){c=
$(this).data("item");$notEmpty(c)&&b.add(c)});return b};a.getCheckedIDs=function(){var b=[];$.each(a.getCheckedItems(),function(a,d){b.add(d.id)});return b};a.moveUp=function(b){if(a.displayCheckBox){var c=a.getCheckedItems();c.length<=0&&b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"));$.each(c,function(a,b){$isEmpty(b)||$isEqual(b,b.group.items.first())||b.moveUp()})}else $notEmpty(a.selection)?a.selection.moveUp():b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"))};a.moveDown=
function(b){if(a.displayCheckBox){var c=a.getCheckedItems();c.length<=0&&b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"));$.each(c,function(a,b){$isEmpty(b)||$isEqual(b,b.group.items.last())||b.moveDown()})}else $notEmpty(a.selection)?a.selection.moveDown():b&&mx.indicate("info",mx.msg("DATAGRID_SELECT_MOVE_ROWS"))};a._sort=function(b){$.each(a.groups,function(a,d){d.items.sort(b);g(d)})};a._removeColumn=function(b){$notEmpty(b.$headCell)&&(b.$headCell.remove(),b.$bodyCol.remove(),typeof b.$statisticCell!=
"undefined"&&b.$statisticCell.length>0&&b.$statisticCell.remove());a.$body.find("td[id='"+b.name+"']").remove();a.$body.find("col[id='"+b.name+"']").remove()};a._insertColumn=function(b,c,d){a._configColumn(c);var e=a.columns[b],f=a.columns,g=f.length,b=d&&g>0?b+1:b,h;for(g-=1;g>=b;g--)f[g+1]=f[g];f[b]=c;f[c.name]=c;d?(c.$headCell.insertAfter(e.$headCell),a.displayStatisticRow&&c.$statisticCell.insertAfter(e.$statisticCell)):(c.$headCell.insertBefore(e.$headCell),a.displayStatisticRow&&c.$statisticCell.insertBefore(e.$statisticCell));
$.each(a.groups,function(a,b){h=b.$groupTable.find("col#"+e.name);d?h.after(c.$bodyCol.clone()):h.before(c.$bodyCol.clone())});return c};a._tableDiv=function(){return a.$bodyDiv};a._initRowNumber=function(){if(!a._isInitRowNumber&&a.displayRowNumber&&a.$headTable.find("td#rownumber").length==0){a.$e.addClass("rowNumberDataGrid");var b="<td id='rownumber' style='width:"+a.rowNumberColWidth+"px;text-align:center;'><span id='rownumber' class='first' style='font-size:11px;'></span></td>",c="<col id='rownumber' style='width:"+
a.rowNumberColWidth+"px;'/>";a.$headTable.find("> tbody > tr").prepend(b);a.$body.find("colgroup").prepend(c);a.$bodyTable.find("colgroup").prepend(c);a._isInitRowNumber=!0}};a._initCheckBox=function(){if(!a._isInitCheckBox&&a.displayCheckBox&&a.$headTable.find("tr>td#checkbox").length==0){a.$e.addClass("checkDataGrid");var b=a.$headTable.find("td#rownumber");b.length==0?(a.$headTable.find("> tbody > tr").prepend("<td style='width:25px;' id='checkbox'><div class='first'><span id='checkBox'/></div></td>"),
a.$body.children("colgroup").prepend("<col style='width:25px;' id='checkbox'/>"),a.$bodyTable.children("colgroup").prepend("<col style='width:25px;' id='checkbox'/>")):(b.after("<td style='width:25px;' id='checkbox'><div class='first'><span id='checkBox'/></div></td>"),a.$body.find("#rownumber").after("<col style='width:25px;' id='checkbox'/>"),a.$bodyTable.find("#rownumber").after("<col style='width:25px;' id='checkbox'/>"));a.$e.on("click","tr>td>div>#checkBox",a._item_checkBox_click);a._isInitCheckBox=
!0}};a._initGrid=function(){a.$e.append("<div id=grid><div id=head><table cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div><div id=body><div id='bodyDiv'/></div><div id='upRightBg'></div></div>");var b=a.$("#grid");a.$grid=b;b=a.$("#head");b.userSelectable(!1);a.$head=b;a.$headTable=b.children("table");var c=mx.getScrollBarWidth();b.css("margin-right",c.horizontal);a.$("#upRightBg").css("width",c.horizontal);b=a.$("#body");a.$body=b;a.$bodyDiv=a.$body.children("#bodyDiv");a.lazyRender&&
a.$body.scroll(f);a.$bodyTable=$("<table cellspacing=0 cellpadding=0><colgroup/></table>");b.scroll(a._body_scroll);if(a.allowMultipleSorting)a.allowSorting=!0;if(a.allowSorting)a.$headTable.on("click","tr>td>div",a._headTable_click);a.$bodyDiv.on("click","tr",a._bodyDiv_click);a.$bodyDiv.dblclick(a._bodyDiv_dbclick);($notEmpty(a.contextMenu)||$notEmpty(a.itemMenu)||a.enableHeadContextMenu)&&a.$e.contextmenu(e)};a._bodyDiv_click=function(b){if(a.enabled){var c=b.target;for(a.$bodyDiv.get(0);!(c.tagName==
"TR"&&c.parentNode!=null);){if($notEmpty(c.id)&&c.id==a._tempColumnName)return;c=c.parentNode;if(c==null)return}c=$.data(c,"item");c!=null&&(a.trigger("itemclick",{item:c}),a.selections.contains(c)?a.selections.contains(c)&&!b.ctrlKey?a.selectItem(c):b.ctrlKey&&a.deselectItem(c):a.selectItem(c))}};a._bodyDiv_dbclick=function(b){if(a.enabled){b=b.target;for(a.$bodyDiv.get(0);!(b.tagName=="TR"&&b.parentNode!=null);)if(b=b.parentNode,b==null)return;b=$.data(b,"item");b!=null&&a.trigger("itemdoubleclick",
{item:b})}};a.setEnableCellTip=function(b){a.enableCellTip=b;var c=a.$bodyDiv.find("td");if(b)for(b=0;b<c.length;b++)$(c[b]).attr("title",$(c[b]).text()),$(c[b]).children(".editorContainer").length==1&&($(c[b]).removeAttr("title"),a._richTextCelltip(c[b]));else a.$bodyDiv.find("td").removeAttr("title",""),a.$bodyDiv.find("td").unbind("mouseenter"),a.$bodyDiv.find("td").unbind("mouseleave"),a.$e.find("#titleDiv").empty()};a.endOfClass(arguments);return a};
mx.datacontrols.DataGridItemGroup=function(){var d=$extend(MXComponent),g={};d.items=[];d.groupName=null;d.owner=null;d.$e=null;d.$groupTable=null;d.$dt=null;g.init=d.init;d.init=function(){g.init();d.$e=$("<div id='itemGroup'><table cellspacing=0 cellpadding=0></table></div>");d.$groupTable=d.$e.find("table");d.owner!=null&&d.$groupTable.append(d.owner.$bodyTable.children("colgroup").clone());var f={};if(d.owner!=null&&!d.owner.expandGroupByDefault)f.expanded=d.owner.expandGroupByDefault;d.$groupTable.expandable(d.groupName,
f);d.$dt=d.$e.find("dt")};d.setGroupName=function(f){d.groupName=f;d.$dt.text(d.groupName)};d.appendItem=function(f){var e=null;if($.isPlainObject(f))e=new mx.datacontrols.GroupItemGridItem({group:d,owner:d.owner,values:f});else if(arguments.length==1&&$isObject(f))e=f,e.group=d,e.owner=d.owner;d.items.add(e);d.owner.items.add(e);e.initialized||e.init();d.$groupTable.append(e.$e);d.owner!=null&&d.owner.allowInterlacedRow&&d.items.length%2==0&&e.$e.addClass("even");if(d.owner.displayRowNumber){var a=
"",a=d.owner.allowPaging?(d.owner.pageIndex-1)*d.owner.pageSize+d.owner.items.length:d.owner.items.length;e.$e.find("td#rownumber").text(a);e.$e.find("td#rownumber").attr("title",a)}return e};d.appendItems=function(f){if($isArray(f))for(var e=0;e<f.length;e++)d.appendItem(f[e])};d.removeItem=function(f){var e=null;$isNumber(f)?e=d.items[f]:arguments.length==1&&$isObject(f)&&(e=f);d.items.remove(e)&&d.owner!=null&&(d.owner.items.remove(e),e.$e.remove())};d.removeItems=function(f){if(d.owner!=null&&
$isArray(f))for(var e=0;e<f.length;e++)d.removeItem(f[e])};d.clearItems=function(){for(;d.items.length>0;)d.removeItem(0)};d.endOfClass(arguments);return d};
mx.datacontrols.GroupItemGridColumn=function(){var d=$extend(mx.datacontrols.DataGridColumn);d.setDataAlign=function(g){g==null&&(g="left");d.dataAlign=g;d.$bodyCol.attr("align",d.dataAlign);d.owner.$bodyDiv.find("td#"+d.name).attr("align",d.dataAlign)};d.setWidth=function(g){if($notEmpty(g))d.width=g;d.$bodyCol.css("width",d.width);d.owner!=null&&d.owner.$body.find("#itemGroup table col#"+d.name).css("width",d.width);d.$headCell.css("width",d.width);d.$statisticCell!=null&&d.$statisticCell.length>
0&&d.$statisticCell.css("width",d.width)};d.endOfClass(arguments);return d};mx.datacontrols.GroupItemGridItem=function(){var d=$extend(mx.datacontrols.DataGridItem);d._setMovedItem=function(g,f){d.$e.parent().children().length<=f||(d.owner.displayCheckBox&&(d.$e.find("#rownumber").text(d.$e.prop("rowIndex")+1),$.each(g,function(d,a){a.$e.find("#rownumber").text(a.$e.prop("rowIndex")+1)})),d.group.items.remove(d),d.group.items.insert(f,d))};return d.endOfClass(arguments)};$ns("mx.datacontrols");$import("mx.datacontrols.LockHeaderGrid");
mx.datacontrols.GroupLockHeaderGrid=function(){function l(a){if(b.displayPrimaryKey==!1&&$isArray(a))for(var i=0;i<a.length;i++){var c=a[i];c!=null&&($isArray(c.columns)?l(c.columns):c.name==b.primaryKey&&a.remove(c))}}function m(a,i){if($isArray(e))for(var j=n=0;j<e.length;j++)if(e[j].name==a){a==b.primaryKey&&b.displayPrimaryKey==!1||(c(e[j]),i.width(n));break}}function c(a){if(typeof a.columns!="undefined")for(var i=0;i<a.columns.length;i++)c(a.columns[i]);else(a=b.columns[a.name])&&a.$headCell&&
(n+=a.$headCell.width())}function d(a,b){if($isArray(b))for(var c=0;c<b.length;c++){var h=b[c];if(h&&h.name==a.name){if(h.locked!==a.locked)h.locked=a.locked,b.removeAt(c),e.add(h)}else h.columns&&d(a,h.columns)}}function f(a){if($isArray(e)&&$.isPlainObject(a)&&!(a.name==b._tempColumnName||$.isPlainObject(a.name)&&b._tempColumnName==a.name.name)){for(var c=0;c<e.length;c++)if(e[c])if(e[c].name==a.name)return;else if($.isPlainObject(a.name)&&e[c].name==a.name.name)return;$.isPlainObject(a.name)?e.add($clone(a.name)):
e.add($clone(a))}}function k(){if(b.$headRightTable!=null){var a=b.$headRightTable.find("td"),c=1;a.each(function(b){b=a.eq(b).find("#groupColumn").length;c<=b&&(c=b+1)});var j=c*24+2;a.height(j);b.$headLeftTable.find("td").height(j);a.each(function(d){var h=a.eq(d).find("#groupColumn"),e=h.length;if(e<c&&e!=0){var f=a.eq(d).find(".cellDiv");f.each(function(a){f.eq(a).parent().width(f.eq(a).width())});var g=j/(e+1);a.eq(d).find("#groupCaptionDiv").height(g);h.each(function(a){var b=h.eq(a).parentsUntil(".groupLockHeaderGrid",
"#groupColumn").length;h.eq(a).height((e-b)*g)});var k=a.eq(d).find("#columnContainer");k.each(function(a){var c=k.eq(a).find(".cellDiv"),i=0;c.each(function(a){i+=b.columns[c.eq(a).attr("id")].$headCell.width()});$.isIE67()&&c.length>1&&(i+=c.length-1);k.eq(a).width(i)})}});b.$e.find("#upRightBg").height(j+3);b.$e.find(".toggleHideBtn").height(j+3);b.$e.find(".toggleShowBtn").height(j+3);b.displayHead&&(b.$bodyLeft.css("top",j+2),b.$bodyRight.css("top",j+2));b.$headLeft.find("td").attr("align","center");
b.$headRight.find("td").attr("align","center");if($.isIE67()){var d=b.$headRight.find("td.groupHeader #groupColumn #columnContainer:last-child");d.each(function(a){d.eq(a).css("border-right","none")});b.$headRight.find("td.groupHeader").css("width",b.$headRight.find("td.groupHeader > #columnContainer").width())}}}var b=$extend(mx.datacontrols.LockHeaderGrid),e=[];b.setColumns=function(a){b.clearColumns();if(a.length>0)e=$clone(a),b._columns=e,l(a),b._hasTempColumn(b._columns)||a.add({name:b._tempColumnName,
caption:" ",readOnly:!0,width:"auto"}),b.appendColumns(a);b._initColumnsPercentage();b._initLeftRightGrid()};base.appendColumns=b.appendColumns;b.appendColumns=function(a){base.appendColumns(a);k()};b.appendColumn=function(a,c,d,h){arguments.length==1&&$.isPlainObject(a)&&typeof a.columns!="undefined"?b._appendGroupHeaderColumn(a):b._appendColumn(a,c,d,h)};b._appendColumn=function(a,c,d,h){var e=$.isPlainObject(a)?a.name:a;if(typeof b.columns[e]!="undefined")throw Error(mx.err("DUPLICATED_ITEM",[e]));
e=$.isPlainObject(a)?a:{name:a,caption:c,width:d,align:h};f(e);a=b._createColumn(a,c,d,h);a.$headCell.attr("id")==b.primaryKey&&b.displayPrimaryKey==!1||(c=$("<td/>"),a.locked?(b.getLockedColumns().add(a),b.getLockedColumns()[a.name]=a,b.allowSorting&&(d=$("<span id='sortOrderSpan'/>"),a.$headCell.append(d)),c.append(a.$headCell),b.$headLeftTable.find("> tbody > tr").append(c),b.$bodyLeftTable.children("colgroup").append(a.$bodyCol),b.displayStatisticRow&&b.$statisticTableLeft.find("> tbody > tr").append(a.$statisticCell),
b.columns.add(a),b.columns[a.name]=a):(b.getUnlockedColumns().add(a),b.getUnlockedColumns()[a.name]=a,b.__appendColumn(a,c,!0)),m(a.name,c),b.allowAdjusting&&(c=$("<span class='adjustCol_left'/>"),d=$("<span class='adjustCol_right'/>"),a.$headCell.children("div").prepend(c),a.$headCell.children("div").append(d),c.on("mousedown",b._adjustColumn_mousedown),d.on("mousedown",b._adjustColumn_mousedown),c.on("click",b._adjustColumn_click),d.on("click",b._adjustColumn_click)))};b._appendGroupHeaderColumn=
function(a){f(a);var c=$("<td class='groupHeader'/>");typeof a.columns!="undefined"&&(b.__appendGroupHeaderColumn(a,c),c.find(">div").addClass("first"),b.columns[b._tempColumnName]!=null?b.columns[b._tempColumnName].$headCell.parent("td").before(c):b.$headRightTable.find("> tbody > tr").append(c));m(a.name,c)};b.__appendGroupHeaderColumn=function(a,c){var d=$("<div id='columnContainer'/>");c.append(d);var e=$("<div id='groupCaptionDiv'/>"),f=$("<span id='caption'/>");f.attr("id",a.name);f.text(a.caption);
d.append(e);e.append(f);if(typeof a.columns!="undefined"&&a.columns.length>0){e=$("<div id='groupColumn'/>");d.append(e);for(d=0;d<a.columns.length;d++)if(typeof a.columns[d].columns!="undefined")b.__appendGroupHeaderColumn(a.columns[d],e);else{var f=b._createColumn(a.columns[d]),g=$("<div id='columnContainer'/>");e.append(g);b.__appendColumn(f,g,!1)}}};b.__appendColumn=function(a,c,d){c.append(a.$headCell);if(!(a.$headCell.attr("id")==b.primaryKey&&b.displayPrimaryKey==!1)){if(a.$headCell.attr("id")==
b.primaryKey)a.readOnly=!0;b.columns[b._tempColumnName]!=null?(d&&b.columns[b._tempColumnName].$headCell.parent("td").before(c),b.columns[b._tempColumnName].$bodyCol.before(a.$bodyCol),b.displayStatisticRow&&a.$statisticCell.insertBefore(b.columns[b._tempColumnName].$statisticCell)):(d&&b.$headRightTable.find("> tbody > tr").append(c),b.$bodyRightTable.children("colgroup").append(a.$bodyCol));b.allowAdjusting&&(c=$("<span class='adjustCol_right'/>"),a.$headCell.append(c),c.on("mousedown",b._adjustColumn_mousedown),
c.on("click",b._adjustColumn_click));b.allowSorting&&(c=$("<span id='sortOrderSpan'/>"),a.$headCell.append(c));b.displayStatisticRow&&b.$statisticTableRight.find("> tbody > tr").append(a.$statisticCell);b.columns.add(a);b.columns[a.name]=a;b.columns[b._tempColumnName]!=null&&b.columns.swap(a,b.columns[b._tempColumnName]);if(a.isOverrideRenderCell)b._hasOverrideRenderCell=!0}};base._setColumnObject=b._setColumnObject;b._setColumnObject=function(a){base._setColumnObject(a);d(a,e)};b._warpColumnHeadCell=
function(a){return $("<td style='width:"+a.width+"px' />").append(a.$headCell)};base._setColumnDOM=b._setColumnDOM;b._setColumnDOM=function(a){a._removeColumnWrap();base._setColumnDOM(a)};b._removeColumn=function(a){var c=null;if(b.$bodyLeft.find("td#"+a.name).length>0)c=b.$bodyLeft;else if(b.$bodyRight.find("td#"+a.name).length>0)c=b.$bodyRight;var d=a.$headCell.parent();if(d.attr("id")=="columnContainer")for(;d.length>0;){var e=d.parent("#groupColumn");if(e.length==0)break;if(e.children("#columnContainer").length-
1>0){var f=d.width(),g=null;d.parents("#columnContainer").each(function(){var a=$(this).width();$(this).width(a-f);g=$(this)});var e=g.parent(),k=e.width();e.width(k-f);break}d=e.parent("#columnContainer")}d.parent("td").length>0?d.parent().remove():d.remove();a.$bodyCol.remove();typeof a.$statisticCell!="undefined"&&a.$statisticCell.length>0&&a.$statisticCell.remove();c&&c.find("td[id='"+a.name+"']").remove()};b._createInheritColumn=function(a){return new mx.datacontrols.GroupLockHeaderGridColumn(a)};
b._initColumns=function(){var a=$clone(b.columns);b.columns=[];b.setColumns(a)};b._initLeftRightGrid=function(){for(var a=0,c=0;c<b.columns.length;c++)b.columns[c].locked&&(a+=b.columns[c].width);b.displayCheckBox&&(a+=25);b.displayRowNumber&&(a+=b.rowNumberColWidth);b.$gridLeft.css("width",a);b.$gridRight.css("left",a+1);b.$gridSplitter.css("left",a);b.$e.addClass("groupLockHeaderGrid")};b._headTable_click=function(a){if(b.enabled&&b.allowSorting){for(a=a.target;a.tagName!="TD";){a=a.parentNode;
if(a==null)return;if(a.className.indexOf("cellDiv")>-1)break}b._tempColumnName!=a.id&&b.sort(a.id,b.sortColumn!=null&&b.sortColumn.name==a.id?!b.sortOrder:!0)}};b._mergerColumns=function(a,b){if($isArray(a)&&a.length>0)return a;else if($isArray(b)&&b.length>0)return b;return[]};var n=0;base.clearColumns=b.clearColumns;b.clearColumns=function(){base.clearColumns();k()};var g=null;b._adjustColumn_mousedown=function(a){var c=$(a.target);$(document).css("cursor","e-resize");$(document).on("mousemove",
b._adjustColumn_mousemove);$(document).on("mouseup",b._adjustColumn_mouseup);c=c.parent().attr("id");c=b.columns[c];if(c!=null)g=c,g.srcWidth=$isNumber(c.width)?c.width:c.$headCell.outerWidth();g.mouseDownX=a.clientX;b.$e.userSelectable(!1);a.stopPropagation()};b._adjustColumn_mousemove=function(a){if(g==null)return!1;if(!g.mouseDownX)return!1;a=g.srcWidth+(a||window.event).clientX-g.mouseDownX;a>10&&g!=null&&g.setWidth(a)};b._adjustColumn_mouseup=function(){if(g==null)return!1;$(document).css("cursor",
"default");g=null;$(document).off("mousemove",b._adjustColumn_mousemove);$(document).off("mouseup",b._adjustColumn_mouseup);b.$e.userSelectable(!0)};b.endOfClass(arguments);return b};
mx.datacontrols.GroupLockHeaderGridColumn=function(){function l(d,f){var k=c.$headCell.parentsUntil("#head","#columnContainer");k.each(function(b){if(b!=0||!f)b=k.eq(b),$.isIE67()?b.width(b.width()+d):b.width(b.outerWidth()+d)});var b=c.$headCell.parentsUntil("#head","td");$.isIE67()?b.width(b.width()+d+1):b.width(b.outerWidth()+d)}function m(c){c=c.parent();c[0]&&(c.tag()!="td"&&c.parent().children("div:not(#groupCaptionDiv)").length==1&&m(c),c.remove())}var c=$extend(mx.datacontrols.DataGridColumn);
c.align="center";c.$headCell=$("<div class='cellDiv first'><span id='caption' style='height:100%'/></div>");c.setAlign=function(d){d==null&&(d="center");c.align=d;c.$headCell.find("span#caption").css("textAlign",c.align)};c.setDataAlign=function(d){d==null&&(d="left");c.dataAlign=d;c.$bodyCol.attr("align",c.dataAlign);c.owner.$bodyRightTable.find("td#"+c.name).attr("align",c.dataAlign);c.owner.$bodyLeftTable.find("td#"+c.name).attr("align",c.dataAlign)};c.setWidth=function(d){var f=0;c.width=c.width+
""=="auto"?c.width:parseInt(c.width);d=d+""=="auto"?d:parseInt(d);if($isNumber(c.width)&&$isNumber(d))f=d-c.width,c.width=d,c._setWidth(c.width,f,!1);c.$statisticCell!=null&&c.$statisticCell.length>0&&c.$statisticCell.css("width",c.width)};c._setWidth=function(d,f,k){c.$bodyCol.css("width",d);c.$headCell.css("width",d);l(f,k)};c._removeColumnWrap=function(){l(-c.width,!1);m(c.$headCell)};c.setVisible=function(d){typeof d=="undefined"&&(d=!0);c.visible=d;var f=c.$headCell.parent("#columnContainer");
d==!1?(c.$headCell.parent().hide(),f.length>0?c._setWidth(0,-c.width,!0):c.$bodyCol.css("width",0),c.$statisticCell!=null&&c.$statisticCell.length>0&&c.$statisticCell.css("width",0),$.isIE67()||c.owner.$grid.find("td[id='"+c.name+"']").hide(),c.owner.$grid.find("col[id='"+c.name+"']").hide()):(c.$headCell.parent().show(),f.length>0?c._setWidth(c.width,c.width,!0):c.$bodyCol.css("width",c.width),c.$statisticCell!=null&&c.$statisticCell.length>0&&c.$statisticCell.css("width",c.width),$.isIE67()||c.owner.$grid.find("td[id='"+
c.name+"']").show(),c.owner.$grid.find("col[id='"+c.name+"']").show())};if(arguments.length>0&&$notEmpty(arguments[0].renderCell))c.isOverrideRenderCell=!0;c.endOfClass(arguments);return c};$ns("mx.datacontrols");$import("mx.datacontrols.DataGrid");
mx.datacontrols.LockHeaderGrid=function(){function b(){if(a.autoWrap)for(var c=a.$("#bodyLeft").children("table").find("tr"),d=a.$("#bodyRight").children("table").find("tr"),b=0;b<c.length;b++){$(c[b]).height("auto");$(d[b]).height("auto");var e=$(c[b]).outerHeight(),f=$(d[b]).outerHeight(),e=e>f?e:f,e=e<22?22:e;$(c[b]).height(e);$(d[b]).height(e)}u();a._trigger_body_scroll()}function e(){$.each(a.items,function(c,d){a.allowInterlacedRow&&((c+1)%2!=0?(d.$e_left.removeClass("even"),d.$e_right.removeClass("even")):
(d.$e_left.addClass("even"),d.$e_right.addClass("even")));a.displayRowNumber&&(d.$e_left.find("td#rownumber").text(a._getRowNumber(c+1)),d.$e_left.find("td#rownumber").attr("title",a._getRowNumber(c+1)))})}function h(c){a.$grid.find("tr.hover").removeClass("hover");for(c=c.target;!(c.tagName=="TR"&&c.parentNode!=null);)if(c=c.parentNode,c==null)break;c=$(c);a.$grid.find("tr#"+c.attr("id")).addClass("hover")}function g(c){if(!(c.which>=2)&&a.enabled){for(var d=c.target;!(d.tagName=="TR"&&d.parentNode!=
null&&d.tagName!="TABLE");)if(d=d.parentNode,d==null)return;i=$.data(d,"item");if(i!=null)q=a.$grid.absolutePosition().top,v=c.clientY,_mouseDownOffsetY=c.offsetY,a.$grid.on("mouseup",l),a.$grid.on("mousemove",f)}}function f(c){var d=c.clientY-v,b=null;if(Math.abs(d)>w&&k==null){r=i.$e_left.clone(!0);p=i.$e_right.clone(!0);p.find("td#"+a._tempColumnName).remove();k=$('<table cellspacing="0" cellpadding="0"></table>');a.columns[a._tempColumnName]!=null&&(b=i.$e_right.find("#"+a._tempColumnName),b=
$.isIE67()?b.width():b.outerWidth(),b=a.$bodyLeftTable.width()+a.$bodyRightTable.width()-b);k.css({position:"absolute",height:"23px",width:b+"px",left:0,top:c.clientY-q-(d>0?_mouseDownOffsetY+5:_mouseDownOffsetY-5),"table-layout":"fixed"});var e=r;r.find("td").each(function(a,c){var d=$(c),b=d.attr("id"),b=i.$e_left.find("#"+b);(b=$.isIE67()?b.width():b.outerWidth())&&d.css("width",b);d.css("overflow","hidden")});p.find("td").each(function(a,c){var d=$(c),b=d.attr("id"),b=i.$e_right.find("#"+b);(b=
$.isIE67()?b.width():b.outerWidth())&&d.css({width:b});d.css("overflow","hidden");e.append(d)});k.append(e);a.$grid.append(k);a.$grid.css("cursor","move")}if(k!=null){var f=x(p.get(0),c.clientY-(d>0?_mouseDownOffsetY-5:_mouseDownOffsetY+5));f!=null&&(o=$.data(f,"item"),k.css({"z-index":"9999",position:"absolute",height:"23px",width:b+"px",left:0,top:c.clientY-q-(d>0?_mouseDownOffsetY+5:_mouseDownOffsetY-5),"table-layout":"fixed"}))}}function l(){a.$grid.off("mouseup",l);a.$grid.off("mousemove",f);
a.$grid.css("cursor","default");k!=null&&(k.remove(),k=null);if(i==o||o==null)i=o=null;else{if(o!=null&&i!=null){var c=o.$e_left.prevAll("tr");i.moveTo(c.length);a._resetItems()}a.selectItem(i,!0);o=i=null}}function x(c,d){for(var b=a.$bodyRightTable.get(0).rows,e,f,g,h=0,i=b.length;h<i;h++){e=b[h];f=a._getPosition(e).y;g=parseInt(e.offsetHeight)/2;if(e.offsetHeight==0)f=a._getPosition(e.firstChild).y,g=parseInt(e.firstChild.offsetHeight)/2;if(d>f-g&&d<f+g){if(e==c)return null;return e}}b=a.$bodyLeftTable.get(0).rows;
h=0;for(i=b.length;h<i;h++){e=b[h];f=a._getPosition(e).y;g=parseInt(e.offsetHeight)/2;if(e.offsetHeight==0)f=a._getPosition(e.firstChild).y,g=parseInt(e.firstChild.offsetHeight)/2;if(d>f-g&&d<f+g){if(e==c)break;return e}}return null}function y(c){$(document).css("cursor","e-resize");var d=c.clientX,b=parseInt(a.$gridLeft.width()),e=parseInt(a.$gridRight.width()),f=a.$headLeft.find("tr:first > td:last"),c=f.attr("id");$isEmpty(c)&&(f=f.find("[id]"),f.length>0&&(c=f.attr("id")));var g=a.columns[c],
h=g.width,i={min:-h+20,max:e-20};$(document).on("mousemove",function(c){$(document).css("cursor","e-resize");var f=c.clientX-d;if(f<i.min)f=i.min;else if(f>i.max)f=i.max;var c=b+f,j=e-f,f=h+f;a.$gridLeft.width(c);g.setWidth(f);a.$gridSplitter.css("left",c);a.$gridRight.width(j);a.$gridRight.css("left",c+1)});$(document).on("mouseup",function(){$(document).off("mousemove mouseup")})}function u(){if(a.selection&&a.selection.$e_left&&(a.selection.$e_left.offset().top>a.$bodyLeft.offset().top+a.$bodyLeft.height()||
a.selection.$e_left.offset().top<a.$bodyLeft.offset().top))a.selection.$e_left.scrollIntoView(),a.selection.$e_right.scrollIntoView()}var a=$extend(mx.datacontrols.DataGrid),n={};a.$gridLeft=null;a.$gridRight=null;a.$headLeft=null;a.$headRight=null;var m=[],j=[];n.init=a.init;a.init=function(){n.init();a.$e.addClass("lockHeaderGrid")};a.getLockedColumns=function(){return m};a.getUnlockedColumns=function(){return j};a._createInheritColumn=function(a){return new mx.datacontrols.LockHeaderGridColumn(a)};
n.setColumns=a.setColumns;a.setColumns=function(c){n.setColumns(c);a.usePercentage||a._initLeftRightGrid();a._setBodyTop()};a._trigger_body_scroll=function(){a.$bodyRight.trigger("scroll")};n._resizeColumns=a._resizeColumns;a._resizeColumns=function(){n._resizeColumns();a._initLeftRightGrid()};a.setEnableCellTip=function(c){a.enableCellTip=c;var d=a.$gridLeft.find("td"),b=a.$gridRight.find("td");if(c){for(c=0;c<d.length;c++)$(d[c]).attr("title",$(d[c]).text()),$(d[c]).children(".editorContainer").length==
1&&($(d[c]).removeAttr("title"),a._richTextCelltip(d[c]));for(c=0;c<b.length;c++)$(b[c]).attr("title",$(b[c]).text()),$(b[c]).children(".editorContainer").length==1&&($(b[c]).removeAttr("title"),$(b[c]).removeAttr("title"),a._richTextCelltip(b[c]))}else a.$gridLeft.find("td").removeAttr("title"),a.$gridRight.find("td").removeAttr("title"),a.$gridLeft.find("td").unbind("mouseenter"),a.$gridLeft.find("td").unbind("mouseleave"),a.$gridRight.find("td").unbind("mouseenter"),a.$gridRight.find("td").unbind("mouseleave"),
a.$e.find("#titleDiv").empty()};a.setDisplayStatisticRow=function(c){a.displayStatisticRow=c;a.$statisticRowLeft||(a._initStatisticRow(),$.each(a.columns,function(c,b){b.initStatisticCell();b.$statisticCell.css("width",b.width);b.setStatisticAlign(b.statisticAlign);b.setStatisticValue(b.statisticValue==null?"":b.statisticValue);b.locked===!0?a.$statisticTableLeft.find("> tbody > tr").append(b.$statisticCell):a.$statisticTableRight.find("> tbody > tr").append(b.$statisticCell)}));a.displayStatisticRow?
(a.$statisticRowLeft.show(),a.$statisticRowRight.show()):(a.$statisticRowLeft.hide(),a.$statisticRowRight.hide())};a._adjustGridSizeForIE6=function(){$.isIE6()&&a.$e.resize(function(){a.$grid.css("height",a.$e.height()-($notEmpty(a.searchBox)&&!a.searchBox.$e.is(":hidden")?a.searchBox.$e.outerHeight():0)-(a.allowPaging?a.pageNaviBar.$e.outerHeight():0));a.$gridRight.css("width",a.$grid.width()-a.$gridLeft.width());a.$bodyLeft.css("height",a.$gridLeft.height()-a.$headLeft.outerHeight());a.$bodyRight.css("height",
a.$gridRight.height()-a.$headRight.outerHeight())})};a.$gridSplitter=null;a._initGrid=function(){a.$e.append("<div id=grid style='  -moz-user-select:none;-webkit-user-select:none;user-select:none;'><div id=gridLeft><div id=headLeft><table class='headLeftTable' cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div><div id=bodyLeft><table class='bodyLeftTable' cellspacing=0 cellpadding=0><colgroup/></table></div></div><div id=gridSplitter/><div id=gridRight><div id=headRight><table class='headRightTable' cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div><div id=bodyRight><table class='bodyRightTable' cellspacing=0 cellpadding=0><colgroup/></table></div></div><div id='upRightBg'></div></div>");
var c=a.$("#grid");a.$grid=c;a.$gridLeft=a.$("#gridLeft");a.$gridRight=a.$("#gridRight");a.$gridSplitter=a.$("#gridSplitter").css({width:1,position:"absolute",top:0,bottom:0,height:"100%",cursor:"e-resize",backgroundColor:"#C5C5C5"});a.$gridSplitter.on("mousedown",y);var d=a.$("#headLeft");d.userSelectable(!1);a.$headLeft=d;c=a.$("#headRight");c.userSelectable(!1);a.$headRight=c;a.$headLeftTable=d.children("table");a.$headRightTable=c.children("table");d=mx.getScrollBarWidth();c.css("margin-right",
d.horizontal);a.$("#upRightBg").css("width",d.horizontal);c=a.$("#bodyLeft");a.$bodyLeft=c;a.$bodyLeftTable=c.children("table");c=a.$("#bodyRight");a.$bodyRight=c;a.$bodyRightTable=c.children("table");c.scroll(a._body_scroll);a.allowSorting&&(a.$headLeftTable.on("click","tr>td>div",a._headTable_click),a.$headRightTable.on("click","tr>td>div",a._headTable_click));a.$bodyLeftTable.on("click","tr",a._bodyTable_click);a.$bodyRightTable.on("click","tr",a._bodyTable_click);a.$bodyLeftTable.on("mouseover",
"tr",h);a.$bodyRightTable.on("mouseover","tr",h);a.$bodyLeftTable.dblclick(a._bodyTable_dbclick);a.$bodyRightTable.dblclick(a._bodyTable_dbclick);($notEmpty(a.contextMenu)||$notEmpty(a.itemMenu)||a.enableHeadContextMenu)&&a.$e.contextmenu(a._bodyTable_contextmenu);a.allowEditing&&(a.$bodyLeftTable.on("click","tr>td",a._body_cell_click),a.$bodyRightTable.on("click","tr>td",a._body_cell_click));a.allowDraggingItem&&(a.$bodyLeftTable.mousedown(g),a.$bodyRightTable.mousedown(g));a.$headRightTable&&a.$headRightTable.resize(function(){if(a.items==
0){a.$bodyRight.find("#temp_right_body_w").remove();var c=a.$headRightTable.width();a.$bodyRight.append("<div id='temp_right_body_w' style='width:"+c+"px;height:1px;border:none;'></div>")}a.$bodyRight.get(0).scrollWidth>a.$bodyRight.get(0).clientWidth?$isIE()?a.$bodyLeft.css("margin-bottom","18px"):a.$bodyLeft.css("padding-bottom","18px"):$isIE()?a.$bodyLeft.css("margin-bottom","0px"):a.$bodyLeft.css("padding-bottom","0px")});$(document).keyup(a._keydown);a.$bodyLeftTable.on("resize",function(){b()});
if(a.autoWrap)a.$bodyRightTable.on("resize",function(){b()})};var s=!1;a._initCheckBox=function(){if(!s&&a.displayCheckBox&&a.$headLeftTable.find("tr>td#checkbox").length==0){a.$e.addClass("checkDataGrid");var c=a.$headLeftTable.find("td#rownumber");c.length==0?(a.$headLeftTable.find("> tbody > tr").prepend("<td style='width:25px;' id='checkbox'><div class='first'><span id='checkBox'/></div></td>"),a.$bodyLeftTable.find("colgroup").prepend("<col style='width:25px;' id='checkbox'/>")):(c.after("<td style='width:25px;' id='checkbox'><div class='first'><span id='checkBox'/></div></td>"),
a.$bodyLeftTable.find("colgroup>col#rownumber").after("<col style='width:25px;' id='checkbox'/>"));a.$e.on("click","tr>td>div>#checkBox",a._item_checkBox_click);s=!0}};var t=!1;a._initRowNumber=function(){if(!t&&a.displayRowNumber&&a.$headLeftTable.find("td#rownumber").length==0){a.$e.addClass("rowNumberDataGrid");var c="<td id='rownumber' style='width:"+a.rowNumberColWidth+"px;text-align:center;'><span id='rownumber' class='first' style='font-size:11px;'></span></td>",d="<col id='rownumber' style='width:"+
a.rowNumberColWidth+"px;'/>";a.$headLeftTable.find("> tbody > tr").prepend(c);a.$bodyLeftTable.children("colgroup").prepend(d);t=!0}};a._initStatisticRow=function(){a.$statisticRowLeft=$("<div id='statisticRowLeft'><table cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div>");a.$statisticTableLeft=a.$statisticRowLeft.find("table");a.$statisticRowRight=$("<div id='statisticRowRight'><table cellspacing=0 cellpadding=0><tbody><tr></tr></tbody></table></div>");a.$statisticTableRight=a.$statisticRowRight.find("table");
a.displayRowNumber&&a.$statisticTableLeft.find("> tbody > tr").append("<td id='rownumber' style='width:"+a.rowNumberColWidth+"px;display: table-cell;'/>");a.displayCheckBox&&a.$statisticTableLeft.find("> tbody > tr").append("<td id='checkbox' style='width:25px;display: table-cell;'/>");a.$bodyLeft.append(a.$statisticRowLeft);a.$bodyRight.append(a.$statisticRowRight);a.setDisplayStatisticRow(a.displayStatisticRow)};n.clearColumns=a.clearColumns;a.clearColumns=function(){n.clearColumns();m=[];j=[]};
a._appendColumn=function(c){if(!(c.$headCell.attr("id")==a.primaryKey&&a.displayPrimaryKey==!1)){if(c.$headCell.attr("id")==a.primaryKey)c.readOnly=!0;a._setColumnObject(c);a._setColumnDOM(c);if(a.allowAdjusting){var d=$("<span class='adjustCol_left'/>"),b=$("<span class='adjustCol_right'/>");c.$headCell.children("div").prepend(d);c.$headCell.children("div").append(b);d.on("mousedown",a._adjustColumn_mousedown);b.on("mousedown",a._adjustColumn_mousedown);d.on("click",a._adjustColumn_click);b.on("click",
a._adjustColumn_click)}a.allowSorting&&(d=$("<span id='sortOrderSpan'/>"),c.$headCell.children("div").append(d))}};a._setColumnObject=function(c){if(c){c.locked===!0?(j.remove(c),delete j[c.name],m.contains(c)||m.add(c),m[c.name]=c):(m.remove(c),delete m[c.name],$isEmpty(j[a._tempColumnName])?j.contains(c)||j.add(c):j.insertBefore(c,j[a._tempColumnName]),j[c.name]=c);a.columns.remove(c);delete a.columns[c.name];if(c.locked){for(var d=0,b=0;b<a.columns.length;b++)if(a.columns[b].locked!==!0){d=b;break}a.columns.insert(d,
c)}else $isEmpty(a.columns[a._tempColumnName])?a.columns.add(c):a.columns.insertBefore(c,a.columns[a._tempColumnName]);a.columns[c.name]||(a.columns[c.name]=c)}};a._setColumnDOM=function(c){var d=a._warpColumnHeadCell(c);c.locked?(a.$headLeftTable.find("> tbody > tr").append(d),a.$bodyLeftTable.children("colgroup").append(c.$bodyCol),a.displayStatisticRow&&a.$statisticTableLeft.find("> tbody > tr").append(c.$statisticCell)):a.columns[a._tempColumnName]&&c.name!=a._tempColumnName?(c.$headCell.insertBefore(a.$headRightTable.find("> tbody > tr > td#"+
a._tempColumnName)),c.$bodyCol.insertBefore(a.$bodyRightTable.find("colgroup col#"+a._tempColumnName)),a.displayStatisticRow&&c.$statisticCell.insertBefore(a.$statisticTableRight.find("> tbody > tr > td#"+a._tempColumnName))):(a.$headRightTable.find("> tbody > tr").append(d),a.$bodyRightTable.children("colgroup").append(c.$bodyCol),a.displayStatisticRow&&a.$statisticTableRight.find("> tbody > tr").append(c.$statisticCell))};a._warpColumnHeadCell=function(a){return a.$headCell};a._setDataItemDOM=function(c){for(var d=
0;d<a.items.length;d++)c.locked?a.items[d].$e_left.append(a.items[d].$e_right.find("td#"+c.name)):a.items[d].$e_left.find("td#"+c.name).insertBefore(a.items[d].$e_right.find("td#"+a._tempColumnName))};a._insertColumn=function(c,d,b){var e=a.columns,f=e.length,g=e[c];a._configColumn(d);$isEqual(d.locked,g.locked)?index=b?c+1:c:g.locked?(g=j.first(),index=$isEmpty(d)?f+1:b?e.indexOf(d)+1:e.indexOf(d)):(g=m.last(),index=$isEmpty(g)?0:b?e.indexOf(d)+1:e.indexOf(d));e.insert(index,d);c=d.locked?m:j;b?
($isEmpty(g)?(c.add(d),d.locked?(a.$headLeftTable.find("> tbody > tr").append(d.$headCell),a.$bodyLeftTable.children("colgroup").append(d.$bodyCol)):(a.$headRightTable.find("> tbody > tr").append(d.$headCell),a.$bodyRightTable.children("colgroup").append(d.$bodyCol))):(c.insertAfter(d,g),d.$headCell.insertAfter(g.$headCell),d.$bodyCol.insertAfter(g.$bodyCol)),a.displayStatisticRow&&d.$statisticCell.insertAfter(g.$statisticCell)):(c.insertBefore(d,g),d.$headCell.insertBefore(g.$headCell),d.$bodyCol.insertBefore(g.$bodyCol),
a.displayStatisticRow&&d.$statisticCell.insertBefore(g.$statisticCell));a._initLeftRightGrid();return d};a._createItem=function(c){if(a.clearEditor()===!1)return null;var b=null;if($.isPlainObject(c))b=new mx.datacontrols.LockHeaderGridItem({owner:a,values:c});else if($instanceOf(b,mx.datacontrols.LockHeaderGridItem))b=c,b.owner=a;$notEmpty(b)&&!b.initialized&&b.init();return b};a._appendItem=function(c){var b=null,b=a._createItem(c);if(b!=null)return a.items.add(b),a.$bodyLeftTable.append(b.$e_left),
a.$bodyRightTable.append(b.$e_right),a.allowInterlacedRow&&a.items.length%2==0&&(b.$e_left.addClass("even"),b.$e_right.addClass("even")),a.displayRowNumber&&(b.$e_left.find("td#rownumber").text(a._getRowNumber(a.items.length)),b.$e_left.find("td#rownumber").attr("title",a._getRowNumber(a.items.length))),a.autoSelect&&a.selection==null&&a.selectNextItem(),b};a.__insertItem=function(c,b){for(var f=a.items[c-1],g=a.items.length-1;g>=c-1;g--)a.items[g+1]=a.items[g];a.items[c-1]=b;$isEmpty(f)?(a.$headLeftTable.append(b.$e_left),
a.$headRightTable.append(b.$e_right)):(f.$e_left.before(b.$e_left),f.$e_right.before(b.$e_right));e();return b};a._selectItem=function(a){a!=null&&(a.$e_left.addClass("selected"),a.$e_right.addClass("selected"),u())};a._deselectItem=function(a){a.$e_left.removeClass("selected");a.$e_right.removeClass("selected")};a._toggleSelected=function(c){c==!0?(a.$bodyLeftTable.find(">tbody>tr").addClass("selected"),a.$bodyRightTable.find(">tbody>tr").addClass("selected")):(a.$bodyLeftTable.find(">tbody>tr.selected").removeClass("selected"),
a.$bodyRightTable.find(">tbody>tr.selected").removeClass("selected"))};a._checkAll=function(){a.$headLeftTable.find("tr").eq(0).toggleClass("checked",!0);a.$headRightTable.find("tr").eq(0).toggleClass("checked",!0)};a._uncheckAll=function(){a.$headLeftTable.find("tr").eq(0).toggleClass("checked",!1);a.$headRightTable.find("tr").eq(0).toggleClass("checked",!1)};a.setDisplayCheckBox=function(c){a.displayCheckBox=c;a._initCheckBox();if(s){if($isArray(a.items))for(c=0;c<a.items.length;c++){var b=a.items[c];
b!=null&&b._initCheckBoxCell!=void 0&&b._initCheckBoxCell()}a.displayCheckBox?(a.$e.addClass("checkDataGrid"),a.$headLeft.find("tr>td#checkbox").show(),a.$bodyLeftTable.find("colgroup>col#checkbox").show(),$.isIE67()?a.$bodyLeftTable.find("tr>td#checkbox").css("border-right","1px"):a.$bodyLeftTable.find("tr>td#checkbox").show()):(a.$e.removeClass("checkDataGrid"),a.$headLeft.find("tr>td#checkbox").hide(),a.$bodyLeftTable.find("colgroup>col#checkbox").hide(),$.isIE67()?a.$bodyLeftTable.find("tr>td#checkbox").css("border-right",
"0px"):a.$bodyLeftTable.find("tr>td#checkbox").hide())}};a.setDisplayRowNumber=function(c){a.displayRowNumber=c;a._initRowNumber();if(t){if($isArray(a.items)){for(var c=!1,b=0;b<a.items.length;b++){var f=a.items[b];f!=null&&f._initRowNumberCell!=void 0&&(c=f._initRowNumberCell())}c&&e()}a.displayRowNumber?(a.$e.addClass("rowNumberDataGrid"),a.$headLeft.find("tr>td#rownumber").show(),a.$bodyLeftTable.find("colgroup>col#rownumber").show(),$.isIE67()?a.$bodyLeftTable.find("tr>td#rownumber").css("border-right",
"1px"):a.$bodyLeftTable.find("tr>td#rownumber").show()):(a.$e.removeClass("rowNumberDataGrid"),a.$headLeft.find("tr>td#rownumber").hide(),a.$bodyLeftTable.find("colgroup>col#rownumber").hide(),$.isIE67()?a.$bodyLeftTable.find("tr>td#rownumber").css("border-right","0px"):a.$bodyLeftTable.find("tr>td#rownumber").hide())}};a.setDisplayHead=function(c){(a.displayHead=c)?(a.$headLeft.show(),a.$headRight.show(),a.$bodyLeft.css("top",""),a.$bodyRight.css("top",""),a.$("#upRightBg").show(),a.$("#toggleShowBtn").show()):
(a.$headLeft.hide(),a.$headRight.hide(),a.$bodyLeft.css("top",0),a.$bodyRight.css("top",0),a.$("#upRightBg").hide(),a.$("#toggleShowBtn").hide());a._setBodyTop()};a._setBodyTop=function(){$(function(){if(a.$headLeftTable.parents("body").length!=0)if(a.displayHead){var c=a.$headLeftTable.height(),b=a.$headRightTable.height();a.$bodyLeft.css("top",c);a.$bodyRight.css("top",b);a.$("#upRightBg").height(b)}else a.$bodyLeft.css("top",0),a.$bodyRight.css("top",0),a.$("#upRightBg").height(0)})};a.setColumnLocked=
function(c,b){var e=null,e=$isString(c)?a.columns[c]:c;if(e.locked!=b)e.locked=b,a._setColumnLocked(e),a._setDataItemDOM(e),a._initLeftRightGrid()};a._removeColumn=function(c){var b=null;if(a.$bodyLeft.find("td#"+c.name).length>0)b=a.$bodyLeft;else if(a.$bodyRight.find("td#"+c.name).length>0)b=a.$bodyRight;c.$headCell.remove();c.$bodyCol.remove();typeof c.$statisticCell!="undefined"&&c.$statisticCell.length>0&&c.$statisticCell.remove();b&&b.find("td#"+c.name).remove()};a.getCheckedItems=function(){var c=
[];a.$bodyLeftTable.find("tr.checked").each(function(){var a=$.data(this,"item");$isEmpty(a)||c.add(a)});return c};a.getCheckedIDs=function(){if(mx.utils.JsonUtil.getItems(a._columns,"name",a.primaryKey,3)==!1)return[];var c=[];a.$bodyLeftTable.find("tr.checked").each(function(){var a=$.data(this,"item").id;c.add(a)});return c};a._sort=function(c){a.items.sort(c);a.$bodyLeftTable.children("tbody").empty();a.$bodyRightTable.children("tbody").empty();for(c=0;c<a.items.length;c++)a.$bodyLeftTable.append(a.items[c].$e_left),
a.$bodyRightTable.append(a.items[c].$e_right),a.items[c].$e_left.data("item",a.items[c]),a.items[c].$e_right.data("item",a.items[c]),a.displayRowNumber&&(a.items[c].$e_left.find("td#rownumber").text(a._getRowNumber(c+1)),a.items[c].$e_left.find("td#rownumber").attr("title",a._getRowNumber(c+1))),a.allowInterlacedRow&&c%2==1?(a.items[c].$e_left.addClass("even"),a.items[c].$e_right.addClass("even")):(a.items[c].$e_left.removeClass("even"),a.items[c].$e_right.removeClass("even"))};a._item_checkBox_click=
function(){if(a.enabled){var c=this.parentNode.parentNode.parentNode,b=c.parentNode.parentNode.parentNode,e=null;b!=null&&b.id=="headLeft"?$(c).hasClass("checked")==!0?a.uncheckAll():a.checkAll():(e=$.data(c,"item"),a.displayCheckBox&&e!=null&&e.toggleChecked(),c=a.$bodyLeftTable.find("tr").length,b=a.$bodyLeftTable.find("tr.checked").length,c==b?a._checkAll():a._uncheckAll());a.trigger("itemchecked",{item:e})}};a._body_scroll=function(c){a.$headRight.scrollLeft(c.target.scrollLeft);a.$bodyLeft.scrollTop(c.target.scrollTop)};
a._bodyTable_click=function(c){if(a.enabled){for(var b=c.target,e=a.$bodyLeftTable.get(0),f=a.$bodyRightTable.get(0);!(b.tagName=="TR"&&b.parentNode!=null&&(b.parentNode.parentNode==e||b.parentNode.parentNode==f));){if($notEmpty(b.id)&&b.id==a._tempColumnName)return;b=b.parentNode;if(b==null)return}b=$.data(b,"item");b!=null&&(a.trigger("itemclick",{item:b}),a.selections.contains(b)?a.selections.contains(b)&&!c.ctrlKey?a.selectItem(b):c.ctrlKey&&a.deselectItem(b):a.selectItem(b))}};a._bodyTable_dbclick=
function(b){if(a.enabled){for(var b=b.target,d=a.$bodyLeftTable.get(0),e=a.$bodyRightTable.get(0);!(b.tagName=="TR"&&b.parentNode!=null&&(b.parentNode.parentNode==d||b.parentNode.parentNode==e));)if(b=b.parentNode,b==null)return;b=$.data(b,"item");b!=null&&a.trigger("itemdoubleclick",{item:b})}};a._changeEditorToText=function(b){var d=a._getColumnEditors().getItem(b);$notEmpty(d)&&typeof d!="undefined"&&(d.$e.detach(),$notEmpty(d.$input)&&d.$input.val(""));var d=a.columns[b],e=a._getEditingItem(),
b=d.locked?e.$e_left.find("td[id='"+b+"']"):e.$e_right.find("td[id='"+b+"']");$isEmpty(b)||d.renderCell(e,b)};a._bodyTable_contextmenu=function(b){if(!a.enabled)return!1;var d=b.target;if(($(d).parents("#headLeft")[0]||$(d).parents("#headRight")[0])&&a.enableHeadContextMenu)a._init_head_contextmenu(),a.headContextMenu.show(b.clientX,b.clientY);else{for(var e=a.$bodyLeftTable.get(0),f=a.$bodyRightTable.get(0);!(d.tagName=="TR"&&d.parentNode!=null&&(d.parentNode.parentNode==e||d.parentNode.parentNode==
f));)if(d=d.parentNode,d==null)break;if(d!=null&&(d=$.data(d,"item"),d!=null))return a.itemMenu!=null&&(a.selectItem(d),a.itemMenu.show(b.clientX,b.clientY)),!1;a.contextMenu!=null&&a.contextMenu.show(b.clientX,b.clientY);return!1}};a._initLeftRightGrid=function(){for(var b=0,d=0;d<a.columns.length;d++)a.columns[d].locked&&a.columns[d].visible&&(b+=a.columns[d].width);a.displayCheckBox&&(b+=25);a.displayRowNumber&&(b+=a.rowNumberColWidth);a.$gridLeft.css("width",b);a.$gridSplitter.css("left",b);a.$gridRight.css("left",
b+1)};a._setColumnLocked=function(b){a._setColumnObject(b);a._setColumnDOM(b)};var i=null,o=null,k=null,r=null,p=null,v=0,q=0,w=5;_mouseDownOffsetY=0;a._resetItems=function(){a.items.clear();var b=a.$bodyLeftTable.get(0).rows,d;$.each(b,function(b,c){d=$.data(c,"item");a.displayRowNumber&&(d.$e_left.find("td#rownumber").text(a._getRowNumber(b+1)),d.$e_left.find("td#rownumber").attr("title",a._getRowNumber(b+1)));a.items.add(d)});a._resetInterlacedRow()};a._resetInterlacedRow=function(){a.allowInterlacedRow&&
$.each(a.items,function(a,b){a%2==1?(b.$e_left.addClass("even"),b.$e_right.addClass("even")):(b.$e_left.removeClass("even"),b.$e_right.removeClass("even"))})};a.endOfClass(arguments);return a};
mx.datacontrols.LockHeaderGridColumn=function(){var b=$extend(mx.datacontrols.DataGridColumn);b.setDataAlign=function(e){e==null&&(e="left");b.dataAlign=e;b.$bodyCol.attr("align",b.dataAlign);b.owner.$bodyRightTable.find("td#"+b.name).attr("align",b.dataAlign);b.owner.$bodyLeftTable.find("td#"+b.name).attr("align",b.dataAlign)};b.endOfClass(arguments);return b};
mx.datacontrols.LockHeaderGridItem=function(){var b=$extend(mx.datacontrols.DataGridItem);b.$e_left=null;b.$e_right=null;b._init=function(){b.$e_left=$("<tr/>");b.$e_right=$("<tr/>");b.$e_left.data("item",b);b.$e_right.data("item",b);if(b.owner!=null&&b.owner.primaryKey!=null)b.id=b.values[b.owner.primaryKey],b.$e_left.attr("id",b.id),b.$e_right.attr("id",b.id);if(b.owner!=null&&b.owner.displayRowNumber){var e=$("<td id='rownumber' style='width:"+b.owner.rowNumberColWidth+"px;text-align:center;display: table-cell;'></td>");
b.$e_left.append(e)}b.owner!=null&&b.owner.displayCheckBox&&(e=$("<td id='checkbox' style='width:25px;display: table-cell;'><div class='first'><span id='checkBox'/></div></td>"),b.$e_left.append(e));for(var e=b.owner.columns,h=0;h<e.length;h++){var g=e[h];if(!(g.name==b.owner.primaryKey&&b.owner.displayPrimaryKey==!1)){var f=$("<td style='width:"+g.width+(g.width!="auto"?"px":"")+";display: table-cell;'/>");if(h==0&&b.owner.displayImage)f=$("<td style='width:"+g.width+(g.width!="auto"?"px":"")+";display: table-cell;'><img/><span id='text'/></td>"),
b._$img=f.children("img");$.isIE67()||g.visible||f.hide();f.attr("align",e[h].dataAlign);f.attr("id",e[h].name);f.data("column",e[h]);g.renderCell(b,f);g.locked?b.$e_left.append(f):b.$e_right.append(f)}}b.itemType!=null&&b.setItemType(b.itemType);b.checked==!0&&b.setChecked(!0);b.owner!=null&&b.owner.displayImage&&(b.imageKey!=null?b.setImageKey(b.imageKey):b.setImageKey(b.owner.getImageKeyOfItem(b)));b.owner.enableCellTip&&(b.$e_left.find("td").each(function(){$(this).attr("title",b.values[this.id]);
$(this).children(".editorContainer").length==1&&($(this).removeAttr("title"),b.owner._richTextCelltip(this))}),b.$e_right.find("td").each(function(){$(this).attr("title",b.values[this.id]);$(this).children(".editorContainer").length==1&&($(this).removeAttr("title"),b.owner._richTextCelltip(this))}))};b.insertCell=function(e){var h=$("<td style='width:"+e.width+";display:"+(e.visible?"":"none")+"' align="+e.dataAlign+" id="+e.name+">"),g=b.owner.getLockedColumns(),f=b.owner.getUnlockedColumns(),l;
if(!$isEmpty(e))e.locked?(l=g.indexOf(e),prev=g[l-1],$isEmpty(prev)?(g=b.$e_left.find("td#rownumber"),f=b.$e_left.find("td#checkbox"),f.length>0?f.after(h):g.length>0?g.after(h):b.$e_left.prepend(h)):(g=prev.name,b.$e_left.find("td#"+g).after(h))):(l=f.indexOf(e),prev=f[l-1],$isEmpty(prev)?b.$e_right.prepend(h):(g=prev.name,b.$e_right.find("td#"+g).after(h))),e.renderCell(b,h)};b.setChecked=function(e){if(b.owner!=null&&b.owner.displayCheckBox)b.checked=e,b.$e_left.toggleClass("checked",b.checked),
b.$e_right.toggleClass("checked",b.checked)};b.setItemType=function(e){b.itemType=e;b.$e_left.attr("itemType",b.itemType);b.$e_right.attr("itemType",b.itemType)};b.setValue=function(e,h){if($isNumber(e))var g=b.owner.columns[e],e=g.name;b.values[e]=h;var f=null,f=b.$e_left.children("#"+e);f.length==0&&(f=b.$e_right.children("#"+e));f.length>0&&(g=b.owner.columns[e],g.renderCell(b,f))};b.moveTo=function(e){var h=b.$e_left.prevAll("tr"),g=b.$e_right.prevAll("tr");if(h.length<e){var f=b.$e_left.nextAll("tr"),
l=b.$e_right.nextAll("tr");b.$e_left.insertAfter(f.eq(e-h.length-1));b.$e_right.insertAfter(l.eq(e-g.length-1))}else h.length>e&&(b.$e_left.insertBefore(h.eq(h.length-e-1)),b.$e_right.insertBefore(g.eq(g.length-e-1)));b.owner!=null&&(b.owner._resetItems(),b.owner.items.remove(b),b.owner.items.insert(e,b))};b.moveUp=function(){var e=b.$e_left.prevAll("tr");e.length>0&&b.moveTo(e.length-1)};b.moveDown=function(){var e=b.$e_left.prevAll("tr");b.moveTo(e.length+1)};b.markError=function(e,h,g){var f=b.$e_left.find("td[id='"+
e+"']");f.length==0&&(f=b.$e_right.find("td[id='"+e+"']"));f.toggleClass("cellError",h);h?f.toolTip({content:g,defaultPosition:"bottom"}):f.toolTip("remove")};b._remove=function(){b.$e_left.remove();b.$e_right.remove()};b._initRowNumberCell=function(){if(b.$e_left!=null&&b.$e_left[0]&&b.$e_left.children("td#rownumber").length==0)return b.$e_left.prepend("<td id='rownumber'></td>"),!0;return!1};b._initCheckBoxCell=function(){if(b.$e_left!=null&&b.$e_left[0]&&b.$e_left.children("td#checkbox").length==
0){var e=b.$e_left.children("td#rownumber");e.length>0?e.after("<td id='checkbox'><div><span id='checkBox'/></div></td>"):b.$e_left.prepend("<td id='checkbox'><div><span id='checkBox'/></div></td>")}};b.setRowNumber=function(e){$isNumber(e)&&b.$e_left&&(b.$e_left.find("td#rownumber").text(e),b.$e_left.find("td#rownumber").attr("title",e))};b.endOfClass(arguments);return b};$ns("mx.datacontrols");
mx.datacontrols.PagedControl=function(){var a=$extend(mx.controls.Control);base={};a.allowPaging=!0;a.pageIndex=1;a.pageSize=20;a.pageSizeOptions=[{text:"10",value:10},{text:"20",value:20},{text:"30",value:30},{text:"40",value:40},{text:"50",value:50}];a.itemCount=0;a.onpageindexchanged=null;a.onitemcountchanged=null;a.getFirstItemIndex=function(){if(a.pageIndex<1)a.pageIndex=1;return a.pageSize*(a.pageIndex-1)};a.getPageCount=function(){if(a.itemCount==0||typeof a.itemCount=="undefined")return 1;
return parseInt((a.itemCount+a.pageSize-1)/a.pageSize)};a.setItemCount=function(b){if(b!=a.itemCount||b==0)a.itemCount=b,a.trigger("itemcountchanged")};a.isFirstPage=function(){return a.pageIndex<=1};a.isLastPage=function(){return a.pageIndex>=a.getPageCount()};a.moveToPage=function(b){a.pageIndex=b;a.trigger("pageindexchanged")};a.moveToFirstPage=function(){(a.pageIndex==0||!a.isFirstPage())&&a.moveToPage(1)};a.moveToLastPage=function(){(a.pageIndex==0||!a.isLastPage())&&a.moveToPage(a.getPageCount())};
a.moveToNextPage=function(){(a.pageIndex==-1||!a.isLastPage())&&a.moveToPage(a.pageIndex+1)};a.moveToPreviousPage=function(){a.isFirstPage()||a.moveToPage(a.pageIndex-1)};a.setPageSize=function(b){a.pageSize=b;a.moveToFirstPage()};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.editors.NumberEditor");$import("mx.editors.TextEditor");
mx.datacontrols.PageNaviBar=function(){function f(){a.$e.append($("<span class='separator'/>"))}function j(){a.displayPageSize&&a.setPageSize(e.value);a.pagedControl.moveToPage(1)}function k(){a.$firstPageButton.on("click",l);a.$previousPageButton.on("click",m);a.$lastPageButton.on("click",n);a.$nextPageButton.on("click",o);if(a.displayRefreshButton)a.$refreshButton.on("click",p);if(a.displayPageIndex)c.$e.find("input").on("blur",function(){var b=Number(c.value);if($.isNumeric(b)){if(b<=0||b>a.totalPageNum)c.setText(a.pageIndex),
b=a.pageIndex}else c.setText(a.pageIndex),b=a.pageIndex;b!=a.pageIndex&&$notEmpty(a.pagedControl)&&a.pagedControl.moveToPage(b)});if($notEmpty(a.pagedControl))a.pagedControl.on("load",g)}function h(){if($notEmpty(a.$pageInfo)){var b=mx.msg("PAGE_NAVI_BAR_INFO",{totalRowNum:a.totalRowNum,pageSize:a.pageSize});a.$pageInfo.html(b)}}function g(){if($notEmpty(a.pagedControl))a.totalRowNum=a.pagedControl.itemCount,a.totalPageNum=a.pagedControl.getPageCount(),a.pageIndex=a.pagedControl.pageIndex,a.setTotalRowNum(a.totalRowNum),
a.setTotalPageNum(a.totalPageNum),a.setPageIndex(a.pageIndex),a.displayPageSize&&e.setValue(a.pageSize),a.pagedControl.isFirstPage()?(d(a.$firstPageButton,!0),d(a.$previousPageButton,!0)):(d(a.$firstPageButton,!1),d(a.$previousPageButton,!1)),a.pagedControl.isLastPage()?(d(a.$nextPageButton,!0),d(a.$lastPageButton,!0)):(d(a.$nextPageButton,!1),d(a.$lastPageButton,!1)),h()}function o(){$notEmpty(a.pagedControl)&&(a.$nextPageButton.hasClass("disabled")||a.pagedControl.moveToNextPage())}function n(){$notEmpty(a.pagedControl)&&
(a.$lastPageButton.hasClass("disabled")||a.pagedControl.moveToLastPage())}function m(){$notEmpty(a.pagedControl)&&(a.$previousPageButton.hasClass("disabled")||a.pagedControl.moveToPreviousPage())}function l(){$notEmpty(a.pagedControl)&&(a.$firstPageButton.hasClass("disabled")||a.pagedControl.moveToFirstPage())}function p(){a.pagedControl.moveToPage(a.pageIndex)}function d(a,c){a.toggleClass("disabled",c)}var a=$extend(mx.controls.Control),i={};a.width="100%";a.height=25;a.pagedControl=null;a.$pageSizeSelected=
null;a.displayPageSize=!0;a.$refreshButton=null;a.displayRefreshButton=!0;a.$firstPageButton=null;a.$previousPageButton=null;a.$nextPageButton=null;a.$lastPageButton=null;a.displayPageIndex=!0;a.$pageInfo=null;a.displayPageInfo=!0;a.totalRowNum=0;a.pageSize=20;a.totalPageNum=1;a.pageIndex=1;var c=null,e=null;i.init=a.init;a.init=function(){if($.isIE67()){if(a.width=="100%")a.width=null;if(a.height==25)a.height=null}i.init();a.$e.addClass("pageNaviBar");if($notEmpty(a.pagedControl)&&$notEmpty(a.pagedControl.pageSize))a.pageSize=
a.pagedControl.pageSize;if(a.displayPageSize)e=new mx.editors.DropDownEditor({width:40,onchanged:j,displayCloseButton:!1}),$notEmpty(a.pagedControl)&&e.setItems(a.pagedControl.pageSizeOptions),a.$pageSizeSelected=e.$e,a.$pageSizeSelected.css("float","left"),a.$pageSizeSelected.addClass("allowEditing"),a.$pageSizeSelected.find("div#deleteContainer").remove(),a.$e.append(a.$pageSizeSelected),f();a.$firstPageButton=$("<span id=firstPage class='btn'/>");a.$previousPageButton=$("<span id=previousPage class='btn'/>");
a.$e.append(a.$firstPageButton);a.$e.append(a.$previousPageButton);if(a.displayPageIndex){c=new mx.editors.TextEditor({width:24,height:21});c.$e.css("display","inline-block");c.$e.css("float","left");var b=$("<span id='totalPageSize'/>");b.text(" / "+a.totalPageNum);f();a.$e.append(c.$e);a.$e.append(b);f()}a.$nextPageButton=$("<span id=nextPage class='btn'/>");a.$lastPageButton=$("<span id=lastPage class='btn'/>");a.$e.append(a.$nextPageButton);a.$e.append(a.$lastPageButton);if(a.displayRefreshButton)f(),
a.$refreshButton=$("<span id=refresh class='btn'/>"),a.$e.append(a.$refreshButton);if(a.displayPageInfo)a.$pageInfo=$("<span class='pageInfo'/>"),a.$e.append(a.$pageInfo);a.$e.find("> span").addClass("pageNaviSpan");k();g()};a.setPageSize=function(b){a.pageSize=b;if($notEmpty(a.pagedControl)&&a.pageSize!=a.pagedControl.pageSize)a.pagedControl.pageSize=b;a.displayPageSize&&e.setValue(a.pageSize);h()};a.setTotalRowNum=function(b){a.totalRowNum=b};a.setTotalPageNum=function(b){a.totalPageNum=b;a.displayPageIndex&&
a.$e.find("span#totalPageSize").text(" / "+a.totalPageNum).width(a.totalPageNum.toString().length*7+14)};a.setPageIndex=function(b){a.pageIndex=b;a.displayPageIndex&&(c.setText(b),c.setWidth(a.totalPageNum.toString().length*7+7))};a.getPageSizeEditor=function(){return e};a.refresh=function(){g()};a.endOfClass(arguments);return a};$ns("mx.datacontrols");$import("mx.datacontrols.DataGrid");
mx.datacontrols.ScrollLoadGrid=function(){function i(c){a.scrollBar.$e.css("right",0-c.target.scrollLeft)}function b(){h.total=a.itemCount;h.refresh();if(h.total<a.viewSize)a.viewSize=h.total;f()}function f(c){$isEmpty(c)&&(c=0);a.start=c;var d=a._items.slice(c,c+a.viewSize);if($isEmpty(a.items)||a.items.length<=0)a._appendItems(d);else for(var b=0;b<a.viewSize;b++){var e=a.items[b],h=d[b];e.setRowNumber(c+b+1);e.values=h;for(var l=e.owner.columns,f=0;f<l.length;f++){var i=l[f];if(!i.isVirtual){var k=
e.$e.find("td[id='"+i.name+"']");$isEmpty(k)||i.renderCell(e,k)}}e.setChecked(a.checkItems.contains(h));e=j(e);$isEqual(e,a.selection)?a._selectItem(e):a._deselectItem(e)}}function l(a){f(a.pos)}function j(c){c=c.getIndex()+a.start;return a._items[c]}function k(c){var d;a:{d=c.$e;for(var b=a.$e;d!=void 0&&d!=null&&d.tag().toUpperCase()!="BODY";){if(d.html()==b.html()){d=!0;break a}d=d.parent()}d=!1}d&&(c=j(c));c=a._items.indexOf(c);return a.items[c-a.start]}var a=$extend(mx.datacontrols.DataGrid),
m={};a.scrollBar=null;a.viewSize=20;a.start=0;a.checkItems=[];a._items=[];a.allowPaging=!1;var h=null;m.init=a.init;a.init=function(){a.allowPaging=!1;m.init();a.$body.css({overflowY:"hidden"});h=new mx.datacontrols.ScrollBar({itemSize:22,viewSize:a.viewSize,onscroll:l});a.scrollBar=h;a.$body.append(h.$e);a.$body.scroll(i);a.on("load",b)};a._load=function(c){var d=[],b=[],e=0;if($notEmpty(c)&&(d=a._jsonArrayClone(c.columns),e=c.itemCount,b=a._jsonArrayClone(c.items),$notEmpty(b)&&a.allowPaging&&b.length>
a.pageSize))for(;b.length>a.pageSize;)b.removeAt(b.length-1);if($notEmpty(d)&&d.length>0)c=a._jsonArrayClone(a._columns),c=a._mergerColumns(c,d,"name"),a._columns=a._jsonArrayClone(c),c.length>0&&a.setColumns(c);a.clearItems();if($notEmpty(b))a._items=b;$notEmpty(e)&&a.setItemCount(e);$notEmpty(a.searchBox)&&a.searchBox._updateEditor();a.trigger("load")};a.selectItem=function(c,d){var b=null;$isNumber(c)?b=a._items[c]:$isObject(c)&&(b=c);if(a.selection!=b){var e={cancel:!1,item:b};a.trigger("selectionchanging",
e);if(!e.cancel)a.deselectAll(!1),a._selectItem(b),a.selection=b,a.selections.contains(b)||a.selections.add(b),d!=!1&&a.trigger("selectionchanged")}};a._selectItem=function(a){a!=null&&(a=k(a),$notEmpty(a)&&a.$e.addClass("selected"))};a.selectAll=function(c){for(var b=0;b<a._items.length;b++)a.selections.contains(a._items[b])||a.selections.add(a._items[b]);a._selectAll();c!=!1&&a.trigger("selectionchanged")};a._selectAll=function(){for(var c=a.items.length,b=0;b<c;b++)a.items[b].setChecked(!0);a.$bodyTable.find(">tbody>tr").addClass("selected")};
a.deselectItem=function(c,b){if(c!=null)a.selections.contains(c)&&a.selections.remove(c),a.selection=a.selection==c&&a.selections.length>0?a.selections.last():null,a._deselectItem(c),b!=!1&&a.trigger("selectionchanged")};a._deselectItem=function(a){a=k(a);$notEmpty(a)&&a.$e.removeClass("selected")};a.deselectAll=function(c){if(!(a.selection==null&&a.selections.length==0))a.selection=null,a.selections.clear(),a.$bodyTable.find(">tbody>tr.selected").removeClass("selected"),c!=!1&&a.trigger("selectionchanged")};
a.selectNextItem=function(){var c=-1;if(a.selection!=null)c=a._items.indexOf(a.selection);else if(a._items.length>0){a.selectItem(0);return}c!=a._items.length-1&&(c++,a.selectItem(c))};a.selectPreviousItem=function(){var c=0;a.selection!=null&&(c=a._items.indexOf(a.selection));c!=0&&(c--,a.selectItem(c))};a.checkAll=function(){if(a.displayCheckBox){for(var c=a._items.length,b=0;b<c;b++)a.checkItems.add(a._items[b]);a._checkAll()}};a._checkAll=function(){for(var b=0;b<a.items.length;b++)a.items[b].checked||
a.items[b].toggleChecked();a.$headTable.find("tr").eq(0).toggleClass("checked",!0)};a.uncheckAll=function(){a.displayCheckBox&&(a.checkItems.clear(),a._uncheckAll())};a._uncheckAll=function(){for(var b=0;b<a.items.length;b++)a.items[b].checked&&a.items[b].toggleChecked();a.$headTable.find("tr").eq(0).toggleClass("checked",!1)};a.getCheckedDataItems=function(){return a.checkItems};a.getCheckedIDs=function(){if(mx.utils.JsonUtil.getItems(a._columns,"name",a.primaryKey,3)==!1)return[];for(var b=[],d=
a.checkItems.length,g=0;g<d;g++)b.add(a.checkItems[g][a.primaryKey]);return b};a._bodyTable_click=function(b){if(a.enabled){for(var d=b.target,g=a.$bodyTable.get(0);!(d.tagName=="TR"&&d.parentNode!=null&&d.parentNode.parentNode==g);){if($notEmpty(d.id)&&d.id==a._tempColumnName)return;d=d.parentNode;if(d==null)return}d=$.data(d,"item");d!=null&&(a.trigger("itemclick",{item:d}),d=j(d),a.selections.contains(d)?a.selections.contains(d)&&!b.ctrlKey?a.selectItem(d):b.ctrlKey&&a.deselectItem(d):a.selectItem(d))}};
a._item_checkBox_click=function(){if(a.enabled){var b=this.parentNode.parentNode.parentNode,d=b.parentNode.parentNode.parentNode,g=null;d!=null&&d.id=="head"?$(b).hasClass("checked")==!0?a.uncheckAll():a.checkAll():(g=$.data(b,"item"),a.displayCheckBox&&g!=null&&(g.toggleChecked(),g.checked?(a.checkItems.add(j(g)),a._items.length==a.checkItems.length&&a.$headTable.find("tr").eq(0).toggleClass("checked",!0)):(a.checkItems.remove(j(g)),a.$headTable.find("tr").eq(0).toggleClass("checked",!1))));a.trigger("itemchecked",
{item:g})}};a.endOfClass(arguments);return a};
mx.datacontrols.ScrollBar=function(){function i(){var f=b.getPosition();if(!$isEqual(b.pos,f))b.pos=f,b.trigger("scroll",{pos:b.pos})}var b=$extend(mx.controls.Control),f={};b.position="absolute";b.top=0;b.right=0;b.itemSize=0;b.viewSize=0;b.total=0;b.pos=0;b.$content=null;b.$bar=null;b.onscroll=null;f.init=b.init;b.init=function(){f.init();b.$bar=$("<div/>");b.$content=$("<div/>");b.$bar.append(b.$content);b.$e.append(b.$bar);b.$bar.css({width:19,overflowY:"scroll",overflowX:"hidden"});b.$content.css({width:1,
backgroundColor:"white"});b.$bar.scroll(i);b.refresh()};b.refresh=function(){b.$bar.height(b.itemSize*b.viewSize);b.$content.height(b.itemSize*b.total)};b.getPosition=function(){var f=b.$bar.scrollTop();return parseInt(f/b.itemSize)};b.endOfClass(arguments);return b};$ns("mx.datacontrols");$import("mx.datacontrols.DataForm");
mx.datacontrols.SkinDataForm=function(){function g(){h==null&&(h=a.$e.html().replace(k,"<span id='editorContainer' name='$1'>$3</span>"));a.$e.html(h);a.editors=[];a.fields=[];var b=a.$e.find("#editorContainer");try{for(var c,f=0;f<b.length;f++){var i=$(b[f]);c=i.attr("name");var d={},j=i.text();$notEmpty(j)&&(d=eval("("+j+")"));d.name=c;d.fieldName=c;a._parseField(d);a.fields.add(d);var g=$.extend({parent:a},d),e=new mx.editors.EditorFactory.createEditor(d.editorType,g);i.replaceWith(e.$e);$isEmpty(e.$e.attr("id"))&&
e.$e.attr("id",c);if(e!=null){e.enabled=a.enabled;if(!($notEmpty(d.isFormField)&&d.isFormField==!1))e.on("changed",a._editor_changed);a.editors[e.name]=e;a.editors.add(e)}}}catch(l){throw Error(l,j);}a.trigger("skinload");a.setVisible(!0)}var a=$extend(mx.datacontrols.DataForm);base={};a.skinUrl=null;a.isForm=!0;a.isCache=!1;a.onskinload=null;var k=/@#@AV-([\w]*)#(OPTIONS-({[^(@#@)]*}))?/g,h=null;base.init=a.init;a.init=function(){base.init();if($notEmpty(a.entityContainer))a.entityContainer.loadMeta=
!1;a._markSkinUrl(a.skinUrl);a._loadSkin()};a._markSkinUrl=function(b){if($notEmpty(b))b.startsWith("~/")&&(b=mx.mappath(b)),a.skinUrl=b};a._loadSkin=function(){if(!$isEmpty(a.skinUrl)){var b=a.skinUrl;a.isCache||(b=b.indexOf("?")>-1?b+"&rnd="+Math.random():b+"?rnd="+Math.random());try{$.ajaxSetup({async:!1,timeout:3E4}),a.$e.load(b,a._skinLoad_callBack)}catch(c){throw Error(c);}finally{$.ajaxSetup({async:!0,timeout:6E4})}}};a._skinLoad_callBack=function(b,c,f){c=="success"?a.setVisible(!1):mx.showerror(Error(mx.err("LOADING",
["An error occured:"+f.status+" "+f.statusText])))};base._entityContainer_load=a._entityContainer_load;a._entityContainer_load=function(b){a.$e.setBusy(!1);$isEmpty(a.skinUrl)?base._entityContainer_load(b):a.__entityContainer_load(b)};a.__entityContainer_load=function(){g();$.each(a.fields,function(b,c){a.fields[c.name]=c});a._setFieldValues();a.enabled||a.setEnabled(!1);a.trigger("load")};a.endOfClass(arguments);return a};$ns("mx.datacontrols.wizards");$import("mx.containers.HSplit");$import("mx.controls.ToolBar");$import("mx.controls.DragUploadControl");$import("mx.datacontrols.DataForm");$import("mx.windows.WizardWindow");
mx.datacontrols.wizards.ImportExcelWizard=function(){function g(b){switch(b){case "save":a.previewGridSave();break;case "uploadItem":a._previewGrid.clearItems();d.uploadAll();break;case "deleteItem":a._previewGrid.clearItems(),d.clearItems()}}function m(){var b=a.wizard.steps.uploadStep;if(b!=null){var c=new mx.containers.HSplit({rows:"90px,auto",resizable:!1,borderThick:0});e=new mx.datacontrols.DataForm({maxCols:3,fields:[["\u5bfc\u5165\u9009\u9879\u914d\u7f6e",{name:"horizontalBegin",caption:mx.msg("IMPORT_EXCEL_HORIZONTALBEGIN"),
value:a.importExcelOptions.horizontalBegin,lineBreak:!1},{name:"horizontalEnd",caption:mx.msg("IMPORT_EXCEL_END"),value:a.importExcelOptions.horizontalEnd,lineBreak:!1},{name:"verticalBegin",caption:mx.msg("IMPORT_EXCEL_VERTICALBEGIN"),value:a.importExcelOptions.verticalBegin,lineBreak:!1},{name:"verticalEnd",caption:mx.msg("IMPORT_EXCEL_VERTICALEND"),value:a.importExcelOptions.verticalEnd,lineBreak:!1},{name:"sheetNumber",caption:mx.msg("IMPORT_EXCEL_SHEETNUMBER"),value:a.importExcelOptions.sheetNumber,
lineBreak:!1},{name:"separatorNum",caption:mx.msg("IMPORT_EXCEL_SEPRATORNUM"),value:a.importExcelOptions.separatorNum,lineBreak:!1}]],entityContainer:new mx.datacontainers.FormEntityContainer({type:"local"})});e.load();c.addControl(e);d==null&&(d=new mx.controls.DragUploadControl({maxCount:1,url:mx.mappath(a.importExcelUrl),itemMenu:{items:[{name:"uploadItem",text:mx.msg("ANALYSE_FILE")},"-",{name:"deleteItem",text:mx.msg("DELETE")}],onitemclick:function(a){g(a.item.name)}},contextMenu:{items:[{name:"uploadItem",
text:mx.msg("ANALYSE_FILE")},"-",{name:"deleteItem",text:mx.msg("DELETE")}],onitemclick:function(a){g(a.item.name)}},onitemuploading:n,onuploadcomplete:o}),c.addControl(d,1));b.addControl(c)}}function p(){var b=a.wizard.steps.previewStep;if(b!=null&&(b.$e.css("padding","5px"),a._previewGrid==null)){var c=new mx.containers.HSplit({rows:"25px,auto",resizable:!1,borderThick:0}),d=new mx.controls.ToolBar({items:[{name:"save",text:mx.msg("SAVE"),enabled:!a.importExcelOptions.saveByDefault}],onitemclick:function(){g("save")}});
c.addControl(d);a._previewGrid=new mx.datacontrols.DataGrid({baseUrl:a.previewGridBaseUrl,primaryKey:a.pk,contextMenu:{items:[{name:"save",text:mx.msg("SAVE"),onclick:function(){g("save")}}]}});a._previewGrid.entityContainer.type="local";c.addControl(a._previewGrid,1);b.addControl(c)}}function q(b){var c=b.step,e=b.nextStep;if(c!=null)if(c.name=="optionStep"){if(j.length==0)b.cancel=!0,mx.indicate("info",mx.msg("IMPORT_EXCEL_COLUMN_UNCHECKED"))}else if(c.name=="uploadStep"&&e.name=="previewStep"){if(d.items.length==
0)b.cancel=!0,mx.indicate("warn",mx.msg("IMPORT_EXCEL_SELECT_FILE"));if(!a.importExcelOptions.saveByDefault&&d.items[0].status!=d.uploadStatus.COMPLETE)b.cancel=!0,mx.indicate("warn",mx.msg("IMPORT_EXCEL_ANALYSE_FILE"));a.importExcelOptions.saveByDefault&&d.uploadAll()}}function k(){j=i.getCheckedItems();for(var b=[],c="",e="",f=0;f<j.length;f++){var g=j[f].value,h=j[f].text;f==0?(c=g,e=h):(c+=","+g,e+=","+h);b.add({name:g,caption:h})}a._previewGrid!=null&&a._previewGrid.setColumns(b);if(d!=null){b=
{};if(a.params!=null)b=a.params;b.columnNames=c;b.columnCaptions=e;d.setParams(b)}}function n(a){var c={impOptions:[e.getEditor("horizontalBegin").value,e.getEditor("horizontalEnd").value,e.getEditor("verticalBegin").value,e.getEditor("verticalEnd").value,e.getEditor("sheetNumber").value,e.getEditor("separatorNum").value].toString()};$.extend(a.item.params,c)}function o(b){var c=null;try{if(c=JSON.parse(b.resultValue),typeof c.successful!="undefined"&&(c.successful==!0||c.successful=="true")){var e=
c.resultValue.items,b=!0;$isFunction(a.importExcelOptions.parseExcelCallBack)&&(b=a.importExcelOptions.parseExcelCallBack(e));if(b===!1)mx.indicate("error",mx.msg("UPLOAD_ANALYSE_ERROR"));else{for(b=0;b<e.length;b++)a._previewGrid.entityContainer.create(e[b]);a.importExcelOptions.saveByDefault&&a.previewGridSave();a.wizard.moveNext();a.wizard.$bottom.find("#btnBack").attr("disabled",!0)}}else d!=null&&d.items.length>0&&(d.items[0].setStatus(d.uploadStatus.ERROR),mx.indicate("error",mx.msg("UPLOAD_ANALYSE_ERROR")))}catch(f){d!=
null&&d.items.length>0&&(d.items[0].setStatus(d.uploadStatus.ERROR),mx.indicate("error",mx.msg("UPLOAD_ANALYSE_ERROR")))}}function r(){a.finishCallback!=null&&a.finishCallback()}var a=$extend(mx.windows.WizardWindow),h={};a.width=600;a.height=500;a.previewGridBaseUrl=null;a.params=null;a.importExcelUrl="~/../mx/servlets/importExcelServlet";a.importColumns=[];a.importExcelOptions={horizontalBegin:1,horizontalEnd:0,verticalBegin:1,verticalEnd:0,sheetNumber:1,separatorNum:0,saveByDefault:!0};a.finishCallback=
null;a._previewGrid=null;var l=!1,e=null;h.init=a.init;a.init=function(){h.init();a.wizard.on("stepchanging",q);a.wizard.on("finished",r);a.wizard.appendSteps([{name:"optionStep",text:mx.msg("OPTIONS"),description:mx.msg("IMPORT_EXCEL_WIZARD_OPTION_DESCRIPTION")},{name:"uploadStep",text:mx.msg("IMPORT_EXCEL_WIZARD_UPLOAD_EXCEL"),description:mx.msg("IMPORT_EXCEL_WIZARD_UPLOAD_EXCEL_DESCRIPTION")},{name:"previewStep",text:mx.msg("IMPORT_EXCEL_WIZARD_ANALYSE_RESULT"),description:mx.msg("IMPORT_EXCEL_WIZARD_ANALYSE_RESULT_DESCRIPTION")}]);
var b=a.wizard.steps.optionStep;if(b!=null&&f==null)f=new mx.datacontrols.DataForm({captionColumnWidth:70}),f.entityContainer.type="local",f.load(),b.addControl(f);m();p()};h.show=a.show;a.show=function(){h.show();l&&(i.checkAll(),d.clearItems(),a.wizard.moveTo(0));l=!0};var i=null;a.setImportColumns=function(b){a.importColumns=b;f.setFields([[mx.msg("IMPORT_OPTIONS"),{name:"importColumn",caption:mx.msg("IMPORT_COLUMN"),nullable:!0,editorType:"ListEditor",displayCheckBox:!0,height:320,items:a.importColumns,
displayMember:"caption",valueMember:"name"}]]);i=f.editors.importColumn;i!=null&&(i.on("changed",k),i.checkAll(),k())};a.previewGridSave=function(){a._previewGrid.save()};var f=null,d=null,j=[];a.endOfClass(arguments);return a};$ns("mx.datas");
mx.datas.DataObject=function(){var a=$extend(MXComponent);a._customProperties=null;a.setCustomeProperty=function(g,b){if(a._customProperties==null)a._customProperties=new mx.types.HashMap;if(g==null||b==null)throw Error(mx.msg("NULL_KEYVALUE_NOT_ALLOWED"));a._customProperties.setItem(g,b)};a.getCustomProperties=function(){if(a._customProperties==null)a._customProperties=new mx.types.HashMap;return a._customProperties};a.setCustomProperties=function(g){if(g instanceof mx.types.HashMap)a._customProperties=g};
a.getCustomProperty=function(){if(a._customProperties==null)return null;if(key==null)throw Error("Null keys are not allowed.");return a._customProperties.getItem(key)};a.endOfClass=function(g){if($.isPlainObject(g[0]))for(var b in g[0])a[b]=g[0][b]};a.endOfClass(arguments);return a};
mx.datas.DataTable=function(){function a(h,j){if(typeof h!="undefined")c.sortColumn=h;if(typeof j!="undefined")c.sortOrder=j;c.rows.sort(g)}function g(h,j){var a=0,a=h[c.sortColumn].getValue(),d=j[c.sortColumn].getValue();if(a==d)return 0;a=a==null&&d!=null?-1:d==null&&a!=null?1:a.toString().localeCompare(d);return(c.sortOrder?1:-1)*a}function b(c,a){return c>-1&&$.isArray(a)&&c<a.length}function e(h){var a=[];if($.isArray(h)&&h.length>0)for(var b=0;b<h.length;b++){var d=h[b];a[b]=$.isPlainObject(d)||
$.isArray(d)?new mx.datas.DataColumn(d):d;a[b].table=c;a[a[b].id]=a[b]}return a}function i(h){var a=[];if($.isArray(a)&&h.length>0)for(var b=0;b<h.length;b++){var d=h[b];a[b]=$.isPlainObject(d)||$.isArray(d)?new mx.datas.DataRow(d):d;a[b].table=c}return a}var c=$extend(mx.datas.DataObject);c.rows=[];c.columns=[];c.oncolumnCreating=null;c.oncolumnCreated=null;c.oncolumnDeleting=null;c.oncolumnDeleted=null;c.onrowCreating=null;c.onrowCreated=null;c.onrowDeleting=null;c.onrowDeleted=null;c.onchanging=
null;c.onchanged=null;new mx.types.HashMap;c.setColumns=function(h){c.columns=e(h)};c.setRows=function(h){c.rows=i(h)};c.addColumn=function(h,a,b,d){c.insertColumn(c.columns.length,h,a,b,d)};c.addColumns=function(h,a){c.insertColumns(c.columns.length,h,a)};c.insertColumn=function(h,a,b,d,k){var g={cancel:!1};c.trigger("columnCreating",g);if(g.cancel)return null;typeof a=="string"?a=new mx.datas.DataColumn(a,b,d):k=b;a=e([a])[0];c.columns[a.id]=a;c.columns.insert(h,a);for(b=0;b<c.rows.length;b++)c.rows[b].cells.insert(h,
new mx.datas.DataCell);h={cancel:!1,column:a,index:h};k&&c.trigger("columnCreated",h);return a};c.insertColumns=function(a,b,f){var d={cancel:!1};c.trigger("columnCreating",d);if(!d.cancel){d={cancel:!1,index:a,columns:[]};if($.isArray(b)&&b.length>0)for(var e=0;e<b.length;e++)c.insertColumn(a+e,b[e]);d.columns=b;f&&c.trigger("columnCreated",d)}};c.addRow=function(a,b){return c.insertRow(c.rows.length,a,b)};c.addRows=function(a,b){c.insertRows(c.rows.length,a,b)};c.insertRow=function(a,b,f){$isBoolean(b)&&
(f=b,b=null);var d={cancel:!1};c.trigger("rowCreating",d);if(d.cancel)return null;$isEmpty(b)?(b=new mx.datas.DataRow,b.table=c):b=i([b])[0];b.table=c;c.rows.insert(a,b);a={cancel:!1,row:b,index:a};f&&c.trigger("rowCreated",a);return b};c.insertRows=function(a,b,f){var d={cancel:!1};c.trigger("rowCreating",d);if(!d.cancel){d={cancel:!1,index:a,rows:[]};if($isArray(b))for(var b=i(b),e=0;e<b.length;e++)d.rows.add(c.insertRow(a+e,b[e]));else if($isNumber(b))for(e=0;e<b;e++)d.rows.add(c.insertRow(a+e));
f&&c.trigger("rowCreated",d)}};c.removeRows=function(a,b){if(a==-1)for(;c.rows.length>0;)c.removeRow(0);else if(!(a>=c.rows.length))for(var f=a+b,d=a;d<f;d++)c.removeRow(d)};c.removeRow=function(a){var b=null,b=$.isNumeric(a)?c.rows[a]:a;if(b!=null)b.table=null,c.rows.remove(b)};c.removeColumns=function(a,b,f){var d={cancel:!1};c.trigger("columnDeleting",d);if(d.cancel)return null;$isBoolean(b)&&(f=b);d={cancel:!1,columns:[]};if($isArray(a))for(b=0;b<a.length;b++)d.columns.add(c.removeColumn(a[b]));
else if(a==-1)for(;c.columns.length>0;)d.columns.add(c.removeColumn(0));else if(!(a>=c.columns.length))for(b=a+b;a<b;a++)d.columns.add(c.removeColumn(a));f&&c.trigger("columnDeleted",d)};c.removeColumn=function(a,b){var f={cancel:!1};c.trigger("columnDeleting",f);if(f.cancel)return null;var d=null;$.isNumeric(a)||typeof a==="string"?d=c.columns[a]:$instanceOf(a,mx.datas.DataColumn)&&(d=a);if(d!=null){for(var f=c.columns.indexOf(d),e=0;e<c.rows.length;e++)c.rows[e].removeCell(f);delete c.columns[d.id];
d=c.columns.splice(f,1);d.length>0&&(d=d[0]);f={cancel:!1,column:d,index:f};b&&c.trigger("columnDeleted",f);return d}return null};c.sort=function(c,b){var f;if($.isArray(c)){f=c;for(var d=0;d<f.length;d++)a(f[d],b)}else if(typeof c==="string"&&c.indexOf(",")>0){f=c.split(",");for(d=0;d<f.length;d++)a(f[d],b)}else typeof c==="string"&&c.indexOf(",")==-1&&a(c,b)};c.getNumberOfColumns=function(){return c.columns.length};c.getNumberOfRows=function(){return c.rows.length};c.getFilteredRows=function(a){var b=
[];if($.isArray(a))for(var f=0;f<c.rows.length;f++)if(!b.contains(c.rows[f]))for(var d=0;d<a.length;d++)if($.isPlainObject(a[d])){var e=c.rows[f].getCell(a[d].column).getValue();e==a[d].value&&b.push(c.rows[f]);a[d].minValue&&a[d].maxValue&&e>a[d].minValue&&e<a[d].maxValue&&!b.contains(c.rows[f])&&b.push(c.rows[f])}};c.getColumnId=function(a){if(b(a,c.columns))return c.columns[a].getId();return null};c.getColumnLabel=function(a){if(b(a,c.columns))return c.columns[a].getLabel();return null};c.getColumnPattern=
function(a){if(b(a,c.columns))return c.columns[a].getPattern();return null};c.getColumnType=function(a){if(b(a,c.columns))return c.columns[a].getType();return null};c.getValue=function(a,e){if(b(a,c.rows)&&b(e,c.columns))return c.rows[a].getCell(e).getValue();return null};c.getFormattedValue=function(a,e){if(b(a,c.rows)&&b(e,c.columns))return c.rows[a].getCell(e).getFormattedValue();return null};c.getTableProperties=function(){return c.getCustomProperties()};c.getTableProperty=function(a){return c.getCustomProperties().getItem(a)};
c.setTableProperties=function(a){c.getCustomProperties().clear();c.setCustomProperties(a)};c.setTableProperty=function(a,b){c.getCustomProperties().setItem(a,b)};c.setCell=function(a,e,f,d,g){if(b(a,c.rows)&&b(e,c.columns)&&(a=c.rows[a].getCell(e),a.value=f,a.formattedValue=d,g instanceof mx.types.HashMap))for(f=0;f<g.length;f++)a.setCustomeProperty(g.keys[f],g.getItem(g.keys[f]))};c.setRowProperties=function(a,b){c.rows[a]._customProperties!=null&&c.rows[a]._customProperties.clear();c.rows[a].setCustomProperties(b)};
c.setRowProperty=function(a,b,e){c.rows[a].setCustomeProperty(b,e)};c.setColumnLabel=function(a,b){c.columns[a].setLabel(b)};c.setColumnProperties=function(a,b){c.columns[a]._customProperties!=null&&c.columns[a]._customProperties.clear();c.columns[a].setCustomProperties(b)};c.setColumnProperty=function(a,b,e){c.columns[a].setCustomeProperty(b,e)};c.getColumnProperty=function(a,b){return c.columns[a].getCustomProperty(b)};c.getColumnProperties=function(a){return c.columns[a].getCustomProperties()};
c.toJSON=function(){var a={};a.rows=c.rows;a.cols=c.columns;if(c._customProperties!=null&&c._customProperties.length>0){a.p={};for(var b=0;b<c._customProperties.length;b++)a.p.key=c._customProperties.values[b]}return a};c.endOfClass=function(a){if(c.__class__.caller!=$extend&&c.canConstruct()){a=a[0];if($.isPlainObject(a)){var b=typeof c.on=="function",f;for(f in a){var d=a[f];if(b&&typeof(c[f]=="object")&&typeof d=="function"&&f.startsWith("on"))c.on(f.substr(2),d);else f=="rows"?(d=i(d),c.rows=
d):f=="columns"||f=="cols"?(d=e(d),c.columns=d):c[f]=d;a[f]=null}}c.constructed=!0}return c};c.endOfClass(arguments);return c};
mx.datas.DataRow=function(){var a=$extend(mx.datas.DataObject);a.table=null;a.cells=[];a.getRowIndex=function(){return a.table?a.table.getRowIndex(a):-1};a.getCells=function(){return a.cells.slice(0,a.cells.length)};a.setCells=function(b){a.cells=[];a.addCells(b)};a.getCell=function(b){if($.isNumeric(b)&&b>-1&&b<a.cells.length)return a.cells[b];return null};a.addCell=function(b){a.insertCell(a.cells.length,b)};a.addCells=function(b){a.insertCells(a.cells.length,b)};a.insertCell=function(b,e){$isEmpty(e)?
e=new mx.datas.DataCell:$instanceOf(e,mx.datas.DataCell)||(e=new mx.datas.DataCell(e));a.cells.insert(b,e)};a.insertCells=function(b,e){if($isNumber(e))for(var g=0;g<e;g++)a.insertCell(b+g);else if($isArray(e))for(g=0;g<e.length;g++)a.insertCell(b+g,e[g])};a.removeCell=function(b){$isNumber(b)&&b>-1&&b<a.cells.length?a.cells.splice(b,1):$instanceOf(b,mx.datas.DataCell)&&a.cells.splice(a.cells.indexOf(b),1)};a.remove=function(){a.table&&a.table.removeRow(a)};var g={};g.endOfClass=a.endOfClass;a.endOfClass=
function(b){var e=b;if(b.length==1&&$.isPlainObject(b[0]))"cells"in b[0]?(e=b[0].cells,g.endOfClass(b)):!("v"in b[0])&&!("value"in b[0])&&(e=[],g.endOfClass(b));$.isArray(b[0])&&(e=b[0]);if(e.length>0)for(b=0;b<e.length;b++){var i=new mx.datas.DataCell;if($.isPlainObject(e[b])){if($notEmpty(e[b].value))i.value=e[b].value;else if($notEmpty(e[b].v))i.value=e[b].v;i.formattedValue=e[b].formattedValue||e[b].f;i.valueType=e[b].valueType||e[b].vt}else i.value=e[b];a.cells[b]=i}};a.endOfClass(arguments);
return a};
mx.datas.DataColumn=function(){var a=$extend(mx.datas.DataObject);a.id=null;a.type=null;a.label=null;a.pattern=null;a.getId=function(){return a.id};a.setId=function(b){a.id=b};a.getType=function(){return a.type};a.setType=function(b){a.type=b};a.getLabel=function(){return a.label};a.setLabel=function(b){a.label=b};a.getPattern=function(){return a.pattern};a.setPattern=function(b){a.pattern=b};var g={};g.endOfClass=a.endOfClass;a.endOfClass=function(b){$.isArray(b[0])&&(b=b[0]);$.isPlainObject(b[0])?g.endOfClass(b):
b.length>1&&(a.setId(b[0]),a.setLabel(b[1]),b.length>2?a.setType(b[2]):b.length>3&&a.setPattern(b[3]));if(typeof a.id==="string")a.id=a.id.toUpperCase()};a.endOfClass(arguments);return a};
mx.datas.DataCell=function(){var a=$extend(mx.datas.DataObject);a.value=null;a.formattedValue=null;a.valueType="string";a.getValue=function(){return a.value};a.setValue=function(g){a.value=g};a.getValueType=function(){return typeof a.value};a.getFormattedValue=function(){return a.formattedValue};a.isNull=function(){return a.value===null};a.toString=function(){return $notEmpty(a.value)?a.value.toString():a.value};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.editors.ComboEditor");$import("mx.editors.ListEditor");$import("mx.types.HashMap");
mx.editors.AutoCompleteEditor=function(){function o(){a.$input.show();a.$hintInput.hide();a.$input.focus()}function p(b){q=b.keyCode;switch(b.keyCode){case e.DOWN:b.preventDefault();d.visible?d.moveNext():k(!0);break;case e.UP:b.preventDefault();d.visible?d.moveRrev():k(!0);break;case e.PAGEDOWN:b.preventDefault();d.visible?d.pageDown():k(!0);break;case e.PAGEUP:d.visible?d.pageUp():k(!0);break;case a.multiSelect&&a.multipleSeparator==","&&e.COMMA:case e.TAB:case e.RETURN:b.preventDefault();r();break;
case e.ESC:a.hideDropDown(200);break;default:clearTimeout(m),m=setTimeout(k,a.delay)}}function s(b,c){var j=null;if(c&&c.length)for(var h=0;h<c.length;h++)if(c[h][a.displayMember].toLowerCase()==b.toLowerCase()){j=c[h];break}j?a.setValue(j[a.valueMember],j[a.displayMember],!0):a.setValue(null,!0)}function r(){if($notEmpty(d.selection)){var b=d.selection.value,c=d.getItemByValue(b).text;a.setValue(b,c,!0)}n(!0)}function w(){r()}function l(b){if(!b)return[""];if(!a.multiSelect)return[$.trim(b)];return $.map(b.split(a.multipleSeparator),
function(a){return $.trim(b).length?$.trim(a):null})}function k(b){if(q==e.DEL)a.hideDropDown(100);else{var c=a.$input.val();if(b||c!=t){t=c;if(a.multiSelect)b=l(c),b.length==1?c=b[0]:(b=a.$input.selection().start,b=b==c.length?l(c):l(c.replace(c.substring(b),"")),c=b[b.length-1]);c.length>=a.minChars?(a.matchCase||(c=c.toLowerCase()),u(c,x,n)):a.hideDropDown(100)}}}function x(b,c){$isArray(c)&&c.length>0?(a.markError(!1),d.setItems(c),a.dropDown(100)):n()}function n(b){clearTimeout(m);d.deselectAll();
a.hideDropDown(100);a.mustMatch?a.search():a.markError(!b,mx.msg("NOT_MATCHED"))}function u(b,c,j){a.matchCase||(b=b.toLowerCase());var h=a.cache.load(b);h&&h.length?c(b,h):$isString(a.url)?v.get(null,$.extend({term:b,limit:a.maxItems},a.params),function(a){a.successful?c(b,a.resultValue):mx.indicate(a.type,a.resultHint)}):(a.value=null,d.clearItems(),j())}function y(){var b=$extend(MXComponent),a={};b.owner=null;b.data={};b.length=0;a.init=b.init;b.init=function(){a.init()};b.load=function(a){if(!b.owner.cacheLength||
!b.length)return null;if(!b.owner.url&&b.owner.matchContains){var c=[],d;for(d in b.data)if(d.length>0){var e=b.data[d];$.each(e,function(d,f){b._matchSubset(f[b.owner.displayMember],a)&&c.push(f)})}return c}else if(b.data[a])return b.data[a];else if(b.owner.matchSubset)for(d=a.length-1;d>=b.owner.minChars-1;d--)if(e=b.data[a.substr(0,d)])return c=[],$.each(e,function(d,f){b._matchSubset(f[b.owner.displayMember],a)&&(c[c.length]=f)}),c;return null};b.clear=function(){b.data={};b.length=0};b.add=function(a,
c){b.length>b.owner.cacheLength&&b.clear();b.data[a]||b.length++;b.data[a]=c};b._matchSubset=function(a,c){b.owner.matchCase||(a=a.toLowerCase());var d=a.indexOf(c);if(d==-1)return!1;return d==0||b.owner.matchContains};b.populate=function(){for(var a=b.owner.data,c=0,d={"":[]},e=a.length,g=0;g<e;g++){var f=a[g],i={};$isString(f)?(i[b.owner.valueMember]=f,i[b.owner.displayMember]=f):$.isPlainObject(f)&&(i=$clone(f));f=b.owner.matchCase?i[b.owner.displayMember].charAt(0):i[b.owner.displayMember].charAt(0).toLowerCase();
d[f]||(d[f]=[]);d[f].push(i);c++<b.owner.maxItems&&d[""].push(i)}$.each(d,function(a,c){b.add(a,c)})};b.endOfClass(arguments);return b}function z(){var b=$extend(mx.editors.ListEditor),a={};b.selectFirst=!0;a.init=b.init;b.init=function(){a.init();b.$e.addClass("dropDown");b.$e.addClass("listEditor");b.$e.addClass("mx")};a.setItems=b.setItems;b.setItems=function(d){a.setItems(d);b.selectFirst&&b.selectItem(b.items[0],!0)};b.moveSelect=function(a){a=b.items.indexOf(b.selection)+a;a<0?a=0:a>b.items.length-
1&&(a=b.items.length-1);b.items.slice(0,a);b.$e.find("ul");b.selectItem(b.items[a],!0);b.selection.$e.scrollIntoView()};b.moveNext=function(){$isEmpty(b.selection)&&b.selectItem(b.items[0],!0);b.moveSelect(1)};b.moveRrev=function(){$isEmpty(b.selection)&&b.selectItem(b.items[b.items.length-1],!0);b.moveSelect(-1)};b.pageUp=function(){b.selectItem(b.items[0],!0);b.selection.$e.scrollIntoView()};b.pageDown=function(){b.selectItem(b.items[b.items.length-1],!0);b.selection.$e.scrollIntoView()};b.endOfClass(arguments);
return b}var a=$extend(mx.editors.ComboEditor),g={};a.allowEditing=!0;a.url=null;a.params=null;a.data=null;a.selectFirst=!0;a.multiSelect=!1;a.displayMember="text";a.valueMember="value";a.delay=10;a.maxItems=100;a.minChars=1;a.mustMatch=!1;a.matchContains=!1;a.matchSubset=!0;a.matchCase=!0;a.cache=null;a.cacheLength=10;a.multipleSeparator=",";a.dropDownMinHeight=24;a.dropDownMaxHeight=200;var v=null,d=null,e={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},
q=null,m,t=null;g.init=a.init;a.init=function(){g.init();v=new mx.rpc.RESTClient({baseUrl:$isString(a.url)?a.url:null});a.$input.off("change",a._input_change);a.cache=new y({owner:a});!$isString(a.url)&&$notEmpty(a.data)&&a.cache.populate();a.setReadOnly(a.readOnly)};g.setHint=a.setHint;a.setHint=function(b){$notEmpty(b)&&!a.readOnly&&a.allowEditing&&g.setHint(b)};g.setAllowEditing=a.setAllowEditing;a.setAllowEditing=function(b){g.setAllowEditing(b);b&&!a.readOnly?(a.$input.on("keydown",p),$notEmpty(a.$hintInput)&&
a.$hintInput.focus(o)):(a.$input.off("keydown",p),a.$e.off("click",a._dropDownButton_click),$notEmpty(a.$hintInput)&&a.$hintInput.off("focus",o))};a.search=function(){$.each(l(a.$input.val()),function(a,c){u(c,s,s)})};a.appendItems=function(b){a.data=b;a.cache.populate()};a._initDropDownControl=function(){if(a.dropDownControl==null){var b={visible:!1};b.displayMember=a.displayMember;b.valueMember=a.valueMember;b.selectFirst=a.selectFirst;d=new z(b);d.on("itemclick",w);a.dropDownControl=d}};a._afterDropDown=
function(){a.$input.focus();a.dropDownControl.$e.scrollTop(0)};g._resetDropDownControl=a._resetDropDownControl;a._resetDropDownControl=function(){g._resetDropDownControl();var b=d.items.length*18+2;if(b<a.dropDownMinHeight)b=a.dropDownMinHeight;else if(b>a.dropDownMaxHeight)b=a.dropDownMaxHeight;d.resizeTo(a.$e.width(),b)};a.endOfClass(arguments);return a};$ns("mx.editors");
mx.editors.CheckEditor=function(){var a=$extend(mx.editors.Editor),c={};a.caption=null;a.displayCaption=!0;a.checkedValue="T";a.uncheckedValue="F";a.$span=$("<span id='text'/>");c.init=a.init;a.init=function(){c.init();a.$e.addClass("checkEditor");a.$e.append("<span id=img/>");a.$e.append(a.$span);a.$e.userSelectable(!1);a.$e.children("span").click(a._checkEditor_click);a.setCaption(a.caption);a._initDefaultValue();a.setReadOnly(a.readOnly)};a.setCaption=function(b){a.caption=b;b==null||!a.displayCaption?
a.$span.remove():(a.$span.text(a.caption),a.$e.append(a.$span))};c.setValue=a.setValue;a.setValue=function(b,d){c.setValue(b,d);var e=$isEqual(a.value,a.checkedValue);a.$e.toggleClass("checked",e)};a.isChecked=function(){return a.getValue()==a.checkedValue};a._parseValue=function(b){return a.checkedValue!=null&&a.uncheckedValue!=null&&b==null?null:a.checkedValue==b?a.checkedValue:a.uncheckedValue};a._checkEditor_click=function(){if(!a.isReadOnly()&&a.enabled){var b=$isEqual(a.value,a.checkedValue)?
a.uncheckedValue:a.checkedValue;a.setValue(b,!0)}};a.reset=function(b){a.setValue(null,b)};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.editors.CheckEditor");
mx.editors.CheckListEditor=function(){function e(b){if($isBoolean(b))return parseBoolean(b)?mx.msg("CHECKED_VALUE"):mx.msg("UNCHECKED_VALUE");for(var d=0;d<a.items.length;d++)if(b==a.items[d].value)return a.items[d].text;return b}function i(b){a.type=="radio"&&$notEmpty(f)&&f.setChecked(f==b.target,!1);if(!a.items.contains(b.target))a.items.add(b.target),a.items["#"+b.target.value]=b.target;if(b.target.checked)f=b.target;a.refreshValue();a.trigger("itemchanged",{item:b.target})}var a=$extend(mx.editors.Editor),
g={};a.columns=3;a.enabled=!0;a.items=[];a.valueSeparator=",";a.type="checkbox";a.width="100%";a.height="auto";var h=a.onitemchanged=null,f=null;g.init=a.init;a.init=function(){if($.isIE67()&&a.width=="100%")a.width="auto";g.init();a.$e.addClass("checkListEditor");a.type=="radio"&&a.$e.addClass("radio");h=$("<table>");var b=$("<colgroup></colgroup>");h.append(b);for(var d=0;d<a.columns;d++){var c=$("<col></col>");b.append(c)}a.resizeTo(a.width,a.height);a.$e.append(h);$notEmpty(a.items)&&a.items.length>
0&&(a.setItems(a.items),$isEmpty(a.value)&&a.refreshValue());a._initDefaultValue();a.readOnly==!0&&a.setReadOnly(a.readOnly);h.userSelectable(!1)};a.setEnabled=function(b){if(typeof b!="undefined")a.enabled=b,$.each(a.items,function(b,c){$instanceOf(c,mx.editors.CheckListItem)&&c.setEnabled(a.enabled)})};a.setReadOnly=function(b){if(typeof b!="undefined")a.readOnly=b,$.each(a.items,function(b,c){$instanceOf(c,mx.editors.CheckListItem)&&c.setReadOnly(a.readOnly)})};a.getItem=function(b){if($isEmpty(b))return null;
return a.items["#"+b]};a.appendItems=function(b){for(var d=0;d<b.length;d++)a.appendItem(b[d])};a.appendItem=function(b,d){if($notEmpty(a.items["#"+d])||$notEmpty(a.items["#"+b.value]))throw Error(mx.err("DUPLICATED_ITEM",[$notEmpty(d)?d:b.value]));var c=null;typeof b=="string"?c=new mx.editors.CheckListItem({caption:b,value:d,readOnly:a.readOnly,enabled:a.enabled,onchanged:i}):$.isPlainObject(b)?(c=$.extend(!0,{},b,{caption:b.text,readOnly:a.readOnly,enabled:a.enabled,onchanged:i}),c=new mx.editors.CheckListItem(c)):
$instanceOf(b,mx.editors.CheckListItem)&&(c=b,c.setEnabled(a.enabled),c.setReadOnly(a.readOnly));a.items.contains(c)||(a.items.add(c),a.items["#"+c.value]=c);var e=null;(a.items.length-1)%a.columns==0?(e=$("<tr>"),h.append(e),e=e[0]):e=h.find("tr:last")[0];e.insertCell(e.cells.length).appendChild(c.$e[0]);return c};a.setItems=function(b){$isArray(b)&&(a.clear(),a.appendItems(b))};a.getCheckedItems=function(){for(var b=[],d=a.items.length,c=0;c<d;c++)a.items[c].checked&&b.add(a.items[c]);return b};
a.checkItem=function(b){a.type=="radio"&&$notEmpty(f)&&f.setChecked(b==f,!0);b.setChecked(!0,!0)};a.uncheckItem=function(a){a.setChecked(!1,!0)};a.checkAll=function(){if(a.type!="radio")for(var b=a.items.length,d=0;d<b;d++)a.items[d].setChecked(!0,!0)};a.uncheckAll=function(){if(a.type!="radio")for(var b=a.items.length,d=0;d<b;d++)a.items[d].setChecked(!1,!0)};a.clear=function(){a.items=[];h.find("tbody").empty()};g.setValue=a.setValue;a.setValue=function(b,d){g.setValue(b,d);a.refreshCheckState()};
a.reset=function(b){a.setValue(null,b)};a.refreshCheckState=function(){var b=a.items,d=a.value;if($isEqual(a.type,"radio",!0))$.each(b,function(b,c){c.setChecked(a._isEqual(c.value,d),!1);c.checked&&(f=c)});else{var c=[];$notEmpty(d)&&(c=d.split(a.valueSeparator));$.each(b,function(a,b){b.setChecked(c.contains(b.value),!1)})}};a.refreshValue=function(){var b=a.items,d=null;if($isEqual(a.type,"radio"))$.each(b,function(a,b){if(b.checked)d=b.value});else{var c=[];$.each(b,function(a,b){b.checked&&c.add(b.value)});
c.length>0&&(d=c.join(a.valueSeparator))}g.setValue(d,!0)};a._formatValue=function(b){if(b==null)return"";for(var d=null,b=d=$isArray(b)?b:$isString(b)?b.split(a.valueSeparator!=null?a.valueSeparator:","):[b],d=null,d=a.valueSeparator!=null?a.valueSeparator:",",c=[],f=0;f<b.length;f++)c.add(e(b[f]));return c.length>0?c.join(d):b};a.endOfClass(arguments);return a};
mx.editors.CheckListItem=function(){var e=$extend(mx.editors.CheckEditor);e.checked=!1;var i=!0;e.setChecked=function(a,g){if(e.checked!=a||i)i=!1,e.checked=a,e.$e.toggleClass("checked",e.checked),g&&e.trigger("changed")};e.isChecked=function(){return e.checked};e.toggleChecked=function(a){e.setChecked(!e.checked,a)};e.setValue=function(a){e.value=a};e.setText=function(a){e.text=a;e.setValue(a)};e._checkEditor_click=function(){!e.isReadOnly()&&e.enabled&&(e.type=="radio"&&e.checked||e.setChecked(!e.checked,
!0))};e.endOfClass(arguments);return e};$ns("mx.editors");$import("mx.editors.Editor");$import("mx.lib.jquery-mousewheel");
mx.editors.ComboEditor=function(){function h(){a.$input&&(a.allowEditing==!1?(a.$input.attr("readOnly",!0),a.$input.attr("tabIndex",-1)):(a.$input.removeAttr("readOnly"),a.$input.removeAttr("tabIndex")))}function m(){a.allowEditing?(a.$hintInput.hide(),a.$input.show(),a.$input.focus()):a.$hintInput.blur()}function i(){a.$input.blur()}function j(){a.droppedDown||a._toggleInputStatus()}function n(b){var c=a.validType;a.validType=null;a.setValue(null,!0);a.trigger("deleted");a.validType=c;a.hideDropDown(a.speed);
b.cancelBubble=!0;b.stopPropagation()}function k(b){b=b.target;a.dropDownControl&&!a.contains(b)&&(a.hideDropDown(a.speed),$(document).off("click mousedown",k))}function l(b){b=b.target;a.dropDownControl&&!$.contains(a.dropDownControl.$e.get(0),$(b).get(0))&&(a.hideDropDown(a.speed),$(document).off("mousewheel",l))}var a=$extend(mx.editors.Editor),c={};a.width=145;a.hint=null;a.allowEditing=!1;a.textTransform=null;a.allowDropDown=!0;a.droppedDown=!1;a.dropDownAnimation="slideDown";a.speed=200;a.dropDownControl=
null;a.postponesDropDown=!1;a.$input=$("<input type='text'>");a.$dropDownButton=$("<a href='javascript:void(0)' id=dropDownButton><span/></a>");var f=$("<div id=deleteContainer><span/></div>"),g=a.$hintInput=null;a.ondropdown=null;a.ondeleted=null;c.init=a.init;a.init=function(){if(a.height>21)a.height=21;$.isIE67()&&(a.height-=2);c.init();a.$e.addClass("comboEditor");g=$("<div id=inputContainer/>");g.append(a.$input);a.$e.append(g);a.$e.append(a.$dropDownButton);f.attr("title",mx.msg("CLEAR_VALUE"));
$.browser.msie||(a.$e.userSelectable(!1),a.$input.userSelectable(!0));a.$input.change(a._input_change);a.postponesDropDown||a._initDropDownControl();!a.readOnly&&$notEmpty(a.hint)&&a.setHint(a.hint);a.setAllowEditing(a.allowEditing);a.setAllowDropDown(a.allowDropDown);a._initDefaultValue();a.displayValue!=null&&(a.setDisplayValue(a.displayValue),delete a.displayValue);a.setReadOnly(a.readOnly);h()};a.setHint=function(b){if($isEmpty(a.$hintInput))a.$hintInput=$("<input type='text' class='hint'>"),
g.append(a.$hintInput),a.$hintInput.userSelectable(!1),a.$hintInput.focus(m);a.hint=b;a._toggleInputStatus()};a.setAllowEditing=function(b){a.allowEditing=b;a.$e.toggleClass("allowEditing",a.allowEditing);h();a.allowEditing==!1?(a.$input.on("focus",i),a.$input.off("blur",j)):(a.$input.off("focus",i),a.$input.on("blur",j));a.$e.off("click");a.$dropDownButton.off("click");if(a.allowEditing)a.$dropDownButton.on("click",a._dropDownButton_click);else a.$e.on("click",a._dropDownButton_click);!a.allowEditing&&
a.nullable!=!1?(a.$e.append(f),f.click(n)):f.remove()};a.setAllowDropDown=function(b){a.allowDropDown=b;a.$dropDownButton.toggle(a.allowDropDown);a.allowDropDown?a.$("#inputContainer").css("right",null):a.$("#inputContainer").css("right",0)};c.setValue=a.setValue;a.setValue=function(b,d,e){a.allowEditing&&$isString(b)&&($isEqual(a.textTransform,"lowercase",!0)?b=b.toLowerCase():$isEqual(a.textTransform,"uppercase",!0)&&(b=b.toUpperCase()));d==null&&e==null?c.setValue(b):$isBoolean(d)&&e==null?c.setValue(b,
d):d!==void 0&&e===void 0?(c.setValue(b),a.setDisplayValue(d)):$isBoolean(e)&&(c.setValue(b,e),a.setDisplayValue(d));a._toggleInputStatus()};a.setDisplayValue=function(b){a.$input.val(b);a.text=b};c.contains=a.contains;a.contains=function(b){return a.dropDownControl!=null&&(c.contains(b)||$.contains(a.dropDownControl.$e.get(0),$(b).get(0)))};a.dropDown=function(b){if(!a.isReadOnly()&&a.enabled){b==null&&(b=0);var c={cancel:!1};a.trigger("dropdown",c);if(!c.cancel&&(a._resetDropDownControl(),a.dropDownControl!=
null))a._beforeDropDown(),a.$e.addClass("droppedDown"),a.droppedDown=!0,a.$e.dropDown(a.dropDownControl.$e,{speed:b,animation:a.dropDownAnimation},a._afterDropDown),a.dropDownControl.visible=!0}};a.hideDropDown=function(b){b==null&&(b=0);if(a.dropDownControl!=null)a.droppedDown?a.dropDownControl.$e.fadeOut(b):a.dropDownControl.$e.hide(),a.dropDownControl.visible=!1;a.droppedDown=!1;a.$e.removeClass("droppedDown");a._toggleInputStatus()};c.dispose=a.dispose;a.dispose=function(){c.dispose();if(a.dropDownControl&&
a.dropDownControl.$e)a.dropDownControl.$e.data("control",null),a.dropDownControl.$e.remove(),a.dropDownControl=null};a._toggleInputStatus=function(){$isEmpty(a.$hintInput)||($isEmpty(a.value)&&$notEmpty(a.hint)&&!a.droppedDown?(a.$hintInput.val(a.hint),a.$input.hide(),a.$hintInput.show()):(a.$input.show(),a.$hintInput.hide()))};a._initDropDownControl=function(){};a._resetDropDownControl=function(){a.dropDownControl==null&&a._initDropDownControl()};a._beforeDropDown=function(){};a._afterDropDown=function(){};
a._dropDownButton_click=function(){a.droppedDown?a.hideDropDown():(a.dropDown(a.speed),$(document).on("click mousedown",k),$(document).on("mousewheel",l))};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.editors.EditorFactory");
mx.editors.ComplexConditionEditor=function(){function g(){if(!a.isReadOnly()&&a.enabled){var c=$("<tr></tr>"),b=null,b=a.editorType=="TextEditor"?a.stringComboEditorItem:a.notStringComboEditorItem,d=new mx.editors.DropDownEditor({displayMember:"name",valueMember:"value",width:"100px",items:b});d.setValue(b[0].value);d.$e.find("div#deleteContainer").remove();b=$("<td  width='110px' class='complexTd'></td>");b.append(d.$e);a.comboEditors.add(d);c.append(b);d={width:"185px"};$.extend(d,a.editorOptions);
d.width="185px";d=mx.editors.EditorFactory.createEditor(a.editorType,d);a.editors.add(d);b=$("<td class='complexTd'></td>");b.append(d.$e);c.append(b);d=$("<div class='delBtn'></div>");d.on("click",i);b=$("<td align='center' width='25px'  style='padding-right:5px;' class='complexTd'></td>");b.append(d);c.append(b);a._$table.find("tr#btnTr").before(c);c=a.$e.height();c+=28;a.$e.height(c)}}function i(c){if(!a.isReadOnly()&&a.enabled){var b=$(c.target).parent("td").parent("tr"),d=b.index()-1;a.editors.removeAt(d);
a.comboEditors.removeAt(d);b.remove();b=a.$e.height();b-=24;a.$e.height(b);c.stopPropagation(c)}}function h(c){if(!a.isReadOnly()&&a.enabled){for(var b="",d=0;d<a.editors.length;d++)if(a.editors[d].value!=null&&a.editors[d].value!=="")var e=a.comboEditors[d].value,b=d==a.editors.length-1?b+e+a.editors[d].value:b+e+a.editors[d].value+",";a._$composeRadioEditor.value=="or"&&(b="["+b+"]");a.setValue(b);c&&a.trigger("sureclick")}}var a=$extend(mx.editors.Editor),f={};a.width="325px";a.height="62px";a.editors=
[];a.comboEditors=[];a.editorType="TextEditor";a._$table=null;a._$composeRadioEditor=null;a._$columnComposeRadioEditor=null;a.onsureclick=null;a.stringComboEditorItem=[{name:mx.msg("LIKE"),value:"^"},{name:mx.msg("START_WITH"),value:"*"},{name:mx.msg("END_WITH"),value:"&"},{name:mx.msg("EQUALS"),value:"="},{name:mx.msg("NOT_EQUAL"),value:"<>"}];a.notStringComboEditorItem=[{name:mx.msg("EQUALS"),value:"="},{name:mx.msg("NOT_EQUAL"),value:"<>"},{name:mx.msg("GT"),value:">"},{name:mx.msg("GTE"),value:">="},
{name:mx.msg("LT"),value:"<"},{name:mx.msg("LTE"),value:"<="}];f.init=a.init;a.init=function(){f.init();a.$e.addClass("complexConditionEditor");a._$table=$("<table><tr id='columnJunctionTr'></tr><tr id='btnTr'></tr></table>");a.$e.append(a._$table);g();a._$columnComposeRadioEditor=new mx.editors.CheckListEditor({type:"radio",items:[{text:mx.msg("AND"),value:"and",checked:!0},{text:mx.msg("OR"),value:"or"}]});var c=$("<td colspan='2' class='complexTd'></td>"),b=$("<td class='complexTd'></td>");b.append("<span>"+
mx.msg("COLUMN_OPERATOR")+":</span>");c.append(a._$columnComposeRadioEditor.$e);a._$table.find("tr#columnJunctionTr").append(b).append(c);a._$composeRadioEditor=new mx.editors.CheckListEditor({type:"radio",items:[{text:mx.msg("AND"),value:"and",checked:!0},{text:mx.msg("OR"),value:"or"}]});c=$("<td class='complexTd'></td>");c.append(a._$composeRadioEditor.$e);var b=$("<td colspan='2' align='right' style='padding-right:5px;' class='complexTd'></td>"),d=new mx.controls.Button({width:60,text:mx.msg("OK")});
d.on("click",h);var e=new mx.controls.Button({width:60,text:mx.msg("NEW")});e.on("click",g);b.append(e.$e);b.append(d.$e);a._$table.find("tr#btnTr").append(c).append(b)};a.getJsonValue=function(){h(!1);for(var c={},b=[],d=0;d<a.editors.length;d++)if(a.editors[d].value!=null&&a.editors[d].value!==""){var e={};e.fieldName=a.name;e.operator=a.comboEditors[d].value;e.value=a.editors[d].value;b.add(e)}c.criterions=b;c.junction=a._$composeRadioEditor.value;c.columnJunction=a._$columnComposeRadioEditor.value;
return c};f.reset=a.reset;a.reset=function(c){for(var b=0;b<a.editors.length;b++)a.editors[b].reset(c);f.reset(c)};a.setEnabled=function(c){a.enabled=c===!0?!0:!1;for(c=0;c<a.editors.length;c++){var b=a.editors[c];b&&b.setEnabled(a.enabled)}for(c=0;c<a.comboEditors.length;c++)(b=a.comboEditors[c])&&b.setEnabled(a.enabled);a._$columnComposeRadioEditor&&a._$columnComposeRadioEditor.setEnabled(a.enabled);a._$composeRadioEditor&&a._$composeRadioEditor.setEnabled(a.enabled)};a.setReadOnly=function(c){a.readOnly=
c===!0?!0:!1;for(c=0;c<a.editors.length;c++){var b=a.editors[c];b&&b.setReadOnly(a.readOnly)}for(c=0;c<a.comboEditors.length;c++)(b=a.comboEditors[c])&&b.setReadOnly(a.readOnly);a._$columnComposeRadioEditor&&a._$columnComposeRadioEditor.setReadOnly(a.readOnly);a._$composeRadioEditor&&a._$composeRadioEditor.setReadOnly(a.readOnly)};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.editors.ComplexConditionEditor");$import("mx.editors.ComboEditor");
mx.editors.ConditionFilterEditor=function(){function d(){a.setValue(a.complexConditionEditor.value,!0);a.hideDropDown()}var a=$extend(mx.editors.ComboEditor),b={};a.postponesDropDown=!0;a.editorType="TextEditor";a.complexConditionEditor=null;a.dropDownControl=null;a.dropDownAnimation="none";b.init=a.init;a.init=function(){b.init()};a.getJsonValue=function(){if($notEmpty(a.complexConditionEditor))return a.complexConditionEditor.getJsonValue()};a._initDropDownControl=function(){if(a.dropDownControl==
null)a.complexConditionEditor=new mx.editors.ComplexConditionEditor({name:a.name,editorType:a.editorType,editorOptions:a.editorOptions,onsureclick:d}),a.dropDownControl=a.complexConditionEditor,a.dropDownControl.$e.addClass("mx"),a.dropDownControl.$e.addClass("dropDown")};b.reset=a.reset;a.reset=function(c){$notEmpty(a.complexConditionEditor)&&a.complexConditionEditor.reset(c);b.reset(c)};b._resetDropDownControl=a._resetDropDownControl;a._resetDropDownControl=function(){b._resetDropDownControl(!1)};
a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.utils.SymbolUtil");
mx.editors.CustomEditor=function(){function e(){!a.isReadOnly()&&a.enabled&&a.trigger("click")}function f(){a.setValue(a.$input.val(),!0)}var a=$extend(mx.editors.Editor),d={};a.width=200;a.buttonCaption="dialog";a.onclick=null;a.useSymbol=!0;a.enabledInput=!0;a.$inputContainer=$("<div id=inputContainer/>");a.$input=$("<input id='customInput' type='text'>");a.$button=$("<input id='customBtn' type='button'/>");a.valueFormatter=null;d.init=a.init;a.init=function(){d.init();a.$e.addClass("customEditor");
var b=$("<div id=customButton></div>");a.$inputContainer.append(a.$input);b.append(a.$button);a.$e.append(a.$inputContainer);a.$e.append(b);b=a.text;a._initDefaultValue();a.text!=null&&a.setText(b);b=a.buttonCaption;if(a.useSymbol){var c=mx.utils.SymbolUtil.getSymbol(b);c!=null&&!$isIE()?(a.$button.addClass("symbolFont"),b=c.text):c!=null&&$isIE()&&(b="\u00b7\u00b7\u00b7")}else b="\u00b7\u00b7\u00b7";a.$button.val(b);a.$button.on("click",e);a.$input.on("blur",f);a._refreshState()};a.resetInput=function(b){a.$inputContainer.empty();
if($isArray(b))for(var c=0;c<b.length;c++)a.$inputContainer.append(b[c]);else a.$inputContainer.append(b)};a.setEnabledInput=function(b){a.enabledInput=b?!0:!1;a._refreshState()};d.setText=a.text;a.setText=function(b){a.text=b;a.$input.val(b)};d._formatValue=a._formatValue;a._formatValue=function(b){var c="";return c=$isFunction(a.valueFormatter)?a.valueFormatter(b):d._formatValue(b)};a._refreshState=function(){a.$button!=null&&(a.$input.attr("disabled",!a.enabled),a.$input.attr("readonly",a.isReadOnly()),
a.$input.attr("disabled",!a.enabledInput),a.$button.attr("disabled",!a.enabled))};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.controls.Calendar");$import("mx.editors.ComboEditor");$import("mx.controls.Button");
mx.editors.DateTimeEditor=function(){function i(){a.setValue($format(a.calendar.value,a.formatString),!0);a.calendar.$e.hide()}function j(){a.calendar.$e.hide()}function k(){a.setValue(a.calendar.value,!0);a.hideDropDown()}function l(){$isEmpty(a.calendar.value)?(a.calendar.value=g!=null?g:new Date,a.setValue($format(a.calendar.value,"yyyy-MM-dd HH:mm:ss"),!0)):a.setValue($format(a.calendar.value,"yyyy-MM-dd")+" "+$format(parseDate(a.calendar.timeEditor.value),"HH:mm:ss"),!0);a.hideDropDown()}function m(){var b=
a.calendar.$e.find("table>tbody>tr>td#monthLabel").html().trim(),e=b.split("-")[0],b=b.split("-")[1],c=a.calendar.$e.find("table>tbody>tr>td.selected").html(),c=$notEmpty(c)&&$notEmpty(c.trim())?c.trim():(new Date).getDate();a.setValue(new Date(e,b-1,c),!0);a.hideDropDown()}function n(){a.hideDropDown()}var a=$extend(mx.editors.ComboEditor),f={};a.postponesDropDown=!0;var h=!1;a.valueType="date";var d=a.formatString="yyyy-MM-dd";a.displayTime=!1;a.calendar=null;a.dropDownControl=null;a.dropDownAnimation=
"none";f.init=a.init;f.setFormatString=a.setFormatString;a.init=function(){a.setFormatString(a.formatString);f.init();a.$e.addClass("dateTimeEditor");a.$e.attr("id","dateTimeEditor")};var o=/^y{4}(-|\/)m{1,2}(-|\/)d{1,2} h{1,2}:m{1,2}(:s{1,2})?$/i,p=/^y{4}(-|\/)m{1,2}((-|\/)d{1,2})?$/i;a.setFormatString=function(b){if($isEmpty(b)||!$isString(b))d="yyyy-MM-dd";else{if(b.indexOf("ss")>-1)d="yyyy-MM-dd HH:mm:ss",a.valueType="datetime",a.displayTime=!0;else if(b.indexOf("mm")>-1)d="yyyy-MM-dd HH:mm",
a.valueType="datetime",a.displayTime=!0;else if(b.indexOf("HH")>-1||b.indexOf("hh")>-1)d="yyyy-MM-dd HH",a.valueType="datetime",a.displayTime=!0;else if(b.indexOf("dd")>-1)d="yyyy-MM-dd";else if(b.indexOf("MM")>-1)d="yyyy-MM",a.displayTime=!1,h=!0;else if(b.indexOf("yyyy")>-1)d="yyyy",a.displayTime=!1,h=!0;if(a.validType!=null)a.validType=o.test(b)?"DATETIME":p.test(b)?"DATE":null;a.$input.val($format(parseDate(a.value),d));f.setFormatString(d)}};f.setValue=a.setValue;a.setValue=function(a,e){typeof a==
"string"?a=parseDate(a):$isNumber(a)&&(a=new Date(a));var c=Date.format(a,d),c=parseDate(c);f.setValue(c,e)};f.setAllowEditing=a.setAllowEditing;a.setAllowEditing=function(b){f.setAllowEditing(b);a.allowEditing==!0&&(a.$input.on("focus",function(){a.value==null?a.setValue(new Date,!0):(a.text=Date.format(parseDate(a.value),d),a.$input.val(a.text))}),a.$input.on("blur",function(){a.$input.val(a.text)}))};var g=null;a._initDropDownControl=function(){if(a.dropDownControl==null){a.calendar=new mx.controls.Calendar({value:a.value||
new Date,formatString:a.displayTime?"yyyy-MM-dd HH:mm:ss":a.formatString,displayTime:a.displayTime,ondateclick:k});var b=a.calendar.$e.find("tr#timeRow");if(b.size()>0){var e=b.find("td");e.attr("colspan","5");e.find("div.upDownEditor").css("left","15px");e=new mx.controls.Button({text:mx.msg("OK"),width:"40px",onclick:l});e.$e.find("input").css("padding",0);var c=$("<td/>");c.attr("colspan","2");c.append(e.$e);b.append(c)}else{a.calendar.$e.find("#monthLabel").on("click",function(){a.calendar.$e.find("div[id=ymSelector]").addClass("ymSelector_displayTime")});
if(h)a.calendar.$e.find("#ok_YM").click(i),a.calendar.$e.find("#cancel_YM").click(j);else{e=$("<tr>");e.height(30);var b=new mx.controls.Button({text:mx.msg("OK"),width:"60px",onclick:m}),c=new mx.controls.Button({text:mx.msg("CANCEL"),width:"60px",onclick:n}),d=$("<td colspan=3 align=right/>"),f=$("<td colspan=3 align=left/>");d.append(b.$e);f.append(c.$e);e.append(d).append("<td>").append(f)}a.calendar.$e.find("table").append(e)}}g=new Date;a.dropDownControl=a.calendar;a.dropDownControl.$e.addClass("mx");
a.dropDownControl.$e.addClass("dropDown")};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.editors.ComboEditor");$import("mx.editors.ListEditor");$import("mx.rpc.RESTClient");
mx.editors.DropDownEditor=function(){function r(b){a.dropDownControl==null&&a._initDropDownControl();var c=a.$input.val();if($notEmpty(c)){a.droppedDown||a._dropDownButton_click();var d=s(c);A(d)}else t();if($notEmpty(a.value)&&(b.keyCode==8||b.keyCode==46)){var d=s(c),b=u(a.value),e=[];$(b).each(function(a,b){$(d).each(function(){if(b==this.value)return e.add(b),!1})});p=!1;a.setValue(e.join(a.valueSeparator),!0);p=!0}}function B(){t()}function A(b){a.listEditor&&$(a.listEditor.items).each(function(){this.$e.hide()});
$(b).each(function(){this.$e.show()})}function t(){a.listEditor&&$(a.listEditor.items).each(function(){this.$e.show()})}function s(a){if($isEmpty(a))return[];a=a.trim();if(j.hasItem(a))return j.getItem(a);else{var c=C(a);j.clear();j.setItem(a,c);return c}}function C(b){if($isEmpty(b))return[];var b=b.trim(),c=u(b),d=[];a.listEditor&&$(a.listEditor.items).each(function(a,b){$(c).each(function(){if(this!=""&&b.text.indexOf(this)>-1)return d.add(b),!1})});return d}function u(b){var c=[];a.displayCheckBox?
c=b.split(a.valueSeparator):c.add(b);return c}function k(){f=[];$(a.items).each(function(){var a={};a[v]=this.text;a[w]=this.value;f.add(a)})}function q(){var b=a.listEditor.$list.get(0);if(b.clientWidth>0){var c=a.listEditor.$e.get(0),d=x(),c=b.clientWidth<b.scrollWidth||c.clientWidth<c.scrollWidth?21:0;d+=c;a.listEditor.setHeight(d);c>0&&b.scrollWidth!==b.clientWidth&&a.listEditor.$list.width(b.scrollWidth+2);a.dropDownControl.setHeight(d+l)}}function D(b,c){var d=[];if(c){var e=c.split(a.valueSeparator);
$(e).each(function(a,c){$(b).each(function(){if(c==this[m])return d.add(this),!1})})}return d}function n(b,c){var d=D(b,c);if(d.length>0){var e=[],f=[];$(d).each(function(){e.add(this[a.displayMember]);f.add(this[a.valueMember])});a.setValue(f.join(a.valueSeparator),e.join(a.valueSeparator),m==a.valueMember?!1:!0)}}function y(){a._initDropDownControl();a.url==null&&$isArray(f)&&f.length>0&&(a.listEditor.setItems(f),n(f,a.value));a.isLoaded=!1;a._resetDropDownControl()}function E(){h=$("<div class='checkEditor'><span id=img/><span id=text/></div>");
h.children("span").click(F);h.find("#text").text(mx.msg("SELECTALL"));return h}function G(){var b=$("<div id=closeDiv><span id='closetext'/></div>");b.click(function(){a.hideDropDown(a.speed)});b.find("#closetext").text(mx.msg("CLOSE"));return b}function F(){!a.isReadOnly()&&a.enabled&&h&&o()}function o(b,c){c==void 0&&(c=!0);var d=h.hasClass("checked");b==void 0&&(b=!d);h.toggleClass("checked",b);b!=d&&c&&(b?a.listEditor.checkAll():a.listEditor.uncheckAll(),z())}function x(){var b=a.items.length*
18+5;if(b===5)b=a.dropDownMinHeight;else if(b>a.dropDownMaxHeight)b=a.dropDownMaxHeight;return b}function z(){var b=null;if(a.listEditor.displayCheckBox)var b=a.listEditor.getCheckedValues(),c=a.valueSeparator,b=c==null?b:b.join(c);else b=a.listEditor.value,a.hideDropDown();a.setValue(b,!0)}function H(b){if($isBoolean(b))return parseBoolean(b)?mx.msg("CHECKED_VALUE"):mx.msg("UNCHECKED_VALUE");if(a.listEditor==null)for(var c=0;c<a.items.length;c++){if(b==a.items[c][a.valueMember])return a.items[c][a.displayMember]}else for(c=
0;c<a.items.length;c++)if(b==a.items[c].value)return a.items[c].text;return b}var a=$extend(mx.editors.ComboEditor),g={};a.items=[];var f=[];a.valueSeparator=",";a.displayCheckBox=!1;a.displayCloseButton=!0;a.displayNullValue=!1;a.dropDownMinHeight=95;a.dropDownMaxHeight=200;a.displayMember="text";a.autoMatchInput=!1;var v=null;a.valueMember="value";var w=null;a.url=null;a.isLoaded=!1;a.listEditor=null;a.dropDownControl=null;var l=0,m;g.init=a.init;a.init=function(){l=a.displayCheckBox||a.displayCloseButton?
25:0;m=a.valueMember;v=a.displayMember;w=a.valueMember;a.postponesDropDown&&$(a.items).each(function(){var b={};b[a.displayMember]=this[a.displayMember];b[a.valueMember]=this[a.valueMember];f.add(b)});g.init();a.differDisplayValue=a.displayMember!=a.valueMember};g.setAllowEditing=a.setAllowEditing;a.setAllowEditing=function(b){a.autoMatchInput?g.setAllowEditing(!0):a.displayMember!=a.valueMember?g.setAllowEditing(!1):g.setAllowEditing(b);a.autoMatchInput&&(a.$dropDownButton.off("click"),a.$e.off("click"),
a.$input.off("keyup",r),a.$e.on("click",a._dropDownButton_click),a.$input.on("keyup",r),a.on("dropdown",B))};var p=!0,j=new mx.types.HashMap;g.hideDropDown=a.hideDropDown;a.hideDropDown=function(b){g.hideDropDown(b);a.autoMatchInput&&a.isValidate&&(b=a._formatValue(a.value),a.$input&&a.$input.val(b))};a.setUrl=function(b){if(!$isEmpty(b)&&$notEqual(a.url,b))a.url=b,$isEmpty(i)&&(i=new mx.rpc.RESTClient({baseUrl:b})),i.setBaseUrl(b),a.isLoaded=!1};a.appendItem=function(b,c){var d=arguments.length,
e=null;d==1?$.isPlainObject(b)?e=b:$instanceOf(b,mx.editors.ListItem)?e=b:(e={},e[a.valueMember]=b,e[a.displayMember]=b):d==2&&(e={},e[a.valueMember]=c,e[a.displayMember]=b);if(a.dropDownControl==null)a.items.add(e),f.add(e);else if(e=a.listEditor.appendItem(e),e!=null)a.items=a.listEditor.items,q(),k();return e};a.appendItems=function(b){a.dropDownControl==null&&a._initDropDownControl();a.listEditor.appendItems(b);a.items=a.listEditor.items;q();k()};a.setItems=function(b){a.dropDownControl==null&&
a._initDropDownControl();a.listEditor.setItems(b);a.items=a.listEditor.items;q();k()};a.removeItem=function(b){if(a.dropDownControl!=null){var c=null;$isNumber(b)||$isString(b)?c=a.items[b]:$isObject(b)&&(c=b);a.listEditor.removeItem(c);if(c!=null){a.items.remove(c);a.items[c.value]=null;delete a.items[c.value];for(b=0;b<f.length;b++)if(f[b][a.displayMember]==c.text&&f[b][a.valueMember]==c.value){f.removeAt(b);break}}}};a.setValueMember=function(b){if(b!=null&&b!=a.valueMember)m=a.valueMember,a.valueMember=
b,a.differDisplayValue=a.displayMember!=a.valueMember,a.dropDownControl!=null?(a.listEditor.valueMember=b,y()):a.url==null&&$isArray(f)&&f.length>0&&n(f,a.value)};a.setDisplayMember=function(b){if(b!=null&&b!=a.displayMember)a.displayMember=b,a.differDisplayValue=a.displayMember!=a.valueMember,a.dropDownControl!=null?(a.listEditor.displayMember=b,y()):a.url==null&&$isArray(f)&&f.length>0&&n(f,a.value)};a.clearItems=function(){if(a.dropDownControl!=null)a.listEditor.clearItems(),a.items=[],f=[]};a._initDropDownControl=
function(){if(a.dropDownControl==null){var b={};b.displayMember=a.displayMember;b.valueMember=a.valueMember;if($isArray(a.items))f=b.items=a.items;if(a.displayCheckBox)b.displayCheckBox=a.displayCheckBox;if(a.displayNullValue)b.displayNullValue=a.displayNullValue;if(a.valueSeparator!=null)b.valueSeparator=a.valueSeparator;a.dropDownControl=new mx.containers.Container({id:"dropDownEditorContainer"});a.dropDownControl.$e.addClass("mx");a.listEditor=new mx.editors.ListEditor(b);a.dropDownControl.addControl(a.listEditor);
a.listEditor.$e.css("overflow-x","auto");a.items=a.listEditor.items;k();a.listEditor.on("selectionchanged",z);if(a.displayCheckBox||a.displayCloseButton){$container=$("<table id='checkTable'><tr><td align=right></td></tr></table>");var b=$container.find("td:last"),c=$("<table><tr><td/><td/></tr></table>");b.append(c);a.displayCheckBox&&c.find("td:first").append(E());a.displayCloseButton&&c.find("td:last").append(G());a.dropDownControl.$e.append($container)}}a.dropDownControl.$e.addClass("dropDown");
a.dropDownControl.$e.hide()};var h=null;g._refreshState=a._refreshState;a._refreshState=function(){g._refreshState();a.displayCheckBox&&a.dropDownControl&&h&&h.toggleClass("disabled",!a.enabled||a.isReadOnly())};g.setValue=a.setValue;a.setValue=function(b,c,d){g.setValue(b,c,d);a.listEditor!=null&&a.listEditor.setValue(b);if(a.displayCheckBox&&a.dropDownControl)b=a.listEditor.getCheckedValues(),c=a.listEditor.items,b.length==0?o(!1):c.length==b.length?o(!0):o(!1,!1)};a.setText=function(b,c){var d;
a:{for(d=0;d<a.items.length;d++)if(b==a.items[d].text){d=a.items[d].value;break a}d=b}a.setValue(d,c)};a._formatValue=function(b){if(!p)return a.$input.val();if(b==null)return"";for(var c=null,b=c=$isArray(b)?b:$isString(b)?b.split(a.valueSeparator!=null?a.valueSeparator:","):[b],c=null,c=a.valueSeparator!=null?a.valueSeparator:",",d=[],e=0;e<b.length;e++)d.add(H(b[e]));return d.length>0?d.join(c):b};var i=null;g._resetDropDownControl=a._resetDropDownControl;a._resetDropDownControl=function(){g._resetDropDownControl();
if(($isEmpty(a.items)||a.items.length==0)&&a.url!=null&&!a.isLoaded){i==null&&(i=new mx.rpc.RESTClient({baseUrl:a.url}));var b=i.getSync("");if(b.successful){var c=[];a.isLoaded=!0;a.clearItems();typeof b.resultValue!="undefined"&&typeof b.resultValue.items!="undefined"?(c=b.resultValue.items,a.setItems(b.resultValue.items)):(c=b.resultValue,a.setItems(b.resultValue));n(c,a.value)}}b=a.$e.width();c=x();a.listEditor.resizeTo(b-1,c);a.dropDownControl.resizeTo(b,c+l);a.isValidate&&a.listEditor.setValue(a.value)};
a._afterDropDown=function(){if(a.items.length>0){var b=a.listEditor.$e.get(0),c=a.listEditor.$list.get(0),b=c.clientWidth<c.scrollWidth||b.clientWidth<b.scrollWidth?21:0,d=a.listEditor.height+b;a.listEditor.setHeight(d);b>0&&c.scrollWidth!==c.clientWidth&&a.listEditor.$list.width(c.scrollWidth+2);a.dropDownControl.setHeight(d+l)}a.listEditor.selection!=null&&a.listEditor.selection.scrollIntoView()};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.datacontrols.DataGrid");$import("mx.editors.ComboEditor");
mx.editors.DropDownGridEditor=function(){function h(){a.$input.show();a.$hintInput.hide();a.$input.focus()}function f(b){if($isBoolean(b))return parseBoolean(b)?mx.msg("CHECKED_VALUE"):mx.msg("UNCHECKED_VALUE");if(a.dataGrid&&$instanceOf(a.dataGrid,mx.datacontrols.DataGrid)&&a.dataGrid.items.length>0){var c=mx.utils.JsonUtil.getItems(a.dataGrid.entityContainer.data,a.valueColumn,b);if(c&&$isArray(c))return c=c[0][a.displayColumn],a.appendDict(b,c),c}if(a.dicts&&a.dicts.length>0)for(c=0;c<a.dicts.length;c++)if(a.dicts[c].value==
b)return a.dicts[c].text;return b}function g(){if(a.value!=null)if(a.displayCheckBox){var b=a.value;if(a.dropDownControl){var c=[b];a.displayCheckBox&&(c=b.split(a.valueSeparator));b=a.dataGrid.items;if(a.dataGrid!=null&&b.length>0)for(var d=0;d<b.length;d++)c.indexOf(b[d].getValue(a.valueColumn))>-1?b[d].setChecked(!0):b[d].setChecked(!1)}}else if(c=a.value,a.dropDownControl&&(b=a.dataGrid.items,a.dataGrid!=null&&b.length>0))for(d=0;d<b.length;d++)if(c==b[d].getValue(a.valueColumn)){a.dataGrid.selectItem(d,
!1);break}}function i(){g();a.setValue(a.value)}function j(b){var c=a.value?a.value.split(a.valueSeparator):[];if(b.item&&b.item.checked)c.add(b.item.getValue(a.valueColumn));else if(b.item&&!b.item.checked)c.remove(b.item.getValue(a.valueColumn));else if(b=a.dataGrid.getCheckedIDs(),b.length>0)for(var d=0;d<b.length;d++)c.indexOf(b[d])==-1&&(c=c.concat(b[d]));else for(b=0;b<a.dataGrid.items.length;b++)c.remove(a.dataGrid.items[b].getValue(a.valueColumn));a.setValue(c.join(a.valueSeparator),!0,!0)}
function k(){var b=null;(b=a.dataGrid.selection)?(b=b.getValue(a.valueColumn),a.setValue(b,!0,!0)):$notEmpty(a.value)&&a.setValue(a.value)}var a=$extend(mx.editors.ComboEditor),e={};a.dataGrid=null;a.valueSeparator=",";a.displayCheckBox=!1;a.displayColumn="text";a.valueColumn="id";a.url=null;a.dicts=null;a.dropDownHeight=300;a.dropDownWidth=400;a.dropDownControl=null;e.init=a.init;a.init=function(){e.init();a.differDisplayValue=a.valueColumn!=a.displayColumn};a._initDropDownControl=function(){if(a.dropDownControl==
null){a.dropDownContainer=new mx.containers.Container;a.dropDownContainer.$e.addClass("mx");a.dropDownContainer.$e.resizable(!0);a.dropDownContainer.$e.css("overflow","auto");if($.isPlainObject(a.dataGrid)){if(a.displayCheckBox==!0)a.dataGrid.displayCheckBox=a.displayCheckBox;a.dataGrid=new mx.datacontrols.DataGrid(a.dataGrid)}else if(a.url)a.dataGrid=new mx.datacontrols.DataGrid({displayCheckBox:a.displayCheckBox,baseUrl:a.url,primaryKey:a.valueColumn});a.displayCheckBox=a.dataGrid.displayCheckBox;
a.dataGrid.on("load",i);a.dataGrid.load();if(a.dataGrid.displayCheckBox)a.dataGrid.on("itemchecked",j);else a.dataGrid.on("selectionchanged",k);a.dropDownContainer.addControl(a.dataGrid)}a.dropDownControl=a.dropDownContainer;a.dropDownControl.$e.addClass("dropDown");a.dropDownControl.$e.hide()};e.setValue=a.setValue;a.setValue=function(b,c,d){e.setValue(b,c);if($isEmpty(d)||!d)b?g():(a.dataGrid.uncheckAll(),a.dataGrid.deselectAll())};e._resetDropDownControl=a._resetDropDownControl;a._resetDropDownControl=
function(){e._resetDropDownControl();a.dropDownContainer.resizeTo(a.dropDownWidth,a.dropDownHeight);a.dataGrid.resizeTo("100%","100%")};e.setHint=a.setHint;a.setHint=function(b){e.setHint(b);a.$hintInput.focus(h)};a.appendDicts=function(b){if($.isArray(b))for(var c=0;c<b.length;c++)a.appendDict(b[c])};a.appendDict=function(b,c){if(!a.dicts)a.dicts=[];if($isString(c)&&$isString(b)&&$notEmpty(c)&&$notEmpty(b)){for(var d=!1,e=0;e<a.dicts.length;e++)if(b==a.dicts[e].value){d=!0;break}d||a.dicts.add({value:b,
text:c})}else $.isPlainObject(b)&&a.appendDict(b.value,b.text)};a._formatValue=function(b){if(b==null)return"";var c;if(a.displayCheckBox){c=b;var d=[];$isString(b)&&(c=b.split(a.valueSeparator));if($.isArray(c))for(b=0;b<c.length;b++)d.add(f(c[b]));c=d.join(a.valueSeparator)}else c=f(b);return c};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.containers.Container");$import("mx.datacontrols.DataTree");$import("mx.editors.ComboEditor");
mx.editors.DropDownTreeEditor=function(){function i(b){var c=a.dataTree?a.dataTree.getNode(b):null;if(c==null)if($notEmpty(a.url)&&$notEmpty(a.valueType)){c=null;try{if(c=g.getSync("/"+b+"/self",{itemType:a.valueType}),$notEmpty(c)&&c.successful){var c=c.resultValue,d;$isEmpty(c.nodes)?d=c:c.nodes.length>0&&(d=c.nodes[0]);c=$notEmpty(d)&&$notEmpty(d.text)?d.text:""}else mx.indicate("error",c.resultHint)}catch(e){}return c}else{if(a.dicts!=null)for(c=0;c<a.dicts.length;c++)if(d=a.dicts[c],$.isPlainObject(d)&&
b==d.value)return d.text;if(a.nodes&&(c=j(a.nodes,b)))return c.text;return b}else return c.text}function j(a,c){if($.isArray(a))for(var d=0;d<a.length;d++){var e=a[d];if(e.id==c)return e;else if(e.childNodes&&(e=j(e.childNodes,c)))return e}return null}function l(){if(a.displayCheckBox){var b=a.renderValue(a.dataTree);a.setValue(b.join(a.valueSeparator),!0,!0)}}function m(){if(!a.displayCheckBox){var b=a.renderValue(a.dataTree);a.setValue(b,!0,!0)}}function n(){if(!a.displayCheckBox&&$notEmpty(a.dataTree.selection))a.dataTree.selection.markAsSelected(!1),
a.dataTree.selection=null;else for(var b=a.dataTree.getCheckedNodes(),c=0;c<b.length;c++)b[c].setChecked(!1,!0)}function k(){try{a.dataTree.load(function(){h=!0})}catch(b){throw Error(b);}}var a=$extend(mx.editors.ComboEditor),f={};a.dataTree=null;a.nodes=[];a.valueSeparator=",";a.valueType=null;a.dicts=null;a.displayCheckBox=!1;a.url=null;a.value=null;a.dropDownHeight=200;a.dropDownWidth=null;a.dropDownMinHeight=200;a.dropDownControl=null;a.autoLoad=!0;a.valueFormatter=null;var h=!1;f.init=a.init;
a.init=function(){a.url&&a.setUrl(a.url);a.differDisplayValue=!0;f.init()};var g=new mx.rpc.RESTClient;a.setUrl=function(b){if(!$isEmpty(b))a.url=b,h=!1,a.dataTree&&a.dataTree.entityContainer&&a.dataTree.entityContainer.setBaseUrl(b),$notEmpty(g)&&g.setBaseUrl(b)};a._initDropDownControl=function(){if(a.dropDownControl==null){var b={};if($isBoolean(a.displayCheckBox))b.displayCheckBox=a.displayCheckBox;b.autoSelect=!1;a.dropDownContainer=new mx.containers.Container;a.dropDownContainer.$e.attr("id",
"dropDownTreeEditor");a.dropDownContainer.$e.addClass("mx");b.baseUrl=a.url;b.showDefaultContextMenu=!1;a.dataTree=new mx.datacontrols.DataTree(b);a.setUrl(a.url);if(a.nodes.length>0)a.dataTree.entityContainer.type="local",a.dataTree.entityContainer.data=a.nodes;a.dataTree.$e.resizable(!0);if(a.displayCheckBox)a.dataTree.$e.on("click","#checkBox",l);else a.dataTree.on("selectionchanged",m);a.autoLoad&&k();a.dropDownContainer.addControl(a.dataTree)}a.on("deleted",n);a.dropDownControl=a.dropDownContainer;
a.dropDownControl.$e.addClass("dropDown");a.dropDownControl.$e.hide()};f._resetDropDownControl=a._resetDropDownControl;a._resetDropDownControl=function(){f._resetDropDownControl();h||k();if($notEmpty(a.value)){var b=a.value.split(a.valueSeparator),c;try{for(var d=0,e=b.length;d<e;d++)if(c=a.dataTree.getNode(b[d]),$notEmpty(c))for(a.displayCheckBox?c.setChecked(!0,!0):c.select();c.parent&&!c.parent.expanded;)if(c.parent.expand(),$notEmpty(c.parent))c=c.parent}catch(g){mx.showerror(mx.msg("ERR_LOADING")+
g.message)}}b=$isNumber(a.dropDownWidth)?a.dropDownWidth:a.$e.width();c=a.dropDownHeight<a.dropDownMinHeight?a.dropDownMinHeight:a.dropDownHeight;a.dropDownContainer.resizeTo(b,c);$.isIE67()?a.dataTree.resizeTo(b-4,c-4):a.dataTree.resizeTo("100%","100%")};f.reset=a.reset;a.reset=function(b){f.reset(b);a.dataTree!=null&&a.dataTree.clearChecked!=void 0&&a.dataTree.clearChecked()};f.setValue=a.setValue;a.setValue=function(b,c,d){f.setValue(b,c);if($isEmpty(d)||!d)if(a.displayCheckBox){if(a.dataTree){c=
[];$isArray(b)?c=b:$isString(b)&&(c=b.split(a.valueSeparator));for(b=0;b<c.length;b++)d=a.dataTree.getNode(c[b]),d!=null&&d.setChecked(!0,!0)}}else b=a.dataTree?a.dataTree.getNode(b):null,b!=null&&a.dataTree.selectNode(b)};a.renderValue=function(b){var c=null;a.displayCheckBox?(b=[],a.displayCheckBox&&(b=a.dataTree.getCheckedNodeIDs())):b=b.selection.id;return b};a.appendDicts=function(b){if($.isArray(b))a.dicts=b};a.appendDict=function(b,c){if($isEmpty(a.dicts))a.dicts=[];$.isPlainObject(b)?a.dicts.add(dict):
$isString(b)&&$isString(c)&&$notEmpty(b)&&$notEmpty(c)&&a.dicts.add({value:c,text:b})};a._formatValue=function(b){if(b==null)return"";if($isFunction(a.valueFormatter))return a.valueFormatter(b);var c="";if(a.dropDownControl!=null&&a.displayCheckBox){c=null;$isArray(b)?c=b:$isString(b)&&(c=b.split(a.valueSeparator));for(var b=c,c=[],d,e=0;e<b.length;e++)d=i(b[e]),$notEmpty(d)&&c.add(d);c=c.join(a.valueSeparator)}else c=i(b);return c};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.utils.Validator");
mx.editors.Editor=function(){function k(b){if($isString(b)){var c=function(a,b,c,g){if(a.indexOf(g)!=-1)return a.replace(b,c);return a},b=b.replace(/[^(yyyy)(MM)(dd)(HH)(mm)(ss)]/g,""),b=c(b,"yyyy","yyyy-","MM"),b=c(b,"MM","MM-","dd"),b=c(b,"dd","dd ","HH"),b=c(b,"HH","HH:","mm");return b=c(b,"mm","mm:","ss")}else return a.valueType=="date"?"yyyy-MM-dd":"yyyy-MM-dd HH:mm:ss"}function i(){a.$input!=null&&($instanceOf(a,mx.editors.TextEditor)||$instanceOf(a,mx.editors.ComboEditor))&&a._toggleInputStatus()}
var a=$extend(mx.controls.Control),h={};a.height=21;a.tipPosition="bottom";a.value=null;a.text=null;a.readOnly=!1;a.valueType="string";a.max=null;a.min=null;a.validType=null;a.validOptions=null;a.isValidate=!0;a.validateMessage=null;a.formatString=null;a.differDisplayValue=!1;a.$input=null;a.onchanging=null;a.onchanged=null;a.enableEventOnInit=!0;var j=!1;h.init=a.init;a.init=function(){h.init();mx.utils.Validator=new mx.utils.ValidatorClass};a._initDefaultValue=function(b){if(!j){var c=a.value;if(!$isEmpty(c))a.value=
null,b?a.setValue(c,!0):a.setValue(c,!1),b=a.isValidate,a.markError(!1),a.isValidate=b;j=!0}};h.setEnabled=a.setEnabled;a.setEnabled=function(b){h.setEnabled(b);a._toggleTip();a._refreshState()};a._toggleTip=function(){a.readOnly||!a.enabled?$notEmpty(a.value)&&a.$e.attr("title",a.text):a.$e.removeAttr("title")};a.isReadOnly=function(){return a.readOnly};a.setReadOnly=function(b){typeof b=="undefined"&&(b=!0);a.readOnly=b;a._toggleTip();a._refreshState()};a.getValue=function(){return a.value};a.setValue=
function(b,c){c==null&&(c=!1);var e=a._validateValue(b);g=$.extend(!0,{},e);var d=e.value,c=c&&!a._isEqual(a.value,d),f={cancel:!1,newValue:d};if(c&&(a.trigger("changing",f),f.cancel)){a.$input.val(a.text);return}var h=a._formatValue(d);a.text=h;a.$input!=null&&!a._isEqual(h,a.$input.val())&&a.$input.val(a.text);if(e.successful){a.markError(!1);if(!a._isEqual(a.value,d)||$notEmpty(d))a.value=$isDate(d)&&$isFunction(mx.editors.DateTimeEditor)&&$instanceOf(a,mx.editors.DateTimeEditor)?$format(d,k(a.formatString)):
$isDate(d)&&$isFunction(mx.editors.TimeEditor)&&$instanceOf(a,mx.editors.TimeEditor)?a.valueType=="string"?a.text:$format(d,"yyyy-MM-dd HH:mm:ss"):d,c&&a.trigger("changed",f);i()}else{if(a.validateMessage!=null)e.hint=a.validateMessage;a.markError(!0,e.hint)}};a.setText=function(b,c){a.setValue(b,c)};a.setFormatString=function(b){a.formatString=b};a.focus=function(){a.$input!=null&&window.setTimeout(function(){try{a.$input.focus()}catch(b){}},200)};a.select=function(){a.$input!=null&&window.setTimeout(function(){var b=
a.$input.get(0);b!=null&&b.select!=null&&b.select()},200)};a.blur=function(){if(a.$input!=null)try{a.$input.get(0).blur()}catch(b){}};var g=null;a.markError=function(b,c){a.isValidate=b==!0?!1:!0;b?(a.$e.addClass("error"),c!=null&&(c+=$notEmpty(a._outOfLengthTip)?"\n"+a._outOfLengthTip:"",a.$e.toolTip({content:c,defaultPosition:a.tipPosition}))):a.$e&&(a.$e.removeClass("error"),a.$e.toolTip("destroy"))};a._parseValue=function(b){if(b==null)return null;switch(a.valueType?a.valueType.toLowerCase():
"string"){case "int":var c=parseInt(b,10);if(isNaN(c))throw Error(mx.err("INPUT_ILLEGAL_INT",[b]));return c;case "number":case "float":case "double":c=parseFloat(b,10);if(isNaN(c))throw Error(mx.err("INPUT_ILLEGAL_NUM",[b]));return c;case "date":case "datetime":if(b==null||b.trim()=="")return null;c=parseDate(b);if(isNaN(c))throw Error(mx.err("INPUT_ILLEGAL_DATE_TIME",[b]));return c;case "time":if(b==null||b.trim()=="")return null;c="";if(b.length<=2){c=parseInt(b,10);if(isNaN(c)||c>23||c<0)c=0;c+=
":0:0"}else{c=parseDate(b);if(c==null)throw Error(mx.err("INPUT_ILLEGAL_TIME",[b]));c=$format(c,"HH:mm:ss")}var e=null;a.value==null?(e=new Date,e.setFullYear(1900,0,1)):e=$isDate(a.value)?a.value:parseDate(a.value);e=$format(e,"yyyy-MM-dd");c=parseDate(e+" "+c);if(c!=null)return c;else throw Error(mx.err("INPUT_ILLEGAL_TIME",[b]));default:return b}};a._formatValue=function(b){return $format(b,a.formatString)};a._isEqual=function(a,c){return $isEqual(a,c)};a.customValidate=null;a.validate=function(b){var c=
a._validateValue(g?g._value:a.value);b==!0&&c.successful==!1&&a.markError(!c.successful,c.hint);return c};a._clearPreValidateState=function(){if(!a.isValidate){var b=a.isValidate;a.reset(!0);a.markError(!1);a.isValidate=b}g=null};a._validateValue=function(b){var c={successful:!1};c.value=b;c._value=b;if($isString(b))try{c.value=a._parseValue(b)}catch(e){return c.value=b,c.successful=!1,c.hint=e.message,c}else if(a.valueType=="date"&&$isNumber(b))c.value=new Date(b);if(g&&g._value===c._value)return g;
var d,f={};if($isFunction(a.customValidate))f.custom=a.customValidate;if(a.nullable==void 0)a.nullable=!0;mx.utils.Validator.required=!a.nullable;f.self=mx.utils.Validator.validate;if(a.maxLength&&a.maxLength>0)if(a.validOptions){if(a.validOptions.maxLength==void 0)a.validOptions.maxLength=a.maxLength}else a.validOptions={maxLength:a.maxLength};if(a.minLength&&a.minLength>0)if(a.validOptions){if(a.validOptions.minLength==void 0)a.validOptions.minLength=a.minLength}else a.validOptions={minLength:a.minLength};
$notEmpty(f.custom)&&(d=f.custom(a,b));if(!(d===!1||$.isPlainObject(d)&&d.successful===!1)){var h=a.validOptions&&a.validOptions.minLength||0;if(!a.nullable||!($isEmpty(b)&&h==0))$notEmpty(f.self)&&(d=f.self(b,a.validType,a.validOptions))}b=!0;f="";if($isBoolean(d))d||(b=!1);else if($.isPlainObject(d)&&typeof d.successful!="undefined"&&!d.successful)b=!1,f=d.hint;if(!b)return c.successful=!1,c.hint=f,c;c.successful=!0;return c};a._refreshState=function(){a.$input!=null&&(a.$input.attr("disabled",
!a.enabled),a.$input.attr("readonly",a.isReadOnly()),a.isReadOnly()===!0?a.$input.attr("tabIndex",-1):a.$input.removeAttr("tabIndex"));a.$e.toggleClass("disabled",!a.enabled);a.$e.toggleClass("readOnly",a.isReadOnly())};a._input_change=function(){try{a.$input!=null&&a.setText(a.$input.val(),!0)}catch(b){mx.indicate("error",b.message)}};a.reset=function(b){b==null&&(b=!1);g=null;a.$input!=null&&a.$input.val("");if(!a._isEqual(a.value,null))a.value=null,b&&a.trigger("changed");a.value=null;i()};a.endOfClass(arguments);
return a};$ns("mx.editors");$import("mx.editors.CheckEditor");$import("mx.editors.CustomEditor");$import("mx.editors.DateTimeEditor");$import("mx.editors.DropDownGridEditor");$import("mx.editors.DropDownEditor");$import("mx.editors.DropDownTreeEditor");$import("mx.editors.LabelEditor");$import("mx.editors.LinkEditor");$import("mx.editors.ListEditor");$import("mx.editors.NumberEditor");$import("mx.editors.TextEditor");$import("mx.editors.TimeEditor");$import("mx.editors.PictureEditor");$import("mx.editors.PictureManagerEditor");
$import("mx.editors.RichTextEditor");$import("mx.editors.CheckListEditor");$import("mx.editors.FileEditor");$import("mx.editors.ConditionFilterEditor");$import("mx.editors.AutoCompleteEditor");$import("mx.editors.SliderEditor");
mx.editors.EditorFactoryClass=function(){var b=$extend(MXObject);b.createEditor=function(a,b){var c=a;if($isString(a)){a.indexOf(".")==-1&&(a="mx.editors."+a);try{c=eval("("+a+")")}catch(e){throw Error(mx.err("UNKNOWN_EDITOR_TYPE",[a]));}}if(c==null)c=mx.editors.TextEditor;var d=null;$isFunction(c)&&(d=new c(b));return d};b.endOfClass(arguments);return b};mx.editors.EditorFactory=new mx.editors.EditorFactoryClass;$ns("mx.editors");$import("mx.controls.DragDataUploadControl");$import("mx.controls.DragUploadControl");$import("mx.controls.Label");$import("mx.controls.UploadControl");$import("mx.windows.WindowManager");
mx.editors.FileEditor=function(){function h(){var b={filePath:a.filePath,height:a.windowHeight-50,baseUrl:a.baseUrl,filesLimit:a.filesLimit,limitTypes:a.limitTypes,allowTypes:a.allowTypes,uploadMode:a.uploadMode,maxSize:a.maxSize,totalMaxSize:a.totalMaxSize,readOnly:a.readOnly,enabled:a.enabled,onclosed:j,onitemuploaded:k,onallitemuploaded:l,onitemuploading:m,onselectionchanged:n,context:a};if(a.type=="form"||a.type=="grid"){a.baseUrl=a.baseUrl||mx.mappath("~/../mx/servlets/dataFileUpload");var c=
null;if(a.parent&&(c=a.parent.entityContainer,$isEmpty(a.primaryKey)))a.primaryKey=c.primaryKey;if($isEmpty(a.tableName))a.tableName="temp";if($isEmpty(a.colName)&&$notEmpty(a.name))a.colName=a.name;if(c&&$isEmpty(a.pkVal))if(a.type=="form")a.pkVal=c.data[c.primaryKey];else if(a.type=="grid"&&c&&c.editingItem!=null)a.pkVal=c.editingItem[c.primaryKey];$.extend(b,{baseUrl:a.baseUrl,isVirtual:a.isVirtual,tableName:a.tableName,primaryKey:a.primaryKey,pkVal:a.pkVal,colName:a.colName})}else a.baseUrl=a.baseUrl||
mx.mappath("~/../mx/servlets/fileUpload");b.baseUrl=a.baseUrl;b.type=a.type;if(a.isAdvance)$.extend(b,{displayToolBar:!0,height:a.windowHeight-50,uploadMode:a.uploadMode,maxCount:a.filesLimit==0?-1:a.filesLimit}),a.uploadType=mx.controls.DragDataUploadControl;a.uploadControl=new a.uploadType(b);a.setValue(a.uploadControl.fileNames);a.on("click",o)}function j(){d&&(d.hide(),e&&e.activate())}function o(){if(a.getContext()&&a.getContext().windowManager)e=a.getContext().windowManager.activeWindow;f==
null&&(f=new mx.windows.WindowManager({zIndex:999999}));d=f.create({title:mx.msg("UPLOAD_TITLE"),width:a.isAdvance&&a.type!="path"?550:453,height:a.windowHeight,resizable:!1,reusable:!0,left:"center",top:"center"});d.$e.on("click",function(a){a.stopPropagation()});d.addControl(a.uploadControl);d.showDialog(a._resetText);if($notEmpty(d.$mask))d.$mask.on("click",function(a){a.stopPropagation()})}function p(b){this.func=function(){a.uploadControl.download(b)}}function q(){a.trigger("click")}function l(){a.trigger("allitemuploaded")}
function k(){a.trigger("itemuploaded")}function m(b){var c={cancel:!1,item:b.item};a.trigger("itemuploading",c);b.cancel=c.cancel}function n(b){a.trigger("selectionchanged",b)}var a=$extend(mx.editors.CustomEditor),g={};a.uploadControl=null;a.type="path";a.baseUrl=null;a.filePath=null;a.tableName="";a.primaryKey="";a.pkVal="";a.colName="";a.uploadMode="file";a.windowHeight="350";a.limitTypes="exe,bat";a.allowTypes=null;a.maxSize=-1;a.totalMaxSize=-1;a.uploadType=mx.controls.UploadControl;a.filesLimit=
0;a.isAdvance=null;a.isVirtual=!1;a.autoWrap=!1;a.onitemuploading=null;a.onselectionchanged=null;a.onitemuploaded=null;a.onallitemuploaded=null;a.ignoreGlobalSet=[];g.init=a.init;a.init=function(){g.init();a.$e.addClass("fileEditor");a.autoWrap&&a.setAutoWrap(a.autoWrap);var b;if(b=$notEmpty(mx.globalUploadMode))b=$isArray(a.ignoreGlobalSet)?a.ignoreGlobalSet.contains("globalUploadMode"):!1,b=!b;if(b&&["file","blob","uds"].contains(mx.globalUploadMode))a.uploadMode=mx.globalUploadMode;if(a.isAdvance==
null)a.isAdvance=typeof FileReader=="undefined"?!1:!0;h();a.readOnly&&a.setReadOnly(a.readOnly);$.isIE6()&&a.$e.resize(function(){var b=a.$e.find("> div#customButton");a.$inputContainer.css("width",a.$e.width()-b.outerWidth()-4)})};g.setReadOnly=a.setReadOnly;a.setReadOnly=function(b){a.$button.off();a.$button.on("click",q);g.setReadOnly(b);a.$button.removeAttr("disabled");a.uploadControl&&a.uploadControl.setReadOnly(a.readOnly)};a.setPk=function(b){a.pkVal=b;h()};a.refreshPk=function(b,c){a.uploadControl.refreshPk(b,
c)};g.setValue=a.setValue;a.setValue=function(b,c){$isEmpty(b)&&(b="");g.setValue(b,c);for(var d=[],e=b.split(";"),i=0;i<e.length-1;i++)if(e[i].length>0){var f=new mx.editors.LinkEditor({type:"text",text:e[i]+";",autoHref:!1,height:null}),h=new p(f.text);f.on("click",h.func);d.push(f.$e)}a.resetInput(d)};a.setAutoWrap=function(b){a.autoWrap=b;a.$e.toggleClass("autoWrap",a.autoWrap)};a._resetText=function(){a.uploadControl._markError(!1);a.uploadControl._removeUploadedErrorFile();var b=a.uploadControl.getUploadedNames();
a.value!=b&&a.setValue(b,!0)};var d=null,e=null,f=null;a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.controls.Label");
mx.editors.LabelEditor=function(){var a=$extend(mx.editors.Editor),d={},c=null;a.value="";a.height=null;a.textAlign="left";a.vAlign="middle";a.autoWrap=!1;a.displayInline=!1;a.showTitle=!1;a.border="1px solid #CCD0D5";d.init=a.init;a.init=function(){d.init();a.$e.addClass("labelEditor");c==null&&(c=new mx.controls.Label({width:"100%",height:"100%",autoWrap:a.autoWrap,textAlign:a.textAlign,verticalAlign:a.vAlign}),a.$e.append(c.$e));a.border&&a.setBorder(a.border);a._initDefaultValue();a.setAutoWrap(a.autoWrap);
a.setDisplayInline(a.displayInline);a.setShowTitle(a.showTitle)};d.setValue=a.setValue;a.setValue=function(b,e){d.setValue(b,e);a.text=a.value;c!=null&&a.text!=null&&c.setText(a.text)};a.setTextAlign=function(b){if($notEmpty(b)&&c!=null)a.textAlign=b,c.setTextAlign(b)};a.setVAlign=function(b){if($notEmpty(b)&&c!=null)a.vAlign=b,c.setVerticalAlign(b)};a.setDisplayInline=function(b){a.displayInline=b;a.$e.toggleClass("displayInline",a.displayInline)};a.setAutoWrap=function(b){if(c!=null)a.autoWrap=
b,a.$e.toggleClass("autoWrap",a.autoWrap),c.setAutoWrap(b)};a.setBorder=function(b){a.$e.css("border",b)};a.setShowTitle=function(b){if(a.showTitle=b)a.$e.get(0).title=a.value==null?"":a.value};a.endOfClass(arguments);return a};$ns("mx.editors");
mx.editors.LinkEditor=function(){var a=$extend(mx.editors.Editor),d={};a.type="imgText";a.autoHref=!1;a.hrefUrl=null;a.hrefType="open";a.imageKey=null;a.imageUrl=null;a.text="";a.onclick=null;d.init=a.init;a.init=function(){d.init();a.$e.addClass("linkEditor");a.setType(a.type);a._initDefaultValue();a.$e.on("click",a.triggerClick)};a.setType=function(b){a.type=b;if(a.$input!=null)a.$input.unbind(),a.$input.remove(),a.$input=null;a.$input=$("<a/>");a.type!="text"&&(a.$input.append($("<span id='img'/>")),$notEmpty(a.imageKey)?
a.setImageKey(a.imageKey):a.setImageUrl(a.imageUrl));a.type!="img"&&(a.$input.append($("<span id='text'/>")),$notEmpty(a.text)&&a.setText(a.text));a.$e.append(a.$input)};a.triggerClick=function(){if(a.enabled)if(a.autoHref){if($notEmpty(a.hrefUrl))a.hrefType=="location"?window.location.href=a.hrefUrl:a.hrefType=="open"&&window.open(a.hrefUrl)}else a.trigger("click")};a.setImageKey=function(b){a.imageKey=b;a.imageKey!=null?a.setImageUrl("$/icons/"+a.imageKey+".png"):a.setImageUrl(null)};a.setImageUrl=
function(b){a.imageUrl=b;var c=a.$input.find("#img");b==null||c.length==0?(b=mx.mappath("$/images/space.png"),c.css("background-image","url("+b+")")):c.css("background-image","url("+mx.mappath(b)+")")};d.setValue=a.setValue;a.setValue=function(b,c){d.setValue(b,c);if(!$isEmpty(b))a.text=b,a.$input.find("#text").text(a.text!=null?a.text:"")};a.endOfClass(arguments);return a};$ns("mx.editors");
mx.editors.ListEditor=function(){function b(){var c="";if(a.displayCheckBox){if(a.items!=null)for(var b=0;b<a.items.length;b++)a.items[b].checked&&(c=c+a.valueSeparator+a.items[b].value);c.length>0&&(c=c.substring(a.valueSeparator.length))}else c=a.selection==null?null:a.selection.value;return c}function i(c){if(a.displayCheckBox&&a.items!=null)for(var b=0;b<a.items.length;b++)a.items[b].checked!=c&&a.items[b].setChecked(c)}function f(c){if(a.enabled!=!1){var b={item:$(c.currentTarget).data("item")};a.selectByValue(c.currentTarget.id,
!0);a.trigger("itemclick",b);c.stopPropagation()}}function k(c){if(a.enabled!=!1){var b={item:$(c.currentTarget).data("item")};a.trigger("itemdoubleclick",b);c.stopPropagation()}}var a=$extend(mx.editors.Editor),h={};a.width="auto";a.height="100%";a.items=[];a.displayCheckBox=!1;a.displayNullValue=!1;a.selection=null;a.valueSeparator=",";a.displayMember="text";a.valueMember="value";a.onselectionchanged=null;a.onselectionchanging=null;a.onitemclick=null;a.onitemdoubleclick=null;a._nullItem=null;h.init=
a.init;a.init=function(){h.init();a.$list=$("<ul></ul>");a.$e.userSelectable(!1);a.$e.append(a.$list);a.$e.addClass("listEditor");a.$e.on("click","li",f);a.$e.on("dblclick","li",k);a.displayCheckBox&&a.$list.addClass("checkListEditor");if(a.displayNullValue)a._nullItem=new mx.editors.ListItem({value:"null",text:"",owner:a}),a._nullItem.$e.addClass("nullItem"),a._nullItem.$e.find("#text").text(mx.msg("NULLVALUE"));a.differDisplayValue=a.displayMember!=a.valueMember;if(a.items==null)a.items=[];else{var c=
a.items;a.items=[];a.setItems(c)}a._initDefaultValue();a.readOnly&&a.setReadOnly(a.readOnly)};a.appendItem=function(c,b){var d,e,g,f=arguments.length;if(f==1)if($.isPlainObject(c))e=c[a.valueMember],g=c[a.displayMember];else if($instanceOf(c,mx.editors.ListItem))e=c[a.valueMember],g=c[a.displayMember],d=c;else{if($isString(c)||$isNumber(c))g=e=c}else if(f==2&&($isString(c)||$isNumber(c)))e=b,g=c;if($notEmpty(d)){if($notEmpty(d.owner))d.owner.deselectItem(d),d.owner.items.remove(d),d.owner=a;d.initialized||
d.init()}else d=new mx.editors.ListItem({value:e,text:g,owner:a});e=!1;if(typeof d.value=="undefined")e=!0;else for(g=0;g<a.items.length;g++)if(d.value==a.items[g].value){e=!0;break}e||(a.items.add(d),a.$list.append(d.$e));return d};a.getItemByValue=function(c){c=mx.utils.JsonUtil.getItem(a.items,"value",c);if($isEmpty(c))return null;return c};a.appendItems=function(c){for(var b=0;b<c.length;b++)a.appendItem(c[b])};a.removeItem=function(c,j){var d=!1;c.checked&&(c.toggleChecked(),d=!0);a.selection==
c&&(a.deselectItem(c),d=!0);a.items.remove(c);c.$e.remove();d&&h.setValue(b(),j)};a.removeByIndex=function(c){a.removeItem(a.items[c])};a.removeByValue=function(c){c=a.getItemByValue(c);$notEmpty(c)&&a.removeItem(c)};a.clearItems=function(){for(a.deselectAll();a.items.length>0;)a.removeItem(a.items[0])};a.setItems=function(c){a.clearItems();a.displayNullValue&&a.appendItem(a._nullItem);a.appendItems(c)};a.selectItem=function(c,j){if(j){var d={cancel:!1,item:c};a.trigger("selectionchanging",d);if(d.cancel)return}a.selection!=
null&&a.selection.$e.removeClass("selected");if(c!=null)c.$e.addClass("selected"),a.selection=c,a.displayCheckBox&&a.selection.toggleChecked(),h.setValue(b(),!0),j&&a.trigger("selectionchanged")};a.selectByIndex=function(c,b){a.selectItem(a.items[c],b)};a.selectByValue=function(c,b){var d=a.getItemByValue(c);$notEmpty(d)?a.selectItem(d,b):a.value=c};a.deselectItem=function(c,b){if(c!=null){if(a.selection==c)a.selection.$e.removeClass("selected"),a.selection=null;b&&a.trigger("selectionchanged")}};
a.deselectByIndex=function(c,b){a.deselectItem(a.items[c],b)};a.deselectByValue=function(c,b){var d=a.getItemByValue(c);$notEmpty(d)&&a.deselectItem(d,b)};a.deselectAll=function(){a.selection!=null&&a.deselectItem(a.selection)};a.checkAll=function(){i(!0)};a.uncheckAll=function(){i(!1)};a.getCheckedItems=function(){var c=[];if(a.displayCheckBox&&a.items!=null)for(var b=0;b<a.items.length;b++)a.items[b].checked&&c.add(a.items[b]);return c};h.setValue=a.setValue;a.setValue=function(c,b){if(a.displayCheckBox){a.uncheckAll();
var d=[];$isArray(c)?d=c:$notEmpty(c)&&(d=c.split(a.valueSeparator));for(var e=0;e<d.length;e++){var f=a.getItemByValue(d[e]);f!=null&&f.setChecked(!0)}h.setValue(c,b)}else a.selectByValue(c,b)};a.findItemByText=function(c){for(var b=null,d=0;d<a.items.length;d++)if(a.items[d].text==c){b=a.items[d];break}return b};a.setText=function(c){var b=[];$isArray(c)?b=c:$notEmpty(c)&&(b=c.split(a.valueSeparator));for(var c="",d=0;d<b.length;d++){var e=a.findItemByText(b[d]);e!=null&&(c=c+a.valueSeparator+e.value)}c.length>
0?a.setValue(c.substring(1)):a.setValue(c)};a.getCheckedValues=function(){var c=[];if(a.displayCheckBox&&a.items!=null)for(var b=0;b<a.items.length;b++)a.items[b].checked&&c.add(a.items[b].value);return c};a.setReadOnly=function(b){typeof b=="undefined"&&(b=!0);a.readOnly=b;a.$wrap().toggleClass("disabled",a.readOnly)};h.reset=a.reset;a.reset=function(){a.uncheckAll();a.deselectItem(a.selection);h.reset()};a.endOfClass(arguments);return a};
mx.editors.ListItem=function(){var b=$extend(MXComponent),i={};b.value=null;b.text=null;b.checked=!1;b.owner=null;i.init=b.init;b.init=function(){i.init();b.$e=$("<li><a href='javascript:void(0)' style='text-decoration:none;'><span id='text'/></a></li>");b.owner!=null&&b.owner.displayCheckBox&&b.$e.find("a").prepend($("<span id=img/>"));b.text!=null&&b.setText(b.text);b.value!=null&&b.setValue(b.value);b.checked&&b.setChecked(b.checked);b.$e.data("item",b)};b.setText=function(f){b.text=f;b.$e.find("#text").text(b.text!=
null?b.text:"")};b.setValue=function(f){b.value=f;b.$e.attr("id",b.value)};b.setChecked=function(f){b.checked=f;b.$e.toggleClass("checked",b.checked)};b.toggleChecked=function(){b.owner&&b.owner.enabled&&!b.owner.readOnly&&b.setChecked(!b.checked,!0)};b.remove=function(){b.owner!=null&&b.owner.removeItem(b)};b.getIndex=function(){return b.owner!=null?b.owner.items.indexOf(b):-1};b.scrollIntoView=function(){var f=b.$e.get(0).offsetTop;b.$e.parent().scrollTop(f)};b.endOfClass(arguments);return b};$ns("mx.editors");$import("mx.editors.UpDownEditor");
mx.editors.NumberEditor=function(){function h(c){if(a.value){var b=i(a.value).split("."),b=b.length==1?0:b[b.length-1].length;if(a.increment)var d=(a.increment+"").split("."),b=Math.max(b,d.length==1?0:d[d.length-1].length);return c.toFixed(b)*1}return c}function i(a){var b=a+"";if(a=b.match(/\-*(\d+(\.\d+)*)e([\+\-])(\d+)/)){var d=a[1],e=a[3],a=a[4]*1,f=d.indexOf("."),b=d.replace(".","");if(e=="-"){f!=-1&&(a<f&&(b=b.substring(0,f-a)+"."+b.substring(f-a)),a-=f-1);for(d=0;d<a;d++)b=(d==a-1?"0.":"0")+
b}else{f!=-1&&(d=d.length-f-1,a<d&&(b=b.substring(0,f+a)+"."+b.substring(f+a)),a-=d);for(d=0;d<a;d++)b+="0"}}return b}function j(c){var b=g(a.$input.val());b.successful?a.markError(!1):a.markError(!0,b.hint);c.keyCode==13&&a.trigger("enterkeyup");return!1}function g(c){var b={successful:!0};b.value=c;if($notEmpty(c)){if($isString(c))try{b.value=a._parseValue(c)}catch(d){b.successful=!1;b.hint=d.message;c=null;if(a.validateMessage)c=a.validateMessage;else if(a.validOptions&&a.validOptions.validateMessage)c=
a.validOptions.validateMessage;b.hint=c||b.hint}if(b.successful&&a.max!=null&&b.value!=null&&b.value*1>a.max*1)b.successful=!1,b.hint=mx.err("INPUT_GREATER_THAN_MAX",[a.max]);if(b.successful&&a.min!=null&&b.value!=null&&b.value*1<a.min*1)b.successful=!1,b.hint=mx.err("INPUT_LESS_THAN_MIN",[a.min])}return b}var a=$extend(mx.editors.UpDownEditor),e={};a.valueType="int";a.min=0;a.max=9007199254740991;a.formatString=null;a.increment=1;e.init=a.init;a.init=function(){e.init();if(a.valueType!="int"&&a.valueType!=
"float"&&a.valueType!="double"&&a.valueType!="number")a.valueType="int";if(a.max==void 0)a.max=9007199254740991;if(a.min==void 0)a.min=0;if(a.editorOptions&&a.editorOptions.validOptions&&a.editorOptions.validOptions.maxValue)a.max=a.editorOptions.validOptions.maxValue;if(a.editorOptions&&a.editorOptions.validOptions&&a.editorOptions.validOptions.minValue)a.min=a.editorOptions.validOptions.minValue;if(isNaN(a.max))throw Error(mx.err("INPUT_ILLEGAL_INT",[a.max]));else if(isNaN(a.min))throw Error(mx.err("INPUT_ILLEGAL_INT",
[a.min]));else if(a.min>9007199254740991||a.max>9007199254740991)throw Error(mx.err("INPUT_GREATER_THAN_MAX",[9007199254740991]));else if(a.min<-9007199254740991||a.max<-9007199254740991)throw Error(mx.err("INPUT_LESS_THAN_MIN",[-9007199254740991]));else if(a.max<a.min)throw Error(mx.err("MIN_GREATER_THAN_MAX"));a._initDefaultValue();a.$input.on("keypress",_input_keypress);a.$input.on("keyup",j)};a.increaseValue=function(c){if(!a.isValidate||$isEmpty(a.$input.val()))a.setValue(a.min,c);else{var b=
g(h(a.value+a.increment));if(b.successful)try{a.setValue(b.value,c)}catch(d){}}};e._formatValue=a._formatValue;a._formatValue=function(c){var b=e._formatValue(c);typeof c=="number"&&!a.formatString&&(b=i(b));return b};a.declineValue=function(c){if(!a.isValidate||$isEmpty(a.$input.val()))a.setValue(a.min,c);else{var b=g(h(a.value-a.increment));if(b.successful)try{a.setValue(b.value,c)}catch(d){}}};e.setValue=a.setValue;a.setValue=function(a,b){$isEmpty(a)&&(a=null);e.setValue(a,b)};_input_keypress=
function(a){if(a.which==45)return!0;return a.which==46?!0:a.which>=48&&a.which<=57&&a.ctrlKey==!1&&a.shiftKey==!1||a.which==0||a.which==8?!0:a.ctrlKey==!0&&(a.which==99||a.which==118)?!0:!1};e._validateValue=a._validateValue;a._validateValue=function(a){var b=g(a);b.successful&&(b=e._validateValue(a));if(b.value==="")b.value=null;return b};a.endOfClass(arguments);return a};$ns("mx.editors");
mx.editors.PictureEditor=function(){function d(){a.enabled&&a.$file.trigger("click")}function e(){var b=a.$file.val(),b=b.substring(b.lastIndexOf("\\")+1);a.setValue(mx.mappath("$theme/images/"+b))}var a=$extend(mx.editors.Editor),c={};a.width="32";a.height="32";c.init=a.init;a.init=function(){c.init();a.$e.addClass("pictureEditor");a.$e.css("position","relative");a._initDefaultValue();a.$file=$("<input type='file'>");a.$file.hide();a.$file.on("change",e);a.$e.append(a.$file);a.$e.on("dblclick",d)};
c.setValue=a.setValue;a.setValue=function(b,d){if(a.$img!=null)a.$img.unbind(),a.$img.remove(),a.$img=null;a.$img=$("<img/>");a.$img.attr("height",a.height);a.$img.attr("width",a.width);a.$img.css("min-height",a.height);a.$img.css("min-width",a.width);a.$img.css("max-height",a.height);a.$img.css("max-width",a.width);$notEmpty(b)?a.$img.attr("src",mx.mappath(b)):a.$img.attr("src",mx.mappath("$theme/images/default.png"));a.$e.append(a.$img);c.setValue(b,d)};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.controls.DragDataUploadControl");$import("mx.controls.DragUploadControl");$import("mx.controls.Label");$import("mx.controls.UploadControl");$import("mx.windows.WindowManager");
mx.editors.PictureManagerEditor=function(){function a(){j[0]&&j.html("");q(!0);l(!1);m(!1);p(!1);k="empty"}function c(){var a=b.getUploadedNames();b.value!=a&&b.setValue(a,!0)}function d(a){b.getContext()&&b.getContext().windowManager?(s=b.getContext().windowManager.activeWindow,h=b.getContext().windowManager.create(mx.windows.Window,{title:mx.msg("PICTURE_EDITOR_TITLE"),width:b.windowWidth,height:b.windowHeight,resizable:!0,reusable:!0,left:"center",top:"center",onhide:n})):h=(new mx.windows.WindowManager).create({title:mx.msg("PICTURE_EDITOR_TITLE"),
width:b.windowWidth,height:b.windowHeight,resizable:!0,reusable:!0,left:"center",top:"center"});h.$e.resizable(!0,{onResize:e});h.$e.addClass("pictureManagerEditorWin");h.on("activate",f);h.on("resize",e);h.$e.on("click",function(b){b.stopPropagation()});h.addControl(b.container);l(!1);b.fileNames&&b.fileNames.indexOf(";")>-1?(q(!1),m(!0),p(!0),k="uploaded"):(q(!0),m(!1),p(!1),k="empty");var d=b.container.$e.find("#preview_container");d.length==0&&(d=$("<div id='preview_container' class='imgContainer' style='width:"+
(b.windowWidth-36)+"px;height:"+(b.windowHeight-108)+"px;'><table id='_img_table' align=center cellspacing=0 style='width:"+(b.windowWidth-36)+"px; height:"+(b.windowHeight-108)+"px;'><tr><td align=center><div id='_show_area' style='max-width:"+(b.windowWidth-36)+"px; max-height:"+(b.windowHeight-108)+"px;overflow:hidden;' align=center ></div></td></tr></table></div>"),j=d.find("#_show_area"));b.container.$e.prepend(d);b.container.$e.find(".btnAddDiv").off("click",i).on("click",i);h.showDialog(c);
if($notEmpty(h.$mask))h.$mask.on("click",function(b){b.stopPropagation()});a.stopPropagation()}function e(){setTimeout(function(){var b=h.$e.width()-36,a=h.$e.height()-108;if(b>0&&a>0){b+="px";a+="px";var d=h.$e.find("#preview_container"),c=d.find("#_img_table"),e=d.find("div#_show_area"),f=d.find("img");d.css({width:b,height:a});c.css({width:b,height:a});e.css({"max-width":b,"max-height":a});f.css({"max-width":b,"max-height":a})}},500)}function f(){var a=b.fileNames;$isString(a)&&(a=a.split(";"),
a.length>1?(j.html("<img style='max-width:"+(b.windowWidth-38)+"px; max-height:"+(b.windowHeight-110)+"px'/>"),a=a[a.length-2],j.children("img").attr("src",u(a))):j.html(""))}function n(){s&&s.activate()}function i(a){if(b.vault.allowExecute()&&!(this.allowTypes!=null&&this.allowTypes!=""&&(","+this.allowTypes).indexOf(this.getFileType(file.value))==-1)){if(k=="uploaded"||k=="unupload"){if(confirm(mx.msg("CONFIRM_UPDATE_PICTURE")))b.remove();else return!1;a.stopPropagation()}a=$(this).children("input");
o(a,j,{width:b.windowWidth-38,height:b.windowHeight-110})}}function o(a,d,c){if(typeof FileReader==="function"){var e=new FileReader;a.on("change",function(){var a=this.files[0];if(a!=null&&v(a.name)){d.html("");d.html("<img style='max-width:"+c.width+"px; max-height:"+c.height+"px'/>");var b=d.find("img");e.onload=function(a){b.attr({src:a.target.result});q(!1);l(!0);m(!0);k="unupload"};e.readAsDataURL(a)}})}else window.navigator.userAgent.indexOf("MSIE")>-1&&a[0].attachEvent("onchange",function(){var a=
b.vault.objToArray(b.vault.fileList),e=a.length-1;if(!(e<0)&&(a=a[e].path,v(a))){e=$("<div>");e.css("filter",t(a,"image"));var g=document.createElement("div");(document.body||document.documentElement).appendChild(g);with(g.runtimeStyle)filter=t(a,"image"),zoom=width=height=1,position="absolute",right="9999em",top="-9999em",border=0;var f={height:g.offsetHeight,width:g.offsetWidth};g.parentNode.removeChild(g);g={};c.width<f.width||c.height<f.height?(g=c.width/f.width<c.height/f.height?c.width/f.width:
c.height/f.height,g={width:f.width*g,height:f.height*g}):g=f;if(g.width==1&&g.height==1)g.width=b.windowWidth-38,g.height=b.windowHeight-110;f=g;d.html("");e.appendTo(d);e[0].style.filter=t(a,"scale");e.width(f.width).height(f.height);q(!1);l(!0);m(!0);k="unupload"}})}function t(a,b){return"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"', sizingMethod='"+b+"')"}function u(a){var d=null,a=a.replace(/\+/g,"%2B"),c=b.filePath?b.filePath.replace(/\+/g,"%2B"):"",e=c?"&filePath="+c:"";if(this.type==
"path")d=encodeURI(encodeURI(b.baseUrl+"?option=download&filePath="+c+"&fileName="+a+"&rnd="+Math.random()));else if(b.type=="form"||b.type=="grid")d=encodeURI(encodeURI(b.baseUrl+"?option=download&tableName="+b.tableName+"&pkVal="+b.pkVal+"&colName="+b.colName+"&fileName="+a+"&uploadMode="+b.uploadMode+e+"&rnd="+Math.random()));return d}function q(a){var d=b.container.$e.find("#add_file");if(d[0]){var c=d.html(),c=a?c.replace(mx.msg("UPLOAD_BTN_UPDATE"),mx.msg("UPLOAD_BTN_ADD")):c.replace(mx.msg("UPLOAD_BTN_ADD"),
mx.msg("UPLOAD_BTN_UPDATE"));d.html(c)}}function p(a){b.container.$e.find("#_download_file").toggleClass("btnDisable",!a)}function l(a){b.container.$e.find("#_upload_file").toggleClass("btnDisable",!a)}function m(a){b.container.$e.find("#_clear_file").toggleClass("btnDisable",!a)}function w(){j&&j.setBusy(!1);l(!1);p(!0);k="uploaded"}function x(){j&&j.setBusy()}function v(a){if($isEmpty(a))return!1;a=a.split(".");a=a[a.length-1];return(","+b.allowTypes).indexOf(a)>-1&&(","+b.limitTypes).indexOf(a)==
-1}var b=$extend(mx.editors.Editor),r={};b.type="path";b.baseUrl=null;b.filePath=null;b.tableName="";b.primaryKey="";b.pkVal="";b.colName="";b.uploadMode="file";b.iconUri=mx.mappath("$theme/images/picture_manager_big.gif");b.width=500;b.height=400;b.windowWidth=600;b.windowHeight=500;b.limitTypes="exe,bat";b.allowTypes="jpg,jpeg,gif,png,bmp,tiff";b.fileNames="";b.isVirtual=!1;b.vault=null;b.container=null;b.ignoreGlobalSet=[];r.init=b.init;b.init=function(){r.init();b.container=new mx.containers.Container;
var c=$("<div><table align=center cellspacing=0><tr><td align=center><div align=center><img src='"+b.iconUri+"'/></div></td></tr></table></div>");c.children("table").width(b.width).height(b.height);b.$img=c.find("img").css({"max-width":b.width-2,"max-height":b.height-2});b.$e.append(c);b.$e.addClass("pictureManagerEditor");b.$e.on("click",d);if(b.type=="path")b.baseUrl=b.baseUrl||mx.mappath("~/../mx/servlets/fileUpload");else if(b.type=="form"||b.type=="grid"){b.baseUrl=b.baseUrl||mx.mappath("~/../mx/servlets/dataFileUpload");
if($isEmpty(b.pkVal)&&b.parent)if(b.type=="form")b.pkVal=b.parent.entityContainer.data[b.parent.entityContainer.primaryKey];else if(b.type=="grid"&&b.parent.entityContainer&&b.parent.entityContainer.editingItem!=null)b.pkVal=b.parent.entityContainer.editingItem[b.parent.entityContainer.primaryKey];$isEmpty(b.pkVal)?b.off("click"):b.setPk(b.pkVal)}b.context=b;if(c=$notEmpty(mx.globalUploadMode))c=$isArray(b.ignoreGlobalSet)?b.ignoreGlobalSet.contains("globalUploadMode"):!1,c=!c;if(c&&["file","blob",
"uds"].contains(mx.globalUploadMode))b.uploadMode=mx.globalUploadMode;b.vault=new dhtmlXVaultObjectTwin;b.vault.onitemuploaded=w;b.vault.onitemuploading=x;b.vault.onRemoveAllItems=a;b.vault.isVirtual=b.isVirtual;b.vault.setImagePath(mx.mappath("$theme/images/fileupload/"));b.vault.setBaseUrl(b.baseUrl);b.vault.create(b);b._initDefaultValue(!1);b.setEnabled(b.enabled);b.setReadOnly(b.readOnly)};b._initDefaultValue=function(a){b.vault.isVirtual===!0&&!$isEmpty(b.fileNames)&&b.setValue(b.fileNames,a)};
b.setPk=function(a){b.pkVal=a;if(b.vault!=null)b.vault.pkVal=b.pkVal};b.refreshPk=function(a,c){b.vault.refreshPk(a,c)};r.setValue=b.setValue;b.setValue=function(a,c){r.setValue(a,c);var d=(b.fileNames=a)||"";b.type!="grid"&&$isString(d)?(d=d.split(";"),d.length>1?b.$img.attr("src",u(d[d.length-2])):b.$img.attr("src",b.iconUri)):b.type!="grid"&&b.$img.attr("src",b.iconUri)};b.remove=function(){b.vault.removeAllItems(!1)};b.setEnabled=function(a){b.enabled=a;if(b.vault!=null)b.vault.enabled=b.enabled;
b.container&&b.container.$e&&(b.container.$e.find("#add_file").toggleClass("btnDisable",!a),p(b.enabled),l(b.enabled),m(b.enabled))};b.setReadOnly=function(a){b.readOnly=a;if(b.vault!=null)b.vault.readOnly=b.readOnly;b.container&&b.container.$e&&(b.container.$e.find("#add_file").toggleClass("btnDisable",b.readOnly),p(b.readOnly),l(b.readOnly),m(b.readOnly))};b.getUploadedNames=function(){for(var a=[],a=b.vault.getUploadedFiles(),c="",d=0;d<a.length;d++)c+=a[d].attName+";";return c};b._closeWindow=
function(){h&&h.hide()};var h=null,s=null,j=null,k="unupload";b.endOfClass(arguments);return b};
var dhtmlXVaultObjectTwin=function(){var a=navigator.appName;this.IE=a.indexOf("Explorer")>-1;this.Opera=a.indexOf("Opera")>-1;this.isUploadFileAll=this.isUploadFile=!1;this.counter=1;this.baseUrl=this.sessionId=this.idRowSelected=null;this.imPath="imgs/";this.limitTypes=this.uploadMode=this.colName=this.pkVal=this.primaryKey=this.tableName=this.filePath="";this.allowTypes=null;this.readOnly=this.isVirtual=!1;this.enabled=!0;this.strings={preview:mx.msg("UPLOAD_PREVIEW"),remove:mx.msg("UPLOAD_REMOVE"),
upload:mx.msg("UPLOAD"),done:mx.msg("UPLOAD_COMPLETE"),undone:mx.msg("UPLOAD_UNSTART"),error:mx.msg("UPLOAD_ERROR"),btnAdd:mx.msg("UPLOAD_BTN_ADD"),btnUpload:mx.msg("UPLOAD_BTN_UPLOAD"),btnClean:mx.msg("UPLOAD_BTN_CLEAN"),btnClose:mx.msg("UPLOAD_BTN_CLOSE"),btnDownload:mx.msg("DOWNLOAD")};this.strings.errors={TooBig:"File is too big ({0};bytes).\nMax allowed size is {1}.",PostSize:"Undefined server error. Possible issues:\n- Unicode file name incorrectly processed by the server;\n- File size is bigger than server's post-request limit ({0})."};
this.filesLimit=0;this.fileList={};this.uploadedCount=0;this.inpMAX_FILE_SIZE=this.progressDemo=null;this.MAX_FILE_SIZE=943718400;this.owner=this.inpUPLOAD_IDENTIFIER=null};dhtmlXVaultObjectTwin.prototype.setBaseUrl=function(a){this.baseUrl=a};dhtmlXVaultObjectTwin.prototype.setImagePath=function(a){this.imPath=a;this.preLoadImages()};
dhtmlXVaultObjectTwin.prototype.create=function(a){this.owner=a;this.type=a.type;this.setFilesLimit(a.filesLimit);this.limitTypes=a.limitTypes;this.allowTypes=a.allowTypes;this.filePath=a.filePath;this.isVirtual=a.isVirtual;this.readOnly=a.readOnly;this.enabled=a.enabled;if(this.type!="path")this.tableName=a.tableName,this.primaryKey=a.primaryKey,this.pkVal=a.pkVal,this.colName=a.colName,this.uploadMode=a.uploadMode;this.parentObject=a.container.$e[0]||a.$e[0];this.parentObject.style.position="relative";
try{this.parentObject.appendChild("<iframe src='about:blank' id='dhtmlxVaultUploadFrame' name='dhtmlxVaultUploadFrame' style='display:none;position:absolute;left:-1000px;width:1px;height:1px'></iframe>")}catch(c){}this.containerDiv=document.createElement("div");this.containerDiv.style.cssText="position:absolute;z-index:-1;border:none";this.parentObject.appendChild(this.containerDiv);this.container=document.createElement("div");this.container.style.position="absolute";this.container.style.width="100%";
this.container.style.height="45px";this.container.style.bottom="5px";var d="7px",e="";a.context&&(d=0,e="<td style='width:78px;height:32px;padding-right: 7px;' align='right'><div class='dhxvlt_rbtn'><span class='dhxvlt_rbtn3'></span><span class='dhxvlt_rbtn2'><nobr><img src='"+this.imPath+"close.png' style='width:10px;height:10px;margin-top: 6px;'/>"+this.strings.btnClose+"</nobr></span><span class='dhxvlt_rbtn1'></span></div></td>");this.container.innerHTML="<table border='0' style='width:100%;height:32px'><tr><td style='width:416px' colspan='3' align='center' id='cellContainer'><div style='width:100%;height:1px'></div></td></tr><tr id='_btns'><td style='width:138px;height:32px;padding-left: 10px' align='left'><div class='dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2' ><nobr id='add_file'><img src='"+
this.imPath+"add.gif'/> "+this.strings.btnAdd+"</nobr></span><span class='dhxvlt_lbtn3'></span></div><div class='btnAddDiv'><input type='file' id='file' name='file' value='' class='dhxvlt_hidden "+(this.Opera?"dhxvlt_fo":"")+"'/></div></td><td style='width:138px;height:32px' align='left'><div class='dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2' id='_upload_file'><nobr><img src='"+this.imPath+"upload.gif'/> "+this.strings.btnUpload+"</nobr></span><span class='dhxvlt_lbtn3'></span></div></td><td style='width:138px;height:32px' align='left'><div class='dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2' id='_download_file'><nobr><img src='"+
this.imPath+"upload.gif'/> "+this.strings.btnDownload+"</nobr></span><span class='dhxvlt_lbtn3'></span></div></td><td style='width:138px;height:32px;padding-right: "+d+";' align='right'><div class='dhxvlt_rbtn'><span class='dhxvlt_rbtn3'></span><span class='dhxvlt_rbtn2' id='_clear_file'><nobr><img src='"+this.imPath+"clean.gif'/>"+this.strings.btnClean+"</nobr></span><span class='dhxvlt_rbtn1' id='_close_btn'></span></div></td>"+e+"</tr></table>";this.parentObject.appendChild(this.container);var f=
this;this.container.childNodes[0].rows[1].cells[1].childNodes[0].onclick=function(){f.proxyInvoke(f.allowExecute,f.uploadAllItems)};this.container.childNodes[0].rows[1].cells[3].childNodes[0].onclick=function(){f.proxyInvoke(f.allowExecute,f.removeAllItems)};this.container.childNodes[0].rows[1].cells[2].childNodes[0].onclick=function(){f.proxyInvoke(f.allowDownload,function(){var a=f.getUploadedFiles();a.length>0&&f.downLoad(a[0].attName)})};if(a.context)this.container.childNodes[0].rows[1].cells[4].childNodes[0].onclick=
function(){f.close()};this.fileContainer=this.container.childNodes[0].rows[1].cells[0].childNodes[1];a=document.getElementById("_fileSelectionHiddenArea");a==null&&(d=document.createElement("div"),$(d).attr("id","_fileSelectionHiddenArea"),$(d).css({width:"1px",height:"1px"}),a=d,this.fileContainer.appendChild(d));this.currentFile=this.fileContainer.childNodes[0];this.currentFile.onchange=function(){if(window.navigator.userAgent.indexOf("MSIE")>-1){this.select();document.getElementById("_fileSelectionHiddenArea").focus();
var a=document.selection.createRange().text}f.addFile(a,!0)};this.IE&&$.browser.version=="8.0"?this.uploadForm=document.createElement("<form enctype='multipart/form-data' target='dhtmlxVaultUploadFrame' method='post'>"):(this.uploadForm=document.createElement("form"),this.uploadForm.method="post",this.uploadForm.encoding="multipart/form-data",this.uploadForm.target="dhtmlxVaultUploadFrame");this.container.appendChild(this.uploadForm);this.inpMAX_FILE_SIZE=document.createElement("input");this.inpMAX_FILE_SIZE.type=
"hidden";this.inpMAX_FILE_SIZE.name="xMAX_FILE_SIZE";this.inpMAX_FILE_SIZE.value=this.MAX_FILE_SIZE;this.uploadForm.appendChild(this.inpMAX_FILE_SIZE);this.inpUPLOAD_IDENTIFIER=document.createElement("input");this.inpUPLOAD_IDENTIFIER.type="hidden";this.inpUPLOAD_IDENTIFIER.name="UPLOAD_IDENTIFIER";this.uploadForm.appendChild(this.inpUPLOAD_IDENTIFIER);this.tblListFiles=null;a=this.getUploadedFiles();this.owner.fileNames="";for(d=0;d<a.length;d++)f.addFile(a[d].attName),this.owner.fileNames=this.owner.fileNames+
a[d].attName+";"};dhtmlXVaultObjectTwin.prototype.createXMLHttpRequest=function(){var a=null;window.ActiveXObject?a=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(a=new XMLHttpRequest);return a};dhtmlXVaultObjectTwin.prototype.getFileName=function(a){a=a.split("\\");a=a[a.length-1];a=a.split("/");return a[a.length-1]};dhtmlXVaultObjectTwin.prototype.getFileType=function(a){a=a.split(".");return a[a.length-1]};
dhtmlXVaultObjectTwin.prototype.downLoad=function(a,c){if($isEmpty(c)||document.getElementById("rowListFiles"+c).attributes.isUpload.value=="true"){var d=a.replace(/\+/g,"%2B"),e=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",f=e?"&filePath="+e:"";this.type=="path"?window.open(encodeURI(encodeURI(this.baseUrl+"?option=download&filePath="+e+"&fileName="+d+"&rnd="+Math.random()))):(this.type=="form"||this.type=="grid")&&window.open(encodeURI(encodeURI(this.baseUrl+"?option=download&tableName="+
this.tableName+"&pkVal="+this.pkVal+"&colName="+this.colName+"&fileName="+d+"&uploadMode="+this.uploadMode+"&isVirtual="+this.isVirtual+f+"&rnd="+Math.random())))}};dhtmlXVaultObjectTwin.prototype.enableAddButton=function(a){this.currentFile.disabled=!a;var c=this.currentFile.parentNode.previousSibling.childNodes[1].childNodes[0].childNodes[0];c.src=this.imPath+(a?"add.gif":"add_d.gif");c.parentNode.className=a?"":"dhxvlt_dis"};
dhtmlXVaultObjectTwin.prototype.checkFilesLimit=function(){this.filesLimit>0&&this.enableAddButton(this.getTotalFilesCount()<this.filesLimit)};
dhtmlXVaultObjectTwin.prototype.addFile=function(a,c){var d=this;if(d.allowExecute()){var e=this.createId();if(c){var f=this.currentFile;if(this.allowTypes!=null&&this.allowTypes!=""&&(","+this.allowTypes).indexOf(this.getFileType(f.value))==-1)return;if((","+this.limitTypes).indexOf(this.getFileType(f.value))>=0){mx.showerror(Error(mx.err("FILE_TYPE_LIMITED")));return}f.id="file"+e;f.name=f.id;try{if(f.value=="")return;if(!this.onAddFile(f.value)){f.value="";return}}catch(n){}this.fileList[e]={id:e,
name:f.value,path:a,uploaded:!1,error:!1};f.disabled=!0;f.style.display="none";this.uploadForm.appendChild(f);var i=document.createElement("input");i.type="file";i.className="dhxvlt_hidden"+(this.Opera?" dhxvlt_fo":"");i.id="file";i.name=i.id;this.currentFile=i;i.onchange=function(){if(window.navigator.userAgent.indexOf("MSIE")>-1){i.select();document.getElementById("_fileSelectionHiddenArea").focus();var a=document.selection.createRange().text}return d.addFile(a,!0)};this.fileContainer.appendChild(i);
e=document.getElementById("_fileSelectionHiddenArea");if(e==null){var o=document.createElement("div");$(o).attr("id","_fileSelectionHiddenArea");$(o).css({width:"1px",height:"1px"});e=o;this.fileContainer.appendChild(o)}this.getFileName(f.value)}this.checkFilesLimit()}};dhtmlXVaultObjectTwin.prototype.getFileExtension=function(a){var c="",a=a.split(".");a.length>1&&(c=a[a.length-1].toLowerCase());return c};
dhtmlXVaultObjectTwin.prototype.getImgFile=function(a){var c=this.imPath+"ico_image.png",d=this.imPath+"ico_video.png",e=this.imPath+"ico_sound.png",f=this.imPath+"ico_zip.png",n=this.imPath+"ico_file.png",a=this.getFileExtension(a);if(a=="")return n;if("jpg,jpeg,gif,png,bmp,tiff".indexOf(a)!=-1)return c;if("avi,mpg,mpeg,rm,move".indexOf(a)!=-1)return d;if("wav,mp3,ogg".indexOf(a)!=-1)return e;if("zip,rar,tar,tgz,arj".indexOf(a)!=-1)return f;return n};dhtmlXVaultObjectTwin.prototype.createId=function(){return this.counter++};
dhtmlXVaultObjectTwin.prototype.close=function(){var a=!1,c=this.objToArray(this.fileList);if($isArray(c))for(var d=0;d<c.length;d++)if(c[d].uploaded===!1){a=!0;break}(!a||a&&confirm(mx.msg("CONFIRM_CLOSE")))&&this.owner&&$.isFunction(this.owner._closeWindow)&&this.owner._closeWindow()};
dhtmlXVaultObjectTwin.prototype.removeAllItems=function(a){if(!this.isUploadFile){if((a==void 0?!0:a)===!0&&!confirm(mx.msg("CONFIRM_DELETE_ALL")))return;a=this.createXMLHttpRequest();a.open("POST",this.baseUrl,!1);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var c=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",d=c?"&filePath="+c:"";this.type=="path"?a.send("option=deleteAll&filePath="+c+"&rnd="+Math.random()):(this.type=="form"||this.type=="grid")&&a.send("option=deleteAll&tableName="+
this.tableName+"&primaryKey="+this.primaryKey+"&pkVal="+this.pkVal+"&colName="+this.colName+"&uploadMode="+this.uploadMode+"&isVirtual="+this.isVirtual+d+"&rnd="+Math.random());if(a.status==200){if($notEmpty(a.responseText))this.fileList={},this.owner.fileNames="",this.onRemoveAllItems()}else throw"error";}this.checkFilesLimit()};
dhtmlXVaultObjectTwin.prototype.uploadAllItems=function(){var a=-1,c=this.objToArray(this.fileList);if($isArray(c)&&c.length>0){for(var d=0;d<c.length;d++)if(c[d].uploaded===!1){a=d;this.owner&&this.owner.parent&&this.owner.parent.setBusy&&this.owner.parent.setBusy();break}if(a!=-1)this.isUploadFileAll=!0,this.uploadFile(c[d].id);else{if(this.isUploadFileAll)try{this.onUploadComplete(this.objToArray(this.fileList))}catch(e){}this.fileList={};this.isUploadFileAll=!1;this.owner&&this.owner.parent&&
this.owner.parent.setBusy&&this.owner.parent.setBusy(!1)}}};dhtmlXVaultObjectTwin.prototype.objToArray=function(a){var c=[],d;for(d in a)c[c.length]=a[d];return c};dhtmlXVaultObjectTwin.prototype.endLoading=function(a,c){this.isUploadFile=!1;var d=this.fileList[a];if(d)d.error=c,d.uploaded=!c;try{this.onFileUploaded(d)}catch(e){}if(c)try{this.onUploadComplete(this.objToArray(this.fileList))}catch(f){}(d=this.getCurrentInputFile(a))&&d.parentNode.removeChild(d)};
dhtmlXVaultObjectTwin.prototype.startRequest=function(a){var c=this.createXMLHttpRequest();c.open("POST",this.baseUrl,!1);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");c.send("option=startUpload&id="+a+"&rnd="+Math.random());if(c.status==200){if(!c.responseText)throw"error";this.sessionId=c.responseText;this.inpUPLOAD_IDENTIFIER.value=this.sessionId}else throw"error";};
dhtmlXVaultObjectTwin.prototype.sendIdSession=function(a){try{var c=this.createXMLHttpRequest();c.open("post",this.baseUrl,!1);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");c.send("option=getProgress&sessionId="+this.sessionId+"&rnd="+Math.random());if(c.status==200){var d=c.responseText;if(d){var e=d.split(":");if(e[0]=="error"){if(e[1]==-2){var f=document.getElementById("dhtmlxVaultUploadFrame");if(f)f.src="about:blank";alert(this.printf(this.strings.errors.TooBig,
e[2],e[3]))}else e[1]==-3&&alert(this.printf(this.strings.errors.PostSize,e[2]));throw"error";}d=parseInt(d,10);if(isNaN(d))throw"error";if(d!=-1){var n=this;try{window.setTimeout(function(){n.sendIdSession(a)},500)}catch(i){}}else d==-1&&(this.uploadedCount++,this.endLoading(a,!1),this.showMessageInfo(a,this.strings.done),this.isUploadFileAll&&this.uploadAllItems())}}else throw"error";}catch(o){this.endLoading(a,!0),this.isUploadFile=this.isUploadFileAll=!1,this.showMessageInfo(a,this.strings.error)}};
dhtmlXVaultObjectTwin.prototype.printf=function(){for(var a=arguments.length,c=arguments[0],d=1;d<a;d++)c=c.replace(RegExp("\\{"+(d-1)+"\\}","g"),arguments[d]);return c};dhtmlXVaultObjectTwin.prototype.showMessageInfo=function(a,c){mx.indicate("info",c)};dhtmlXVaultObjectTwin.prototype.getFilesCount=function(){return this.objToArray(this.fileList).length};dhtmlXVaultObjectTwin.prototype.getTotalFilesCount=function(){var a=0,c=this.objToArray(this.fileList);if($isArray(c))a=c.length;return a};
dhtmlXVaultObjectTwin.prototype.getFormField=function(a,c){for(var d=this.uploadForm.getElementsByTagName("input"),e=0;e<d.length;e++){var f=d[e];if(f.type.toLowerCase()==a&&f.name==c)return f}return null};dhtmlXVaultObjectTwin.prototype.getCurrentInputFile=function(a){return this.getFormField("file","file"+a)};
dhtmlXVaultObjectTwin.prototype.uploadFile=function(a){if(!this.isUploadFile){this.isUploadFile=!0;var c=this.getCurrentInputFile(a);if(c!=null){c.disabled=!1;try{this.startRequest(a),this.sendIdSession(a)}catch(d){this.endLoading(a,!0);this.isUploadFile=this.isUploadFileAll=!1;return}if(this.isUploadFile){var e={setUdsParam:function(a){e.udsParam=JSON.stringify(a)}};this.onitemuploading(e);if(this.type=="path")this.uploadForm.action=encodeURI(this.baseUrl+"?option=upload&sessionId="+this.sessionId+
"&fileName="+this.getFileName(this.getCurrentInputFile(a).value)+"&userfile="+this.getCurrentInputFile(a).id+"&filePath="+this.filePath+"&rnd="+Math.random());else if(this.type=="form"||this.type=="grid")this.uploadForm.action=encodeURI(this.baseUrl+"?option=upload&sessionId="+this.sessionId+"&tableName="+this.tableName+"&primaryKey="+this.primaryKey+"&pkVal="+this.pkVal+"&colName="+this.colName+(this.filePath?"&filePath="+this.filePath:"")+"&uploadMode="+this.uploadMode+"&udsParam=&isVirtual="+this.isVirtual+
"&rnd="+Math.random());this.onitemuploaded();a=document.createElement("iframe");a.id="myfrm";a.width=0;a.height=0;a.frameborder=0;a.src="about:blank";a.name="myfrm";document.body.appendChild(a);window.frames.myfrm.name="myfrm";this.uploadForm.target="myfrm";this.uploadForm.submit()}}}};
dhtmlXVaultObjectTwin.prototype.preLoadImages=function(){for(var a=["add.gif","add_d.gif","btn1.gif","btn2.gif","btn3.gif","clean.gif","upload.gif","delete.gif","ico_file.png","ico_image.png","ico_sound.png","ico_video.png","ico_zip.png","pb_back.gif","pb_demoupload.gif","pb_empty.gif","rowsel.gif"],c=Array(a.length),d=0;d<a.length;d++)c[d]=new Image,c[d].src=this.imPath+a[d]};dhtmlXVaultObjectTwin.prototype.setFilesLimit=function(a){a=parseInt(a);if(!isNaN(a)&&a>=0)this.filesLimit=a};
dhtmlXVaultObjectTwin.prototype.setFormField=function(a,c){if(this.uploadForm){var d=this.getFormField("hidden",a);if(c===null)d&&this.uploadForm.removeChild(d);else{if(!d)d=document.createElement("input"),d.type="hidden",d.name=a,this.uploadForm.appendChild(d);d.value=c}}else alert("Please call setFormField() method after create()!")};dhtmlXVaultObjectTwin.prototype.onAddFile=function(){return!0};dhtmlXVaultObjectTwin.prototype.onUploadComplete=function(a){for(var c=0;c<a.length;c++)this.owner.appendFile(this.getFileName(a[c].name))};
dhtmlXVaultObjectTwin.prototype.onFileUploaded=function(a){a.uploaded=!0};dhtmlXVaultObjectTwin.prototype.onRemoveAllItems=function(){};dhtmlXVaultObjectTwin.prototype.onitemuploading=function(){};dhtmlXVaultObjectTwin.prototype.onitemuploaded=function(){};
dhtmlXVaultObjectTwin.prototype.getUploadedFiles=function(){var a=[],c=this.createXMLHttpRequest();c.open("POST",this.baseUrl,!1);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var d=this.filePath?this.filePath.replace(/\+/g,"%2B"):"",e=d?"&filePath="+d:"";this.type=="path"?c.send("option=getFile&filePath="+d+"&rnd="+Math.random()):(this.type=="form"||this.type=="grid")&&c.send("option=getFile&tableName="+this.tableName+"&pkVal="+this.pkVal+"&colName="+this.colName+
"&uploadMode="+this.uploadMode+e+"&rnd="+Math.random());if(c.status==200&&$notEmpty(c.responseText))try{a=eval("("+c.responseText+")")}catch(f){}return a};dhtmlXVaultObjectTwin.prototype.proxyInvoke=function(a,c,d){if(typeof a=="function")try{if(a.apply(this,d)===!1)return}catch(e){return}typeof c=="function"&&c.apply(this,d)};dhtmlXVaultObjectTwin.prototype.allowExecute=function(){return this.enabled&&!this.readOnly};dhtmlXVaultObjectTwin.prototype.allowDownload=function(){return this.enabled};
dhtmlXVaultObjectTwin.prototype.refreshPk=function(a,c){if($isArray(a)&&a.length>0){for(var d="",e=0;e<a.length;e++)$notEmpty(a[e].mxVirtualId)&&(d=d+a[e].mxVirtualId+":"+a[e][c]+";");e=this.createXMLHttpRequest();e.open("POST",this.baseUrl,!1);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var f=this.filePath?this.filePath.replace(/\+/g,"%2B"):"";e.send("option=refreshPk&tableName="+this.tableName+"&replaceValues="+d+(f?"&filePath="+f:"")+"&isVirtual="+this.isVirtual+
"&rnd="+Math.random());if(e.status==200&&$notEmpty(e.responseText))return"success"}};$ns("mx.editors");$import("mx.lib.jquery-cleditor");$import("mx.utils.DelayedTask");
mx.editors.RichTextEditor=function(){function k(a){i&&i.html(a?a:"")}function l(){var b;if(a.windowManager&&!$instanceOf(a.windowManager,mx.windows.WindowManager))a.windowManager=null;if(a.windowManager==null)a.getContext()&&a.getContext().windowManager?(b=a.getContext().windowManager.activeWindow,a.windowManager=a.getContext().windowManager):a.windowManager=new mx.windows.WindowManager;var g=a.windowManager.create({title:a.title,width:a.editorAreaWidth,height:a.editorAreaHeight,resizable:!1,reusable:!1,
left:"center",top:"center"});g.$e.on("click",function(a){a.stopPropagation()});g.on("activate",function(){a.editing=!0;var b=$.extend({},m);delete b.parent;delete b.owner;b.width="100%";b.height="100%";b=$.extend(b,{value:a.value,readOnly:a.readOnly,enabled:a.enabled});f=new mx.editors.RichTextEditor(b);g.addControl(f)});g.on("close",function(){a.editing=!1;b&&b.activate();f=null});g.showDialog(a._resetText);if($notEmpty(g.$mask))g.$mask.on("click",function(a){a.stopPropagation()})}function o(){a.editing=
!0}function p(){a.editing=!1}function q(b){!b.p_ctrlKey&&!b.altKey&&!(b.which>=112&&b.which<=137||b.which>=33&&b.which<=45)&&mx.utils.DelayedTask.delay(600,r,a,[])}function r(){b&&(b.sourceMode()||b.updateTextArea(),n())}function n(){a.setValue(b.$area.val(),!0)}function j(){return a.parent&&a.parent.typeName&&a.parent.typeName.indexOf("DataGrid")!=-1||a.owner}var a=$extend(mx.editors.Editor),e={};a.docType='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">';
a.bodyStyle="margin:4px; font:10pt Arial,Verdana; cursor:text";a.controls="bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source";a.colors="FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303";
a.fonts="Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana";a.sizes="1,2,3,4,5,6,7";a.styles=[[mx.msg("RTE_PARAGRAPH"),"<p>"],[mx.msg("RTE_HEADER",[1]),"<h1>"],[mx.msg("RTE_HEADER",[2]),"<h2>"],[mx.msg("RTE_HEADER",[3]),"<h3>"],[mx.msg("RTE_HEADER",[4]),"<h4>"],[mx.msg("RTE_HEADER",[5]),"<h5>"],[mx.msg("RTE_HEADER",[6]),"<h6>"]];a.width=550;a.height=550;a.editorAreaWidth=500;a.editorAreaHeight=500;a.docCSSFile="";a.title=mx.msg("RICHTEXT_EDITOR_TITLE");
a.editing=!1;a.maxLength=null;a.windowManager=null;var m=a.owner=null,b=null,h=null,i=null,f=null;e._=a._;a._=function(a){m=$.extend({},a);e._(a)};e.init=a.init;a.init=function(){e.init();$isEmpty(a.value)&&!$isEmpty(a.text)?a.value=a.text:a.text=a.value;$.extend($.cleditor.defaultOptions,{width:a.editorAreaWidth,height:a.editorAreaHeight,docType:a.docType,bodyStyle:a.bodyStyle,controls:a.controls,colors:a.colors,fonts:a.fonts,sizes:a.sizes,styles:a.styles,docCSSFile:a.docCSSFile});var d=$.cleditor.buttons,
g;for(g in d){var f=d[g],c=null;switch(g){case "alignleft":c=mx.msg("RTE_ALIGNLEFT");break;case "alignright":c=mx.msg("RTE_ALIGNRIGHT");break;case "bold":c=mx.msg("RTE_BOLD");break;case "bullets":c=mx.msg("RTE_BULLETS");break;case "center":c=mx.msg("RTE_CENTER");break;case "color":c=mx.msg("RTE_FONT_COLOR");break;case "copy":c=mx.msg("RTE_COPY");break;case "cut":c=mx.msg("RTE_CUT");break;case "font":c=mx.msg("RTE_FONT");break;case "highlight":c=mx.msg("RTE_HIGHLIGHT");break;case "image":c=mx.msg("RTE_INSERT_IMAGE");
break;case "indent":c=mx.msg("RTE_INDENT");break;case "italic":c=mx.msg("RTE_ITALIC");break;case "justify":c=mx.msg("RTE_JUSTIFY");break;case "link":c=mx.msg("RTE_INSERT_LINK");break;case "numbering":c=mx.msg("RTE_NUMBERING");break;case "outdent":c=mx.msg("RTE_OUTDENT");break;case "paste":c=mx.msg("RTE_PASTE");break;case "pastetext":c=mx.msg("RTE_PASTE_TEXT");break;case "print":c=mx.msg("RTE_PRINT");break;case "redo":c=mx.msg("RET_REDO");break;case "removeformat":c=mx.msg("RET_REMOVEFORMAT");break;
case "rule":c=mx.msg("RET_INSERT_HORIZONTALRULE");break;case "size":c=mx.msg("RTE_FONT_SIZE");break;case "source":c=mx.msg("RET_SHOW_SOURCE");break;case "strikethrough":c=mx.msg("RTE_STRIKETHROUGH");break;case "style":c=mx.msg("RTE_STYLE");break;case "subscript":c=mx.msg("RTE_SUBSCRIPT");break;case "superscript":c=mx.msg("RTE_SUPERSCRIPT");break;case "underline":c=mx.msg("RTE_UNDERLINE");break;case "undo":c=mx.msg("RET_UNDO");break;case "unlink":c=mx.msg("RTE_REMOVE_LINK");break;case "close":c=mx.msg("RTE_CLOSE");
break;case "save":c=mx.msg("RTE_SAVE")}f.title=c}if(j())a.$e.addClass("richTextEditor"),i=$("<div class='container'>"),a.$e.append(i),k(a.value),a.$e.on("click",l);else{a.$e.addClass("richTextEditor");h=$("<textarea/>");a.$e.append(h);if(b==null)a.value!=null&&h.val(a.value),d={width:a.width,height:a.height},d._blur_callback=p,d._focus_callback=o,d._keyup_callback=q,b=h.cleditor(d)[0],b.change(n);a.readOnly&&a.setReadOnly(a.readOnly);a.enabled==!1&&a.setEnabled(a.enabled)}};e.setValue=a.setValue;
a.setValue=function(d,g){var f;f=a.validOptions&&"maxLength"in a.validOptions?a.validOptions.maxLength:a.maxLength&&a.maxLength>0?a.maxLength:void 0;a._outOfLengthTip="";if(f!=void 0&&$isString(d)&&d.length>f)a._outOfLengthTip=mx.msg("RTE_OUTOFLENGTHTIP");e.setValue(d,g);j()?k(d):b&&b.$area&&b.$area.val()!=d&&(b.$area.val(d),b.refresh())};e.reset=a.reset;a.reset=function(a){e.reset(a);j()?(f&&f.reset(a),k(null)):b&&b.$area&&(b.$area.val(""),b.refresh())};a._resetText=function(){if(f!=null){f._updateValue();
var b=f.value;f._hidePopups();a.setValue(b,!0)}};a._updateValue=function(){b&&(b.sourceMode()?b.updateFrame():b.updateTextArea(),n())};a._hidePopups=function(){b&&b.hidePopups()};e.setWidth=a.setWidth;a.setWidth=function(d){e.setWidth(d);b&&typeof d!="undefined"&&($.extend(b.options,{width:d}),b.$main.css("width",a.width),b.reSize())};e.setHeight=a.setHeight;a.setHeight=function(d){e.setHeight(d);b&&typeof d!="undefined"&&($.extend(b.options,{height:d}),b.$main.css("height",a.height),b.reSize())};
a.select=function(){b&&b.$area&&(b.focus(),b.select())};a.focus=function(){b&&b.$area&&b.focus()};e.setEnabled=a.setEnabled;a.setEnabled=function(d){e.setEnabled(d);if(b&&(b.disable(!d),b.offCustomEvent(),a.enabled))b.onCustomEvent();if(j()&&(a.$e.off("click",l),a.enabled))a.$e.on("click",l);a.editing=a.enabled};e.setReadOnly=a.setReadOnly;a.setReadOnly=function(b){e.setReadOnly(b);a.setEnabled(!b)};e.dispose=a.dispose;a.dispose=function(){if(b)b.$frame=null,b.$area=null,b.doc=null,b.$main=null,b=
b.$toolbar=null,h.data("cleditor",null);m=f=i=h=null;a.$e.find("IFRAME").each(function(a,b){try{if(b.contentWindow)$(b).contents()&&$(b).contents().empty(),b.src="about:blank",b.contentWindow.location.href="about:blank";b.src="";$(b).remove().empty()}catch(e){}});e.dispose()};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.controls.Slider");
mx.editors.SliderEditor=function(){function e(){var a=b.getValue();c.setValue(a,!0)}var a=$extend(mx.editors.Editor),c={};a.showProcessTips=!0;a.width="100%";a.labelWidth=0;a.labelCaption="";a.value=0;a.onchanged=null;a.increment=1;a.minValue=0;a.maxValue=100;var b;c.init=a.init;a.init=function(){b=new mx.controls.Slider({showProcessTips:a.showProcessTips,width:"90%",labelCaption:a.labelCaption,labelWidth:a.labelWidth,increment:a.increment,minValue:a.minValue,maxValue:a.maxValue,sliderValues:a.value,
onchanged:e});c.init();a.$e.addClass("SliderEditor");a.$e.append(b.$e)};a.getValue=function(){return b.getValue()};c.setValue=a.setValue;a.setValue=function(a,d){b.setValue(typeof a=="string"?a.split(","):a,d);(d==null||d==!1)&&c.setValue(b.getValue())};c.setEnabled=a.setEnabled;a.setEnabled=function(a){c.setEnabled(a);b.setEnabled(a)};c.setReadOnly=a.setReadOnly;a.setReadOnly=function(b){c.setReadOnly(b);a.setEnabled(!a.readOnly)};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.utils.DelayedTask");
mx.editors.TextEditor=function(){function e(){c!=null&&(a.enabled==!1?c.addClass("hintEnabled"):c.addClass("hint"))}function f(){a.text!=a.$input.val()&&a.setValue(a.$input.val(),!0);a.hint!=null&&a.setHint(a.hint)}function g(){a.$input.show();c.hide();a.$input.focus()}function h(b){if(b.p_ctrlKey||b.altKey||b.which>=112&&b.which<=137||b.which>=33&&b.which<=45)return!1;mx.utils.DelayedTask.delay(600,i,a,[]);b.keyCode==13&&a.trigger("enterkeyup");return!1}function i(){if(a.$e&&(a.setValue(a.$input.val(),
!0),a.allowInputLengthTip&&$isNumber(a.maxLength)&&a.maxLength>0)){var b=a.$input.val(),b=mx.msg("INPUT_LENGTH_INFO",[a.maxLength-b.length,a.maxLength]);a.$input.toolTip({activation:"focus",keepAlive:!0,content:b,defaultPosition:a.tipPosition});a.$input.toolTip().data("toolTip").update(b)}}var a=$extend(mx.editors.Editor),d={};a.width=135;a.textMode="normal";a.value="";a.hint=null;a.maxLength=null;a._$inputContainer=null;a.allowInputLengthTip=!1;var c=null;d.init=a.init;a.init=function(){d.init();
a.$e.addClass("textEditor");a._$inputContainer=$("<div id='inputContainer'/>");a.$e.append(a._$inputContainer);a.setTextMode(a.textMode);a.setMaxLength(a.maxLength);if(!$isEmpty(a.text)&&!$isEmpty(a.value))a.text=a.value;else if($isEmpty(a.value)&&!$isEmpty(a.text))a.value=a.text;a._initDefaultValue();!a.readOnly&&$notEmpty(a.hint)&&a.setHint(a.hint);a.setReadOnly(a.readOnly);a.$input.on("blur",f);a.$input.on("keyup",h)};a.setTextMode=function(b){a.textMode=b;if(a.$input!=null)a.$input.unbind(),a.$input.remove(),
a.$input=null;switch(a.textMode.toLowerCase()){case "multiline":a.textMode="multiline";a.$input=$("<textarea style='width:100%;height:100%;outline:none;overflow-y:auto;'></textarea>");a.height==21&&a.setHeight(75);break;case "password":a.textMode="password";a.$input=$("<input type='password' style='width: 100%;'/>");break;default:a.textMode="normal",a.$input=$("<input type='text' style='width: 100%;'/>")}a._$inputContainer.append(a.$input)};d.setHeight=a.setHeight;a.setHeight=function(b){d.setHeight(b);
typeof b!="undefined"&&null!=a.$input&&a.textMode.toLowerCase()=="multiline"&&($.browser.msie&&$.browser.version=="7.0"?a.$input.height(b-4):a.$input.height(b))};a.setHint=function(b){$isEmpty(c)&&(c=a.$input.clone(),e(),c.removeAttr("maxLength"),c.removeAttr("disabled"),c.focus(g),a._$inputContainer.append(c));a.hint=b;a._toggleInputStatus()};d.setEnabled=a.setEnabled;a.setEnabled=function(a){d.setEnabled(a);e()};a.setMaxLength=function(b){if($isNumber(b))a.maxLength=b,("normal"==a.textMode||"password"==
a.textMode)&&a.$input.attr("maxLength",a.maxLength)};a._toggleInputStatus=function(){if(c!=null){var b=!1;try{a.$input.is(":focus")&&(b=!0)}catch(d){}!b&&$isEmpty(a.value)&&$notEmpty(a.hint)?(c.val(a.hint),a.$input.hide(),c.show()):(a.$input.is(":visible")||a.$input.show(),$notEmpty(c)&&c.hide())}};d.markError=a.markError;a.markError=function(b,e){d.markError(b,e);a.$e&&a.$input&&(b?($.isIE67()?a.$e.removeClass("error"):a.$e.addClass("error"),a.$input.addClass("error"),c&&c.addClass("error")):(a.$e.removeClass("error"),
a.$input.removeClass("error"),c&&c.removeClass("error")))};a.endOfClass(arguments);return a};$ns("mx.editors");$import("mx.editors.UpDownEditor");
mx.editors.TimeEditor=function(){function f(){var b=0;try{b=a.$input.getSelection().start}catch(d){}var c=null;b>=a.$input.val().length-1?c=a.formatString.substr(a.formatString.length-1,1):(c=a.formatString.substr(b,1),c==":"&&(c=a.formatString.substr(b-1,1)));if(c==null||c=="")c="H";h=c}function k(){$isEmpty(a.$input.val())&&$isEmpty(a.value)&&a.setValue(i(),!0)}function i(){var b=new Date;b.setFullYear(1900,0,1);a.validOptions&&(a.validOptions.minValue?j(b,a.validOptions.minValue):a.validOptions.maxValue&&
j(b,a.validOptions.maxValue));return b}function j(a,d){if($isString(d))for(var c=d.split(":"),e=0;e<c.length;e++)if(e==0)a.setHours(c[e]);else if(e==1)a.setMinutes(c[e]);else if(e==2)a.setSeconds(c[e]);else break;else $isDate(d)&&(a.setHours(d.getHours()),a.setMinutes(d.getMinutes()),a.setSeconds(d.getSeconds()))}var a=$extend(mx.editors.UpDownEditor),g={};a.value=null;a.valueType="time";a.formatString="HH:mm:ss";a.regex=null;g.init=a.init;a.init=function(){g.init();if($isEmpty(a.formatString))a.formatString=
"HH:mm:ss";a.$input.keydown(f).keyup(f).mousedown(f).mouseup(f);a.setFormatString(a.formatString);a.$input.on("focus",k)};g.setValue=a.setValue;a.setValue=function(b,d){var c=b;a.valueType=="time"&&($isDate(c)?c=Date.format(c,"HH:mm:ss"):$isString(c)&&c.indexOf(" ")>-1&&(c=c.split(" ")[1]));g.setValue(c,d)};a.setFormatString=function(b){b=b?b.toLowerCase():"HH:mm:ss";if(b=="hh:mm:ss"||b=="HH:mm:ss")a.formatString="HH:mm:ss";else if(b=="hh:mm")a.formatString="HH:mm";else if(b=="hh")a.formatString=
"HH";else throw Error(mx.err("UNSUPPORTED_FORMAT",[b]));b="";if($notEmpty(a.value))b=a.value,typeof a.value=="string"&&(b=parseDate(b)),b=a._formatValue(b);a.$input.val(b)};a.increaseValue=function(){a.changeValue(h,1)};a.declineValue=function(){a.changeValue(h,-1)};a.changeValue=function(b,d){var c=null;$isEmpty(a.value)?c=i():$isString(a.value)?(a.formatString=="HH"||a.formatString=="hh")&&!a.value.contain(":")?(c=a.value+":00:00",c=parseDate(c)):c=parseDate(a.value):c=a.value.clone();b=="H"?c.setHours(c.getHours()+
d):b=="m"?c.setMinutes(c.getMinutes()+d):b=="s"&&c.setSeconds(c.getSeconds()+d);a.setValue(c,!0)};a._formatValue=function(b){$isString(b)&&(b=parseDate(b));return $format(b,a.formatString)};var h="H";a.endOfClass(arguments);return a};$ns("mx.editors");
mx.editors.UpDownEditor=function(){var a=$extend(mx.editors.Editor),e={};a.width=80;a.displayButton=!0;a.$input=$("<input id='inputDomain' type='text'>");e.init=a.init;a.init=function(){e.init();a.$e.addClass("upDownEditor");if($.isIE67()){var b=$("<table id=updownEditorTable style='width: 100%;'><tr><td id=updownEditorTd><div id=updownEditorDiv></div></td></tr></table>");a.$e.append(b);var c=$("<div id=inputContainer></div>");c.append(a.$input);b.find("#updownEditorDiv").append(c)}else a.$e.append(a.$input);if(a.displayButton){a.$e.removeClass("upDownEditorHiddenButton");
var b=$("<div id=buttonContainer/>"),c=$("<a href='javascript:void(0)' style='text-decoration:none;' id=upButton><span/></a>"),d=$("<a href='javascript:void(0)' style='text-decoration:none;' id=downButton><span/></a>");b.append(c);b.append(d);b.userSelectable(!1);$.isIE67()?a.$e.find("#updownEditorDiv").append(b):a.$e.append(b);c.mouserepeat(a._upButton_click);d.mouserepeat(a._downButton_click)}else a.$e.addClass("upDownEditorHiddenButton");a.$input.change(a._input_change);a._initDefaultValue();a.setReadOnly(a.readOnly)};
a._upButton_click=function(){!a.isReadOnly()&&a.enabled&&(a.$input.get(0).blur(),a.increaseValue(!0))};a._downButton_click=function(){!a.isReadOnly()&&a.enabled&&(a.$input.get(0).blur(),a.declineValue(!0))};e.markError=a.markError;a.markError=function(b,c){if($.isIE67()){var d=a.$e.find("#updownEditorDiv");a.isValidate=b==!0?!1:!0;b?(d.addClass("error"),c!=null&&d.toolTip({content:c,defaultPosition:a.tipPosition})):(d.removeClass("error"),d.toolTip("destroy"))}else e.markError(b,c)};a.endOfClass(arguments);
return a};$ns("mx.io");
mx.io.FileUploader=function(){function j(b){b=b.currentTarget;b!=null&&b.readyState==4&&a.trigger("uploadcomplete",{resultValue:b.responseText})}function k(b){a.trigger("canceled",{event:b})}function l(b){if(c.uploadProgress==null)c.uploadProgress="xhr";a.trigger("progresschange",{event:b})}function m(){mx.utils.DelayedTask.delay(500,function(){if(c.uploadProgress==null)c.uploadProgress="getProgress";c.uploadProgress!="xhr"&&f()},a,[])}function n(){g=!0;a.sessionId=null;a.trigger("progresschange",100)}
function f(){if(!(g===!0||a.sessionId==null))try{var b=new XMLHttpRequest;b.open("post",a.url,!1);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.send("option=getProgress&sessionId="+a.sessionId+"&rnd="+Math.random());if(b.status==200){var c=b.responseText;if(c&&(c=parseInt(c,10),c!=-1&&!isNaN(c)))try{0<c<100&&a.trigger("progresschange",c),window.setTimeout(f,500)}catch(h){}}}catch(e){}}function o(b){a.trigger("progresscomplete",{event:b})}function p(b){a.trigger("progresserror",
{event:b})}var a=$extend(MXComponent);a.url=null;a.file=null;a.params=null;a.onprogresschange=null;a.onprogresscomplete=null;a.onprogresserror=null;a.oncanceled=null;a.onuploadcomplete=null;var c;a.upload=function(){g=!1;a.sessionId=null;try{var b=new XMLHttpRequest;b.open("POST",a.url,!1);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.send("option=startUpload&rnd="+Math.random());if(b.status==200&&typeof b.responseText=="string")a.sessionId=b.responseText.trim()}catch(f){}c=
new XMLHttpRequest;b=c.upload;c.addEventListener("readystatechange",j,!1);c.addEventListener("abort",k,!1);c.addEventListener("error",p,!1);c.addEventListener("load",o,!1);c.uploadProgress=null;b.addEventListener("loadstart",m,!1);b.addEventListener("loadend",n,!1);b.addEventListener("progress",l,!1);if(a.sessionId&&a.sessionId!=null)a.params.sessionId=a.sessionId;var b=a.url,h=a.params,e="",i="",d;for(d in h)e+=e==""?d+"="+encodeURIComponent(encodeURIComponent(a.params[d])):"&"+d+"="+encodeURIComponent(encodeURIComponent(a.params[d]));
i=b+($isEmpty(e)?"":"?"+e);c.open("POST",i,!0);c.setRequestHeader("Content-Disposition",encodeURIComponent(a.file.name));d=new FormData;d.append("file",a.file);c.send(d)};a.setParams=function(b){if(a.params!=b)a.params=b};a.cancel=function(){if(c)try{c.abort()}catch(a){}};var g=!1;a.endOfClass(arguments);return a};mx.io.FileUploader.isSupported=function(){return typeof FileReader=="undefined"?!1:!0};$ns("mx.layouts");mx.layouts.AbsoluteLayout=function(){function d(){var b=a.owner.controls;$isArray(b)&&$.each(b,function(b,a){c(a)})}function c(b){var a=b.layoutConfigs||{left:0,top:0};b.$e.css({position:"absolute",top:a.top||0,left:a.left||0})}function e(a){c(a.ctrl)}var a=$extend(mx.layouts.AbstractLayout);a.typeName="AbsoluteLayout";a._init=function(){d();a.owner.on("ctrladded",e)};return a.endOfClass(arguments)};$ns("mx.layouts");mx.layouts.AbstractLayout=function(){var a=$extend(MXComponent),b={};a.typeName=null;a.owner=null;b.init=a.init;a.init=function(){b.init();a._init()};a._init=function(){};a.endOfClass(arguments);return a};$ns("mx.layouts");$import("mx.layouts.AbstractLayout");
mx.layouts.AnchorLayout=function(){function n(a,e){var f=k(e.left,!0),c=k(e.right,!0),b=k(e.top),h=k(e.bottom),i=o(a.width,!0),j=o(a.height),g=0;$notEmpty(f)?(g=$isEqual(f.target,"parent")?f.offset:parseInt(f.target.$e.css("left"))+f.offset+f.target.$e.outerWidth(),f=$notEmpty(c)?m(c,g):$notEmpty(i)?i:m({target:"parent",offset:0},g)):$notEmpty(c)?$notEmpty(i)?(g=$isEqual(c.target,"parent")?d.width-i-c.offset:d.width-i-(d.width-parseInt(c.target.$e.css("left"))+c.offset),f=i):f=m(c,0):f=$notEmpty(i)?
i:d.width;a.$e.css("left",g);a.$e.width(f);g=0;$notEmpty(b)?(g=$isEqual(b.target,"parent")?b.offset:parseInt(b.target.$e.css("top"))+b.offset+b.target.$e.outerHeight(),b=$notEmpty(h)?p(h,g):j):$notEmpty(h)?$notEmpty(j)?(g=$isEqual(h.target,"parent")?d.height-j-h.offset:d.height-j-(d.height-parseInt(h.target.$e.css("top"))+h.offset),b=j):b=p(h,0):b=$notEmpty(j)?j:d.height;a.$e.css("top",g);a.$e.height(b)}function m(a,e){return $isEqual(a.target,"parent")?d.width-e-a.offset:d.width-e-(d.width-parseInt(a.target.$e.css("left"))+
a.offset)}function p(a,e){return $isEqual(a.target,"parent")?d.height-e-a.offset:d.height-e-(d.height-parseInt(a.target.$e.css("top"))+a.offset)}function o(a,e){var b;$isEmpty(e)&&(e=!1);$notEmpty(a)&&($isString(a)&&$notEqual(a,"auto",!1)?b=a.endsWith("%")?(e?d.width:d.height)*parseInt(a)/100:parseInt(a):$isNumber(a)&&(b=a));return b}function k(a,e){if(!$isEmpty(a)){$isEmpty(e)&&(e=!1);var b,c;$isNumber(a)?c=a.toString():$isString(a)&&(a.contain(",")?(c=a.split(","),b=c[0],c=c[1]):c=a);if($isEmpty(b))b=
"parent";else if($notEqual(b,"parent")&&(b=l[b],$isEmpty(b)))return;c=c.endsWith("%")?(e?d.width:d.height)*parseInt(c)/100:parseInt(c);return{target:b,offset:c}}}function q(a){d.width=$(a.target).width();d.height=$(a.target).height();b.calculateAnchors()}function r(a){var a=a.ctrl,b=a.layoutConfigs;$notEmpty(b)&&(a.$e.css("position","absolute"),n(a,{left:b.left||a.left,right:b.right||a.right,top:b.top||a.top,bottom:b.bottom||a.bottom}))}function s(){b.calculateAnchors()}var b=$extend(mx.layouts.AbstractLayout);
b.typeName="AnchorLayout";b.calculateAnchors=function(){$.each(l,function(a){var a=l[a],b=a.layoutConfigs;a.$e.css("position","absolute");$notEmpty(b)&&n(a,{left:b.left||a.left,right:b.right||a.right,top:b.top||a.top,bottom:b.bottom||a.bottom})})};var l=null;b._init=function(){if($isEmpty(b.owner))throw Error(mx.err("CONTAINTER_NON_NULLABLE"));l=b.owner.controls;b.owner.$container.resize(q);b.owner.on("ctrladded",r);b.owner.on("ctrlremoved",s)};var d={};b.endOfClass(arguments);return b};$ns("mx.layouts");$import("mx.layouts.AnchorLayout");$import("mx.layouts.AbsoluteLayout");mx.layouts.LayoutFactoryClass=function(){var b=$extend(MXObject);b.createLayout=function(a,b){var d=null,c=null,e=null;if($isString(a)){d=a.indexOf(".")==-1?"mx.layouts."+a:a;try{c=eval("("+d+")")}catch(f){throw Error(mx.err("ERR_UNKNOWN_LAYOUT_TYPE",[a]));}}else $isFunction(a)&&(c=a);$isFunction(c)&&(e=new c(b));return e};b.endOfClass(arguments);return b};mx.layouts.LayoutFactory=new mx.layouts.LayoutFactoryClass;$ns("mx.lib");$ns("mx.permissions");$import("mx.rpc.RESTClient");
mx.permissions.Permission=function(){var a=$extend(MXComponent),g={};a.baseUrl="~/../iscintegrate/rest/iscservice/";a.iscID=null;var e=a.value=null;g.init=a.init;a.init=function(){g.init();if("-1"!=a.iscID&&a.value==null)e==null&&(e=new mx.rpc.RESTClient({baseUrl:a.baseUrl})),a.value=e.getSync(a.iscID)};a.bindControl=function(b){$notEmpty(a.value)&&a._bindControl(a.value,b)};a._bindControl=function(b,f){if(typeof b.alias!="undefined"){var e=b.readOnly,g=b.visible,c=null;(f.alias||f.permissionID)==
b.alias?c=f:(c=f.findControl(b.alias),c==null&&(c=f.findControlByPermissionID(b.alias)));if($notEmpty(c))if(c.length>1)for(var d=0;d<c.length;d++){var h=c[d];h.setEnabled(!e);h.setVisible(g)}else c.setEnabled(!e),c.setVisible(g)}if($isArray(b.children))for(d=0;d<b.children.length;d++)a._bindControl(b.children[d],f)};a.endOfClass(arguments);return a};$ns("mx.permissions");$import("mx.rpc.RESTClient");
mx.permissions.PermissionAgentClass=function(){var a=$extend(MXObject);a.baseUrl="~/../iscintegrate/rest/iscservice/";var d=a.currentPermission=null;a.getPermission=function(b){var c=null;d==null&&(d=new mx.rpc.RESTClient({baseUrl:a.baseUrl}));if($notEmpty(b))b=d.getSync(b),a.currentPermission=new mx.permissions.Permission({value:b}),c=a.currentPermission;return c};a.setPermission=function(b,c){b!="-1"&&($isString(b)?(a.getPermission(b),a.currentPermission.bindControl(c)):b.bindControl(c))};a.endOfClass(arguments);
return a};mx.permissions.PermissionAgent=new mx.permissions.PermissionAgentClass;$ns("mx.rpc");
mx.rpc.RESTClient=function(){var b=$extend(MXObject);b.baseUrl=null;b.timeout=6E4;b.async=null;b.mode="default";b.setBaseUrl=function(c){b.baseUrl=c};b.send=function(c,a,d,e,f){var g=b._makeUrl(c),c=a!=null?a.toUpperCase():"GET",a=!0;b.async!=null?a=b.async:b.async==null&&e!=null&&(a=e);d={url:g,timeout:b.timeout,type:c,contentType:"application/json",dataType:"json",cache:!1,async:a,data:d,success:function(a){$isFunction(f)&&f(a)},error:function(a,b,c){if($isFunction(f))b=c,b==null&&(b=Error(a.responseText)),
b.url=g,f({successful:!1,error:b})}};return b.mode=="queue"?$.ajaxQueue(d):$.ajax(d)};b.sendSync=function(c,a,d){var e=null;b.send(c,a,d,!1,function(a){e=a});return e};b.get=function(c,a,d){$isFunction(a)&&(d=a,a=null);return b.send(c,"GET",a,!0,d)};b.getSync=function(c,a){return b.sendSync(c,"GET",a)};b.put=function(c,a,d){$isFunction(a)&&(d=a,a=null);return b.send(c,"PUT",a,!0,d)};b.post=function(c,a,d){$isFunction(a)&&(d=a,a=null);return b.send(c,"POST",a,!0,d)};b.remove=function(c,a,d){$isFunction(a)&&
(d=a,a=null);return b.send(c,"DELETE",a,!0,d)};b._makeUrl=function(c){var a=null;$isNumber(c)&&(c=""+c);a=$isEmpty(c)?b.baseUrl:c.startsWith("~/")||b.baseUrl==null?c:!b.baseUrl.endsWith("/")&&!c.startsWith("/")?b.baseUrl+"/"+c:b.baseUrl+c;if(a.startsWith("~/")||a.startsWith("~/../"))a=mx.mappath(a);a+=(a.indexOf("?")>0?"&":"?")+"rnd="+Math.random();return a};b.endOfClass(arguments);return b};$ns("mx.utils");
mx.utils.CheckUtilClass=function(){var c=this;c.isNull=function(a){return null==a||""==a.trim()?!0:!1};c.isDigit=function(a){return/^-{0,1}\d{1,16}\.{0,1}\d{0,10}$/.test(a)};c.isInteger=function(a){return/^([+-]?)(\d+)$/.test(a)};c.isPlusInteger=function(a){return/^([+]?)(\d+)$/.test(a)};c.isMinusInteger=function(a){return/^-(\d+)$/.test(a)};c.isFloat=function(a){return/^([+-]?)\d*\.\d+$/.test(a)};c.isPlusFloat=function(a){return/^([+]?)\d*\.\d+$/.test(a)};c.isMinusFloat=function(a){return/^-\d*\.\d+$/.test(a)};c.isChinese=
function(a){if(!$isString(a))return!1;return/^[\u4E00-\u9FA5\uF900-\uFA2D]+$/.test(a)};c.isLetter=function(a){if(!$isString(a))return!1;return/^[a-zA-Z]+$/.test(a)};c.isAcsii=function(a){if(!$isString(a))return!1;return/^[\x00-\xFF]+$/.test(a)};c.isMobile=function(a){if(!$isString(a))return!1;return/^1\d{10}$/.test(a)};c.isPhone=function(a){if(!$isString(a))return!1;return/^(0[\d]{2,3}-)?\d{6,8}(-\d{3,4})?$/.test(a)};c.isUrl=function(a){if(!$isString(a))return!1;return/^((http(s)?|ftp|telnet|news|rtsp|mms):\/\/)?(((\w(\-*\w)*\.)+[a-zA-Z]{2,4})|localhost|(((1\d\d|2([0-4]\d|5[0-5])|[1-9]\d|\d)\.){3}(1\d\d|2([0-4]\d|5[0-5])|[1-9]\d|\d)))(:\d{1,5})?(\/+.*)*$/.test(a)};
c.isEmail=function(a){if(!$isString(a))return!1;return/^[\w-]+@[\w-]+(\.[\w-]+)+$/.test(a)};c.isZipCode=function(a){if(!$isString(a))return!1;return/^\d{6}$/.test(a)};c.isDate=function(a){if($isDate(a))try{a=Date.format(a,"yyyy-MM-dd")}catch(c){return!1}if(!$isString(a))return!1;if(!/^\d{4}((\.|\/|\-)\d{1,2}){1,2}$/.test(a))return!1;a=a.match(/\d{1,4}/g);if(a==null)return!1;var b=new Date(a[0],a[1]-1,a[2]);return b.getFullYear()==a[0]&&b.getMonth()+1==a[1]&&b.getDate()==a[2]};c.isDateTime=function(a){if($isDate(a))try{a=
Date.format(a,"yyyy-MM-dd HH:mm:ss")}catch(c){return!1}if(!$isString(a))return!1;var b=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2})(:(\d{1,2})){1,2}$/);if(b==null)return!1;else{b=a.match(/\d{1,4}/g);if(b==null)return!1;return b.length<5?!1:b.length==5?(a=new Date(b[0],b[1]-1,b[2],b[3],b[4]),a.getFullYear()==b[0]&&a.getMonth()+1==b[1]&&a.getDate()==b[2]&&a.getHours()==b[3]&&a.getMinutes()==b[4]):b.length>5?(a=new Date(b[0],b[1]-1,b[2],b[3],b[4],b[5]),a.getFullYear()==b[0]&&a.getMonth()+
1==b[1]&&a.getDate()==b[2]&&a.getHours()==b[3]&&a.getMinutes()==b[4]&&a.getSeconds()==b[5]):!1}};c.isTime=function(a){if($isDate(a))try{a=a.toTimeString().split(" ")[0]}catch(c){return!1}if(!$isString(a))return!1;return/^(20|21|22|23|[0-1]\d)(\:[0-5][0-9]){0,2}$/.test(a)};c.isSqlInjection=function(a){var c=/(\sand\s)|(\sor\s)|(\slike\s)|(select\s)|(insert\s)|(delete\s)|(update\s[\s\S].*\sset)|(create\s)|(\stable)|(\sexec)|(declare)|(\struncate)|(\smaster)|(\sbackup)|(\smid)|(\scount)|(\sadd\s)|(\salter\s)|(\sdrop\s)|(\sfrom\s)|(\struncate\s)|(\sunion\s)|(\sjoin\s)|(')/,
b=!c.test(a);(c=a.match(c))&&c[0]&&(a=c[0]);return{successful:b,hint:a}};c.isIP=function(a){if(!$isString(a))return!1;return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-4])$/.test(a)};c.isIDCard=function(a){if(!$isString(a))return!1;return/^((11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|91)\d{4})((((19|20)(([02468][048])|([13579][26]))0229))|((20[0-9][0-9])|(19[0-9][0-9]))((((0[1-9])|(1[0-2]))((0[1-9])|(1\d)|(2[0-8])))|((((0[1,3-9])|(1[0-2]))(29|30))|(((0[13578])|(1[02]))31))))((\d{3}(x|X))|(\d{4}))$/.test(a)};
c.isMaxValue=function(a,d,b){if(c.isDigit(a))return typeof b=="undefined"&&(b=!1),a=b?parseFloat(a):parseInt(a),d=b?parseFloat(d):parseInt(d),a>d?!1:!0;return!1};c.isMinValue=function(a,d,b){if(c.isDigit(a))return typeof b=="undefined"&&(b=!1),a=b?parseFloat(a):parseInt(a),d=b?parseFloat(d):parseInt(d),a<d?!1:!0;return!1};c.isMaxLength=function(a,c){a==null&&(a="");var b=a;$isString(a)||(b=a.toString());var e=parseInt(c);return b.length>=e?!1:!0};c.isMinLength=function(a,c){a==null&&(a="");var b=
a;$isString(a)||(b=a.toString());var e=parseInt(c);return b.length<=e?!1:!0};return c};mx.utils.CheckUtil=new mx.utils.CheckUtilClass;$ns("mx.utils");mx.utils.ClipboardUtilClass=function(){this.getText=function(){if(window.clipboardData)return window.clipboardData.getData("Text");return null};this.setText=function(a){if(window.clipboardData)return window.clipboardData.setData("Text",a);else mx.indicate("error",mx.err("UNSUPPORTED"))};return this};mx.utils.ClipboardUtil=new mx.utils.ClipboardUtilClass;$ns("mx.utils");mx.utils.DelayedTaskClass=function(b,c,d){function f(){clearInterval(a);a=null;b.apply(c,d||[])}var e=this,a=null;e.delay=function(g,h,i,j){e.cancel();b=h||b;c=i||c;d=j||d;a=setInterval(f,g)};e.cancel=function(){a&&(clearInterval(a),a=null)}};mx.utils.DelayedTask=new mx.utils.DelayedTaskClass;$ns("mx.utils");mx.utils.EncryptUtilClass=function(){this.encryptMD5=function(a){return hex_md5(a)};this.encryptAES=function(a,d){return aesEncrypt(a,d)};this.decryptAES=function(a,d){return aesDecrypt(a,d)};return this};mx.utils.EncryptUtil=new mx.utils.EncryptUtilClass;var hexcase=0,b64pad="",chrsz=8;function hex_sha1(a){return binb2hex(core_sha1(str2binb(a),a.length*chrsz))}function b64_sha1(a){return binb2b64(core_sha1(str2binb(a),a.length*chrsz))}
function str_sha1(a){return binb2str(core_sha1(str2binb(a),a.length*chrsz))}function hex_hmac_sha1(a,d){return binb2hex(core_hmac_sha1(a,d))}function b64_hmac_sha1(a,d){return binb2b64(core_hmac_sha1(a,d))}function str_hmac_sha1(a,d){return binb2str(core_hmac_sha1(a,d))}function sha1_vm_test(){return hex_sha1("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}
function core_sha1(a,d){a[d>>5]|=128<<24-d%32;a[(d+64>>9<<4)+15]=d;for(var b=Array(80),c=1732584193,e=-271733879,f=-1732584194,g=271733878,i=-1009589776,j=0;j<a.length;j+=16){for(var k=c,l=e,m=f,n=g,o=i,h=0;h<80;h++){b[h]=h<16?a[j+h]:rol(b[h-3]^b[h-8]^b[h-14]^b[h-16],1);var p=safe_add(safe_add(rol(c,5),sha1_ft(h,e,f,g)),safe_add(safe_add(i,b[h]),sha1_kt(h))),i=g,g=f,f=rol(e,30),e=c,c=p}c=safe_add(c,k);e=safe_add(e,l);f=safe_add(f,m);g=safe_add(g,n);i=safe_add(i,o)}return[c,e,f,g,i]}
function sha1_ft(a,d,b,c){if(a<20)return d&b|~d&c;if(a<40)return d^b^c;if(a<60)return d&b|d&c|b&c;return d^b^c}function sha1_kt(a){return a<20?1518500249:a<40?1859775393:a<60?-1894007588:-899497514}function core_hmac_sha1(a,d){var b=str2binb(a);b.length>16&&(b=core_sha1(b,a.length*chrsz));for(var c=Array(16),e=Array(16),f=0;f<16;f++)c[f]=b[f]^909522486,e[f]=b[f]^1549556828;b=core_sha1(c.concat(str2binb(d)),512+d.length*chrsz);return core_sha1(e.concat(b),672)}
function safe_add(a,d){var b=(a&65535)+(d&65535);return(a>>16)+(d>>16)+(b>>16)<<16|b&65535}function rol(a,d){return a<<d|a>>>32-d}function str2binb(a){for(var d=[],b=(1<<chrsz)-1,c=0;c<a.length*chrsz;c+=chrsz)d[c>>5]|=(a.charCodeAt(c/chrsz)&b)<<32-chrsz-c%32;return d}function binb2str(a){for(var d="",b=(1<<chrsz)-1,c=0;c<a.length*32;c+=chrsz)d+=String.fromCharCode(a[c>>5]>>>32-chrsz-c%32&b);return d}
function binb2hex(a){for(var d=hexcase?"0123456789ABCDEF":"0123456789abcdef",b="",c=0;c<a.length*4;c++)b+=d.charAt(a[c>>2]>>(3-c%4)*8+4&15)+d.charAt(a[c>>2]>>(3-c%4)*8&15);return b}function binb2b64(a){for(var d="",b=0;b<a.length*4;b+=3)for(var c=(a[b>>2]>>8*(3-b%4)&255)<<16|(a[b+1>>2]>>8*(3-(b+1)%4)&255)<<8|a[b+2>>2]>>8*(3-(b+2)%4)&255,e=0;e<4;e++)d+=b*8+e*6>a.length*32?b64pad:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>6*(3-e)&63);return d}hexcase=0;b64pad="";
chrsz=8;function hex_md5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function b64_md5(a){return binl2b64(core_md5(str2binl(a),a.length*chrsz))}function str_md5(a){return binl2str(core_md5(str2binl(a),a.length*chrsz))}function hex_hmac_md5(a,d){return binl2hex(core_hmac_md5(a,d))}function b64_hmac_md5(a,d){return binl2b64(core_hmac_md5(a,d))}function str_hmac_md5(a,d){return binl2str(core_hmac_md5(a,d))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}
function core_md5(a,d){a[d>>5]|=128<<d%32;a[(d+64>>>9<<4)+14]=d;for(var b=1732584193,c=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16)var i=b,j=c,k=e,l=f,b=md5_ff(b,c,e,f,a[g+0],7,-680876936),f=md5_ff(f,b,c,e,a[g+1],12,-389564586),e=md5_ff(e,f,b,c,a[g+2],17,606105819),c=md5_ff(c,e,f,b,a[g+3],22,-1044525330),b=md5_ff(b,c,e,f,a[g+4],7,-176418897),f=md5_ff(f,b,c,e,a[g+5],12,1200080426),e=md5_ff(e,f,b,c,a[g+6],17,-1473231341),c=md5_ff(c,e,f,b,a[g+7],22,-45705983),b=md5_ff(b,c,e,f,a[g+8],7,
1770035416),f=md5_ff(f,b,c,e,a[g+9],12,-1958414417),e=md5_ff(e,f,b,c,a[g+10],17,-42063),c=md5_ff(c,e,f,b,a[g+11],22,-1990404162),b=md5_ff(b,c,e,f,a[g+12],7,1804603682),f=md5_ff(f,b,c,e,a[g+13],12,-40341101),e=md5_ff(e,f,b,c,a[g+14],17,-1502002290),c=md5_ff(c,e,f,b,a[g+15],22,1236535329),b=md5_gg(b,c,e,f,a[g+1],5,-165796510),f=md5_gg(f,b,c,e,a[g+6],9,-1069501632),e=md5_gg(e,f,b,c,a[g+11],14,643717713),c=md5_gg(c,e,f,b,a[g+0],20,-373897302),b=md5_gg(b,c,e,f,a[g+5],5,-701558691),f=md5_gg(f,b,c,e,a[g+
10],9,38016083),e=md5_gg(e,f,b,c,a[g+15],14,-660478335),c=md5_gg(c,e,f,b,a[g+4],20,-405537848),b=md5_gg(b,c,e,f,a[g+9],5,568446438),f=md5_gg(f,b,c,e,a[g+14],9,-1019803690),e=md5_gg(e,f,b,c,a[g+3],14,-187363961),c=md5_gg(c,e,f,b,a[g+8],20,1163531501),b=md5_gg(b,c,e,f,a[g+13],5,-1444681467),f=md5_gg(f,b,c,e,a[g+2],9,-51403784),e=md5_gg(e,f,b,c,a[g+7],14,1735328473),c=md5_gg(c,e,f,b,a[g+12],20,-1926607734),b=md5_hh(b,c,e,f,a[g+5],4,-378558),f=md5_hh(f,b,c,e,a[g+8],11,-2022574463),e=md5_hh(e,f,b,c,a[g+
11],16,1839030562),c=md5_hh(c,e,f,b,a[g+14],23,-35309556),b=md5_hh(b,c,e,f,a[g+1],4,-1530992060),f=md5_hh(f,b,c,e,a[g+4],11,1272893353),e=md5_hh(e,f,b,c,a[g+7],16,-155497632),c=md5_hh(c,e,f,b,a[g+10],23,-1094730640),b=md5_hh(b,c,e,f,a[g+13],4,681279174),f=md5_hh(f,b,c,e,a[g+0],11,-358537222),e=md5_hh(e,f,b,c,a[g+3],16,-722521979),c=md5_hh(c,e,f,b,a[g+6],23,76029189),b=md5_hh(b,c,e,f,a[g+9],4,-640364487),f=md5_hh(f,b,c,e,a[g+12],11,-421815835),e=md5_hh(e,f,b,c,a[g+15],16,530742520),c=md5_hh(c,e,f,
b,a[g+2],23,-995338651),b=md5_ii(b,c,e,f,a[g+0],6,-198630844),f=md5_ii(f,b,c,e,a[g+7],10,1126891415),e=md5_ii(e,f,b,c,a[g+14],15,-1416354905),c=md5_ii(c,e,f,b,a[g+5],21,-57434055),b=md5_ii(b,c,e,f,a[g+12],6,1700485571),f=md5_ii(f,b,c,e,a[g+3],10,-1894986606),e=md5_ii(e,f,b,c,a[g+10],15,-1051523),c=md5_ii(c,e,f,b,a[g+1],21,-2054922799),b=md5_ii(b,c,e,f,a[g+8],6,1873313359),f=md5_ii(f,b,c,e,a[g+15],10,-30611744),e=md5_ii(e,f,b,c,a[g+6],15,-1560198380),c=md5_ii(c,e,f,b,a[g+13],21,1309151649),b=md5_ii(b,
c,e,f,a[g+4],6,-145523070),f=md5_ii(f,b,c,e,a[g+11],10,-1120210379),e=md5_ii(e,f,b,c,a[g+2],15,718787259),c=md5_ii(c,e,f,b,a[g+9],21,-343485551),b=safe_add(b,i),c=safe_add(c,j),e=safe_add(e,k),f=safe_add(f,l);return[b,c,e,f]}function md5_cmn(a,d,b,c,e,f){return safe_add(bit_rol(safe_add(safe_add(d,a),safe_add(c,f)),e),b)}function md5_ff(a,d,b,c,e,f,g){return md5_cmn(d&b|~d&c,a,d,e,f,g)}function md5_gg(a,d,b,c,e,f,g){return md5_cmn(d&c|b&~c,a,d,e,f,g)}
function md5_hh(a,d,b,c,e,f,g){return md5_cmn(d^b^c,a,d,e,f,g)}function md5_ii(a,d,b,c,e,f,g){return md5_cmn(b^(d|~c),a,d,e,f,g)}function core_hmac_md5(a,d){var b=str2binl(a);b.length>16&&(b=core_md5(b,a.length*chrsz));for(var c=Array(16),e=Array(16),f=0;f<16;f++)c[f]=b[f]^909522486,e[f]=b[f]^1549556828;b=core_md5(c.concat(str2binl(d)),512+d.length*chrsz);return core_md5(e.concat(b),640)}function safe_add(a,d){var b=(a&65535)+(d&65535);return(a>>16)+(d>>16)+(b>>16)<<16|b&65535}
function bit_rol(a,d){return a<<d|a>>>32-d}function str2binl(a){for(var d=[],b=(1<<chrsz)-1,c=0;c<a.length*chrsz;c+=chrsz)d[c>>5]|=(a.charCodeAt(c/chrsz)&b)<<c%32;return d}function binl2str(a){for(var d="",b=(1<<chrsz)-1,c=0;c<a.length*32;c+=chrsz)d+=String.fromCharCode(a[c>>5]>>>c%32&b);return d}function binl2hex(a){for(var d=hexcase?"0123456789ABCDEF":"0123456789abcdef",b="",c=0;c<a.length*4;c++)b+=d.charAt(a[c>>2]>>c%4*8+4&15)+d.charAt(a[c>>2]>>c%4*8&15);return b}
function binl2b64(a){for(var d="",b=0;b<a.length*4;b+=3)for(var c=(a[b>>2]>>8*(b%4)&255)<<16|(a[b+1>>2]>>8*((b+1)%4)&255)<<8|a[b+2>>2]>>8*((b+2)%4)&255,e=0;e<4;e++)d+=b*8+e*6>a.length*32?b64pad:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>6*(3-e)&63);return d}function cvt_hex8(a){return to16(a>>>4&15)+to16(a&15)}function cvt_hex32(a){var d="",b,c;for(b=7;b>=0;b--)c=a>>>b*4&15,d+=to16(c);return d}
function _to16(a){switch(a){case 0:return"0";case 1:return"1";case 2:return"2";case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"a";case 11:return"b";case 12:return"c";case 13:return"d";case 14:return"e";case 15:return"f"}}function to16(a){if(isNaN(a))return a.toString(16);else{for(var d="";a>=16;)d=_to16(a%16)+d,a=parseInt(a/16);return d=_to16(a%16)+d}}
function cvt_byte(a){var d=a.charCodeAt(0);if(d>=48&&d<=57)d-=48;else if(d>=65&&d<=70)d-=55;else if(d>=97&&d<=102)d-=87;else return window.alert(a.charAt(1)+" is not a valid hex digit"),-1;var b=a.charCodeAt(1);if(b>=48&&b<=57)b-=48;else if(b>=65&&b<=70)b-=55;else if(b>=97&&b<=102)b-=87;else return window.alert(a.charAt(2)+" is not a valid hex digit"),-1;return d*16+b}
var S_enc=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,
126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],S_dec=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,
155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,
71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],I00=0,I01=1,I02=2,I03=3,I10=4,I11=5,I12=6,I13=7,I20=8,I21=9,I22=10,I23=11,I30=12,I31=13,I32=14,I33=15;function I(a,d){return a*4+d}
function remove_spaces(a){var d,b="";for(d=0;d<a.length;d++)a.charAt(d)!=" "&&(b+=a.charAt(d));return b}function aes_mul(a,d){for(var b=0;a>0;)(a&1)!=0&&(b^=d),a>>>=1,d<<=1;for(var c=65536,e=72448;c>=256;)(b&c)!=0&&(b^=e),c>>=1,e>>=1;return b}function SubWord(a){var d;for(d=0;d<16;d++)a[d]=S_enc[a[d]];return a}function RotWord(a){return[a[1],a[2],a[3],a[0]]}function Rcon(a){var d=2,b=1;for(a--;a>0;)(a&1)!=0&&(b=aes_mul(b,d)),d=aes_mul(d,d),a>>=1;return b}
function key_expand(a){var d=Array(4),b,c=a.length/4,e=c+6,f=Array(4*(e+1));for(b=0;b<a.length;b++)f[b]=a[b];for(b=c;b<4*(e+1);){for(a=0;a<4;a++)d[a]=f[(b-1)*4+a];b%c==0?(d=RotWord(d),d=SubWord(d),d[0]^=Rcon(b/c)):c>6&&b%c==4&&(d=SubWord(d));for(a=0;a<4;a++)f[b*4+a]=f[(b-c)*4+a]^d[a];b++}return f}function SubBytes(a,d){var b;for(b=0;b<16;b++)a[b]=d[a[b]];return a}
function ShiftRows(a){var d,b,c,e;d=a[I10];b=a[I11];c=a[I12];e=a[I13];a[I10]=b;a[I11]=c;a[I12]=e;a[I13]=d;d=a[I20];b=a[I21];c=a[I22];e=a[I23];a[I20]=c;a[I21]=e;a[I22]=d;a[I23]=b;d=a[I30];b=a[I31];c=a[I32];e=a[I33];a[I30]=e;a[I31]=d;a[I32]=b;a[I33]=c;return a}
function InvShiftRows(a){var d,b,c,e;d=a[I10];b=a[I11];c=a[I12];e=a[I13];a[I10]=e;a[I11]=d;a[I12]=b;a[I13]=c;d=a[I20];b=a[I21];c=a[I22];e=a[I23];a[I20]=c;a[I21]=e;a[I22]=d;a[I23]=b;d=a[I30];b=a[I31];c=a[I32];e=a[I33];a[I30]=b;a[I31]=c;a[I32]=e;a[I33]=d;return a}
function MixColumns(a){var d,b,c,e,f;for(d=0;d<4;d++)b=a[I(0,d)],c=a[I(1,d)],e=a[I(2,d)],f=a[I(3,d)],a[I(0,d)]=aes_mul(2,b)^aes_mul(3,c)^e^f,a[I(1,d)]=b^aes_mul(2,c)^aes_mul(3,e)^f,a[I(2,d)]=b^c^aes_mul(2,e)^aes_mul(3,f),a[I(3,d)]=aes_mul(3,b)^c^e^aes_mul(2,f);return a}
function InvMixColumns(a){var d,b,c,e,f;for(d=0;d<4;d++)b=a[I(0,d)],c=a[I(1,d)],e=a[I(2,d)],f=a[I(3,d)],a[I(0,d)]=aes_mul(14,b)^aes_mul(11,c)^aes_mul(13,e)^aes_mul(9,f),a[I(1,d)]=aes_mul(9,b)^aes_mul(14,c)^aes_mul(11,e)^aes_mul(13,f),a[I(2,d)]=aes_mul(13,b)^aes_mul(9,c)^aes_mul(14,e)^aes_mul(11,f),a[I(3,d)]=aes_mul(11,b)^aes_mul(13,c)^aes_mul(9,e)^aes_mul(14,f);return a}
function AddRoundKey(a,d,b){var c;for(c=0;c<4;c++)a[I(0,c)]^=d[b+c*4],a[I(1,c)]^=d[b+c*4+1],a[I(2,c)]^=d[b+c*4+2],a[I(3,c)]^=d[b+c*4+3];return a}function transpose(a){var d,b,c=Array(16);for(d=0;d<4;d++)for(b=0;b<4;b++)c[I(d,b)]=a[I(b,d)];return c}var AES_output=Array(16);
function aes_encrypt(a,d){var b=Array(44),c=Array(16),e;if(!(d[0]<0)&&!(a[0]<0)){var b=key_expand(a),f=a.length/4+6,c=transpose(d),c=AddRoundKey(c,b,0);for(e=1;e<f;e++)c=SubBytes(c,S_enc),c=ShiftRows(c),c=MixColumns(c),c=AddRoundKey(c,b,e*16);SubBytes(c,S_enc);ShiftRows(c);AddRoundKey(c,b,f*16);AES_output=transpose(c);b=cvt_hex8(AES_output[0]);for(c=1;c<16;c++)b+=cvt_hex8(AES_output[c]);return b}}
function aes_decrypt(a,d){var b=Array(44),c=Array(16),e,d=hexStr2Byte(d);if(!(d[0]<0)&&!(a[0]<0)){b=key_expand(a);e=a.length/4+6;c=transpose(d);c=AddRoundKey(c,b,e*16);for(e-=1;e>=1;e--)c=InvShiftRows(c),c=SubBytes(c,S_dec),c=AddRoundKey(c,b,e*16),c=InvMixColumns(c);InvShiftRows(c);SubBytes(c,S_dec);AddRoundKey(c,b,0);AES_output=transpose(c);b="";for(c=0;c<16;c++)b+=String.fromCharCode(AES_output[c]);return b}}
function hexStr2Byte(a){for(var d=Array(a.length/2),b=0;b<a.length/2;b++)if(d[b]=cvt_byte(a.substr(b*2,2)),d[b]<0){d[0]=-1;break}return d}function str2HexByte(a){var d=Array(16);a.length>16&&(d=Array(a.length));var b;if(a.length>=16)for(b=0;b<a.length;b++)d[b]=a.charCodeAt(b);else{for(b=0;b<a.length;b++)d[b]=a.charCodeAt(b);for(b=a.length;b<16;b++)d[b]=0}return d}function hexByte2HexStr(a){for(var d=cvt_hex8(a[0]),b=1;b<a.length;b++)d+=" "+cvt_hex8(a[b]);return d}
function hexByte2Str(a){for(var d="",b=0;b<a.length;b++)d+=String.fromCharCode(a[b]);return d}function aesEcript(){for(var a=hexStr2Byte(key),d=str2HexByte(msg),b="",c=d.length/16,e=0;e<c;e++)b+=aes_encrypt(a,d.slice(e*16,(e+1)*16));return remove_spaces(b)}function aesEncrypt(a,d){for(var b=hexStr2Byte(a),c=str2HexByte(d),e="",f=c.length/16,g=0;g<f;g++)e+=aes_encrypt(b,c.slice(g*16,(g+1)*16));return remove_spaces(e)}
function aesDecrypt(a,d){for(var b=hexStr2Byte(a),d=remove_spaces(d),c="",e=d.length/32,f=0;f<e;f++)c+=aes_decrypt(b,d.slice(f*32,(f+1)*32));for(f=c.length-1;f>=0;f--)if(c.charCodeAt(f)>31&&c.charCodeAt(f)<128)break;return c.substring(0,f+1)};$ns("mx.utils");
mx.utils.ExcelUtil=function(){var a=this;a.baseUrl="~/../mx/servlets/exportExcelServlet";a.params=null;a.setBaseUrl=function(b){if(a.baseUrl!=b)a.baseUrl=b};a.setParams=function(b){if(a.params!=b)a.params=b};a.exportExcel=function(){if(a.baseUrl!=null){var b="";if($.isPlainObject(a.params)){if(typeof a.params.fileName!="undefined")a.params.fileName=encodeURIComponent(encodeURIComponent(a.params.fileName));if(typeof a.params.columnCaptions!="undefined")a.params.columnCaptions=encodeURIComponent(encodeURIComponent(a.params.columnCaptions));if(typeof a.params.filter!=
"undefined")a.params.filter=encodeURIComponent(encodeURIComponent(a.params.filter));for(var c in a.params)b+=b==""?c+"="+a.params[c]:"&"+c+"="+a.params[c];if(typeof a.params.tableName!="undefined"||typeof a.params.poName!="undefined")window.open(mx.mappath(a.baseUrl)+($isEmpty(b)?"":"?"+b),"_parent")}}};return a};$ns("mx.utils");mx.utils.FlashPluginUtilClass=function(){var a=this;a.isIE=/(msie|internet explorer)/i.test(navigator.userAgent);a.isSafari=/safari/i.test(navigator.userAgent);a.isOpera=window.opera!=void 0;a.isInstall=function(){if(a.isIE){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(c){return!1}return!0}else{for(var b=0;b<window.navigator.plugins.length;b++)if(window.navigator.plugins[b].name.indexOf("Shockwave")!=-1)return!0;return!1}};return a};mx.utils.FlashPluginUtil=new mx.utils.FlashPluginUtilClass;$ns("mx.utils");mx.utils.GUIDUtilClass=function(){this.newGUID=function(d,e){var f=!1;d!=null&&(f=d);var g=32;e!=null&&(g=e);for(var a="",c=1;c<=g;c++){var b=Math.floor(Math.random()*16);b<10?a+=b:b==10?a+="a":b==11?a+="b":b==12?a+="c":b==13?a+="d":b==14?a+="e":b==15&&(a+="f");if(c==8||c==12||c==16||c==20)a+="-"}return a=f?a.toLowerCase():a.toUpperCase()};return this};mx.utils.GUIDUtil=new mx.utils.GUIDUtilClass;if(!this.JSON)this.JSON={};
(function(){function j(a){return a<10?"0"+a:a}function i(a){o.lastIndex=0;return o.test(a)?'"'+a.replace(o,function(a){var g=d[a];return typeof g==="string"?g:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(b,d){var g,l,n,p,q=a,m,h=d[b];h&&typeof h==="object"&&typeof h.toJSON==="function"&&(h=h.toJSON(b));typeof c==="function"&&(h=c.call(d,b,h));switch(typeof h){case "string":return i(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);
case "object":if(!h)return"null";a+=f;m=[];if(Object.prototype.toString.apply(h)==="[object Array]"){p=h.length;for(g=0;g<p;g+=1)m[g]=e(g,h)||"null";n=m.length===0?"[]":a?"[\n"+a+m.join(",\n"+a)+"\n"+q+"]":"["+m.join(",")+"]";a=q;return n}if(c&&typeof c==="object"){p=c.length;for(g=0;g<p;g+=1)l=c[g],typeof l==="string"&&(n=e(l,h))&&m.push(i(l)+(a?": ":":")+n)}else for(l in h)Object.hasOwnProperty.call(h,l)&&(n=e(l,h))&&m.push(i(l)+(a?": ":":")+n);n=m.length===0?"{}":a?"{\n"+a+m.join(",\n"+a)+"\n"+
q+"}":"{"+m.join(",")+"}";a=q;return n}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+j(this.getUTCMonth()+1)+"-"+j(this.getUTCDate())+"T"+j(this.getUTCHours())+":"+j(this.getUTCMinutes())+":"+j(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,f,d={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},c;if(typeof JSON.stringify!=="function")JSON.stringify=function(b,d,g){var l;f=a="";if(typeof g==="number")for(l=0;l<g;l+=1)f+=" ";else typeof g==="string"&&(f=g);if((c=d)&&typeof d!=="function"&&(typeof d!=="object"||typeof d.length!=="number"))throw Error("JSON.stringify");return e("",
{"":b})};if(typeof JSON.parse!=="function")JSON.parse=function(a,d){function g(a,b){var c,f,h=a[b];if(h&&typeof h==="object")for(c in h)Object.hasOwnProperty.call(h,c)&&(f=g(h,c),f!==void 0?h[c]=f:delete h[c]);return d.call(a,b,h)}var c,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),typeof d==="function"?g({"":c},""):c;throw new SyntaxError("JSON.parse");}})();
function jsonPath(j,i,e){var b={resultType:e&&e.resultType||"VALUE",result:[],normalize:function(a){var b=[];return a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function(a,c){return b[c]})},asPath:function(a){for(var a=a.split(";"),b="$",d=1,c=a.length;d<c;d++)b+=/^[0-9*]+$/.test(a[d])?"["+a[d]+"]":"['"+a[d]+"']";return b},store:function(a,f){a&&(b.result[b.result.length]=
b.resultType=="PATH"?b.asPath(a):f);return!!a},trace:function(a,f,d){if(a){var a=a.split(";"),c=a.shift(),a=a.join(";");if(f&&f.hasOwnProperty(c))b.trace(a,f[c],d+";"+c);else if(c==="*")b.walk(c,a,f,d,function(a,c,d,f,e){b.trace(a+";"+d,f,e)});else if(c==="..")b.trace(a,f,d),b.walk(c,a,f,d,function(a,c,d,f,e){typeof f[a]==="object"&&b.trace("..;"+d,f[a],e+";"+a)});else if(/,/.test(c))for(var c=c.split(/'?,'?/),e=0,k=c.length;e<k;e++)b.trace(c[e]+";"+a,f,d);else/^\(.*?\)$/.test(c)?b.trace(b.eval(c,
f,d.substr(d.lastIndexOf(";")+1))+";"+a,f,d):/^\?\(.*?\)$/.test(c)?b.walk(c,a,f,d,function(a,c,d,f,e){b.eval(c.replace(/^\?\((.*?)\)$/,"$1"),f[a],a)&&b.trace(a+";"+d,f,e)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(c)&&b.slice(c,a,f,d)}else b.store(d,f)},walk:function(a,b,d,c,e){if(d instanceof Array)for(var k=0,g=d.length;k<g;k++)k in d&&e(k,a,b,d,c);else if(typeof d==="object")for(k in d)d.hasOwnProperty(k)&&e(k,a,b,d,c)},slice:function(a,f,d,c){if(d instanceof Array){var e=d.length,k=0,g=e,i=1;
a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,b,c,d){k=parseInt(b||k);g=parseInt(c||g);i=parseInt(d||i)});k=k<0?Math.max(0,k+e):Math.min(e,k);g=g<0?Math.max(0,g+e):Math.min(e,g);for(a=k;a<g;a+=i)b.trace(a+";"+f,d,c)}},eval:function(a,b){try{return e&&e.name&&typeof e.value!="undefined"?o&&b&&b[e.name]==e.value:!1}catch(d){throw new SyntaxError("Please use mx.utils.JsonUtil\u3002");}}},o=j;if(i&&j&&(b.resultType=="VALUE"||b.resultType=="PATH"))return b.trace(b.normalize(i).replace(/^\$;/,
""),j,"$"),b.result.length?b.result:!1}$ns("mx.utils");mx.utils.JsonUtilClass=function(){var j=this;j.getItems=function(i,e,b,j){var a=null,a={name:e,value:b};$.isNumeric(b)||(b="'"+b+"'");return a=typeof j=="undefined"||j==1?jsonPath(i,"$[?(@."+e+"=="+b+")]",a):j==2?jsonPath(i,"$.*[?(@."+e+"=="+b+")]",a):jsonPath(i,"$..[?(@."+e+"=="+b+")]",a)};j.getItem=function(i,e,b,o){i=j.getItems(i,e,b,o);return $notEmpty(i)&&i.length>0?i[0]:null};return j};mx.utils.JsonUtil=new mx.utils.JsonUtilClass;$ns("mx.utils");mx.utils.ObjectPool=function(d,e){var a=this,b=[];a.poolSize=e?e:5;a.createObjectHandler=d?d:null;a.getObject=function(c){if(b.length==0)return a.createObjectHandler(a,c);return b.pop()};a.passivateObject=function(c){if(c)return b.length>=a.poolSize?!1:(b.push(c),!0)};a.getPooledObjects=function(){return b};return a};$ns("mx.utils");$import("mx.lib.jqprint");
mx.utils.PrintUtil=function(){function w(){var G;if($instanceOf(b.dataControl,mx.datacontrols.DataForm))return D();else if($instanceOf(b.dataControl,mx.datacontrols.DataGrid)){var a;if(b.dataControl.$e.hasClass("groupHeaderGrid")){$(".show_table").empty().remove();c=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%;border-collapse:collapse;' class='show_table dataGrid'><tr><td class='printHead'></td></tr><tr><td class='printBody'></td></tr></table>");var h=b.dataControl.entityContainer.data;
a=b.dataControl.columns;var d=b.dataControl.$bodyTable;if($isEmpty(d))a=void 0;else{for(var f=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%' class='printBodyTable'/>"),p=x(),g=null,d=d.find("tr"),e=0;e<h.length;e++){var l=$("<tr/>"),j=h[e][b.dataControl.groupColumn];if(j!=null&&g==null||j!=g){var i=mx.mappath("$theme/images/expand.png"),g=$("<tr class='kong_tr'></tr>");b.dataControl.displayRowNumber&&g.append("<td width='"+b.dataControl.rowNumberColWidth*2+"' class='l'></td>");
b.dataControl.displayCheckBox&&g.append("<td width='"+b.dataControl.rowNumberColWidth+"'></td>");f.append(g);g=j;l.append($("<td><img src="+i+"><b>"+g+"</td>"));f.append(l)}j=$("<tr/>");e%2!=0&&(j=$("<tr class='even'/>"));b.dataControl.displayRowNumber&&j.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth*2+"'>"+(e+1)+"</td>"));b.dataControl.displayCheckBox&&j.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth+"'><input type='checkbox'name='checkbox'/></td>"));
for(i=0;i<a.length;i++){var n=a[i].name;a[i].isPrint==!1||b.dataControl.primaryKey===n||n!=b.dataControl._tempColumnName&&a[i].visible&&j.append($("<td>"+(d[e].cells[n]?$(d[e].cells[n]).text():"")+"</td>"))}l.find("td").attr("colspan",j.find("td").length);f.append(j)}g=c.find("td.printHead");h=c.find("td.printBody");g.append(p);h.append(f);if(b.dataControl.displayStatisticRow){g=$("<tr><td><table style='width:100%;border:1px solid #E3E8EE;border-top:0;' cellpadding='0' cellspacing='0'><tr class='t'></tr></table></td></tr>");
for(d=0;d<a.length;d++)if(e=a[d],e.name!=b.dataControl._tempColumnName)e=e.statisticValue,e==null&&(e=""),g.find("tr.t").append($("<td style='text-align:right;height:23px;padding-right:0px;background-color:#f0f0f0;'>"+e+"</td>"));c.append(g)}b.dataControl.displayColSplitLine&&(h.find("tr").find("td").css({"border-right":"1px solid #E3E8EE","border-top":"1px solid #E3E8EE"}),c.find("td.printHead").find("tr").find("td").css({border:"1px solid #E3E8EE"}),p.find("tr").find("td:first").css({"border-left":"1px solid #E3E8EE"}),
f.find("tr").find("td:first").css({"border-left":"1px solid #E3E8EE"}),f.find("tr:last").find("td").css({"border-bottom":"1px solid #E3E8EE"}),f.find("tr:first").find("td").css({"border-top":"none"}));h.find("tr").find("td").css({height:"23px"});f.find("tr.even").find("td").css({"background-color":"#FAFAFA"});c.find("table").find("td").css({padding:"0 2px"});c.find("table").find("td[class='tdCen']").css({"text-align":"center"});h.find("tr.kong_tr").find("td").css({border:"0",height:"0",overflow:"hidden"});
a=c.find("tr.groupTr");a.find("table").attr({cellpadding:"0",cellspacing:"0"});a.find("td").css({padding:"0","vertical-align":"top","text-align":"center"});c.find("td.no_child").css({border:"1px solid #E3E8EE"});c.find("td.has_child").css({border:"1px solid #E3E8EE"});c.find("div.last_capton").css({"padding-left":"5px","padding-right":"5px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"});u();a=c}}else if(b.dataControl.$e.hasClass("groupLockHeaderGrid"))if($(".show_table").empty().remove(),
c=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%;border-collapse:collapse;' class='show_table dataGrid'><tr><td class='printHead'></td></tr><tr><td class='printBody'></td></tr></table>"),h=b.dataControl.entityContainer.data,a=b.dataControl.columns,d=b.dataControl.$bodyLeftTable,e=b.dataControl.$bodyRightTable,$isEmpty(d)||$isEmpty(e))a=void 0;else{f=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%' class='printBodyTable'/>");p=x();g=null;d=d.find("tr");
e=e.find("tr");for(l=0;l<h.length;l++){j=$("<tr/>");i=h[l][b.dataControl.groupColumn];if(i!=null&&g==null||i!=g)n=mx.mappath("$theme/images/expand.png"),g=$("<tr class='kong_tr'></tr>"),b.dataControl.displayRowNumber&&g.append("<td width='"+b.dataControl.rowNumberColWidth*2+"' class='l'></td>"),b.dataControl.displayCheckBox&&g.append("<td width='"+b.dataControl.rowNumberColWidth+"'></td>"),f.append(g),g=i,j.append($("<td><img src="+n+"><b>"+g+"</td>")),f.append(j);i=$("<tr/>");l%2!=0&&(i=$("<tr class='even'/>"));
b.dataControl.displayRowNumber&&i.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth*2+"'>"+(l+1)+"</td>"));b.dataControl.displayCheckBox&&i.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth+"'><input type='checkbox'name='checkbox'/></td>"));for(n=0;n<a.length;n++){var o=a[n].name;a[n].isPrint==!1||b.dataControl.primaryKey===o||o!=b.dataControl._tempColumnName&&a[n].visible&&(a[n].locked===!0?i.append($("<td>"+($(d[l].cells[o]).text()||"")+"</td>")):i.append($("<td>"+
($(e[l].cells[o]).text()||"")+"</td>")))}j.find("td").attr("colspan",i.find("td").length);f.append(i)}g=c.find("td.printHead");h=c.find("td.printBody");g.append(p);h.append(f);if(b.dataControl.displayStatisticRow){g=$("<tr><td><table style='width:100%;border:1px solid #E3E8EE;border-top:0;' cellpadding='0' cellspacing='0'><tr class='t'></tr></table></td></tr>");for(d=0;d<a.length;d++)if(e=a[d],e.name!="me.dataControl._tempColumnName")e=e.statisticValue,e==null&&(e=""),g.find("tr.t").append($("<td style='text-align:right;height:23px;padding-right:0px;background-color:#f0f0f0;'>"+
e+"</td>"));c.append(g)}b.dataControl.displayColSplitLine&&(h.find("tr").find("td").css({"border-right":"1px solid #E3E8EE","border-top":"1px solid #E3E8EE"}),c.find("td.printHead").find("tr").find("td").css({border:"1px solid #E3E8EE"}),p.find("tr").find("td:first").css({"border-left":"1px solid #E3E8EE"}),f.find("tr").find("td:first").css({"border-left":"1px solid #E3E8EE"}),f.find("tr:last").find("td").css({"border-bottom":"1px solid #E3E8EE"}),f.find("tr:first").find("td").css({"border-top":"none"}));
h.find("tr").find("td").css({height:"23px"});f.find("tr.even").find("td").css({"background-color":"#FAFAFA"});c.find("table").find("td").css({padding:"0 2px"});c.find("table").find("td[class='tdCen']").css({"text-align":"center"});h.find("tr.kong_tr").find("td").css({border:"0",height:"0",overflow:"hidden"});a=c.find("tr.groupTr");a.find("table").attr({cellpadding:"0",cellspacing:"0"});a.find("td").css({padding:"0","vertical-align":"top","text-align":"center"});c.find("td.no_child").css({border:"1px solid #E3E8EE"});
c.find("td.has_child").css({border:"1px solid #E3E8EE"});c.find("div.last_capton").css({"padding-left":"5px","padding-right":"5px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"});u();a=c}else{$(".show_table").empty().remove();c=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%;' class='show_table dataGrid'><tr><td class='printHead'></td></tr><tr><td class='printBody'></td></tr></table>");g=b.dataControl.entityContainer.data;a=b.dataControl.columns;j=
b.dataControl.$bodyTable;f=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%' class='printHeadTable'/>");p=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%' class='printBodyTable'/>");h=$("<tr id='head' style=''/>");b.dataControl.displayRowNumber&&h.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth*2+"'></td>"));b.dataControl.displayCheckBox&&h.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth+"'><input type='checkbox'name='checkbox'/></td>"));
for(d=0;d<a.length;d++)e=a[d],e.isPrint==!1||b.dataControl.primaryKey===e.name||e.name!=b.dataControl._tempColumnName&&e.visible&&h.append($("<td><b>"+e.caption+"</b></td>"));f.append(h);e=d=l=null;$instanceOf(b.dataControl,mx.datacontrols.LockHeaderGrid)?(d=b.dataControl.$bodyLeftTable.find("tr"),e=b.dataControl.$bodyRightTable.find("tr")):e=d=j.find("tr");j=g.length;b.dataControl.allowPaging&&(j=Math.min(j,b.dataControl.pageSize));for(i=0;i<j;i++){n=$("<tr/>");o=g[i][b.dataControl.groupColumn];
if(o!=null&&l==null||o!=l){var m=mx.mappath("$theme/images/expand.png"),l=$("<tr class='kong_tr'></tr>");b.dataControl.displayRowNumber&&l.append("<td width='"+b.dataControl.rowNumberColWidth*2+"' class='l'></td>");b.dataControl.displayCheckBox&&l.append("<td width='"+b.dataControl.rowNumberColWidth+"'></td>");p.append(l);l=o;n.append($("<td><img src="+m+"><b>"+l+"</td>"));p.append(n)}o=$("<tr/>");i%2!=0&&(o=$("<tr class='even'/>"));b.dataControl.displayRowNumber&&o.append($("<td class='tdCen' width='"+
b.dataControl.rowNumberColWidth*2+"'>"+(i+1)+"</td>"));b.dataControl.displayCheckBox&&o.append($("<td class='tdCen' width='"+b.dataControl.rowNumberColWidth+"'><input type='checkbox'name='checkbox'/></td>"));for(m=0;m<a.length;m++){var k=a[m].name;if(!(a[m].isPrint==!1||b.dataControl.primaryKey===k)&&k!=b.dataControl._tempColumnName&&a[m].visible)G=(k=d[i].cells[k]?$(d[i].cells[k]).text():e[i].cells[k]?$(e[i].cells[k]).text():"")||"",k=G,o.append($("<td>"+k+"</td>"))}n.find("td").attr("colspan",o.find("td").length);
p.append(o)}if(b.dataControl.displayStatisticRow){g=$("<tr><td><table style='width:100%;border:1px solid #E3E8EE;border-top:0;' cellpadding='0' cellspacing='0'><tr class='t'></tr></table></td></tr>");for(d=0;d<a.length;d++)if(e=a[d],e.name!=b.dataControl._tempColumnName)e=e.statisticValue,e==null&&(e=""),g.find("tr.t").append($("<td style='text-align:right;height:23px;padding-right:0px;background-color:#f0f0f0;'>"+e+"</td>"));c.append(g)}c.find("td.printHead").append(f);c.find("td.printBody").append(p);
b.dataControl.displayColSplitLine&&(c.find("td.printBody").find("tr").find("td").css({"border-right":"1px solid #E3E8EE","border-top":"1px solid #E3E8EE"}),c.find("td.printHead").find("tr").find("td").css({"border-right":"1px solid #E3E8EE","border-top":"1px solid #E3E8EE"}),c.find("table.printHeadTable").find("tr").find("td:first").css({"border-left":"1px solid #E3E8EE"}),c.find("table.printBodyTable").find("tr").find("td:first").css({"border-left":"1px solid #E3E8EE"}),c.find("table.printBodyTable").find("tr:last").find("td").css({"border-bottom":"1px solid #E3E8EE"}));
u();c.find("td.printBody").find("tr").find("td").css({height:"23px"});h.css({position:"static",height:"26px",overflow:"hidden","background-color":"#FAFAFA"});h.find("td").css({height:"24px"});c.find("table.printBodyTable").find("tr.even").find("td").css({"background-color":"#FAFAFA"});c.find("table").find("td").css({padding:"0 2px"});c.find("table").find("td[class='tdCen']").css({"text-align":"center"});c.find("td.printBody").find("tr.kong_tr").find("td").css({border:"0",height:"0",overflow:"hidden"});
a=c}return a}}function D(){$(".show_table").empty().remove();y=b.dataControl.$e;c=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%' class='show_table'><tr class='left_empty'><td class='left' style='width:150px;'></td><td></td></tr></table>");for(var a=0;a<b.dataControl.fields.length;a++)if($isArray(b.dataControl.fields[a])){k=$("<tr class='fieldGroupTr'><td class='l'></td><td></td></tr>");var h=mx.mappath("$theme/images/expand.png");k.find("td.l").html("<img src="+h+"><b>"+
b.dataControl.fields[a].caption+"</b>");c.append(k);z(b.dataControl.fields[a]);q=b.maxCols}else if($isObject(b.dataControl.fields[a])){if(!A)k=$("<tr class='empty_tr'><td class='l'></td><td></td></tr>"),c.append(k),A=!0,q=b.maxCols;b.printHideFields?s(b.dataControl.fields[a],a,!0):s(b.dataControl.fields[a],a,!1)}c.find("tr.fieldGroupTr").css({"min-height":"23px"});c.find("tr td").css({"padding-top":"5px","padding-right":"25px","padding-bottom":"5px","vertical-align":"top"});c.find("tr td.l").css({width:"150px",
"font-weight":"bold","text-align":"right"});c.find("tr td.t").css({"font-weight":"normal"});a=c.find("td.inputEditor");a.find("input").css({width:"100%",height:"auto!important",height:"23px","min-height":"23px","line-height":"23px",border:"1px solid #ccc"});a.find(".listEditor").css({width:"100%",height:"auto!important","_min-height":"23px",border:"1px solid #ccc"});a.find(".listEditorNew").css({width:"100%",height:"auto!important","min-height":"23px",_height:"23px",border:"1px solid #ccc","background-color":"white"});
a.find("div.richTextEditor").css({width:"100%",height:"auto!important","min-height":"80px",_height:"80px",border:"1px solid #ccc","background-color":"white"});a.find("div.listEditorNew").find("input").css({width:"100%",height:"auto!important","min-height":"0px",height:"0px","line-height":"0px",border:"0px",visibility:"hidden","background-color":"white"});a.find("div.richTextEditor").find("input").css({width:"100%",height:"auto!important","min-height":"0px",height:"0px","line-height":"0px",border:"0px",
visibility:"hidden","background-color":"white"});c.find("tr.empty_tr td").css({"padding-top":"0px","padding-bottom":"0px",overflow:"hidden",height:"0"});c.find("tr.empty_tr td.l").css({width:"150px",overflow:"hidden"});a=c.find(".LinkEditor");a.find("input.for_hidden_input").css({"padding-top":"0px",border:"0","min-height":"0","line-height":"0","padding-bottom":"0px",overflow:"hidden",height:"0"});a.find("span#text").css({color:"#477bab"});a.find("span#img").css({width:"16px","float":"left",height:"16px"});
c.find("tr").each(function(){if($(this).find("td").length>2){var a=$("<td colspan='2' style='pading:0;'><div style='width:100%;'><table cellpadding=0 cellspacing=0 style='width:100%' class='new_table'></table></div></td>"),b=$(this).clone();a.find("table.new_table").append(b);$(this).empty().append(a)}});c.find("input").attr("readonly","readonly");return c}function v(a,h){h==void 0&&(t=h=1);t=Math.max(t,h);for(var d=0;d<a.length;d++)if($isArray(a[d].columns)){v(a[d].columns,h+1);for(var c=!1,k=0;k<
a[d].columns.length;k++)if(a[d].columns[k].isPrint){c=!0;break}a[d].isPrint=c}else c=a[d].name,c==b.dataControl.primaryKey||c==b.dataControl._tempColumnName?a[d].isPrint=!1:(c=b.dataControl.columns[c],a[d].isPrint=c.visible&&c.isPrint);return t}function B(a){if($isArray(a.columns)){for(var b=0,d=0;d<a.columns.length;d++)b+=B(a.columns[d]);return b}else if(a.isPrint)return 1;return 0}function C(a,b,d){d==void 0&&(d=0);for(var c=a.find("tr").size(),k=0;k<b.length;k++){var g=b[k];if(g.isPrint){var e=
v([g]),l=B(g),j=$("<td align='center' vAlign='middle'><b>"+g.caption+"</b></td>");j.attr("colSpan",l);e>1?(j.attr("rowSpan",1),C(a,g.columns,d+1)):d==0?j.attr("rowSpan",c):d==c-1?j.attr("rowSpan",e):j.attr("rowSpan",c-d);a.find("tr[rowIndex="+d+"]").append(j)}}}function x(){for(var a=$("<table cellpadding=0 cellspacing=0 style='table-layout:fixed;width:100%;border-collapse:collapse;' class='printHeadTable'/>"),c=b.dataControl._jsonArrayClone(b.dataControl._columns),d=v(c),f=0;f<d;f++)a.append($("<tr style='height:24px;' rowIndex='"+
f+"' style=''/>"));f=a.find("tr[rowIndex=0]");b.dataControl.displayRowNumber&&f.append($("<td class='tdCen' rowSpan='"+d+"' width='"+b.dataControl.rowNumberColWidth*2+"'></td>"));b.dataControl.displayCheckBox&&f.append($("<td class='tdCen' rowSpan='"+d+"' width='"+b.dataControl.rowNumberColWidth+"'><input type='checkbox'name='checkbox'/></td>"));C(a,c);return a}function u(){b.dataControl.autoWrap&&c.find("table").find("td").css({"white-space":"normal","word-break":"break-all","word-wrap":"break-word"})}
function z(a){if(!b.printHideFields)for(var c=0;c<a.length;c++)a[c].visible==!1&&a.removeAt(c);for(c=0;c<a.length;c++)$isArray(a[c])?z(a[c]):$isObject(a[c])&&(b.printHideFields?s(a[c],c,!0):s(a[c],c,!1))}function s(a,h,d){if(d)a.visible=!0;if(a.visible)a.captionVisible?(m=$("<td width='150px' class='l t' style='text-align:right'/>"),r=$("<td class='inputEditor'/>")):(m=null,r=$("<td colSpan='2' class='inputEditor'/>")),$caption=a.caption,d=E(a,h),a.nullable===!1&&m&&m.append("<span style='color:red;'>*&nbsp;</span>"),
m&&m.append($caption+"\uff1a&nbsp;"),r.append(d.clone()),a.lineBreak==!1&&q<b.maxCols&&h>0?(a=c.find("tr[class!='fieldGroupTr'][class!='left_empty']").last(),a.length==0?(c.append($("<tr/>")),a=c.find("tr[class!='fieldGroupTr'][class!='left_empty']").last()):q+=1,m&&m.appendTo(a),r.appendTo(a)):(k=$("<tr class='printTr'/>"),m&&k.append(m),k.append(r),q=1,c.append(k))}function E(a){var c=$("<div></div>"),d=y.find(".formTable").find("td[id='"+a.name+"']").find("div.editor"),f;if(a.editorType=="FileEditor")return a=
$("<div class='LabelEditor mx'></div>").html("<input type='text'/>"),a.find("input").val(d.text()),a;else if(a.editorType=="RichTextEditor")return d="",b.dataControl.entityContainer&&(d=b.dataControl.entityContainer.getValue(a.name)),a=$("<div class='richTextEditor mx'></div>"),a.html("<div>"+(d||"")+"</div>"),a;else if(a.editorType=="LinkEditor")return d=b.dataControl.$e.find("#"+a.name).find("a"),a=d.find("span#img").css("background-image").replace("url(","").replace(")",""),a=$("<div class='LinkEditor mx'></div>").html("<div><span id='img'><img src="+
a+"></span>&nbsp;<span id='text'>"+d.find("span#text").html()+"</span></div><input type='text' class='for_hidden_input'/>");else if(a.editorType=="ListEditor"){d=a.displayCheckBox?b.dataControl.$e.find(".field#"+a.name).find("li.checked").find("span#text"):b.dataControl.$e.find(".field#"+a.name).find("li.selected").find("span#text");for(f=0;f<d.length;f++)c.append("<p>"+$(d[f]).text()+"</p>");a=$("<div class='listEditorNew mx listEditor"+a.name+"'></div>");a.append(c);a.append($("<input/>"));return a}else if(a.editorType==
"LabelEditor")return d=b.dataControl.$e.find(".field").find("div.editor").find(".labelEditor").find("div.label").find("span").html(),a=$("<div class='LabelEditor mx'></div>").html("<input type='text'/>"),a.find("input").val(d),a;else if(a.editorType=="CustomEditor")return d=b.dataControl.$e.find(".field#"+a.name).find("div.editor").find(".customEditor").find("input[type='text']").val(),a=$("<div class='inputEditor mx'></div>").html("<input type='text'/>"),a.find("input").val(d),a;else if(a.editorType==
"TextEditor")if(a.textMode=="multiline")return d=b.dataControl.$e.find("tr"),c=a.name,d=$(d).find("#"+c).find("div.editor").find(".textEditor").find("textarea"),f=d.val(),a=$("<div class='TextEditor multiline mx richTextEditor'></div>").html("<div class='imitationtextarea'>"+f+"</div><input type='text' class='for_hidden_input'/>"),a.find("textarea").val(f),a.find("input").val(f),a;else a=d.children().find("input"),f=a.val();else a.editorType=="CheckListEditor"?(c=a.name,d=b.dataControl.$e.find(".field#"+
c).find("div.editor").find(".checkListEditor").html(),a=a.type=="radio"?$("<div class='checkListEditor mx radio'></div>").html(d):$("<div class='checkListEditor mx check'></div>").html(d)):(a=d.children().find("input"),f=a.val());a.attr("value",f);return a}function F(){var a=null;c=w();a=new mx.controls.ToolBar({items:[{name:"print",text:mx.msg("RTE_PRINT"),imageKey:"print",onclick:function(){c.jqprint()}}]});if(b.windowManager==null)b.windowManager=new mx.windows.WindowManager({zIndex:9999999});
var h=b.windowManager.create({title:mx.msg("PRINT_PREVIEW_CONTROL"),width:"100%",height:"100%"});h.append(a);a=$("<table class='printTable' style='width:100%;margin:0px auto;'><tr><td id='printBody' style='width:100%;'></td></tr></table>");h.append(a);a.find("#printBody").append(c);h.showDialog()}var b=$extend(MXComponent);b.printHideFields=!0;b.dataControl=null;b.windowManager=null;b.maxCols=2;var y=null,c=null,q=1,k=null,m=null,r=null,A=!1;b.printControl=function(a){b.dataControl==null?(new mx.windows.MessageBox({reusable:!1,
title:mx.msg("PRINT_FAILED"),okButtonText:mx.msg("OK"),message:mx.msg("PRINT_FAILED_MESSAGE"),imgkey:"error",showCancelButton:!1,height:120})).show():$isEmpty(a)||a==!0?F():w().jqprint()};var t=0;$("<table><tr class='groupTr'></tr></table>");b.endOfClass(arguments);return b};$ns("mx.utils");
mx.utils.SymbolUtilClass=function(){this.getSymbol=function(b){if(b==null)return null;var a=null;switch(b.toLowerCase()){case "left":a="[";break;case "right":a="]";break;case "up":a="{";break;case "down":a="}";break;case "list":case "listview":a="l";break;case "detail":case "detailview":a="n";break;case "add":case "plus":a="&";break;case "remove":case "minus":a="_";break;case "upload":a="c";break;case "download":a="~";break;case "search":a="s";break;case "setting":case "settings":a="y";break;case "tool":case "tools":a=
"x";break;case "home":a="H";break;case "fav":case "favorite":case "favourite":case "star":a="S";break;case "question":case "help":a="?";break;case "cloud":a="C";break;case "user":a="U";break;case "users":case "role":a="g";break;case "time":case "clock":a="t";break;case "date":case "calendar":a="\\";break;case "meter":case "performance":a=",";break;case "tag":case "tags":a="z";break;case "feed":case "rss":a="f";break;case "key":case "password":a="K";break;case "love":case "heart":case "welcome":a=
"k";break;case "cube":case "object":a="b";break;case "shop":a="$";break;case "file":a="F";break;case "doc":case "document":a="N";break;case "folder":a="o";break;case "image":case "picture":a="P";break;case "chart":a="Z";break;case "curve":a="Y";break;case "mail":case "message":a="M";break;case "info":a="i";break;case "warn":case "warning":a="!";break;case "error":a="D";break;case "forbid":case "forbidden":a="d";break;case "loading":case "busy":case "waiting":a="t";break;case "alarm":a=":";break;case "new":case "create":a=
"&";break;case "delete":a="*";break;case "send":a="R";break;case "refresh":a="r";break;case "ok":case "save":case "check":a="2";break;case "complete":case "finish":a="^";break;case "edit":a="W";break;case "lock":a="(";break;case "unlock":a=")";break;case "dialog":a="."}return a!=null?{font:"pictos",text:a}:null};return this};mx.utils.SymbolUtil=new mx.utils.SymbolUtilClass;$ns("mx.utils");
mx.utils.ValidatorClass=function(){function g(a,c,b){b.validateMessage="";if($notEmpty(b)){if($notEmpty(b.maxValue)&&($.extend(a,k(c,b.maxValue,!0)),!a.successful))return a;if($notEmpty(b.minValue)&&($.extend(a,o(c,b.minValue,!0)),!a.successful))return a}}function k(a,c,b){a={successful:e.isMaxValue(a,c,b)};a.successful||$.extend(a,{hint:mx.err("INPUT_GREATER_THAN_MAX",[c])});return a}function o(a,c,b){a={successful:e.isMinValue(a,c,b)};a.successful||$.extend(a,{hint:mx.err("INPUT_LESS_THAN_MIN",[c])});
return a}function m(a,c){var b={successful:e.isMinLength(a,c-1)};b.successful||$.extend(b,{hint:mx.err("INPUT_LENGTH_LESS_THAN_MIN",[c])});return b}function n(a,c){var b={successful:e.isMaxLength(a,c+1)};b.successful||$.extend(b,{hint:mx.err("INPUT_LENGTH_GREATER_THAN_MAX",[c])});return b}function q(a,c){var b={successful:!0};if($notEmpty(c)&&($notEmpty(c.maxValue)||$notEmpty(c.minValue))){var d=new Date;d.setHours(0);d.setMinutes(0);d.setSeconds(0);var e=d.clone(),h=function(a,b){if($isString(b))for(var c=
b.split(":"),d=0;d<c.length;d++)if(d==0)a.setHours(c[d]);else if(d==1)a.setMinutes(c[d]);else if(d==2)a.setSeconds(c[d]);else break;else $isDate(b)&&(a.setHours(b.getHours()),a.setMinutes(b.getMinutes()),a.setSeconds(b.getSeconds()))};h(e,a);if($notEmpty(c.maxValue)){var f=d.clone();h(f,c.maxValue);if(e>f)return b.successful=!1,b.hint=mx.err("INPUT_GREATER_THAN_MAX",[c.maxValue]),b}if($notEmpty(c.minValue)&&(d=d.clone(),h(d,c.minValue),e<d))b.successful=!1,b.hint=mx.err("INPUT_LESS_THAN_MIN",[c.minValue])}return b}
function p(a,c){var b={successful:!0};$isDate(a)&&(a=Date.format(a));if($notEmpty(c.maxValue)){try{b.successful=parseDate(a)<=parseDate(c.maxValue)}catch(d){b.successful=!1}b.successful||$.extend(b,{hint:mx.err("INPUT_GREATER_THAN_MAX",[c.maxValue])})}if(b.successful&&$notEmpty(c.minValue)){try{b.successful=parseDate(a)>=parseDate(c.minValue)}catch(e){b.successful=!1}b.successful||$.extend(b,{hint:mx.err("INPUT_LESS_THAN_MIN",[c.minValue])})}return b}var h=this,e=mx.utils.CheckUtil;h.required=!1;
h.rules={NOTNULL:function(a){a={successful:!e.isNull(a)};a.successful||$.extend(a,{hint:mx.err("INPUT_NON_NULLABLE")});return a},DIGIT:function(a,c){var b={successful:e.isDigit(a)};b.successful?g(b,a,c):$.extend(b,{hint:mx.msg("ENTER_DIGIT")});return b},INTEGER:function(a,c){var b={successful:e.isInteger(a)};b.successful?g(b,a,c):$.extend(b,{hint:mx.msg("ENTER_INTEGER")});return b},MINUSINTEGER:function(a,c){var b={successful:e.isMinusInteger(a)};b.successful?g(b,a,c):$.extend(b,{hint:mx.msg("ENTER_MINUS_INTEGER")});
return b},PLUSINTEGER:function(a,c){var b={successful:e.isPlusInteger(a)};b.successful?g(b,a,c):$.extend(b,{hint:mx.msg("ENTER_PLUS_INTEGER")});return b},FLOAT:function(a,c){var b={successful:e.isFloat(a)};b.successful?g(b,a,c):$.extend(b,{hint:mx.msg("ENTER_FLOAT")});return b},MINUSFLOAT:function(a,c){var b={successful:e.isMinusFloat(a)};b.successful?g(b,a,c):$.extend(b,{hint:mx.msg("ENTER_MINUS_FLOAT")});return b},PLUSFLOAT:function(a,c){var b={successful:e.isPlusFloat(a)};b.successful?g(b,a,c):
$.extend(b,{hint:mx.msg("ENTER_PLUS_FLOAT")});return b},CHINESE:function(a){a={successful:e.isChinese(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_CHINESE")});return a},LETTER:function(a){a={successful:e.isLetter(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_LETTER")});return a},ASCII:function(a){a={successful:e.isAcsii(a)};a.successful||$.extend(a,{hint:mx.err("NON_ASCII")});return a},DATE:function(a,c){var b={successful:e.isDate(a)};b.successful?$notEmpty(c)&&$.extend(b,p(a,c)):$.extend(b,
{hint:mx.msg("ENTER_DATE")});return b},DATETIME:function(a,c){var b={successful:e.isDateTime(a)};b.successful?$notEmpty(c)&&$.extend(b,p(a,c)):$.extend(b,{hint:mx.msg("ENTER_DATETIME")});return b},TIME:function(a,c){var b={successful:e.isTime(a)};if(b.successful&&($.extend(b,q(a,c)),!b.successful))return b;b.successful||$.extend(b,{hint:mx.msg("ENTER_TIME")});return b},EMAIL:function(a){a={successful:e.isEmail(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_EMAIL")});return a},IP:function(a){a={successful:e.isIP(a)};
a.successful||$.extend(a,{hint:mx.msg("ENTER_IP")});return a},MOBILE:function(a){a={successful:e.isMobile(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_MOBILE")});return a},PHONE:function(a){a={successful:e.isPhone(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_PHONE")});return a},URL:function(a){a={successful:e.isUrl(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_URL")});return a},ZIPCODE:function(a){a={successful:e.isZipCode(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_ZIPCODE")});return a},
SQL:function(a){a=e.isSqlInjection(a);a.successful||$.extend(a,{hint:mx.msg("SQL_INJECTION",{sql:a.hint})});return a},IDCARD:function(a){a={successful:e.isIDCard(a)};a.successful||$.extend(a,{hint:mx.msg("ENTER_IDCARD")});return a},MAXVALUE:k,MINVALUE:o,MINLENGTH:m,MAXLENGTH:n,REGEXP:function(a,c){var b={successful:!0};if($isEmpty(a))return b;if($notEmpty(c)){var d=c.expression;try{b.successful=d.test(a)}catch(e){b.successful=!1,b.hint=c.validateMessage}}return b}};h.validate=function(a,c,b){var d=
{successful:!0,hint:mx.msg("INVALID_MESSAGE")},e=[],g=[];if($notEmpty(c)&&$isString(c)){h.validType=c;g=h.validType.split(",");for(c=0;c<g.length;c++)e.add(h.rules[g[c]])}if(h.required&&$isEmpty(a))return $.extend(d,{hint:mx.err("INPUT_NON_NULLABLE"),successful:!1});else $isEmpty(a)&&(a=null);if($notEmpty(b)&&$notEmpty(b.maxLength)&&($.extend(d,n(a,b.maxLength)),!d.successful))return $notEmpty(b.validateMessage)&&(d.hint+="\n",d.hint+=b.validateMessage),d;if($notEmpty(b)&&$notEmpty(b.minLength)&&
($.extend(d,m(a,b.minLength)),!d.successful))return $notEmpty(b.validateMessage)&&(d.hint+="\n",d.hint+=b.validateMessage),d;for(var f,i,j,l=0;l<e.length;l++){$notEmpty(b)&&(f=b[g[l]]);$isEmpty(f)&&(f=b);$notEmpty(f)&&$notEmpty(f.maxLength)&&(i=n(a,f.maxLength));$notEmpty(f)&&$notEmpty(f.minLength)&&(j=m(a,f.minLength));var k=$.extend(!0,{},f),c=e[l](a,k);if($notEmpty(c)){if($notEmpty(i)&&!i.successful)d.successful=i.successful,d.hint+="\n",d.hint+=i.hint,i.successful=!0,delete i.hint;if($notEmpty(j)&&
!j.successful)d.successful=j.successful,d.hint+="\n",d.hint+=j.hint,j.successful=!0,delete j.hint;if(!c.successful)d.successful=c.successful,$notEmpty(f)&&$notEmpty(f.validateMessage)&&(d.hint+="\n",d.hint+=k.validateMessage),$notEmpty(c.hint)&&(d.hint+="\n",d.hint+=c.hint,delete c.hint)}}return d};return h};$ns("mx.views");$import("mx.containers.HSplit");$import("mx.containers.VSplit");$import("mx.containers.PanelLayout");
mx.views.View=function(){var a=$extend(mx.containers.Container),b={};a.viewPort=null;a.controller=null;a.layoutType=null;a.layoutOptions=null;a.layoutControl=null;a.onactivate=null;a.ondeactivate=null;b.init=a.init;a.init=function(){b.init();a.$e.addClass("view");if(a.layoutType!=null){try{layoutType=eval("("+a.layoutType+")")}catch(c){}a.layoutControl=new layoutType(a.layoutOptions);b.addControl(a.layoutControl)}};b.addControl=a.addControl;a.addControl=function(c,e,d){a.layoutControl!=null?a.layoutControl.addControl(c,
e,d):b.addControl(c,d)};b.dispose=a.dispose;a.dispose=function(){a.off();a.layoutControl=null;a.viewPort=null;if(a.controller&&a.controller.view)a.controller.view=null;a.controller=null;b.dispose()};a.setOverflow=function(c,b){b==null&&(c="overflow");(c=="overflow"||c=="overflow-x"||c=="overflow-y")&&a.$e.css(c,b)};a.endOfClass(arguments);return a};$ns("mx.views");$import("mx.types.HashMap");
mx.views.ViewController=function(){var a=$extend(MXComponent),b={},c=null;a.view=null;b._=a._;a._=function(d){arguments.length>0&&!$.isPlainObject(arguments[0])&&(c=arguments[0]);c==null&&(c=new mx.types.HashMap);$notEmpty(a.typeName)&&c.setItem(a.typeName,a);b._(d)};a.getLinkViewController=function(a){if(!$isString(a))return null;if(c!=null&&c.hasItem(a))return c.getItem(a);var b=null;try{b=eval("("+a+")")}catch(e){}if($.isFunction(b))return new b(c);return null};a.getView=function(){if(a.view!=
null)a.view.controller=a;return a.view};a.getContext=function(){if(a.getView()!=null)return a.view.getContext();return null};b.dispose=a.dispose;a.dispose=function(){b.dispose();a.view=null};a.endOfClass(arguments);return a};$ns("mx.views");
mx.views.ViewPort=function(){function e(b,c){var d=b.indexOf(a.context.id)!=-1||b.indexOf(".views")!=-1?b:a.context.id+"."+b;try{d=eval("("+d+")")}catch(e){throw Error(mx.err(c=="View"?"UNKNOWN_VIEW_TYPE":"UNKNOWN_VIEWCONTROLLER_TYPE",[b]));}var f=null;$isFunction(d)&&(f=new d);return f}var a=$extend(mx.containers.Container),c={};a.view=null;a.viewController=null;a.context=null;c.init=a.init;a.init=function(){c.init();a.$e.addClass("mx");if(a.viewController!=null){var b=null;$isString(a.viewController)?a.context!=
null&&(b=e(a.viewController,"Controller")):b=a.viewController;a.setViewController(b)}else if(a.view!=null)b=null,$isString(a.view)?a.context!=null&&(b=e(a.view,"View")):b=a.view,a.view=null,a.setView(b)};a.setView=function(b){if(a.view!=b){if(a.view!=null)a.view.trigger("deactivate"),a.removeControl(a.view),a.view.viewPort=null;a.view=b;if(a.view!=null)a.view.viewPort=a,a.addControl(a.view),a.view.trigger("activate")}};a.setViewController=function(b){a.viewController=b;a.viewController!=null?a.setView(a.viewController.getView()):
a.setView(null)};c.dispose=a.dispose;a.dispose=function(){if(a.view)a.view.viewPort=null,a.removeControl(a.view,!0);a.context=null;c.dispose()};a.endOfClass(arguments);return a};$ns("mx.weblets");$import("mx.weblets.WebletContext");
mx.weblets.Weblet=function(){var a=$extend(MXComponent),f={};a.name=null;a.bundleName=null;a.context=null;a.requires=[];a.hasLoaded=!1;a.hasStarted=!1;a.onload=null;a.onstart=null;f.init=a.init;a.init=function(){a.context=new mx.weblets.WebletContext({id:a.id,name:a.name});f.init()};a.getContext=function(){return a.context};__$indication=null;a.indicate=function(a,c,d){mx.indicate(a,c,d)};a.showerror=function(a){mx.showerror(a)};a.mappath=function(b){if(typeof b!="string")return null;var c=mx.rootPath;
c.lastIndexOf("/")!=c.length-1&&(c+="/");var d=c;d+=a.bundleName?a.bundleName+"/":"";var e=a.id;e.indexOf("$")!=-1&&(e=e.replace(/\$/g,"/"));return b.indexOf("~/../")==0?c+b.substr(5):b.indexOf("~/")==0?d+b.substr(2):b.indexOf("./")==0?d+e+b.substr(1):b.indexOf("$/")==0?d+e+"/resources"+b.substr(1):b.indexOf("$locale/")==0?d+e+"/resources/locales/"+mx.locale+b.substr(7):b.indexOf("$theme/")==0?d+e+"/resources/themes/"+mx.theme+b.substr(6):mx.mappath(b)};a.include=function(b,c){var d=a.mappath(b);
mx.include(d,c)};a.log=function(b){typeof console!="undefined"&&console.log("["+a.id+"] "+b)};a.warn=function(b){typeof console!="undefined"&&console.warn("["+a.id+"] "+b)};a.error=function(b){typeof console!="undefined"&&console.error("["+a.id+"] "+b)};a.msg=function(b,c){return $format(a.messages[b],c)};a.err=function(b,c){return a.msg("ERR_"+b,c)};a.dispose=function(){a.context.dispose();a.requires.clear()};a.endOfClass(arguments);return a};$ns("mx.weblets");$import("mx.views.ViewPort");$import("mx.weblets.WebletManager");
mx.weblets.WebletContainer=function(){var a=$extend(mx.views.ViewPort),b={};a.webletID=null;a.bundleName=null;a.weblet=null;a.onwebletload=null;b.init=a.init;a.init=function(){a.$e.addClass("webletContainer");a.$e.empty();b.init();a.webletID!=null&&(a.bundleName!=null?a.load({webletID:a.webletID,bundleName:a.bundleName}):a.load(a.webletID));window.attachEvent&&window.attachEvent("onbeforeunload",a.dispose)};a.load=function(c,b){mx.weblets.WebletManager.load(c,function(c){if(a.weblet!=c&&(a.weblet=
c,a.weblet!=null))a.webletID=a.weblet.id,b==null&&(b={}),b.rootViewPort=a,a.context=a.weblet.context,mx.weblets.WebletManager.start(a.weblet,b),a.trigger("webletload",{weblet:a.weblet})})};b.dispose=a.dispose;a.dispose=function(){if(window.windowWillClose){window.detachEvent&&window.detachEvent("onbeforeunload",arguments.callee);var c=mx.weblets.WebletManager.weblets[a.webletID];c.dispose&&c.dispose();delete c;$global[a.webletID]=null;a.off();b.dispose()}};a.endOfClass(arguments);return a};$ns("mx.weblets");mx.weblets.WebletContext=function(){var a=$extend(MXObject),b={};a.id=null;a.name=null;a.rootViewPort=null;a.windowManager=null;b._=a._;a._=function(c){if(a.canConstruct()&&(b._(c),a.windowManager==null))a.windowManager=new mx.windows.WindowManager({context:a})};b.dispose=a.dispose;a.dispose=function(){a.windowManager.context=null;a.windowManager=null;a.rootViewPort=null;b.dispose()};a.endOfClass(arguments);return a};$ns("mx.weblets");
mx.weblets.WebletLoaderClass=function(){function n(a,b){var c=i(a);mx.include(c,function(){g(a,b)})}function o(a,b){var c=i(a);mx.importClass(c,function(){g(a,b)})}function j(a){var b=null;return b=$isString(a)?a:a.webletID}function k(a){var b=null;if(!$isString(a)&&typeof a.bundleName!="undefined")b=a.bundleName;return b}function i(a){var b=j(a);k(a);a=null;a=b+".weblet";
return a}function g(a,b){var c=j(a),f=k(a),d=null;try{d=eval("("+c+")")}catch(i){}if($instanceOf(d,mx.weblets.Weblet)){if(f!=null&&d.bundleName==null)d.bundleName=f;mx.enableWebletI18n&&mx.importMessages(c);for(var l=0;l<d.requires.length;l++){var g=d.requires[l],m=f,e=null,e=g.split("/");e.length>1?(m=e[0],e=e[1]):e=g;e!=c&&mx.weblets.WebletManager.weblets[e]==null&&(f!=null?h.load({webletID:e,bundleName:m}):h.load(e))}mx.whenScriptReady(function(){if(!d.hasLoaded)d.hasLoaded=!0,d.trigger("load");
$isFunction(b)&&b(d)})}else if(c=mx.err("WEBLET_LOAD",[c]),mx.debugMode)throw Error(c);else mx.error(c)}var h=this;h.load=function(a,b){var c=j(a),f=k(a);f!=null&&mx.weblets.WebletManager.bundles[c]==null&&(mx.weblets.WebletManager.bundles.add(f),mx.weblets.WebletManager.bundles[c]=f);o(a,b)};return h};mx.weblets.WebletLoader=new mx.weblets.WebletLoaderClass;$ns("mx.weblets");$import("mx.weblets.Weblet");$import("mx.weblets.WebletLoader");
mx.weblets.WebletManagerClass=function(){var b=this;b.weblets=[];b.bundles=[];b.load=function(a,b){var c=null,c=$isString(a)?a:a.webletID;mx.weblets.WebletManager.weblets[c]!=null?$isFunction(b)&&b(mx.weblets.WebletManager.weblets[c]):mx.weblets.WebletLoader.load(a,b)};b.register=function(a){if(a==null||$isEmpty(a.id))throw Error(mx.err("WEBLET_ID_UNDEFINED"));if(b.weblets[a.id]!=null)mx.error("Weblet '"+a.id+"' has already been loaded or loading.");else return a=new mx.weblets.Weblet(a),b.weblets.add(a),
b.weblets[a.id]=a,$global[a.id]=a};b.start=function(a,d){var c=null;a!=null&&($isString(a)?c=b.weblets[a]:$instanceOf(a,mx.weblets.Weblet)&&(c=a));if($instanceOf(c,mx.weblets.Weblet))if(c.hasStarted)mx.error("Weblet '"+c.id+"' has already been started.");else{d==null&&(d={});d.context=c.context;if(d.rootViewPort!=null)c.context.rootViewPort=d.rootViewPort;c.trigger("start",d)}else throw Error(mx.err("WEBLET_UNDEFINED",[a]));};return b};mx.weblets.WebletManager=new mx.weblets.WebletManagerClass;$ns("mx.windows");
mx.windows.AjaxWindow=function(){var a=$extend(mx.windows.Window),b={};a.url=null;a.debugMode=!1;b.init=a.init;a.init=function(){b.init()};b._show=a._show;a._show=function(){a.isLoaded?b._show():(a.__load(),b._show(!1))};a.__load=function(){if(a.debugMode)window.setTimeout(a.__load_callback,50);else{a.setBusy();var b=a.url;mx.debugMode&&(b+=b.indexOf("?")!=-1?"&rnd="+Math.random():"?rnd="+Math.random());$.ajax({url:mx.mappath(b),success:function(b,e,f){var c=b;if(b.indexOf("id='$mx-framework$'")>0)var c=
b.indexOf("<meta "),d=b.indexOf("id='$mx-framework$'"),d=b.indexOf("'><\/script>",d)+11,c=b.substr(0,c)+b.substring(d);a.$body.html(c);a.__load_callback(b,e,f)}})}};a.__load_callback=function(){a.isLoaded=!0;a.setBusy(!1);$isFunction(a.load)&&a.load({target:a,type:"load"});a.trigger("load")};a.endOfClass(arguments);return a};$ns("mx.windows");
mx.windows.IFrameWindow=function(){var a=$extend(mx.windows.Window),b={};a.reusable=!1;a.url=null;a.iframe=null;b.init=a.init;a.init=function(){b.init();a.ajax=!1;a.$body.append("<div style='width:100%;height:100%;'><iframe style='width:100%;height:100%;' frameborder=0></iframe></div>");a.iframe=a.$("iframe").get(0)};b._show=a._show;a._show=function(){a.isLoaded?b._show():(a.__load(),b._show(!1))};var d=null;a.__load=function(){var c=a.url;mx.debugMode&&(c+=c.indexOf("?")!=-1?"&rnd="+Math.random():
"?rnd="+Math.random());a.iframe.src=mx.mappath(c);$(a.iframe).one("load",a.__load_callback);if(!c.startsWith(mx.rootPath)){var c=c.match(/^(.*\:\/\/[^\/]*\/[^\/]*\/)*/),b=null;typeof c!="undefined"&&null!=c&&(b=c[1]);$notEmpty(b)&&(d=window.setInterval(function(){$.ajax({url:b+"ping/ping.jsp",type:"POST",async:!0,error:function(){window.clearInterval(d)}})},6E5))}};a.__load_callback=function(){a.isLoaded=!1;typeof a.load=="function"&&a.load({target:a,type:"load"});a.trigger("load")};b.dispose=a.dispose;
a.dispose=function(){window.clearInterval(d);d=null;$(a.iframe).off();a.off();a.iframe=null};b.close=a.close;a.close=function(){a.iframe.contentWindow.windowWillClose=!0;a.iframe.contentWindow.close();var c=setTimeout(function(){clearTimeout(c);b.close()},200)};a.endOfClass(arguments);return a};$ns("mx.windows");$import("mx.controls.Button");
mx.windows.MessageBox=function(){function k(){a.trigger("close")}var a=$extend(MXComponent),l={};a.width=300;a.height=160;a.title="";a.message="";a.left="center";a.top="center";a.showOkButton=!0;a.showCancelButton=!0;a.okButtonText=null;a.cancelButtonText=null;a.reusable=!0;a.okButtonCallback=null;a.cancelButtonCallback=null;a.onclose=null;a.imgkey="info";a.zIndex=9999;a.okButton=null;a.cancelButton=null;a.windowManager=null;var e=a.textEditor=null,b=null,j=null,d=null,f=null,h=null,i=null;l.init=
a.init;a.init=function(){l.init();if(a.windowManager==null)a.windowManager=new mx.windows.WindowManager,a.windowManager.zIndex=a.zIndex;if(a.okButton==null){if($isEmpty(a.okButtonText))a.okButtonText=mx.msg("OK");a.okButton=new mx.controls.Button({text:a.okButtonText,onclick:a._btnOk_click})}if(a.cancelButton==null){if($isEmpty(a.cancelButtonText))a.cancelButtonText=mx.msg("CANCEL");a.cancelButton=new mx.controls.Button({text:a.cancelButtonText,onclick:a._btnCancel_click})}b==null&&(b=a.windowManager.create({title:a.title,
displayMaxButton:!1,resizable:!1,reusable:a.reusable,width:a.width,height:a.height,left:a.left,top:a.top}));b.on("close",k);b.on("hide",k);f=$("<div id='top'/>");h=$("<div id='top_left'/>");i=$("<div id='top_right' class='word_onnewline'/>");e=$("<table><tr><td/></tr></table>");i.append(e);f.append(h);f.append(i);j=$("<table class='icontable'><tr><td style='text-align:center;'></td></tr></table>");h.append(j);a._setImgKeyIcon(a.imgkey);d=$("<div id='bottom'/>");a._setBottomButtons(a.showOkButton,
a.showCancelButton);b.$body.append(f);a.setMessage(a.message)};a.show=function(c,g){b.$e.addClass("messageBox");if($.isFunction(c))a.okButtonCallback=c;if($.isFunction(g))a.cancelButtonCallback=g;if(b!=null&&(b.showDialog(),$.isIE6()))b.on("load",function(){i.width(b.$body.width()-h.width());f.height(b.$body.height()-d.height())})};a.setOkButtonText=function(c){if(a.okButton!=null)a.okButtonText=c,a.okButton.setText(c)};a.setCancelButtonText=function(c){if(a.cancelButton!=null)a.cancelButtonText=
c,a.cancelButton.setText(c)};a.setTitle=function(c){if(b!=null)a.title=c,b.setTitle(a.title)};a.setMessage=function(c){if(e!=null)if(a.imgkey=="prompt")a.textEditor=new mx.editors.TextEditor({height:a.height/2.5+"px",width:a.width/1.9+"px",textMode:"multiline"}),e.find("td").empty(),e.find("td").append(a.textEditor.$e);else if(c!=null)a.message=c.toString(),e.find("td").html(a.message)};a.setImgkey=function(c){a.imgkey=c;a._setImgKeyIcon(a.imgkey)};a.getWindow=function(){return b};a._btnOk_click=
function(){$notEmpty(a.okButtonCallback)&&a.okButtonCallback();b!=null&&(a.reusable?b.hide():b.close())};a._btnCancel_click=function(){$notEmpty(a.cancelButtonCallback)&&a.cancelButtonCallback();b!=null&&(a.reusable?b.hide():b.close())};a._setBottomButtons=function(c,g){c&&g?(d.empty(),a.okButton=new mx.controls.Button({text:a.okButtonText,onclick:a._btnOk_click}),a.cancelButton.setText(a.cancelButtonText),a.cancelButton=new mx.controls.Button({text:a.cancelButtonText,onclick:a._btnCancel_click}),
$.isIE67()?(d.append(a.cancelButton.$e),d.append(a.okButton.$e)):(d.append(a.okButton.$e),d.append(a.cancelButton.$e))):c&&!g?(d.empty(),a.okButton=new mx.controls.Button({text:a.okButtonText,onclick:a._btnOk_click}),d.append(a.okButton.$e)):!c&&g?(a.cancelButton=new mx.controls.Button({text:a.cancelButtonText,onclick:a._btnCancel_click}),d.append(a.cancelButton.$e)):(d.empty(),d.css({height:0,overflow:"hidden"}),f.css({bottom:0,border:0}));b.$body.append(d)};a._setImgKeyIcon=function(a){var b=j.find("td");
switch(a){case "info":a=mx.utils.SymbolUtil.getSymbol("info");break;case "warnning":a=mx.utils.SymbolUtil.getSymbol("warning");break;case "error":a=mx.utils.SymbolUtil.getSymbol("error");break;case "prompt":a=mx.utils.SymbolUtil.getSymbol("question");break;default:a=mx.utils.SymbolUtil.getSymbol("info")}a!=null&&b.text(a.text)};a.endOfClass(arguments);return a};$ns("mx.windows");$import("mx.controls.Button");
mx.windows.TipsBox=function(){function j(c){g.find("#tipsBody").text(a.message);b.$e.find("#body").css({background:a.contentBackground});$("body").append(b.$e);b.$e.trigger("resize");b.activate();var e=parseInt(a.width),f=parseInt(a.height);switch(c){case "top right":b.$e.css({bottom:0-e+"px",right:"0",display:"block"}).animate({bottom:"0",right:"0"},a.showSpeed,function(){d(b)});break;case "bottom right":b.$e.css({top:0-f+"px",right:"0",display:"block"}).animate({top:"0",right:"0"},a.showSpeed,function(){d(b)});
break;case "left top":b.$e.css({right:0-e+"px",top:"0",display:"block"}).animate({right:"0",top:"0"},a.showSpeed,function(){d(b)});break;case "right top":b.$e.css({left:0-e+"px",top:"0px",display:"block"}).animate({left:"0",top:"0"},a.showSpeed,function(){d(b)});break;case "bottom left":b.$e.css({top:0-f+"px",left:"0",display:"block"}).animate({top:"0",left:"0"},a.showSpeed,function(){d(b)});break;case "top left":b.$e.css({bottom:0-f+"px",left:"0",display:"block"}).animate({bottom:"0",left:"0"},a.showSpeed,
function(){d(b)});break;case "right bottom":b.$e.css({left:0-e+"px",bottom:"0",display:"block"}).animate({left:"0",bottom:"0"},a.showSpeed,function(){d(b)});break;case "left bottom":b.$e.css({right:0-e+"px",bottom:"0",display:"block"}).animate({right:"0",bottom:"0"},a.showSpeed,function(){d(b)});break;case "center center":c=($("html").width()-e)/2,f=($("html").height()-f)/2,b.$e.css({left:c+"px",top:f+"px",display:"block"}).animate({right:"50%",bottom:"50%"},a.showSpeed,function(){d(b)})}a.autoHide&&
setTimeout(function(){b.close()},a.autoHideSpeed)}function d(c){b.$e.css({"min-height":a.height+"px"});c=c.$e.offset();b.$e.css({top:c.top,"min-height":a.height+"px",left:c.left,bottom:"auto",right:"auto"})}var a=$extend(MXComponent),i={};a.width=200;a.height=160;a.title="";a.message="";a.showSpeed=500;a.closeSpeed=500;a.orientation="top right";a.autoHide=!1;a.contentBackground="#FFFFFF";a.autoHideSpeed=2E3;var h=null,b=null,g=$("<div class='word_onnewline'><table><tr><td id='tipsBody'/></tr></table></div>");
i.init=a.init;a.init=function(){i.init();if(a.height<160)a.height=160;h==null&&(h=new mx.windows.WindowManager);if(b==null){var c=new mx.views.View;c.$e.append(g);b=h.createFromView(c,{title:a.title,displayMaxButton:!1,resizable:!1,reusable:!1,width:a.width,height:a.height})}};a.show=function(c){if(!$isEmpty(c)&&($isEmpty(c.title)||b.setTitle(c.title),$isEmpty(c.message)||a.setMessage(c.message),!$isEmpty(c.orientation)))a.orientation=c.orientation;a.setOrientation(a.orientation)};a.setMessage=function(b){a.message=
b;g.find("td").html(b)};a.setOrientation=function(a){j(a)};a.getWindow=function(){if($notEmpty(b))return b};a.endOfClass(arguments);return a};$ns("mx.windows");$import("mx.views.ViewPort");
mx.windows.Window=function(){function s(){a.$e.addClass("window");if(a.displayHead){a.$head=$("<div id=head class=windowsHead></div>");a.$title=$("<div id=title/>");a.$head.append(a.$title);if(a.displayControlBox){var b=$("<div id=controlBox></div>");a.$head.append(b);if(a.displayMinButton){b.addClass("min");var c=$("<a href='javascript:void(0);' id=windowMinStateButton class=controlBoxButton/>");b.append(c);c.click(i)}a.displayMaxButton&&(c=$("<a href='javascript:void(0);' id=windowStateButton class=controlBoxButton/>"),b.append(c),
c.click(e));a.displayCloseButton&&(c=$("<a href='javascript:void(0);' id=closeButton class=controlBoxButton/>"),b.append(c),c.click(t))}a.$e.append(a.$head)}else a.$e.addClass("nohead");a.$e.append(a.$body);if(a.displayStatus)a.$body.css("bottom","25px"),a.$statusBar=$("<div id=statusBar><img src='"+mx.mappath("$/images/space.png")+"'/><span/></div>");a.$e.append(a.$statusBar);a.displayHead&&(a.$head.userSelectable(!1),a.movable&&a.$head.mousedown(u),a.$head.dblclick(e))}function v(){a.activated||
a.activate()}function e(){a.displayMaxButton&&a.displayControlBox&&(a.$e.hasClass("maximize")?a.setWindowState("normal"):a.setWindowState("maximize"))}function i(){a.$e.css("display","none")}function t(){a.reusable?a.hide():a.close()}function u(b){if(!(b.target.className=="controlBoxButton"||a.windowState!="normal")){a.$e.addClass("dragging");l=b.clientX;m=b.clientY;var b=parseInt(a.$e.css("left")),c=parseInt(a.$e.css("top"));j=isNaN(b)?0:b;n=isNaN(c)?0:c;if($notEmpty(a.getContext())&&(b=a.getContext().rootViewPort,
$notEmpty(b)))c=b.$e.offset(),k=c.top,o=c.top+b.$e.height();g().one("mouseup",w);g().on("mousemove",p);g().userSelectable(!1);a.__createTempMark()}}function p(b){var c=b.clientX-l,d=b.clientY-m;b.clientY>k&&b.clientY<document.body.clientHeight?a.moveTo(j+c,n+d):b.clientY<k?a.moveTo(j+c,a.top):b.clientY>o&&a.moveTo(j+c,a.top)}function w(){g().userSelectable(!0);a.$e.removeClass("dragging");g().off("mousemove",p);a.__removeTempMark()}function g(){return a.isTopWindow?typeof window.parent=="undefined"?
$(document):$(window.parent.window.document):$(document)}var a=$extend(mx.views.ViewPort),f={};a.width=640;a.height=480;a.visible=!1;a.activated=!1;a.left="auto";a.top="auto";a.position="absolute";a.title=null;a.status=null;a.isLoading=!1;a.isBusy=!1;a.reusable=!1;a.windowState="normal";a.resizable=!0;a.ajax=!0;a.movable=!0;a.isTopWindow=!1;a.owner=null;a.frameBorder="normal";a.displayHead=!0;a.displayStatus=!1;a.displayControlBox=!0;a.displayMinButton=!1;a.displayMaxButton=!0;a.displayCloseButton=
!0;a.isLoaded=!1;a.quickToolBar=null;a.windowManager=null;a.$title=null;a.$head=null;a.$body=null;a.$statusBar=null;a.onload=null;a.onactivate=null;a.onshown=null;a.onhide=null;a.onhiding=null;a.onclose=null;a.onclosing=null;a.onresize=null;f.init=a.init;var q=!1;a.init=function(){a.$body=$("<div id=body class=windowsBody/>");a.$container=a.$body;f.init();if(a.windowManager==null)throw Error(mx.err("WINDOWMANAGER_NON_NULLABLE"));a.windowManager.windows.add(a);if(a.frameBorder=="borderless"||a.frameBorder==
"none")a.resizable=!1;a.resizable?a.$e.resizable(!0):a.displayMaxButton=!1;a.frameBorder=="borderless"||a.frameBorder=="none"?(a.$e.addClass("borderlessWindow"),a.$e.append(a.$body)):s();a.$e.bind("mousedown",v);a.title!=null&&a.setTitle(a.title);a.setStatus(a.status,a.isBusy);a.windowState!="normal"&&a.setWindowState(a.windowState);a.enabled==!1&&a.setEnabled(!1);$.isIE67()&&a.$body&&a.$e.resize(function(){a.$e.hasClass("maximize")?a.$body.css({width:a.$e.width(),height:a.$e.height()-a.$head.outerHeight()}):
a.$body.css({width:a.$e.width()-parseInt(a.$body.css("margin-left"))-parseInt(a.$body.css("margin-right"))-2,height:a.$e.height()-a.$head.outerHeight()-parseInt(a.$body.css("margin-bottom"))-2})});q=!0};a.setTitle=function(b){a.title=b;a.$title!=null&&a.$title.text(a.title)};a.setStatus=function(b,c){a.status=b;a.$statusBar!=null&&$notEmpty(a.status)&&a.$statusBar.children("span").text(a.status);typeof c!="undefined"&&a.setBusy(c)};a.setPadding=function(b){a.padding=b;a.$body.css("padding",a.padding)};
a.$loadingMask=null;a.setBusy=function(b,c){b==null&&(b=!0);a.isBusy=b;a.setLoading(a.isBusy);if(a.isBusy){if(a.$body!=null&&a.$loadingMask==null)a.$loadingMask=$("<div id='loadingMask'><img/><div style='color:white'/></div>"),a.$loadingMask.opacity(0.1),a.$loadingMask.find("img").attr("src",mx.mappath("$theme/images/loading_32.gif")),a.$loadingMask.hide();a.$loadingMask.find("div").text(c!=void 0?c:"");a.$e.append(a.$loadingMask);a.$head!=null&&a.$loadingMask.css("top",a.$head.height());a.$loadingMask.show()}else a.$loadingMask!=
null&&(a.$loadingMask.hide(),a.$loadingMask.detach())};a.setLoading=function(b){b==null&&(b=!0);a.isLoading=b;a.$statusBar!=null&&a.$statusBar.children("img").attr("src",mx.mappath(a.isLoading?"$/images/window_loading.gif":"$/images/space.png"))};a.indicate=function(b,c,d){if(a.$body!=null)d==null&&(d={}),d.$container=a.$e,mx.indicate(b,c,d)};a.originalRectangle={};a.setWindowState=function(b){if(a.windowState!=b||!a.isLoaded){a.windowState=b;if(a.windowState=="maximize"){a.originalRectangle={left:a.left,
top:a.top,width:a.$e.width(),height:a.$e.height()};a.$e.addClass("maximize");try{a.$e.animate({left:0,top:0,width:"100%",height:"100%"},200,function(){$.isIE67()&&a.$body.css({width:a.$e.width(),height:a.$e.height()-a.$head.outerHeight()})})}catch(c){}}else{a.$e.removeClass("maximize");if("auto"==a.originalRectangle.left)b=(a.$e.parent().width()-a.width)/2,b<0&&(b=0),a.originalRectangle.left=b;if("auto"==a.originalRectangle.top)b=(a.$e.parent().height()-a.height)/2,b<0&&(b=0),a.originalRectangle.top=
b;try{a.$e.animate(a.originalRectangle,400,function(){$.isIE67()&&a.$body.css({width:a.$e.width()-parseInt(a.$body.css("margin-left"))-parseInt(a.$body.css("margin-right"))-2,height:a.$e.height()-a.$head.outerHeight()-parseInt(a.$body.css("margin-bottom"))-2})})}catch(d){}}a.trigger("resize",{window:a})}};a.dialogResult=null;a.setDialogResult=function(b){typeof b=="undefined"&&(b=null);a.dialogResult=b;a.reusable?a.hide():a.close()};a.show=function(){a.initialized||a.init();a._show();a.$e.fadeIn("fast")};
a.$mask=null;a.maskOptions={opacity:0.6,backgroundColor:null};a.dialogCallback=null;a.showDialog=function(b,c){a.initialized||a.init();$isFunction(b)?(a.dialogCallback=b,b=null):a.dialogCallback=$isFunction(c)?c:null;a.owner=b;if(a.owner!=null&&typeof a.owner.dialogCallback!="undefined")a.owner.showingDialog=a;a.maskOptions.$container=null;if(b!=null&&typeof b.jquery=="undefined")if(b.$body)a.maskOptions.$container=b.$e;else{if(a.owner!=null)a.maskOptions.$container=$(a.owner)}else a.maskOptions.$container=
b;if(a.maskOptions.$container==null)a.maskOptions.$container=$notEmpty(a.getContext())&&$notEmpty(a.getContext().rootViewPort)?a.getContext().rootViewPort:a.windowManager.$container;if(a.$mask==null)a.$mask=a.windowManager._createMask(a.maskOptions);a.owner!=null&&a.owner.$head!=null&&a.$mask.css("top",a.owner.$head.height());a.$mask.hide();a.$mask.fadeTo("fast",a.maskOptions.opacity,function(){a._show();a.top==0&&(a.frameBorder=="borderless"||a.frameBorder=="none")?(a.$e.css("top",-a.height/2),a.$e.show(),
a.$e.animate({top:0},200)):a.$e.fadeIn("fast")})};a.hide=function(b){var c={cancel:!1};a.trigger("hiding",c);if(c.cancel)return!1;if($isFunction(a.dialogCallback))a.dialogCallback(a),a.dialogCallback=null,a.dialogResult=null;if(a.$mask)a.windowManager._hideMask(a.$mask),a.$mask=null;$isEmpty(a.$e)||a.$e.fadeOut("fast",function(){a.visible=!1;a.trigger("hide");a.windowManager.trigger("hide",{window:a});if(a.owner!=null&&$isFunction(a.owner.activate)){if(typeof a.owner.showingDialog!="undefined")a.owner.showingDialog=
null;a.owner.activate();a.owner=null}if(q){a.windowManager._removeActiveWindow(a);var c=a.windowManager._popActiveWindow();c&&c.visible===!0&&c.activate()}$isFunction(b)&&b({target:a});if(a.$e!=null)try{a.$e.detach()}catch(e){}})};var r=[];a.close=function(){r.add({});if(!(r.length>1)){var b={cancel:!1};a.trigger("closing",b);if(b.cancel)return!1;b=a.windowManager.windows;if(a.windowManager.activeWindow==a)a.windowManager.activeWindow=null;b.remove(a);a.hide(function(){a.trigger("close");a.windowManager.trigger("close",
{window:a});a.$title!=null&&a.$title.empty().remove();a.$head!=null&&(a.$head.off("dblclick",e),a.$head.empty().remove());if(a.$body!=null){var b=a.$body.find("iframe");b.each(function(a,b){b.onbeforeunload=null;$clearIframeLeak(b)});b.remove();b=null;a.$body.empty().remove()}a.$statusBar!=null&&a.$statusBar.empty().remove();if(a.$e){var b=a.$e.find("div[id=head] span[id=windowStateButton]"),d=a.$e.find("div[id=head] span[id=windowMinStateButton]");d&&d.off("click",i);b&&b.off("click",e);a.maskOptions.$container=
null;a.maskOptions=null;a.$loadingMask&&a.$loadingMask.empty().remove();a.$e.off();if(a.$e!=null)try{a.$e.remove()}catch(f){}a.$container=null;a.$mask&&a.$mask.getPooledObjects().clear();a.$mask=null}delete a.$e;delete a.$body;delete a.$head;delete a.$title;delete a.$statusBar;a.dispose()});return!0}};a.bringToFront=function(){a.$e.css("zIndex",a.windowManager._topZIndex(a))};a.activate=function(){if(a.showingDialog!=null)a.showingDialog.activate();else{a.activated=!0;a.bringToFront();if(a.windowManager.activeWindow!=
null){if(a.windowManager.activeWindow==a)return;a.windowManager.activeWindow.activated=!1;a.windowManager.activeWindow.$e.removeClass("active");a.windowManager.activeWindow.__createTempMark()}a.$e.addClass("active");a.__removeTempMark();a.windowManager.activeWindow=a;a.windowManager._pushActiveWindow(a);a.trigger("activate");a.windowManager.trigger("activate",{window:a})}};a.append=function(b){a.$body.append(a.$wrap(b))};f.dispose=a.dispose;a.dispose=function(){a.off();f.dispose()};a.setRight=function(){};
a._show=function(b){b==null&&(b=!0);if(a.owner!=null){if(a.owner.$body.append(a.$e),a.$mask!=null){var c=a.windowManager._centerWindowPosition(a);a.left=c.left}}else $notEmpty(a.getContext())&&$notEmpty(a.getContext().rootViewPort)?a.getContext().rootViewPort.$e.append(a.$e):(a.$e.addClass("mx"),$("body").append(a.$e));if("maximize"==a.windowState)a.$e.css("left",0),a.$e.css("top",0);else{if(a.left=="auto"||a.top=="auto"){c=a.windowManager._nextWindowPosition(a);if(a.left=="auto")a.left=c.left;if(a.top==
"auto")a.top=c.top}if(a.left=="center"||a.top=="center")a.$e.centralize(a.left=="center"?!0:!1,a.top=="center"?!0:!1);a.$e.css("left",a.left);a.$e.css("top",a.top);a.originalRectangle.left=a.left;a.originalRectangle.top=a.top}$.isIE67()&&(a.$e.hasClass("maximize")?a.$body.css({width:a.$e.width(),height:a.$e.height()-a.$head.outerHeight()}):a.$body.css({width:a.$e.width()-parseInt(a.$body.css("margin-left"))-parseInt(a.$body.css("margin-right"))-2,height:a.$e.height()-a.$head.outerHeight()-parseInt(a.$body.css("margin-bottom"))-
2}));if(b&&!a.isLoaded)a.isLoaded=!0,a.trigger("load");a.trigger("shown");a.windowManager.trigger("shown",{window:a});a.activate();a.visible=!0};f.setEnabled=a.setEnabled;a.setEnabled=function(b){f.setEnabled(b);var b=a.$e.find("div[id=head] a[id=windowStateButton]"),c=a.$e.find("div[id=head] a[id=windowMinStateButton]");b.off("click",e);c.off("click",i);a.enabled&&(b.on("click",e),c.on("click",i));if(a.displayHead&&($notEmpty(a.$head)&&a.$head.off("dblclick",e),a.enabled))a.$head.on("dblclick",e);
a.$e.resizable(a.enabled)};var l=0,m=0,j=0,n=0,k=0,o=0,h=null;a.__createTempMark=function(){$isEmpty(h)&&(h=$("<div style='width:100%;height:100%;position:absolute;top:0;left:0;'/>"));a.$body.append(h)};a.__removeTempMark=function(){$notEmpty(h)&&h.detach()};a.endOfClass(arguments);return a};$ns("mx.windows");$import("mx.utils.ObjectPool");$import("mx.windows.AjaxWindow");$import("mx.windows.IFrameWindow");$import("mx.windows.Window");$import("mx.windows.WizardWindow");
mx.windows.WindowManager=function(){var b=$extend(MXComponent),h={};b.context=null;b.windows=[];b.activeWindow=null;b.oncreate=null;b.onshown=null;b.onhide=null;b.onclose=null;b.onactivate=null;h.init=b.init;b.init=function(){h.init()};b.create=function(c,a){var d=mx.windows.Window,e={};a!=null?(e=a,d=c):$isFunction(c)?d=c:$.isPlainObject(c)&&(e=c);e.url!=null&&d!=mx.windows.IFrameWindow&&(d=e.ajax==!0||typeof e.ajax=="undefined"?mx.windows.AjaxWindow:mx.windows.IFrameWindow);e.context=b.context;
e.windowManager=b;d=new d(e);b.trigger("create",{window:d});return d};b.createFromView=function(c,a){var d=null,d=$.isPlainObject(a)?a:{};d.view=c;return b.create(mx.windows.Window,d)};b.createFromViewController=function(c,a){var d=null,d=$.isPlainObject(a)?a:{};d.viewController=c;return b.create(mx.windows.Window,d)};b.hideAll=function(){for(var c=0;c<b.windows.length;c++)b.windows[c].visible&&b.windows[c].hide()};b.closeAll=function(){for(;b.windows.length>0;)if(b.windows.last().close()==!1)return!1;
return!0};var g=null;b._createMask=function(c){g==null&&(g=new mx.utils.ObjectPool(b._newMask));var a=g.getObject();(c&&c.$container?c.$container:b.$container).append(a);a.css("zIndex",b.zIndex++);a.css(c);return a};b._newMask=function(){return $("<div class='mx mask'/>")};b._hideMask=function(c){c.fadeOut("fast",function(){c.remove()});g!=null&&g.passivateObject(c)};b.zIndex=1;b._topZIndex=function(){return b.zIndex++};var a={x:-1,y:-1,offsetX:30,offsetY:30};b._nextWindowPosition=function(c){if(a.x==
-1&&a.y==-1)return c=b._centerWindowPosition(c),a.x=c.left,a.y=c.top,c;else{for(var i=0,d=0;d<b.windows.length;d++)!0==b.windows[d].visible&&i++;if(i==0)return c=b._centerWindowPosition(c),a.x=c.left,a.y=c.top,c;a.x+=a.offsetX;a.y+=a.offsetY;if(a.x+c.$e.width()>b.$container.width()-Math.abs(a.offsetX))a.offsetX=-a.offsetX;else if(a.x<Math.abs(a.offsetX))a.offsetX=-a.offsetX,a.x=Math.abs(a.offsetX);if(a.y+c.$e.height()>b.$container.height()-Math.abs(a.offsetY))a.offsetY=-a.offsetY;else if(a.y<Math.abs(a.offsetY))a.offsetY=
-a.offsetY,a.y=Math.abs(a.offsetY);return{left:a.x,top:a.y}}};b._centerWindowPosition=function(c){var a=null,a=c.$mask!=null?c.$mask:b.$container,d=c.$e.width();typeof d=="string"&&d.endsWith("%")&&(d=a.width()*parseInt(d)/100);c=c.$e.height();typeof c=="string"&&c.endsWith("%")&&(c=a.height()*parseInt(c)/100);d=(a.width()-d)/2;a=(a.height()-c)/2;d<0&&(d=0);a<0&&(a=0);return{left:d,top:a}};if(b.$container==null)b.$container=$(document.body);var f=[];b._pushActiveWindow=function(a){f.contains(a)&&
f.remove(a);f.add(a)};b._popActiveWindow=function(){var a=f[f.length-1];f.removeLast();return typeof a=="undefined"?null:a};b._removeActiveWindow=function(a){arguments.length==1&&f.remove(a)};b.endOfClass(arguments);return b};$ns("mx.windows");$import("mx.containers.Wizard");
mx.windows.WizardWindow=function(){function b(){a.trigger("wizardcancelled");a.reusable?a.hide():a.close()}function c(){a.trigger("wizardfinished");a.reusable?a.hide():a.close()}var a=$extend(mx.windows.Window),d={};a.width=450;a.height=400;a.wizard=null;a.reusable=!0;a.onwizardcancelled=null;a.onwizardfinished=null;d.init=a.init;a.init=function(){d.init();a.ajax=!1;a.wizard==null?a.wizard=new mx.containers.Wizard({oncancelled:b,onfinished:c}):(a.wizard.on("cancelled",b),a.wizard.on("finished",c));
a.$body.append(a.wizard.$e)};a.endOfClass(arguments);return a};